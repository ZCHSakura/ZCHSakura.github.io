<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>MySQLæœ€å·¦å‰ç¼€</title>
    <url>/MySQL%E6%9C%80%E5%B7%A6%E5%89%8D%E7%BC%80/</url>
    <content><![CDATA[<p>è®°å½•ä¸‹MySQLä¸­ç´¢å¼•çš„æœ€å·¦å‰ç¼€åŸåˆ™å’Œè”åˆç´¢å¼•æœ‰ä»€ä¹ˆå¥½å¤„</p>
<a id="more"></a>
<h3 id="æœ€å·¦å‰ç¼€åŸåˆ™">æœ€å·¦å‰ç¼€åŸåˆ™</h3>
<p>æœ€å·¦åŒ¹é…åŸåˆ™å°±æ˜¯æŒ‡åœ¨è”åˆç´¢å¼•ä¸­ï¼Œå¦‚æœä½ çš„ SQL
è¯­å¥ä¸­ç”¨åˆ°äº†è”åˆç´¢å¼•ä¸­çš„æœ€å·¦è¾¹çš„ç´¢å¼•ï¼Œé‚£ä¹ˆè¿™æ¡ SQL
è¯­å¥å°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªè”åˆç´¢å¼•å»è¿›è¡ŒåŒ¹é…ã€‚ä¾‹å¦‚æŸè¡¨ç°æœ‰ç´¢å¼•(a,b,c)ï¼Œç°åœ¨ä½ æœ‰å¦‚ä¸‹è¯­å¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select * from t where a&#x3D;1 and b&#x3D;1 and c &#x3D;1;     #è¿™æ ·å¯ä»¥åˆ©ç”¨åˆ°å®šä¹‰çš„ç´¢å¼•ï¼ˆa,b,cï¼‰,ç”¨ä¸Ša,b,c</span><br><span class="line"></span><br><span class="line">select * from t where a&#x3D;1 and b&#x3D;1;     #è¿™æ ·å¯ä»¥åˆ©ç”¨åˆ°å®šä¹‰çš„ç´¢å¼•ï¼ˆa,b,cï¼‰,ç”¨ä¸Ša,b</span><br><span class="line"></span><br><span class="line">select * from t where b&#x3D;1 and a&#x3D;1;     #è¿™æ ·å¯ä»¥åˆ©ç”¨åˆ°å®šä¹‰çš„ç´¢å¼•ï¼ˆa,b,cï¼‰,ç”¨ä¸Ša,bï¼ˆmysqlæœ‰æŸ¥è¯¢ä¼˜åŒ–å™¨ï¼‰</span><br><span class="line"></span><br><span class="line">select * from t where a&#x3D;1;     #è¿™æ ·ä¹Ÿå¯ä»¥åˆ©ç”¨åˆ°å®šä¹‰çš„ç´¢å¼•ï¼ˆa,b,cï¼‰,ç”¨ä¸Ša</span><br><span class="line"></span><br><span class="line">select * from t where b&#x3D;1 and c&#x3D;1;     #è¿™æ ·ä¸å¯ä»¥åˆ©ç”¨åˆ°å®šä¹‰çš„ç´¢å¼•ï¼ˆa,b,cï¼‰</span><br><span class="line"></span><br><span class="line">select * from t where a&#x3D;1 and c&#x3D;1;     #è¿™æ ·å¯ä»¥åˆ©ç”¨åˆ°å®šä¹‰çš„ç´¢å¼•ï¼ˆa,b,cï¼‰ï¼Œä½†åªç”¨ä¸Šaç´¢å¼•ï¼Œb,cç´¢å¼•ç”¨ä¸åˆ°</span><br></pre></td></tr></table></figure>
<p><strong>å½“é‡åˆ°èŒƒå›´æŸ¥è¯¢(&gt;ã€&lt;ã€betweenã€like)å°±ä¼šåœæ­¢åŒ¹é…</strong>ã€‚ä¹Ÿå°±æ˜¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select * from t where a&#x3D;1 and b&gt;1 and c &#x3D;1; #è¿™æ ·a,bå¯ä»¥ç”¨åˆ°ï¼ˆa,b,cï¼‰ï¼Œcç´¢å¼•ç”¨ä¸åˆ°</span><br></pre></td></tr></table></figure>
<p>è¿™æ¡è¯­å¥åªæœ‰ a,b ä¼šç”¨åˆ°ç´¢å¼•ï¼Œc
éƒ½ä¸èƒ½ç”¨åˆ°ç´¢å¼•ã€‚è¿™ä¸ªåŸå› å¯ä»¥ä»è”åˆç´¢å¼•çš„ç»“æ„æ¥è§£é‡Šã€‚</p>
<p>ä½†æ˜¯å¦‚æœæ˜¯å»ºç«‹(a,c,b)è”åˆç´¢å¼•ï¼Œåˆ™a,b,céƒ½å¯ä»¥ä½¿ç”¨ç´¢å¼•ï¼Œå› ä¸ºä¼˜åŒ–å™¨ä¼šè‡ªåŠ¨æ”¹å†™ä¸ºæœ€ä¼˜æŸ¥è¯¢è¯­å¥</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select * from t where a&#x3D;1 and b &gt;1 and c&#x3D;1;  #å¦‚æœæ˜¯å»ºç«‹(a,c,b)è”åˆç´¢å¼•ï¼Œåˆ™a,b,céƒ½å¯ä»¥ä½¿ç”¨ç´¢å¼•</span><br><span class="line">#ä¼˜åŒ–å™¨æ”¹å†™ä¸º</span><br><span class="line">select * from t where a&#x3D;1 and c&#x3D;1 and b &gt;1;</span><br></pre></td></tr></table></figure>
<p>ä»¥index
ï¼ˆa,b,cï¼‰ä¸ºä¾‹å»ºç«‹è¿™æ ·çš„ç´¢å¼•ç›¸å½“äºå»ºç«‹äº†ç´¢å¼•aã€abã€abcä¸‰ä¸ªç´¢å¼•ã€‚</p>
<h3 id="è”åˆç´¢å¼•ä¼˜ç‚¹">è”åˆç´¢å¼•ä¼˜ç‚¹</h3>
<ul>
<li><strong>å‡å°‘å¼€é”€ã€‚</strong>å»ºä¸€ä¸ªè”åˆç´¢å¼•(col1,col2,col3)ï¼Œå®é™…ç›¸å½“äºå»ºäº†(col1),(col1,col2),(col1,col2,col3)ä¸‰ä¸ªç´¢å¼•ã€‚æ¯å¤šä¸€ä¸ªç´¢å¼•ï¼Œéƒ½ä¼šå¢åŠ å†™æ“ä½œçš„å¼€é”€å’Œç£ç›˜ç©ºé—´çš„å¼€é”€ã€‚å¯¹äºå¤§é‡æ•°æ®çš„è¡¨ï¼Œä½¿ç”¨è”åˆç´¢å¼•ä¼šå¤§å¤§çš„å‡å°‘å¼€é”€ï¼</li>
<li><strong>è¦†ç›–ç´¢å¼•ã€‚</strong>å¯¹è”åˆç´¢å¼•(col1,col2,col3)ï¼Œå¦‚æœæœ‰å¦‚ä¸‹çš„sql:
select col1,col2,col3 from test where col1=1 and
col2=2ã€‚é‚£ä¹ˆMySQLå¯ä»¥ç›´æ¥é€šè¿‡éå†ç´¢å¼•å–å¾—æ•°æ®ï¼Œè€Œæ— éœ€å›è¡¨ï¼Œè¿™å‡å°‘äº†å¾ˆå¤šçš„éšæœºioæ“ä½œã€‚å‡å°‘ioæ“ä½œï¼Œç‰¹åˆ«çš„éšæœºioå…¶å®æ˜¯dbaä¸»è¦çš„ä¼˜åŒ–ç­–ç•¥ã€‚æ‰€ä»¥ï¼Œåœ¨çœŸæ­£çš„å®é™…åº”ç”¨ä¸­ï¼Œè¦†ç›–ç´¢å¼•æ˜¯ä¸»è¦çš„æå‡æ€§èƒ½çš„ä¼˜åŒ–æ‰‹æ®µä¹‹ä¸€ã€‚</li>
<li><strong>æ•ˆç‡é«˜ã€‚</strong>ç´¢å¼•åˆ—è¶Šå¤šï¼Œé€šè¿‡ç´¢å¼•ç­›é€‰å‡ºçš„æ•°æ®è¶Šå°‘ã€‚æœ‰1000Wæ¡æ•°æ®çš„è¡¨ï¼Œæœ‰å¦‚ä¸‹sql:select
from table where col1=1 and col2=2 and
col3=3,å‡è®¾å‡è®¾æ¯ä¸ªæ¡ä»¶å¯ä»¥ç­›é€‰å‡º10%çš„æ•°æ®ï¼Œå¦‚æœåªæœ‰å•å€¼ç´¢å¼•ï¼Œé‚£ä¹ˆé€šè¿‡è¯¥ç´¢å¼•èƒ½ç­›é€‰å‡º1000W
* 10%=100wæ¡æ•°æ®ï¼Œç„¶åå†å›è¡¨ä»100wæ¡æ•°æ®ä¸­æ‰¾åˆ°ç¬¦åˆcol2=2 and col3=
3çš„æ•°æ®ï¼Œç„¶åå†æ’åºï¼Œå†åˆ†é¡µï¼›å¦‚æœæ˜¯è”åˆç´¢å¼•ï¼Œé€šè¿‡ç´¢å¼•ç­›é€‰å‡º1000w *10%
*10% *10%=1wï¼Œæ•ˆç‡æå‡å¯æƒ³è€ŒçŸ¥ï¼</li>
</ul>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>CICFlowMeteréƒ¨ç½²</title>
    <url>/CICFlowMeter%E9%83%A8%E7%BD%B2/</url>
    <content><![CDATA[<p>è®°å½•ä¸‹åœ¨X86å’Œarmæ¶æ„ä¸Šéƒ¨ç½²CICFlowMeterçš„æ•´ä½“æµç¨‹å’Œå„ç§é—®é¢˜ï¼Œç¬”è€…åœ¨éƒ¨ç½²çš„æ—¶å€™çœŸçš„æ˜¯é‡åˆ°è¿‡å¾ˆå¤šé—®é¢˜ï¼Œéƒ¨ç½²åˆ°ARMä¸Šæ›´æ˜¯éš¾æï¼Œè¿™é‡Œè®°å½•ä¸‹é¡ºä¾¿çœ‹èƒ½ä¸èƒ½å¸®åŠ©å…¶ä»–äººã€‚</p>
<a id="more"></a>
<h2 id="éƒ¨ç½²æ•´ä½“æµç¨‹">éƒ¨ç½²æ•´ä½“æµç¨‹</h2>
<p>ä¸‹é¢æˆ‘æŠŠCICFlowMeterç®€å†™ä¸ºCICã€‚è¿™é‡Œå…ˆè¯´ä¸€ä¸‹è”ç½‘éƒ¨ç½²çš„æ•´ä½“æµç¨‹ï¼Œåœ¨è”ç½‘æƒ…å†µä¸‹éƒ¨ç½²ä¸€èˆ¬åªæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯jnetpcapä¾èµ–çš„å®‰è£…ã€‚</p>
<blockquote>
<p>åœ¨è¿™é‡Œç‰¹åˆ«æé†’ä¸€ä¸‹ï¼Œå°½é‡ä¸è¦ä½¿ç”¨open
jdkï¼Œç¬”è€…ä½¿ç”¨openjdkå°±ä¼šæœ‰é—®é¢˜ï¼Œå»ºè®®æœ€å¥½ä½¿ç”¨Oracleçš„JDKï¼ï¼ï¼ï¼ï¼ï¼</p>
<p>è¿˜æœ‰å°±æ˜¯ç¬”è€…å°è¯•è¿‡åœ¨ç›¸åŒæ“ä½œç³»ç»Ÿï¼Œç›¸åŒæ¶æ„çš„ç”µè„‘ä¸Šå®Œæˆæ‰“åŒ…çš„CICæ˜¯å¯ä»¥ç›´æ¥å¤åˆ¶åˆ°åˆ«çš„ç”µè„‘ä¸Šçš„ï¼Œè¿™å°±æ„å‘³ç€åœ¨å¦ä¸€å°ç”µè„‘ä¸Šä¸ç”¨é…ç½®mvnå’Œgradleè¿™äº›å†…å®¹ï¼Œåªéœ€è¦é…ç½®JDKç„¶åæŠŠæ‰“å‡ºæ¥çš„å‹ç¼©åŒ…å¤åˆ¶è¿‡å»ï¼Œç„¶åé…ç½®å¥½libpcap-devå’Œjnetpcapä¾èµ–å°±å¯ä»¥ä½¿ç”¨äº†ï¼Œä¸åŒç³»ç»Ÿå’Œæ¶æ„çš„ç¬”è€…æ²¡æœ‰å°è¯•è¿‡ã€‚</p>
</blockquote>
<h3 id="ç¯å¢ƒé…ç½®">ç¯å¢ƒé…ç½®</h3>
<p>ç¬”è€…ä½¿ç”¨æ˜¯è‡ªå·±ä¸‹è½½çš„è½¯ä»¶åŒ…ï¼Œæ‰€ä»¥è¦è‡ªå·±é…ç½®ä¸‹ç¯å¢ƒ</p>
<ul>
<li><p>/etc/profile</p></li>
<li><p>/home/user(ç”¨æˆ·å)/.bashrc</p></li>
</ul>
<p>åœ¨ä¸Šè¿°ä¸¤ä¸ªæ–‡ä»¶æœ«å°¾ä¸­æ·»åŠ ä¸‹åˆ—ç¯å¢ƒå˜é‡ï¼Œæ·»åŠ å®Œæˆåä½¿ç”¨source
etc/profileå’Œsource /home/user/.bashrc</p>
<ul>
<li>é…ç½®jdk 1.8.0_311</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export JAVA_HOME&#x3D;&#x2F;***&#x2F;Traffic_arm&#x2F;jdk1.8.0_333</span><br><span class="line">export JRE_HOME&#x3D;$JAVA_HOME&#x2F;jre</span><br><span class="line">export CLASSPATH&#x3D;$JAVA_HOME&#x2F;lib:$JRE_HOME&#x2F;lib</span><br><span class="line">export PATH&#x3D;$JAVA_HOME&#x2F;bin:$JRE_HOME&#x2F;bin:$PATH</span><br></pre></td></tr></table></figure>
<ul>
<li>é…ç½®maven 3.8.4</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export MAVEN_HOME&#x3D;&#x2F;***&#x2F;Traffic_arm&#x2F;apache-maven-3.8.4</span><br><span class="line">export PATH&#x3D;$PATH:$MAVEN_HOME&#x2F;bin</span><br></pre></td></tr></table></figure>
<ul>
<li>é…ç½®gradle 3.3</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export GRADLE_HOME&#x3D;&#x2F;***&#x2F;Traffic_arm&#x2F;gradle-3.3</span><br><span class="line">export PATH&#x3D;$GRADLE_HOME&#x2F;bin:$PATH</span><br></pre></td></tr></table></figure>
<h3 id="éªŒè¯ç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸ">éªŒè¯ç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸ</h3>
<ul>
<li><p>ä½¿ç”¨java -versionæŸ¥çœ‹javaç‰ˆæœ¬æ˜¯å¦ä¸ç¯å¢ƒå˜é‡ä¸­ä¸€è‡´</p></li>
<li><p>ä½¿ç”¨which javaæŸ¥çœ‹è·¯å¾„æ˜¯å¦ä¸ç¯å¢ƒå˜é‡ä¸€è‡´</p></li>
<li><p>å¦‚æœwhich
javaæ˜¾ç¤ºä¸ç¯å¢ƒå˜é‡ä¸ä¸€è‡´ï¼Œè€Œæ˜¯/usr/bin/javaä¹‹ç±»çš„è·¯å¾„åˆ™ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼ˆè¿™ç§æƒ…å†µä¸»è¦æ˜¯æœºå­ä¸Šæœ¬èº«å­˜åœ¨jdkï¼Œç†è®ºä¸Šå°†å¦‚æœåœ¨é…ç½®ç¯å¢ƒå˜é‡æ—¶å¦‚æœæŠŠæ–°çš„è·¯å¾„æ”¾åœ¨$PATHå‰çš„è¯æ˜¯ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜çš„ï¼‰</p></li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo rm &#x2F;usr&#x2F;bin&#x2F;javaï¼ˆwhich java ç»“æœï¼‰</span><br><span class="line">sudo ln -s &#x2F;***&#x2F;Traffic_x86&#x2F;jdk1.8.0_311&#x2F;bin&#x2F;java &#x2F;usr&#x2F;bin&#x2F;javaï¼ˆwhich java ç»“æœï¼‰</span><br></pre></td></tr></table></figure>
<ul>
<li><p>å†ä½¿ç”¨java -versionå’Œwhich javaéªŒè¯ç¯å¢ƒé…ç½®ç»“æœ</p></li>
<li><p>å¦‚æœè¿˜æ²¡æœ‰ç”Ÿæ•ˆå°è¯•å…³é—­shellé‡å¼€ä¸€ä¸ªshellæˆ–åˆ‡æ¢ç”¨æˆ·çœ‹æœ‰æ— ç”Ÿæ•ˆ</p></li>
<li><p>å¦‚æœå‡ºç°æƒé™ä¸å¤Ÿçš„æƒ…å†µï¼Œä½¿ç”¨sudo chmod 777 path ä¿®æ”¹æƒé™</p></li>
</ul>
<h3 id="å¯¼å…¥jnetpcap">å¯¼å…¥jnetpcap</h3>
<ul>
<li>Dfileè·¯å¾„æ”¹ä¸º/Traffic_arm/CICFlowMeter-master/jnetcap/linux/jnetpcap-1.4.r1425ä¸‹çš„jnetpcap.jar</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mvn install:install-file -Dfile&#x3D;&#x2F;***&#x2F;jnetpcap.jar -DgroupId&#x3D;org.jnetpcap -DartifactId&#x3D;jnetpcap -Dversion&#x3D;1.4.1 -Dpackaging&#x3D;jar</span><br></pre></td></tr></table></figure>
<ul>
<li>åœ¨/Traffic_arm/CICFlowMeter-masterä¸‹æ„å»ºé¡¹ç›®</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.&#x2F;gradlew distZip</span><br></pre></td></tr></table></figure>
<ul>
<li>åœ¨/Traffic_arm/CICFlowMeter-master/build/distributionsé‡Œè§£å‹ç¼©CICFlowMeter-4.0.zip</li>
<li>å®‰è£…libpcap-devä¾èµ–ï¼ˆcentosé‡Œé¢å¥½åƒæ˜¯libpcap-develï¼‰</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo apt-get install libpcap-dev</span><br><span class="line">yum install libpcap-devel</span><br></pre></td></tr></table></figure>
<ul>
<li>å°†/CICFlowMeter-master/jnetcap/linux/jnetpcap-1.4.r1425é‡Œçš„libjnetpcap.soå’Œlibjnetpcap-pcap100.soå¤åˆ¶åˆ°/Traffic_arm/jdk1.8.0_333/jre/lib/aarch64ï¼ˆæˆ–amd64ï¼Œå’Œå¹³å°æ¶æ„ç›¸å…³ï¼‰ç›®å½•ä¸‹</li>
<li>åœ¨/***/Traffic_arm/CICFlowMeter-master/build/distributions/CICFlowMeter-4.0/binè¿è¡Œcfmæ–‡ä»¶å³å¯</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.&#x2F;cfm [pcap_file] [target_path]</span><br><span class="line">&#x2F;***&#x2F;Traffic&#x2F;CICFlowMeter-master&#x2F;build&#x2F;distributions&#x2F;CICFlowMeter-4.0&#x2F;bin&#x2F;cfm ***.pcap &#x2F;***&#x2F;</span><br></pre></td></tr></table></figure>
<h3 id="ç›¸å…³æè¿°">ç›¸å…³æè¿°</h3>
<ul>
<li>æŒ‰ç…§ä¸Šè¿°æ“ä½œåœ¨æœ‰ç½‘çš„x86çš„Ubuntuä¸­åº”è¯¥æ˜¯ä¸ä¼šå‡ºç°é—®é¢˜çš„ï¼Œç¬”è€…å·²ç»åœ¨å¤šå°X86çš„Ubuntuä¸­æˆåŠŸéƒ¨ç½²ã€‚</li>
<li>åœ¨ä¸€ä¸ªå…¨æ–°çš„æœºå­ä¸Šéƒ¨ç½²æ˜¯è¦èµ°å®Œä»¥ä¸Šå…¨éƒ¨æµç¨‹çš„ï¼Œä½†æ˜¯ç¬”è€…æœ¬èº«ä¸ä¼šJAVAæ‰€ä»¥ä¸æ˜¯å¾ˆæ¸…æ¥šmvnå’Œgradleè¿™æ ·ä½¿ç”¨çš„åŸç†ï¼Œ<a
href="https://github.com/ahlashkari/CICFlowMeter">CICgithub</a>ä¸Šä½œè€…å°±æ˜¯è¿™ä¹ˆç”¨çš„ï¼Œgithubä¸Šçš„æµç¨‹æ˜¯åœ¨ä¸ºäº†åœ¨IDEä¸Šèƒ½ä½¿ç”¨ï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›æŠŠä»–å˜æˆä¸€ä¸ªå·¥å…·åœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨ï¼Œæ‰€ä»¥è¦æŠŠä¸¤ä¸ªsoåŠ¨æ€åº“æ”¾åˆ°jreé‡Œé¢å»ï¼Œè¿™ä¸ªå¤§æ¦‚å°±æ˜¯è¦æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œå…¨å±€ä½¿ç”¨çš„æ—¶å€™èƒ½æ‰¾åˆ°jnetpcapçš„åŠ¨æ€é“¾æ¥åº“ï¼Œè¿™å°±æ¶‰åŠåˆ°äº†JAVAæœ¬èº«çš„ä¾èµ–ç®¡ç†ï¼Œ<del>ç¬”è€…ç¡®å®ä¸æ‡‚JAVAï¼Œéƒ½æ˜¯å¸ˆå…„æ•™çš„ğŸ˜€ã€‚</del></li>
<li>åœ¨X86çš„Ubuntuä¸Šä½¿ç”¨ä¸Šè¿°æ­¥éª¤ç†è®ºä¸Šè®²ä¸å­˜åœ¨é—®é¢˜äº†ï¼Œä½†æ˜¯åœ¨åˆ«çš„æ“ä½œç³»ç»Ÿæˆ–è€…éX86æ¶æ„ä¸Šè¿˜æ˜¯å­˜åœ¨é—®é¢˜ï¼Œä¸€èˆ¬ä¸»è¦æ˜¯é‡åˆ°ä¸‹é¢è¿™ä¸ªé—®é¢˜</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cic.cs.unb.ca.ifm.Cmd You select: &#x2F;Integ&#x2F;pcapsource&#x2F;d1&#x2F;1_00001_20210104112753.pcap</span><br><span class="line">cic.cs.unb.ca.ifm.Cmd Out folder: .&#x2F;</span><br><span class="line">cic.cs.unb.ca.ifm.Cmd CICFlowMeter received 1 pcap file</span><br><span class="line">Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: com.slytechs.library.NativeLibrary.dlopen(Ljava&#x2F;lang&#x2F;String;)J</span><br><span class="line">        at com.slytechs.library.NativeLibrary.dlopen(Native Method)</span><br><span class="line">        at com.slytechs.library.NativeLibrary.&lt;init&gt;(Unknown Source)</span><br><span class="line">        at com.slytechs.library.JNILibrary.&lt;init&gt;(Unknown Source)</span><br><span class="line">        at com.slytechs.library.JNILibrary.loadLibrary(Unknown Source)</span><br><span class="line">        at com.slytechs.library.JNILibrary.register(Unknown Source)</span><br><span class="line">        at com.slytechs.library.JNILibrary.register(Unknown Source)</span><br><span class="line">        at com.slytechs.library.JNILibrary.register(Unknown Source)</span><br><span class="line">        at org.jnetpcap.Pcap.&lt;clinit&gt;(Unknown Source)</span><br><span class="line">        at cic.cs.unb.ca.jnetpcap.PacketReader.config(PacketReader.java:58)</span><br><span class="line">        at cic.cs.unb.ca.jnetpcap.PacketReader.&lt;init&gt;(PacketReader.java:52)</span><br><span class="line">        at cic.cs.unb.ca.ifm.Cmd.readPcapFile(Cmd.java:128)</span><br><span class="line">        at cic.cs.unb.ca.ifm.Cmd.main(Cmd.java:80)</span><br></pre></td></tr></table></figure>
<ul>
<li>è¿™ä¸ªé—®é¢˜æ ¹æ®ç¬”è€…è‡ªå·±çš„å°è¯•å’Œç½‘ä¸Šçš„ <a
href="https://blog.csdn.net/lizheng2017/article/details/121455590">å‚è€ƒ</a>
åŸºæœ¬å¯ä»¥ç¡®å®šæ˜¯ç”±äºjnetpcapè¿™ä¸ªä¸œè¥¿å¼•èµ·çš„ï¼Œåº”è¯¥æ˜¯jnetpcapè¿™ä¸ªä¸œè¥¿åœ¨ä¸åŒæ¶æ„ä¸‹ä¸å…¼å®¹çš„é—®é¢˜ï¼Œåœ¨armæ¶æ„ä¸Šä½¿ç”¨CICgithubä¸­æä¾›çš„soæ˜¯ä¸è¡Œçš„ï¼Œå¿…é¡»è¦è‡ªå·±é‡æ–°ç¼–è¯‘ï¼Œç”šè‡³æˆ‘ä¹‹ååœ¨éƒ¨ç½²ä¸€å°X86çš„centosçš„æ—¶å€™è¿™ä¸ªosä¹Ÿä¸èƒ½ç”¨æœ€åè¿˜æ˜¯ç¬”è€…è‡ªå·±é‡æ–°ç¼–è¯‘ä¹‹åæ‰èƒ½ä½¿ç”¨ï¼Œè¿™ä¸ªä¸œè¥¿çš„å…¼å®¹æ€§ç¡®å®å¾ˆå·®ï¼Œå®åœ¨ä¸è¡Œäº†éœ€è¦ç¼–è¯‘å®‰è£…çš„æ—¶å€™å¯ä»¥çœ‹ä¸‹é¢çš„å†…å®¹ã€‚</li>
</ul>
<h2 id="x86æ¶æ„">X86æ¶æ„</h2>
<blockquote>
<p>å¯¹X86æ¶æ„ä¸‹çš„Ubuntuç³»ç»Ÿæ¥è®²ï¼ŒæŒ‰ç…§ä¸Šè¿°æµç¨‹åº”è¯¥ä¸ä¼šå­˜åœ¨é—®é¢˜ï¼Œgithubä¸Šæä¾›çš„jnetpcapçš„soæœ¬èº«æ˜¯é€‚é…ubuntuçš„ã€‚</p>
<p>å¯¹X86æ¶æ„ä¸‹çš„Centoså’Œå…¶ä»–ç³»ç»Ÿæ¥è®²ï¼Œå¯èƒ½ä¼šé‡åˆ°ä¸Šé¢jnetpcapæŠ¥é”™çš„é—®é¢˜ï¼Œé‚£åº”è¯¥å°±æ˜¯githubä¸Šæä¾›çš„soä¾èµ–å’Œç³»ç»Ÿä¸å…¼å®¹ï¼Œéœ€è¦é‡æ–°ç¼–è¯‘ï¼Œæˆ–è€…çœ‹ç½‘ä¸Šæœ‰æ²¡æœ‰å¥½å¿ƒäººæä¾›ç¼–è¯‘å¥½çš„ï¼Œæˆ–è€…çœ‹ä¸‹é¢çš„jnetpcapç¼–è¯‘å®‰è£…éƒ¨åˆ†ã€‚</p>
</blockquote>
<h2 id="armæ¶æ„">ARMæ¶æ„</h2>
<blockquote>
<p>ARMæ¶æ„ä¸‹çš„éƒ¨ç½²ï¼Œæœ€ä¸»è¦çš„é—®é¢˜è¿˜æ˜¯åœ¨jnetpcapä¸Šï¼Œgithubä¸Šæä¾›çš„soè‚¯å®šæ˜¯ç”¨ä¸äº†çš„ï¼Œç¬”è€…ä¹Ÿäº²èº«ä½“éªŒè¿‡ï¼Œç¡®å®ä¸è¡Œã€‚ä½†æ˜¯ç¬”è€…è¿™é‡Œåœ¨CSDNä¸Šæœåˆ°äº†ä¸€ä¸ªå¥½å¿ƒè€å“¥è‡ªå·±åœ¨é“¶æ²³éº’éºŸV10ï¼Œ
aarch64æ¶æ„ä¸Šç¼–è¯‘å‡ºæ¥çš„ç»“æœï¼Œè¿™é‡Œè´´å‡ºæ¥ä¾›å¤§å®¶å‚è€ƒã€‚</p>
</blockquote>
<p><a
href="https://blog.csdn.net/lizheng2017/article/details/121455590">ARMæ¶æ„ä¾èµ–</a></p>
<h2 id="jnetpcapç¼–è¯‘å®‰è£…">jnetpcapç¼–è¯‘å®‰è£…</h2>
<p>ä»¥ä¸‹å†…å®¹å…¨éƒ¨æ¥æºäºä¸Šé¢ARMæ¶æ„ä¸­æåˆ°çš„å¥½å¿ƒè€å“¥ï¼Œè€Œä¸”ä»–è¿˜æä¾›äº†ä»–ç¼–è¯‘å¥½çš„soï¼ŒçœŸçš„æ˜¯å¤§å–„äººï¼Œæˆ‘æ€•ä»–çš„åšå®¢å“ªå¤©æ²¡äº†æ‰€ä»¥æˆ‘è¿™é‡Œå¤åˆ¶ä¸€é<a
href="https://blog.csdn.net/lizheng2017/article/details/121455590">ARMæ¶æ„ä¾èµ–</a></p>
<hr />
<p><strong>ç¼–è¯‘ç¯å¢ƒ</strong>ï¼šé“¶æ²³éº’éºŸV10ï¼Œ aarch64æ¶æ„
ç½‘ä¸Šå¾ˆå®¹æ˜“ä¸‹è½½åˆ°jnetpcapçš„åŒ…ï¼Œä½†æ˜¯å´æ²¡æœ‰arm64æ¶æ„çš„ç¼–è¯‘å¥½çš„soï¼Œäºæ˜¯ä¸‹è½½æºç åŒ…è‡ªå·±ç¼–è¯‘ã€‚ä¸‹é¢æ˜¯é‡åˆ°çš„é—®é¢˜è§£å†³ï¼Œæ•´ä¸ªæµç¨‹è€—æ—¶6ä¸ªå¤šå°æ—¶ï¼š</p>
<ol type="1">
<li>ä¸‹è½½jnetpcap-src-1.4.r1425-1.zipå¹¶è§£å‹ï¼š</li>
</ol>
<figure>
<img
src="https://zchsakura-blog.oss-cn-beijing.aliyuncs.com/202207061639724.png"
alt="è§£å‹çš„æ–‡ä»¶" />
<figcaption aria-hidden="true">è§£å‹çš„æ–‡ä»¶</figcaption>
</figure>
<ol start="2" type="1">
<li>å®‰è£…antï¼Œ å‘½ä»¤å¤§æ¦‚æ˜¯ï¼š</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo apt install ant</span><br></pre></td></tr></table></figure>
<ol start="3" type="1">
<li>ç¼–è¯‘ï¼Œé—®é¢˜1ï¼Œxml:119: taskdef class org . vafer.jdeb . ant
DebAntTask cannot be found using the classloader AntclassL oader[ ]</li>
</ol>
<figure>
<img
src="https://zchsakura-blog.oss-cn-beijing.aliyuncs.com/202207061639887.png"
alt="é—®é¢˜1" />
<figcaption aria-hidden="true">é—®é¢˜1</figcaption>
</figure>
<p>â€‹ æ–¹æ³•ï¼šç›´æ¥å°†build.xmlç¬¬119è¡Œåˆ é™¤ï¼Œä¸æ˜¯debianç³»ç»Ÿã€‚</p>
<ol start="4" type="1">
<li>ç¼–è¯‘ï¼Œé—®é¢˜2ï¼Œuse aresiurce collection to copy directories.</li>
</ol>
<figure>
<img
src="https://zchsakura-blog.oss-cn-beijing.aliyuncs.com/202207061640674.png"
alt="é—®é¢˜2" />
<figcaption aria-hidden="true">é—®é¢˜2</figcaption>
</figure>
<p>â€‹
æ ¹æ®æç¤ºï¼Œxmlçš„611è¡Œæœ‰é—®é¢˜ï¼Œç›´æ¥æ‰¾åˆ°ä½ ç³»ç»Ÿçš„libpcap.soçš„è·¯å¾„ï¼Œå¡«å…¥xmlï¼š</p>
<figure>
<img
src="https://zchsakura-blog.oss-cn-beijing.aliyuncs.com/202207061640724.png"
alt="é—®é¢˜è¡Œ" />
<figcaption aria-hidden="true">é—®é¢˜è¡Œ</figcaption>
</figure>
<figure>
<img
src="https://zchsakura-blog.oss-cn-beijing.aliyuncs.com/202207061640701.png"
alt="è§£å†³æ–¹æ³•" />
<figcaption aria-hidden="true">è§£å†³æ–¹æ³•</figcaption>
</figure>
<ol start="5" type="1">
<li>ç¼–è¯‘ï¼Œé—®é¢˜3ï¼Œç½‘ä¸Šçš„ç­”æ¡ˆéƒ½è¯´æ˜¯xmlçš„é—®é¢˜ï¼Œä½†åœ¨è¿™é‡Œå…¶å®æ˜¯å°‘äº†cpptask.jarçš„åŸå› ã€‚</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Problem: failed to create task or type cc</span><br><span class="line">Cause: The name is undefined.</span><br><span class="line">Action: Check the spelling.</span><br><span class="line">Action: Check that any custom tasks&#x2F;types have been declared.</span><br><span class="line">Action: Check that any &lt;presetdef&gt;&#x2F;&lt;macrodef&gt; declarations have taken place.</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://zchsakura-blog.oss-cn-beijing.aliyuncs.com/202207061641290.png"
alt="é—®é¢˜3" />
<figcaption aria-hidden="true">é—®é¢˜3</figcaption>
</figure>
<p>â€‹ è§£å†³åŠæ³•ï¼šä¸‹è½½cpptasks-1.0b4.jarï¼Œæ”¾åˆ°jnetpcapçš„libæ–‡ä»¶å¤¹ä¸‹ã€‚</p>
<p>â€‹
è¿™é‡Œçš„å…·ä½“cpptasks.jarçš„ç‰ˆæœ¬éœ€è¦ä½ æŸ¥çœ‹xmlæ–‡ä»¶ï¼Œæ”¾çš„è·¯å¾„ä¹Ÿæ˜¯è¦çœ‹xmlï¼Œç›´æ¥åœ¨xmlä¸­æœç´¢cpptaskç›¸ä¿¡ä½ èƒ½æ‰¾åˆ°çº¿ç´¢çš„ã€‚</p>
<p>â€‹
psï¼šæˆ‘è¿™é‡Œæ˜¯æ”¾çš„è·¯å¾„æ˜¯[é¡¹ç›®è·¯å¾„]/cpptasks-1.0b4/cpptasks.jarï¼Œç„¶ååœ¨xmlé‡Œé¢è·¯å¾„ç›´æ¥å†™æ­»</p>
<ol start="6" type="1">
<li>ç¼–è¯‘ï¼Œé—®é¢˜å››ï¼š</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;C ommand- line&gt;:0: 19: error: token â€œâ€is not valid in preprocessor expressions&#x2F;home&#x2F;ka&#x2F; jnetpcap-src-1.4.1425-1&#x2F;src&#x2F;c&#x2F;jnetpcap_pcap100.cpp:87:6: note: in expansion of macro &#39; L IBPCAP_ VERSION &#39;</span><br><span class="line">#if (L IBPCAP VERSION &lt; L IBPCAP PCAP CREATE )</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://zchsakura-blog.oss-cn-beijing.aliyuncs.com/202207061643419.png"
alt="é—®é¢˜å››" />
<figcaption aria-hidden="true">é—®é¢˜å››</figcaption>
</figure>
<p>â€‹
è§£å†³ï¼Œæ˜æ˜¾æ˜¯æ‰¾ä¸åˆ°LIBPCAP_VERSIONï¼Œå³libpcapçš„ç‰ˆæœ¬å·æ²¡æœ‰ï¼Œæˆ‘ä»¬ç¼–è¾‘Linux.propertiesæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹è¡Œ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">complier.LIBPCAP_VERSION &#x3D; 174</span><br><span class="line">(å…·ä½“ç‰ˆæœ¬å¯ç”¨apt list|grep libpcapè·å–ï¼Œå¡«ä¸ªå¾ˆå¤§çš„æ•°å°±è¡Œ)ï¼Œè¿™é‡Œä¸€å®šæ˜¯ä¸€ä¸ªæ•°å­—ï¼Œä¸èƒ½åƒ1.7.4è¿™æ ·ã€‚</span><br></pre></td></tr></table></figure>
<p><img
src="https://zchsakura-blog.oss-cn-beijing.aliyuncs.com/202207061644038.png" /></p>
<ol start="7" type="1">
<li>é—®é¢˜äº”</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">	[javac] æ³¨: æœ‰å…³è¯¦ç»†ä¿¡æ¯, è¯·ä½¿ç”¨ -Xlint:deprecation é‡æ–°ç¼–è¯‘ã€‚</span><br><span class="line">    [javac] æ³¨: æŸäº›è¾“å…¥æ–‡ä»¶ä½¿ç”¨äº†æœªç»æ£€æŸ¥æˆ–ä¸å®‰å…¨çš„æ“ä½œã€‚</span><br><span class="line">    [javac] æ³¨: æœ‰å…³è¯¦ç»†ä¿¡æ¯, è¯·ä½¿ç”¨ -Xlint:unchecked é‡æ–°ç¼–è¯‘ã€‚</span><br><span class="line">    [javac] 78 ä¸ªé”™è¯¯</span><br><span class="line"></span><br><span class="line">BUILD FAILED</span><br><span class="line">&#x2F;home&#x2F;ka&#x2F;jnetpcap-src-1.4.r1425-1&#x2F;build.xml:1090: Compile failed; see the compiler error output for details.</span><br><span class="line">        at org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:1181)</span><br><span class="line">        at org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:936)</span><br><span class="line">        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:293)</span><br><span class="line">        at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)</span><br><span class="line">        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class="line">        at java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class="line">        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)</span><br><span class="line">        at org.apache.tools.ant.Task.perform(Task.java:348)</span><br><span class="line">        at org.apache.tools.ant.Target.execute(Target.java:435)</span><br><span class="line">        at org.apache.tools.ant.Target.performTasks(Target.java:456)</span><br><span class="line">        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1405)</span><br><span class="line">        at org.apache.tools.ant.Project.executeTarget(Project.java:1376)</span><br><span class="line">        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)</span><br><span class="line">        at org.apache.tools.ant.Project.executeTargets(Project.java:1260)</span><br><span class="line">        at org.apache.tools.ant.Main.runBuild(Main.java:853)</span><br><span class="line">        at org.apache.tools.ant.Main.startAnt(Main.java:235)</span><br><span class="line">        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:285)</span><br><span class="line">        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:112)</span><br></pre></td></tr></table></figure>
<p><img
src="https://zchsakura-blog.oss-cn-beijing.aliyuncs.com/202207061645003.png" /></p>
<p>â€‹
è¿™ä¸ªé—®é¢˜å¯èƒ½æ˜¯æˆ‘æ²¡æœ‰ä¸‹è½½æ­£ç¡®ç‰ˆæœ¬çš„cpptaskçš„åŸå› ï¼Œè¦æ ¹æ®build.xmlé‡Œçš„è¦æ±‚æ¥ä¸‹è½½ã€‚
ä½†æ˜¯æ£€æŸ¥./build/obj/æˆ‘å·²ç»å¾—åˆ°äº†æˆ‘ä»¬æƒ³è¦çš„soæ–‡ä»¶</p>
<figure>
<img
src="https://zchsakura-blog.oss-cn-beijing.aliyuncs.com/202207061645493.png"
alt="å¤§åŠŸå‘Šæˆ" />
<figcaption aria-hidden="true">å¤§åŠŸå‘Šæˆ</figcaption>
</figure>
<p>ç¨‹åºç»ˆäºè·‘èµ·æ¥äº†ï¼ï¼ï¼ï¼ï¼ï¼ï¼</p>
<p><img
src="https://zchsakura-blog.oss-cn-beijing.aliyuncs.com/202207061646710.png" /></p>
<h3 id="é™„ç¼–è¯‘å¥½çš„æ–‡ä»¶é“¾æ¥">é™„ç¼–è¯‘å¥½çš„æ–‡ä»¶é“¾æ¥</h3>
<p>https://download.csdn.net/download/lizheng2017/46217421</p>
<h2 id="ç¦»çº¿éƒ¨ç½²">ç¦»çº¿éƒ¨ç½²</h2>
<p>ç¦»çº¿éƒ¨ç½²å…¶å®æŒºéº»çƒ¦çš„ï¼Œå¦‚æœå¹³æ—¶æ²¡æœ‰ç»å¸¸ä½¿ç”¨LinuxæœåŠ¡å™¨çš„è¯è¿˜æ˜¯æ¯”è¾ƒæ¼ç«çš„ï¼Œæœ€å¥½çš„æ–¹æ³•è¿˜æ˜¯è®©æœºå­è”ç½‘ï¼Œä½†æ˜¯ç¡®å®æœ‰å¾ˆå¤šæƒ…å†µä¸‹æ²¡æ³•è”ç½‘ï¼Œç¬”è€…è¿™é‡Œä¹Ÿåªèƒ½æä¾›æˆ‘åœ¨å°è¯•ç¦»çº¿éƒ¨ç½²è¿‡ç¨‹ä¸­çš„ä¸€äº›ç»éªŒ</p>
<ul>
<li>å°½é‡æ‰¾åˆ°ä¸€å°ç›¸åŒç³»ç»Ÿç›¸åŒæ¶æ„çš„èƒ½è”ç½‘çš„æœºå™¨ï¼Œè¿™ä¼šè®©ç¦»çº¿éƒ¨ç½²ç®€å•å¾—å¤šï¼Œaptå’Œyuméƒ½æä¾›äº†ä¸‹è½½å®‰è£…åŒ…çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨èƒ½è”ç½‘çš„æœºå­ä¸Šå…ˆä¸‹è½½å¥½é€‚é…çš„ç¦»çº¿åŒ…ç„¶åå¤åˆ¶åˆ°ä¸èƒ½è”ç½‘çš„æœºå­ä¸Šè¿›è¡Œç¼–è¯‘å®‰è£…ï¼Œè¿™æ ·çš„æˆåŠŸç‡å°±ä¼šå¾ˆé«˜ï¼Œä¹Ÿæ¯”è¾ƒæ–¹ä¾¿ï¼Œè¿™é‡Œè´´ä¸¤ä¸ªå‚è€ƒ<a
href="https://blog.csdn.net/qq_17576885/article/details/122070612">aptç¦»çº¿åŒ…ä¸‹è½½</a>ï¼Œ<a
href="https://www.codeleading.com/article/78986008408/">yumç¦»çº¿åŒ…ä¸‹è½½</a></li>
<li>ç›¸åŒç³»ç»Ÿç›¸åŒæ¶æ„çš„æœºå™¨ä¸ç”¨æ¯ä¸ªéƒ½ä½¿ç”¨mvnå’Œgradleï¼Œåªè¦æœ‰ä¸€å°æˆåŠŸæ‰“å‡ºäº†å‹ç¼©åŒ…åé¢å°±å¯ä»¥ç›´æ¥å¤åˆ¶ï¼Œåªè¦é…ç½®æ–°æœºå™¨çš„JDKå’Œå„ç§ä¾èµ–å°±è¡Œäº†</li>
</ul>
<h2 id="å…¶ä»–é—®é¢˜">å…¶ä»–é—®é¢˜</h2>
<h3 id="é—®é¢˜1">é—®é¢˜1</h3>
<blockquote>
<p>é—®é¢˜æè¿°ï¼šç»è¿‡ä¸Šé¢çš„ä¸€é€šæ“ä½œï¼ŒCICå·²ç»æˆåŠŸè·‘äº†èµ·æ¥ï¼Œæˆ‘æŠŠCICç”¨pythonå°è£…æˆäº†ä¸€ä¸ªæ¥å£ä¾›åç«¯è°ƒç”¨ï¼Œä½†æ˜¯å‡ºç°äº†ä¸€ä¸ªéå¸¸å¥‡æ€ªçš„é—®é¢˜ï¼Œé‚£å°±æˆ‘ç›´æ¥è·‘æˆ‘çš„æ¥å£CICç¨³å®šèƒ½ç”¨ï¼Œä½†æ˜¯åç«¯è°ƒæˆ‘çš„æ¥å£å°±æ—¶è€Œèƒ½ç”¨æ—¶è€Œä¸è¡Œï¼Œä¸€æ—¦ä¸è¡Œä¹‹åå°±ç¨³å®šä¸è¡Œã€‚</p>
</blockquote>
<blockquote>
<p>è¿™ä¸ªé—®é¢˜çš„äº§ç”Ÿæ˜¯å› ä¸ºåç«¯ä½¿ç”¨Linuxçš„/etc/crontabåšäº†åç«¯æœåŠ¡çš„å®šæ—¶é‡å¯ï¼Œä½†æ˜¯crontabé‡Œé¢æœ‰ä¸€ä¸ªè‡ªå·±çš„$PATHï¼Œå¹¶ä¸”å®ƒä¸ä¼šå»è¯»å–/etc/profileé‡Œé¢çš„è·¯å¾„ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´è¯»ä¸åˆ°æˆ‘ä»¬çš„JDKå’Œå„ç§ä¾èµ–ï¼Œè§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œåªè¦æŠŠæˆ‘ä»¬åœ¨profileé‡Œé¢å†™çš„JDKè·¯å¾„åŠ åˆ°crontabé‡Œé¢å°±è¡Œäº†</p>
</blockquote>
<h3 id="é—®é¢˜2">é—®é¢˜2</h3>
<blockquote>
<p>é—®é¢˜æè¿°ï¼šåœ¨å®é™…ä½¿ç”¨ä¸­æˆ‘ä»¬å‘ç°æå–å‡ºæ¥çš„åè®®å·åŸºæœ¬åªæœ‰0ï¼Œ6ï¼Œ17ã€‚6ä»£è¡¨TCPï¼Œ17ä»£è¡¨UDPï¼Œå‰©ä¸‹å…¶ä»–æ‰€æœ‰åè®®å…¨éƒ¨è¢«è¯†åˆ«ä¸º0ï¼Œä¾‹å¦‚ARPï¼ŒICMPï¼ŒSEPä¹‹ç±»çš„å…¨éƒ¨è¯†åˆ«ä¸º0ï¼Œè€Œä¸”ç»„æµçš„æƒ…å†µçœ‹èµ·æ¥ä¹Ÿä¸æ˜¯å¾ˆå¥½ï¼Œç»å¤§éƒ¨åˆ†åˆ—éƒ½æ˜¯å…¨ä¸º0ï¼Œç®€å•çœ‹äº†ä¸‹ä»£ç å‘ç°CICæœ¬äº‹å°±åªå¯¹æœ‰é™çš„å‡ ç§protocolåšäº†å¤„ç†ï¼Œæ³›ç”¨æ€§ä¸æ˜¯å¾ˆå¹¿ã€‚</p>
</blockquote>
<figure>
<img
src="https://zchsakura-blog.oss-cn-beijing.aliyuncs.com/202207061724179.png"
alt="protocol" />
<figcaption aria-hidden="true">protocol</figcaption>
</figure>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>CICFlowMeter</category>
      </categories>
      <tags>
        <tag>CICFlowMeter</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonå¸¸ç”¨å†…ç½®å‡½æ•°</title>
    <url>/Python%E5%B8%B8%E7%94%A8%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<p>è®°å½•Pythonå¸¸ç”¨çš„å†…ç½®å‡½æ•°</p>
<a id="more"></a>
<p>Pythonç»™æˆ‘ä»¬å†…ç½®äº†å¤§é‡åŠŸèƒ½å‡½æ•°ï¼Œå®˜æ–¹æ–‡æ¡£ä¸Šåˆ—å‡ºäº†69ä¸ªï¼Œæœ‰äº›æ˜¯æˆ‘ä»¬æ˜¯å¹³æ—¶å¼€å‘ä¸­ç»å¸¸é‡åˆ°çš„ï¼Œä¹Ÿæœ‰ä¸€äº›å‡½æ•°å¾ˆå°‘è¢«ç”¨åˆ°ï¼Œè¿™é‡Œåˆ—ä¸¾è¢«å¼€å‘è€…ä½¿ç”¨æœ€é¢‘ç¹çš„8ä¸ªå‡½æ•°ä»¥åŠä»–ä»¬çš„è¯¦ç»†ç”¨æ³•</p>
<figure>
<img
src="https:////upload-images.jianshu.io/upload_images/15801507-d86739dc54bc18fa.jpg!web?imageMogr2/auto-orient/strip%7CimageView2/2/w/550/format/webp"
alt="img" />
<figcaption aria-hidden="true">img</figcaption>
</figure>
<h3 id="print">print()</h3>
<p>printå‡½æ•°æ˜¯ä½ å­¦Pythonæ¥è§¦åˆ°çš„ç¬¬ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå°†å¯¹è±¡è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºæµï¼Œå¯å°†ä»»æ„å¤šä¸ªå¯¹è±¡æ‰“å°å‡ºæ¥ï¼Œå‡½æ•°çš„å…·ä½“å®šä¹‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(*objects, sep=<span class="string">' '</span>, end=<span class="string">'\n'</span>, file=sys.stdout, flush=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<p>objects æ˜¯å¯å˜å‚æ•°ï¼Œæ‰€ä»¥ä½ å¯ä»¥åŒæ—¶å°†ä»»æ„å¤šä¸ªå¯¹è±¡æ‰“å°å‡ºæ¥</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)  </span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>
<p>é»˜è®¤ä½¿ç”¨ç©ºæ ¼åˆ†éš”æ¯ä¸ªå¯¹è±¡ï¼Œé€šè¿‡æŒ‡å®šsepå‚æ•°å¯ä»¥ä½¿ç”¨é€—å·åˆ†éš”</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>, sep=<span class="string">','</span>)  </span><br><span class="line"><span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span></span><br></pre></td></tr></table></figure>
<p>å¯¹è±¡é»˜è®¤è¾“å‡ºçš„æ˜¯æ ‡å‡†è¾“å‡ºæµï¼Œä½ ä¹Ÿå¯ä»¥å°†å†…å®¹ä¿å­˜åˆ°æ–‡ä»¶ä¸­</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>, sep=<span class="string">','</span>, file=open(<span class="string">"hello.txt"</span>, <span class="string">"w"</span>))</span><br></pre></td></tr></table></figure>
<h3 id="isinstance">isinstance()</h3>
<p>å¯ä»¥ç”¨ isinstance
å‡½æ•°åˆ¤æ–­æŸä¸ªå¯¹è±¡æ˜¯å¦å±äºæŸä¸ªç±»çš„å®ä¾‹ï¼Œå‡½æ•°çš„å®šä¹‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">isinstance(object, classinfo)</span><br></pre></td></tr></table></figure>
<p>classinfo
æ—¢å¯ä»¥æ˜¯å•ä¸ªç±»å‹å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ç”±å¤šä¸ªç±»å‹å¯¹è±¡ç»„æˆçš„å…ƒç»„ï¼Œåªè¦objectçš„ç±»å‹æ˜¯å…ƒç»„ä¸­ä»»æ„ä¸€ä¸ªå°±è¿”å›Trueï¼Œå¦åˆ™è¿”å›False</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance(<span class="number">1</span>, (int, str))  </span><br><span class="line"><span class="literal">True</span>  </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance(<span class="string">""</span>, (int, str))  </span><br><span class="line"><span class="literal">True</span>  </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance([], dict)  </span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>
<h3 id="range">range()</h3>
<p>rangeå‡½æ•°æ˜¯ä¸ªå·¥å‚æ–¹æ³•ï¼Œç”¨äºæ„é€ ä¸€ä¸ªä»[start, stop)
ï¼ˆä¸åŒ…å«stopï¼‰ä¹‹é—´çš„è¿ç»­çš„ä¸å¯å˜çš„æ•´æ•°åºåˆ—å¯¹è±¡ï¼Œè¿™ä¸ªåºåˆ—åŠŸèƒ½ä¸Šå’Œåˆ—è¡¨éå¸¸ç±»ä¼¼ï¼Œå‡½æ•°å®šä¹‰ï¼š</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">range([start,] stop [, step]) -&gt; range object</span><br></pre></td></tr></table></figure>
<ul>
<li>start å¯é€‰å‚æ•°ï¼Œåºåˆ—çš„èµ·ç‚¹ï¼Œé»˜è®¤æ˜¯0</li>
<li>stop å¿…é€‰å‚æ•°ï¼Œåºåˆ—çš„ç»ˆç‚¹ï¼ˆä¸åŒ…å«ï¼‰</li>
<li>step å¯é€‰å‚æ•°ï¼Œåºåˆ—çš„æ­¥é•¿ï¼Œé»˜è®¤æ˜¯1ï¼Œç”Ÿæˆçš„å…ƒç´ è§„å¾‹æ˜¯ r[i] = start +
step*i</li>
</ul>
<p>ç”Ÿæˆ0~5çš„åˆ—è¡¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>range(<span class="number">5</span>)  </span><br><span class="line">range(<span class="number">0</span>, <span class="number">5</span>)     </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(range(<span class="number">5</span>))  </span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br></pre></td></tr></table></figure>
<p>é»˜è®¤ä»0å¼€å§‹ï¼Œç”Ÿæˆ0åˆ°4ä¹‹é—´çš„5ä¸ªæ•´æ•°ï¼Œä¸åŒ…å«5ï¼Œstep
é»˜è®¤æ˜¯1ï¼Œæ¯æ¬¡éƒ½æ˜¯åœ¨å‰ä¸€æ¬¡åŠ 1</p>
<p>å¦‚æœä½ æƒ³å°†æŸä¸ªæ“ä½œé‡å¤æ‰§è¡Œnéï¼Œå°±å¯ä»¥ä½¿ç”¨forå¾ªç¯é…ç½®rangeå‡½æ•°å®ç°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):  </span><br><span class="line"><span class="meta">... </span>    print(<span class="string">"hello python"</span>)  </span><br><span class="line"><span class="meta">... </span> </span><br><span class="line">hello python  </span><br><span class="line">hello python  </span><br><span class="line">hello python</span><br></pre></td></tr></table></figure>
<p>æ­¥é•¿ä¸º2</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>range(<span class="number">1</span>, <span class="number">10</span>, <span class="number">2</span>)  </span><br><span class="line">range(<span class="number">1</span>, <span class="number">10</span>, <span class="number">2</span>)  </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(range(<span class="number">1</span>, <span class="number">10</span>, <span class="number">2</span>))  </span><br><span class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>]</span><br></pre></td></tr></table></figure>
<p>èµ·ç‚¹ä»1å¼€å§‹ï¼Œç»ˆç‚¹10ï¼Œæ­¥é•¿ä¸º2ï¼Œæ¯æ¬¡éƒ½åœ¨å‰ä¸€ä¸ªå…ƒç´ çš„åŸºç¡€ä¸ŠåŠ 2ï¼Œæ„æˆ1åˆ°10ä¹‹é—´çš„å¥‡æ•°ã€‚</p>
<h3 id="enumerate">enumerate()</h3>
<p>ç”¨äºæšä¸¾å¯è¿­ä»£å¯¹è±¡ï¼ŒåŒæ—¶è¿˜å¯ä»¥å¾—åˆ°æ¯æ¬¡å…ƒç´ çš„ä¸‹è¡¨ç´¢å¼•å€¼ï¼Œå‡½æ•°å®šä¹‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">enumerate(iterable, start=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> index, value <span class="keyword">in</span> enumerate(<span class="string">"python"</span>):  </span><br><span class="line"><span class="meta">... </span>    print(index, value)  </span><br><span class="line"><span class="meta">... </span> </span><br><span class="line"><span class="number">0</span> p  </span><br><span class="line"><span class="number">1</span> y  </span><br><span class="line"><span class="number">2</span> t  </span><br><span class="line"><span class="number">3</span> h  </span><br><span class="line"><span class="number">4</span> o  </span><br><span class="line"><span class="number">5</span> n</span><br></pre></td></tr></table></figure>
<p>index é»˜è®¤ä»0å¼€å§‹ï¼Œå¦‚æœæ˜¾å¼æŒ‡å®šå‚æ•°startï¼Œä¸‹æ ‡ç´¢å¼•å°±ä»startå¼€å§‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> index, value <span class="keyword">in</span> enumerate(<span class="string">"python"</span>, start=<span class="number">1</span>):  </span><br><span class="line"><span class="meta">... </span>    print(index, value)  </span><br><span class="line"><span class="meta">... </span> </span><br><span class="line"><span class="number">1</span> p  </span><br><span class="line"><span class="number">2</span> y  </span><br><span class="line"><span class="number">3</span> t  </span><br><span class="line"><span class="number">4</span> h  </span><br><span class="line"><span class="number">5</span> o  </span><br><span class="line"><span class="number">6</span> n</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸ä½¿ç”¨enumerateå‡½æ•°ï¼Œè¦è·å–å…ƒç´ çš„ä¸‹æ ‡ç´¢å¼•ï¼Œåˆ™éœ€è¦æ›´å¤šçš„ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_enumerate</span><span class="params">(sequence, start=<span class="number">0</span>)</span>:</span>  </span><br><span class="line">    n = start  </span><br><span class="line">    <span class="keyword">for</span> e <span class="keyword">in</span> sequence:  </span><br><span class="line">        <span class="keyword">yield</span> n, e  </span><br><span class="line">        n += <span class="number">1</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> index, value <span class="keyword">in</span> my_enumerate(<span class="string">"python"</span>):  </span><br><span class="line">    print(index, value)  </span><br><span class="line"><span class="number">0</span> p  </span><br><span class="line"><span class="number">1</span> y  </span><br><span class="line"><span class="number">2</span> t  </span><br><span class="line"><span class="number">3</span> h  </span><br><span class="line"><span class="number">4</span> o  </span><br><span class="line"><span class="number">5</span> n</span><br></pre></td></tr></table></figure>
<h3 id="len">len</h3>
<p>len ç”¨äºè·å–å®¹å™¨å¯¹è±¡ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œä¾‹å¦‚åˆ¤æ–­åˆ—è¡¨æ˜¯å¦ä¸ºç©ºå¯ä»¥ç”¨ len
å‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>len([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])  </span><br><span class="line"><span class="number">3</span>  </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(<span class="string">"python"</span>)  </span><br><span class="line"><span class="number">6</span>  </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> len([]) == <span class="number">0</span>:  </span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p>å¹¶ä¸æ˜¯æ‰€æœ‰å¯¹è±¡éƒ½æ”¯æŒlenæ“ä½œçš„ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(<span class="literal">True</span>)  </span><br><span class="line">Traceback (most recent call last):  </span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;  </span><br><span class="line">TypeError: object of type <span class="string">'bool'</span> has no len()</span><br></pre></td></tr></table></figure>
<p>é™¤äº†åºåˆ—å¯¹è±¡å’Œé›†åˆå¯¹è±¡ï¼Œè‡ªå®šä¹‰ç±»å¿…é¡»å®ç°äº† <strong>len</strong>
æ–¹æ³•èƒ½ä½œç”¨åœ¨lenå‡½æ•°ä¸Š</p>
<h3 id="reversed">reversed()</h3>
<p>reversed()
åè½¬åºåˆ—å¯¹è±¡ï¼Œä½ å¯ä»¥å°†å­—ç¬¦ä¸²è¿›è¡Œåè½¬ï¼Œå°†åˆ—è¡¨è¿›è¡Œåè½¬ï¼Œå°†å…ƒç»„åè½¬</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(reversed([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]))</span><br><span class="line">[<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<h3 id="open">open()</h3>
<p>open å‡½æ•°ç”¨äºæ„é€ æ–‡ä»¶å¯¹è±¡ï¼Œæ„å»ºåå¯å¯¹å…¶è¿›è¡Œå†…å®¹çš„è¯»å†™æ“ä½œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">open(file, mode=<span class="string">'r'</span>, encoding=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>
<p>è¯»æ“ä½œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä»å½“å‰è·¯å¾„æ‰“å¼€æ–‡ä»¶ test.txtï¼Œ é»˜è®¤ä»¥è¯»çš„æ–¹å¼  </span></span><br><span class="line">&gt;&gt;&gt;f = open(<span class="string">"test.txt"</span>)  </span><br><span class="line">&gt;&gt;&gt;f.read()  </span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>æœ‰æ—¶è¿˜éœ€è¦æŒ‡å®šç¼–ç æ ¼å¼ï¼Œå¦åˆ™ä¼šé‡åˆ°ä¹±ç </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">f = open(<span class="string">"test.txt"</span>, encoding=<span class="string">'utf8'</span>)</span><br></pre></td></tr></table></figure>
<p>å†™æ“ä½œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt;f = open(<span class="string">"hello.text"</span>, <span class="string">'w'</span>, encoding=<span class="string">'utf8'</span>)  </span><br><span class="line">&gt;&gt;&gt;f.write(<span class="string">"hello python"</span>))</span><br></pre></td></tr></table></figure>
<p>æ–‡ä»¶ä¸­å­˜åœ¨å†…å®¹æ—¶åŸæ¥çš„å†…å®¹å°†åˆ«è¦†ç›–ï¼Œå¦‚æœä¸æƒ³è¢«è¦†ç›–ï¼Œç›´æ¥å°†æ–°çš„å†…å®¹è¿½åŠ åˆ°æ–‡ä»¶æœ«å°¾ï¼Œå¯ä»¥ä½¿ç”¨
a æ¨¡å¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">f = open(<span class="string">"hello.text"</span>, <span class="string">'a'</span>, encoding=<span class="string">'utf8'</span>)  </span><br><span class="line">f.write(<span class="string">"!!!"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="sorted">sorted()</h3>
<p>sroted
æ˜¯å¯¹åˆ—è¡¨è¿›è¡Œé‡æ–°æ’åºï¼Œå½“ç„¶å…¶ä»–å¯è¿­ä»£å¯¹è±¡éƒ½æ”¯æŒé‡æ–°æ’æ”¾ï¼Œè¿”å›ä¸€ä¸ªæ–°å¯¹è±¡ï¼ŒåŸå¯¹è±¡ä¿æŒä¸å˜</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>sorted([<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>])  </span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>]</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntuå®‰è£…MySQL</title>
    <url>/Ubuntu%E5%AE%89%E8%A3%85mysql/</url>
    <content><![CDATA[<p>æœåŠ¡å™¨å®‰è£…MySQLæœ‰äº›æ–¹æ³•æçš„ååˆ†éº»çƒ¦ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸ªUbuntué€‚ç”¨çš„ç®€å•çš„æ–¹æ³•ï¼ŒåŒæ—¶ä¿®æ”¹å­—ç¬¦é›†ä¸ºutf8mb4ï¼ˆæ¯•ç«ŸMySQLçš„utf8æ˜¯ä¸ªèµå“ï¼‰</p>
<a id="more"></a>
<p>å‚è€ƒ <a
href="https://blog.csdn.net/mr_hui_/article/details/88878836">Ubuntuå®‰è£…mysql</a>
<a
href="https://www.cnblogs.com/silentmuh/p/11082622.html">æ›´æ”¹æ•°æ®åº“çš„ç¼–ç ä¸ºutf8mb4</a>
<a
href="https://www.jb51.net/article/165260.htm">MySQLå­—ç¬¦é›†utf8ä¿®æ”¹ä¸ºutf8mb4çš„æ–¹æ³•æ­¥éª¤</a></p>
<h2 id="ubuntuå®‰è£…mysql">1.Ubuntuå®‰è£…MySQL</h2>
<p><strong>é¦–å…ˆæ‰§è¡Œä¸‹é¢ä¸‰æ¡å‘½ä»¤ï¼š</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt-get install mysql-server</span><br><span class="line">sudo apt install mysql-client</span><br><span class="line">sudo apt install libmysqlclient-dev</span><br></pre></td></tr></table></figure>
<p><strong>å®‰è£…æˆåŠŸåå¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸï¼š</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo netstat -tap | grep mysql</span><br></pre></td></tr></table></figure>
<p><strong>å‡ºç°å¦‚ä¸‹ä¿¡æ¯åˆ™å®‰è£…æˆåŠŸ</strong> <img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20200429135052.png"
alt="image_1b6gfob7m1u4f2i0av11afd92m9" /></p>
<p><strong>å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤è¿›å…¥MySQLæœåŠ¡ï¼š</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mysql -uroot -pä½ çš„å¯†ç </span><br></pre></td></tr></table></figure>
<p>ç°åœ¨è®¾ç½®MySQLå…è®¸è¿œç¨‹è®¿é—®ï¼Œé¦–å…ˆç¼–è¾‘æ–‡ä»¶/etc/mysql/mysql.conf.d/mysqld.cnfï¼š</p>
<p><strong>æ³¨é‡Šæ‰bind-address = 127.0.0.1ï¼š</strong></p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20200429134856.png"
alt="image_1b6ggmf7h1d6b17o11iha1j1nhtem" />
<figcaption
aria-hidden="true">image_1b6ggmf7h1d6b17o11iha1j1nhtem</figcaption>
</figure>
<p><strong>ä¿å­˜é€€å‡ºï¼Œç„¶åè¿›å…¥mysqlæœåŠ¡ï¼Œæ‰§è¡Œæˆæƒå‘½ä»¤ï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">grant all on *.* to root@&#39;%&#39; identified by &#39;ä½ çš„å¯†ç &#39; with grant option;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>
<p><strong>ç„¶åæ‰§è¡Œquitå‘½ä»¤é€€å‡ºmysqlæœåŠ¡ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤é‡å¯mysqlï¼š</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo service mysql restart</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨åœ¨windowsä¸‹å¯ä»¥ä½¿ç”¨navicatè¿œç¨‹è¿æ¥ubuntuä¸‹çš„mysqlæœåŠ¡ã€‚</p>
<h2 id="æ›´æ¢å­—ç¬¦é›†ä¸ºutf8mb4">2.æ›´æ¢å­—ç¬¦é›†ä¸ºutf8mb4</h2>
<p>utf8mb4ç¼–ç æ˜¯utf8ç¼–ç çš„è¶…é›†ï¼Œå…¼å®¹utf8ï¼Œå¹¶ä¸”èƒ½å­˜å‚¨4å­—èŠ‚çš„è¡¨æƒ…å­—ç¬¦ã€‚
é‡‡ç”¨utf8mb4ç¼–ç çš„å¥½å¤„æ˜¯ï¼šå­˜å‚¨ä¸è·å–æ•°æ®çš„æ—¶å€™ï¼Œä¸ç”¨å†è€ƒè™‘è¡¨æƒ…å­—ç¬¦çš„ç¼–ç ä¸è§£ç é—®é¢˜ã€‚</p>
<h3 id="mysqlçš„ç‰ˆæœ¬">2.1MySQLçš„ç‰ˆæœ¬</h3>
<p>utf8mb4çš„æœ€ä½mysqlç‰ˆæœ¬æ”¯æŒç‰ˆæœ¬ä¸º5.5.3+ï¼Œè‹¥ä¸æ˜¯ï¼Œè¯·å‡çº§åˆ°è¾ƒæ–°ç‰ˆæœ¬ã€‚</p>
<h3 id="mysqlé©±åŠ¨">2.2MySQLé©±åŠ¨</h3>
<p>5.1.34å¯ç”¨,æœ€ä½ä¸èƒ½ä½äº5.1.13</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SHOW VARIABLES WHERE Variable_name LIKE &#39;character_set_%&#39; OR Variable_name LIKE &#39;collation%&#39;;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20200429134724.png"
alt="20180828153217974" />
<figcaption aria-hidden="true">20180828153217974</figcaption>
</figure>
<h3 id="ä¿®æ”¹mysqlé…ç½®æ–‡ä»¶">2.3ä¿®æ”¹MySQLé…ç½®æ–‡ä»¶</h3>
<p>ä¿®æ”¹mysqlé…ç½®æ–‡ä»¶my.cnf
my.cnfä¸€èˆ¬åœ¨etc/mysql/my.cnfä½ç½®ã€‚æ‰¾åˆ°åè¯·åœ¨ä»¥ä¸‹ä¸‰éƒ¨åˆ†é‡Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[client] </span><br><span class="line">default-character-set &#x3D; utf8mb4</span><br><span class="line"></span><br><span class="line">[mysql] </span><br><span class="line">default-character-set &#x3D; utf8mb4 </span><br><span class="line"></span><br><span class="line">[mysqld] </span><br><span class="line">character-set-client-handshake &#x3D; FALSE </span><br><span class="line">character-set-server &#x3D; utf8mb4 </span><br><span class="line">collation-server &#x3D; utf8mb4_unicode_ci </span><br><span class="line">init_connect&#x3D;&#39;SET NAMES utf8mb4&#39;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œæˆ‘é‡åˆ°äº†é—®é¢˜ï¼Œé¦–å…ˆç”¨ä¸Šé¢çš„æ–¹æ³•å®‰è£…çš„mysqlçš„my.cnfé‡Œé¢å¹¶æ²¡æœ‰å®é™…çš„ä¸œè¥¿è€Œæ˜¯è¿›è¡Œå¼•å…¥</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">!includedir &#x2F;etc&#x2F;mysql&#x2F;conf.d&#x2F;</span><br><span class="line">!includedir &#x2F;etc&#x2F;mysql&#x2F;mysql.conf.d&#x2F;</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥æˆ‘å»è¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹æ‰¾åˆ°äº†ç›¸åº”çš„å†…å®¹è¿›è¡Œäº†ä¿®æ”¹è¿˜æœ‰ä¸€ä¸ªæ˜¯åœ¨my.cnfçš„åŒçº§æ–‡ä»¶<code>debian.cnf</code>ä¸­</p>
<p><strong>ä½†æ˜¯ï¼ï¼ï¼</strong></p>
<p>æˆ‘ä¿®æ”¹å®Œä¹‹åä½¿ç”¨<code>service mysqld restart</code>è¯´æ²¡æœ‰mysqldï¼Œç„¶åæˆ‘æŸ¥äº†ä¸€ä¸‹æˆ‘è¿™ç§å®‰è£…æ–¹å¼åº”è¯¥ä½¿ç”¨<code>service mysql restart</code>,ä½†æ˜¯æˆ‘ä½¿ç”¨äº†ä¹‹åæŠ¥é”™ï¼Œç¬¬ä¸€æ˜¯å› ä¸ºæƒé™é—®é¢˜ï¼Œè¿™ä¸ªå¯ä»¥çœ‹é”™è¯¯æ—¥å¿—å‘ç°ï¼Œç¬¬äºŒå°±æ˜¯ä¸Šé¢æ·»åŠ çš„å†…å®¹æœ‰é—®é¢˜ï¼Œé—®é¢˜å‡ºåœ¨[mysqld]é‡Œï¼Œå…·ä½“åŸå› æ˜¯ä»€ä¹ˆæˆ‘ä¹Ÿä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œæˆ‘åˆæ¢äº†ä¸€ä¸ªç‰ˆæœ¬å‘ç°å¯ä»¥</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[client] </span><br><span class="line">default-character-set&#x3D;utf8mb4 </span><br><span class="line">  </span><br><span class="line">[mysqld] </span><br><span class="line">character-set-server &#x3D; utf8mb4 </span><br><span class="line">collation-server &#x3D; utf8mb4_unicode_ci </span><br><span class="line">init_connect&#x3D;&#39;SET NAMES utf8mb4&#39;</span><br><span class="line">skip-character-set-client-handshake &#x3D; true </span><br><span class="line"># ä¸€ä¸ªæ˜¯è‡ªå·±ä¸ºfalseä¸€ä¸ªæ˜¯skipè‡ªå·±ä¸ºtrueï¼Œæ„Ÿè§‰ä¸Šä¸€æ ·çš„ï¼Œä¸çŸ¥é“å•¥æ„æ€</span><br><span class="line">  </span><br><span class="line">[mysql] </span><br><span class="line">default-character-set &#x3D; utf8mb4</span><br></pre></td></tr></table></figure>
<p><strong>æœ€å</strong></p>
<p>è¿›å»mysqlä¹‹åä½¿ç”¨</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SHOW VARIABLES WHERE Variable_name LIKE &#39;character_set_%&#39; OR Variable_name LIKE &#39;collation%&#39;;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20200429124058.png"
alt="image-20200429124011522" />
<figcaption aria-hidden="true">image-20200429124011522</figcaption>
</figure>
<p><strong>å¤§åŠŸå‘Šæˆ Peace</strong></p>
<h2 id="è¡¥å……">3.è¡¥å……</h2>
<h3 id="ä¿®æ”¹databaseé»˜è®¤çš„å­—ç¬¦é›†">3.1ä¿®æ”¹databaseé»˜è®¤çš„å­—ç¬¦é›†</h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ALTER DATABASE database_name CHARACTER SET &#x3D; utf8mb4 COLLATE &#x3D; utf8mb4_unicode_ci</span><br></pre></td></tr></table></figure>
<p>è™½ç„¶ä¿®æ”¹äº†databaseçš„å­—ç¬¦é›†ä¸ºutf8mb4ï¼Œä½†æ˜¯å®é™…åªæ˜¯ä¿®æ”¹äº†databaseæ–°åˆ›å»ºçš„è¡¨ï¼Œé»˜è®¤ä½¿ç”¨utf8mb4ï¼ŒåŸæ¥å·²ç»å­˜åœ¨çš„è¡¨ï¼Œå­—ç¬¦é›†å¹¶æ²¡æœ‰è·Ÿç€æ”¹å˜ï¼Œéœ€è¦æ‰‹åŠ¨ä¸ºæ¯å¼ è¡¨è®¾ç½®å­—ç¬¦é›†</p>
<h3 id="ä¿®æ”¹tableçš„å­—ç¬¦é›†">3.2ä¿®æ”¹tableçš„å­—ç¬¦é›†</h3>
<ul>
<li>åªä¿®æ”¹è¡¨é»˜è®¤çš„å­—ç¬¦é›†
<code>ALTER TABLE table_name DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;</code></li>
<li>ä¿®æ”¹è¡¨é»˜è®¤çš„å­—ç¬¦é›†å’Œæ‰€æœ‰å­—ç¬¦åˆ—çš„å­—ç¬¦é›†
<code>ALTER TABLE table_name CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;</code></li>
</ul>
<h3 id="å•ç‹¬ä¿®æ”¹columné»˜è®¤çš„å­—ç¬¦é›†">3.3å•ç‹¬ä¿®æ”¹columné»˜è®¤çš„å­—ç¬¦é›†</h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ALTER TABLE table_name CHANGE column_name column_name VARCHAR(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;</span><br></pre></td></tr></table></figure>
<p><em>æ³¨ï¼šVARCHAR(191) æ ¹æ®å­—æ®µå®ä¾‹çš„ç±»å‹å¡«å†™</em></p>
<h3 id="å…³äºutf8mb4å¤–é”®çš„å‘">3.4å…³äºutf8mb4å¤–é”®çš„å‘</h3>
<p>ä¸Šä¸ªå­¦æœŸåšè¯¾ç¨‹è®¾è®¡çš„æ—¶å€™æœ‰ä¸€äº›å¤–é”®åˆ›å»ºä¸äº†ï¼Œæ ¹æ®æˆ‘å±‚å±‚æŠ½ä¸å‰¥èŒ§æœ€åå‘ç°é—®é¢˜åœ¨äºutf8mb4ä¸Šï¼Œä½†å…·ä½“æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä¹Ÿä¸æ˜¯å¾ˆæ¸…æ¥šã€‚ä»Šå¤©åœ¨è¯¥å­—ç¬¦é›†çš„æ—¶å€™åœ¨ä¸€ç¯‡æ–‡ç« é‡Œæ‰¾åˆ°äº†åŸå› ã€‚</p>
<p>å¤–é”®çš„å‰ææ˜¯ç´¢å¼•ï¼Œå½“ç´¢å¼•æ— æ³•åˆ›å»ºçš„æ—¶å€™å¤–é”®è‡ªç„¶æ— æ³•åˆ›å»ºï¼Œä¹‹å‰åœ¨utf8çš„æ—¶å€™<code>VARCHAR(255)</code>æ˜¯å¯ä»¥åˆ›å»ºå¤–é”®çš„ï¼Œä½†æ˜¯å˜æˆäº†utf8mb4å255ä¸ªå­—ç¬¦è¶…å‡ºäº†ç´¢å¼•çš„é•¿åº¦çš„é™åˆ¶ï¼Œå¿…é¡»æ”¹ä¸º<code>VARCHAR(191)</code></p>
<ul>
<li>å­—æ®µé•¿åº¦</li>
</ul>
<p>ç”±äºä»utf8å‡çº§åˆ°äº†utf8mb4ï¼Œä¸€ä¸ªå­—ç¬¦æ‰€å ç”¨çš„ç©ºé—´ä¹Ÿç”±3ä¸ªå­—èŠ‚å¢é•¿åˆ°4ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯æˆ‘ä»¬å½“åˆåˆ›å»ºè¡¨æ—¶ï¼Œè®¾ç½®çš„å­—æ®µç±»å‹ä»¥åŠæœ€å¤§çš„é•¿åº¦æ²¡æœ‰æ”¹å˜ã€‚ä¾‹å¦‚ï¼Œä½ åœ¨utf8ä¸‹è®¾ç½®æŸä¸€å­—æ®µçš„ç±»å‹ä¸º<code>TINYTEXT</code>,
è¿™ä¸­å­—æ®µç±»å‹æœ€å¤§å¯ä»¥å®¹çº³255å­—èŠ‚ï¼Œä¸‰ä¸ªå­—èŠ‚ä¸€ä¸ªå­—ç¬¦çš„æƒ…å†µä¸‹å¯ä»¥å®¹çº³85ä¸ªå­—ç¬¦ï¼Œå››ä¸ªå­—èŠ‚ä¸€ä¸ªå­—ç¬¦çš„æƒ…å†µä¸‹åªèƒ½å®¹çº³63ä¸ªå­—ç¬¦ï¼Œå¦‚æœåŸè¡¨ä¸­çš„è¿™ä¸ªå­—æ®µçš„å€¼æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè¶…è¿‡äº†63ä¸ªå­—ç¬¦ï¼Œé‚£ä¹ˆè½¬æ¢æˆutf8mb4å­—ç¬¦ç¼–ç æ—¶å°†è½¬æ¢å¤±è´¥ï¼Œä½ å¿…é¡»å…ˆå°†<code>TINYTEXT</code>æ›´æ”¹ä¸º<code>TEXT</code>ç­‰æ›´é«˜å®¹é‡çš„ç±»å‹ä¹‹åæ‰èƒ½ç»§ç»­è½¬æ¢å­—ç¬¦ç¼–ç </p>
<ul>
<li>ç´¢å¼•</li>
</ul>
<p>åœ¨InnoDBå¼•æ“ä¸­ï¼Œæœ€å¤§çš„ç´¢å¼•é•¿åº¦ä¸º767å­—èŠ‚ï¼Œä¸‰ä¸ªå­—èŠ‚ä¸€ä¸ªå­—ç¬¦çš„æƒ…å†µä¸‹ï¼Œç´¢å¼•åˆ—çš„å­—ç¬¦é•¿åº¦æœ€å¤§å¯ä»¥è¾¾åˆ°255ï¼Œå››ä¸ªå­—èŠ‚ä¸€ä¸ªå­—ç¬¦çš„æƒ…å†µä¸‹ï¼Œç´¢å¼•çš„å­—ç¬¦é•¿åº¦æœ€å¤§åªèƒ½åˆ°191ã€‚å¦‚æœä½ å·²ç»å­˜åœ¨çš„è¡¨ä¸­çš„ç´¢å¼•åˆ—çš„ç±»å‹ä¸º<code>VARCHAR(255)</code>é‚£ä¹ˆè½¬æ¢utf8mb4æ—¶åŒæ ·ä¼šè½¬æ¢å¤±è´¥ã€‚ä½ éœ€è¦å…ˆå°†<code>VARCHAR(255)</code>æ›´æ”¹ä¸º<code>VARCHAR(191)</code>æ‰èƒ½ç»§ç»­è½¬æ¢å­—ç¬¦ç¼–ç </p>
<h3
id="ä½¿ç”¨pythonæ“ä½œmysqlä¹‹1064é”™è¯¯">3.5ä½¿ç”¨Pythonæ“ä½œmysqlä¹‹1064é”™è¯¯</h3>
<p>æˆ‘ä»Šå¤©ä½¿ç”¨pythonæ“ä½œmysqlçš„æ—¶å€™åˆå‡ºç°äº†1064é”™è¯¯ï¼Œä¹‹å‰æœ‰ä¸€æ¬¡ä¹Ÿå‡ºç°äº†è¿™ä¸ªé—®é¢˜ï¼Œä¸Šæ¬¡å‘ç°åº”è¯¥æ˜¯ä¸sqlè¯­å¥çš„æ’å…¥æ•°æ®æ–¹å¼æœ‰é—®é¢˜ï¼Œä¸Šä¸ªå­¦æœŸæ˜¯ä½¿ç”¨çš„formatå‘sqlè¯­å¥ä¸­æ’å…¥å‚æ•°çš„ï¼Œç”±äºä¸Šä¸ªå­¦æœŸçš„å‚æ•°å†…å®¹æ¯”è¾ƒç®€å•ä¹Ÿæ²¡å‡ºä»€ä¹ˆé—®é¢˜ï¼Œè¿™æ¬¡æ’å…¥ä¸€é•¿æ®µå¸¦ç¬¦å·çš„æ–‡å­—æ—¶å°±å‡ºäº†é—®é¢˜ï¼Œä»Šå¤©ç»è¿‡å¯¹æ¯”æˆ‘æ‰çŸ¥é“é—®é¢˜åœ¨å“ªã€‚</p>
<figure class="highlight python"><figcaption><span>é”™è¯¯æ–¹æ³•</span></figcaption><table><tr><td class="code"><pre><span class="line">sql3 = <span class="string">"INSERT INTO user_userInfo(nickname) VALUES('&#123;&#125;')"</span>.format(dd[<span class="number">3</span>])</span><br><span class="line">	<span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">        cursor.execute(sql3)</span><br><span class="line">        <span class="comment"># æäº¤ä¿®æ”¹</span></span><br><span class="line">        db.commit()</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="comment"># å‘ç”Ÿé”™è¯¯æ—¶å›æ»š</span></span><br><span class="line">        db.rollback()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><figcaption><span>æ­£ç¡®æ–¹æ³•</span></figcaption><table><tr><td class="code"><pre><span class="line">sql3 = <span class="string">"INSERT INTO user_userInfo(nickname) VALUES(%s)"</span></span><br><span class="line">	<span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">        cursor.execute(sql3, dd[<span class="number">3</span>])</span><br><span class="line">        <span class="comment"># æäº¤ä¿®æ”¹</span></span><br><span class="line">        db.commit()</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="comment"># å‘ç”Ÿé”™è¯¯æ—¶å›æ»š</span></span><br><span class="line">        db.rollback()</span><br></pre></td></tr></table></figure>
<p>å¤§å®¶å¯ä»¥çœ‹åˆ°è¿™ä¸¤è€…çš„åŒºåˆ«å°±åœ¨äºæ’å…¥å‚æ•°çš„æ–¹å¼ï¼Œç¬¬ä¸€ç§æ–¹å¼å¤§å¤šæ•°æ—¶é—´æ˜¯æ²¡é”™çš„ï¼Œä½†æ˜¯ä¸€æ—¦é‡åˆ°dd[3]é‡Œé¢æœ¬æ¥å°±å¸¦æœ‰ä¸€äº›ç‰¹æ®Šç¬¦å·æ¯”å¦‚<code>/</code>,<code>'</code>ä¹‹ç±»çš„å°±ä¼šæŠ¥é”™ã€‚è€Œæ˜¯ç”¨ç¬¬äºŒç§æ–¹å¼åˆ™ä¸ä¼šå­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼Œè¦æ³¨æ„ç¬¬äºŒç§æ–¹å¼ä¸è¦åœ¨<code>%s</code>å‘¨å›´åŠ <code>''</code>ã€‚</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>Ubuntu</tag>
        <tag>utf8mb4</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoå­¦ä¹ ç¬”è®°</title>
    <url>/Django%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<p>è®°å½•Djangoå­¦ä¹ ç¬”è®°</p>
<p>https://www.bilibili.com/video/BV1rx411X717</p>
<a id="more"></a>
<h3 id="åˆ›å»ºå·¥ç¨‹">åˆ›å»ºå·¥ç¨‹</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">django-admin startproject HelloDjango</span><br></pre></td></tr></table></figure>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20200513182816.png"
alt="image-20200513182805245" />
<figcaption aria-hidden="true">image-20200513182805245</figcaption>
</figure>
<h3 id="åˆ›å»ºåº”ç”¨">åˆ›å»ºåº”ç”¨</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python manage.py startapp App</span><br></pre></td></tr></table></figure>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20200513182932.png"
alt="image-20200513182930988" />
<figcaption aria-hidden="true">image-20200513182930988</figcaption>
</figure>
<p>åœ¨setting.pyä¸­æ³¨å†Œåº”ç”¨ï¼š</p>
<figure class="highlight diff"><figcaption><span>setting.py</span></figcaption><table><tr><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    'django.contrib.admin',</span><br><span class="line">    'django.contrib.auth',</span><br><span class="line">    'django.contrib.contenttypes',</span><br><span class="line">    'django.contrib.sessions',</span><br><span class="line">    'django.contrib.messages',</span><br><span class="line">    'django.contrib.staticfiles',</span><br><span class="line"><span class="addition">+   'learn1',</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="å¼€å‘è€…æœåŠ¡å™¨">å¼€å‘è€…æœåŠ¡å™¨</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python manage.py runserver <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">8000</span></span><br></pre></td></tr></table></figure>
<h3 id="å…è®¸è®¿é—®èŒƒå›´">å…è®¸è®¿é—®èŒƒå›´</h3>
<figure class="highlight python"><figcaption><span>settings.py</span></figcaption><table><tr><td class="code"><pre><span class="line">ALLOWED_HOSTS = [<span class="string">"*"</span>]</span><br></pre></td></tr></table></figure>
<h3 id="è¯­è¨€å’Œæ—¶åŒºè®¾ç½®">è¯­è¨€å’Œæ—¶åŒºè®¾ç½®</h3>
<figure class="highlight python"><figcaption><span>settings.py</span></figcaption><table><tr><td class="code"><pre><span class="line">LANGUAGE_CODE = <span class="string">'zh-hans'</span></span><br><span class="line"></span><br><span class="line">TIME_ZONE = <span class="string">'Asia/Shanghai'</span></span><br></pre></td></tr></table></figure>
<h3 id="è¿ç§»">è¿ç§»</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure>
<h3 id="æ³¨å†Œè·¯ç”±">æ³¨å†Œè·¯ç”±</h3>
<figure class="highlight python"><figcaption><span>urls.py</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> learn1 <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'admin/'</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">'hello/'</span>, views.hello),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><figcaption><span>views.py</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"hello Django"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="htmlæ¨¡æ¿">htmlæ¨¡æ¿</h3>
<p>ä¸¤ç§</p>
<ul>
<li>åœ¨Appä¸­è¿›è¡Œæ¨¡æ¿é…ç½®
<ul>
<li>åªéœ€åœ¨Appçš„æ ¹ç›®å½•åˆ›å»ºtemplatesæ–‡ä»¶å¤¹å³å¯</li>
<li>å¦‚æœæƒ³è®©ä»£ç è‡ªåŠ¨æç¤ºï¼Œæˆ‘ä»¬åº”è¯¥æ ‡è®°æ–‡ä»¶å¤¹ä¸ºæ¨¡æ¿æ–‡ä»¶å¤¹</li>
</ul></li>
<li>åœ¨é¡¹ç›®ç›®å½•ä¸­è¿›è¡Œæ¨¡æ¿é…ç½®
<ul>
<li>éœ€è¦åœ¨é¡¹ç›®ç›®å½•ä¸­åˆ›å»ºtemplatesæ–‡ä»¶å¤¹å¹¶æ ‡è®°</li>
<li>éœ€è¦åœ¨settingsä¸­è¿›è¡Œæ³¨å†Œ</li>
</ul></li>
<li>åœ¨å¼€å‘ä¸­ä½¿ç”¨ç¬¬äºŒç§
<ul>
<li>æ¨¡æ¿å¯ä»¥ç»§æ‰¿ï¼Œå¤ç”¨</li>
</ul></li>
</ul>
<hr />
<p>åœ¨HelloDjangoä¸­æ–°å»ºtemplatesæ–‡ä»¶å¤¹å¹¶è®¾ç½®ä¸ºæ¨¡æ¿æ–‡ä»¶å¤¹ï¼ˆæ–¹ä¾¿ä»£ç æç¤ºï¼‰ï¼Œåœ¨å…¶ä¸­æ–°å»ºhtmlæ¨¡æ¿</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20200518175701.png"
alt="image-20200518175638301" />
<figcaption aria-hidden="true">image-20200518175638301</figcaption>
</figure>
<p>ç„¶åå†settings.pyä¸­åŠ å…¥templatesè·¯å¾„</p>
<figure class="highlight diff"><figcaption><span>settings.py</span></figcaption><table><tr><td class="code"><pre><span class="line">TEMPLATES = [</span><br><span class="line">    &#123;</span><br><span class="line">        'BACKEND': 'django.template.backends.django.DjangoTemplates',</span><br><span class="line">        'DIRS': [</span><br><span class="line"><span class="addition">+           os.path.join(BASE_DIR, 'templates'),</span></span><br><span class="line">        ],</span><br><span class="line">        'APP_DIRS': True,</span><br><span class="line">        'OPTIONS': &#123;</span><br><span class="line">            'context_processors': [</span><br><span class="line">                'django.template.context_processors.debug',</span><br><span class="line">                'django.template.context_processors.request',</span><br><span class="line">                'django.contrib.auth.context_processors.auth',</span><br><span class="line">                'django.contrib.messages.context_processors.messages',</span><br><span class="line">            ],</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p><strong>HTMLå°æŠ€å·§ï¼š</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">ul&gt;li*4(tabé”®)</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li&gt;ä»Šå¤©&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;å¤©æ°”&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;çœŸå¥½&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;å˜¿å˜¿å˜¿&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ†å‘è·¯ç”±">åˆ†å‘è·¯ç”±</h3>
<p>è¿™æ ·å°±å¯ä»¥è®¿é—®ip/learn2/helloäº†</p>
<ul>
<li>é¡¹ç›®å¦‚æœé€»è¾‘è¿‡äºå¤æ‚ï¼Œå¯ä»¥è¿›è¡Œæ‹†åˆ†</li>
<li>æ‹†åˆ†ä¸ºå¤šä¸ªApp</li>
<li>ç»§ç»­æ‹†åˆ†è·¯ç”±å™¨ urls
<ul>
<li>åœ¨Appä¸­åˆ›å»ºè‡ªå·±çš„urls
<ul>
<li>urlpatterns è·¯ç”±è§„åˆ™åˆ—è¡¨</li>
<li>åœ¨æ ¹urlsä¸­è¿›è¡Œå­è·¯ç”±çš„åŒ…å«</li>
</ul></li>
<li>å­è·¯ç”±ä½¿ç”¨
<ul>
<li>æ ¹è·¯ç”±è§„åˆ™ + å­è·¯ç”±çš„è§„åˆ™</li>
</ul></li>
</ul></li>
</ul>
<hr />
<p>åœ¨æ–°å»ºçš„åº”ç”¨learn2é‡Œé¢æ–°å»ºurls.py</p>
<figure class="highlight python"><figcaption><span>learn2/urls.py</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> learn2 <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'hello/'</span>, views.hello),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>åœ¨HelloDjangoçš„urls.pyä¸­å¯¼å…¥learn2ä¸­çš„è·¯ç”±</p>
<figure class="highlight diff"><figcaption><span>HelloDjango/urls.py</span></figcaption><table><tr><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">    path('admin/', admin.site.urls),</span><br><span class="line">    path('hello/', views.hello),</span><br><span class="line">    path('index/', views.index),</span><br><span class="line"><span class="addition">+   path('learn2/', include('learn2.urls')),</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="models-ä½¿ç”¨äº†ormæŠ€æœ¯">models ä½¿ç”¨äº†ORMæŠ€æœ¯</h3>
<ul>
<li>Object Relational Mapping å¯¹è±¡å…³ç³»æ˜ å°„</li>
<li>å°†ä¸šåŠ¡é€»è¾‘è¿›è¡Œäº†ä¸€ä¸ªè§£è€¦åˆ
<ul>
<li>object.save()</li>
<li>object.delete()</li>
</ul></li>
<li>å…³ç³»å‹æ•°æ®åº“
<ul>
<li>DDL</li>
<li>é€šè¿‡modelså®šä¹‰å®ç° æ•°æ®åº“è¡¨çš„å®šä¹‰</li>
</ul></li>
<li>æ•°æ®æ“ä½œ
<ul>
<li>å¢åˆ æ”¹æŸ¥</li>
<li>å­˜å‚¨
<ul>
<li>save()</li>
</ul></li>
<li>æŸ¥è¯¢
<ul>
<li>æŸ¥æ‰€æœ‰ objects.all()</li>
<li>æŸ¥å•ä¸ª objects.get(pk=xx)</li>
</ul></li>
<li>æ›´æ–°
<ul>
<li>åŸºäºæŸ¥è¯¢çš„</li>
<li>æŸ¥å¥½çš„å¯¹è±¡ï¼Œä¿®æ”¹å±æ€§ï¼Œç„¶åsave()</li>
</ul></li>
<li>åˆ é™¤
<ul>
<li>åŸºäºæŸ¥è¯¢çš„</li>
<li>è°ƒç”¨ delete()</li>
</ul></li>
</ul></li>
</ul>
<h3 id="å¿«æ·é”®">å¿«æ·é”®</h3>
<ul>
<li>control + p
<ul>
<li>å‚æ•°æç¤º</li>
</ul></li>
</ul>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20200608171058.png"
alt="image-20200608171048103" />
<figcaption aria-hidden="true">image-20200608171048103</figcaption>
</figure>
<ul>
<li>shift + f6 é‡å‘½åï¼Œé‡æ„</li>
<li>.re å¿«æ·ç”Ÿæˆreturn</li>
<li>.if å¤šç”¨ç‚¹çœ‹çœ‹ä¸–ç•Œçš„ç¾å¥½</li>
</ul>
<h3 id="è¿æ¥mysqlé©±åŠ¨">è¿æ¥mysqlé©±åŠ¨</h3>
<ul>
<li>mysqlclient
<ul>
<li>python2,3éƒ½èƒ½ç›´æ¥ä½¿ç”¨</li>
<li>è‡´å‘½ç¼ºç‚¹
<ul>
<li>å¯¹mysqlå®‰è£…æœ‰è¦æ±‚ï¼Œå¿…é¡»æŒ‡å®šä½ç½®å­˜åœ¨é…ç½®æ–‡ä»¶</li>
</ul></li>
</ul></li>
<li>python-mysql
<ul>
<li>python2 æ”¯æŒå¾ˆå¥½</li>
<li>python3 ä¸æ”¯æŒ</li>
</ul></li>
<li>pymysql
<ul>
<li>python2ï¼Œpython3éƒ½æ”¯æŒ</li>
<li>å®ƒè¿˜å¯ä»¥ä¼ªè£…æˆå‰é¢çš„åº“</li>
</ul></li>
</ul>
<figure class="highlight python"><figcaption><span>__init__.py</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line">pymysql.version_info = (<span class="number">1</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="string">'final'</span>, <span class="number">0</span>)  <span class="comment"># change mysqlclient version</span></span><br><span class="line">pymysql.install_as_MySQLdb()</span><br></pre></td></tr></table></figure>
<h3 id="é‡æ–°å»ºç«‹-migration-æ–‡ä»¶">é‡æ–°å»ºç«‹ migration æ–‡ä»¶</h3>
<p>1.é¦–å…ˆè¦ä¿è¯,ç›®å‰çš„migrationæ–‡ä»¶å’Œæ•°æ®åº“æ˜¯åŒæ­¥çš„ï¼Œé€šè¿‡æ‰§è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">python manage.py makemigrations</span><br></pre></td></tr></table></figure>
<p>å¦‚æœçœ‹åˆ° è¿™æ ·çš„æç¤º: No changes detectedï¼Œåˆ™å¯ä»¥ç»§ç»­æ¥ä¸‹æ¥çš„æ­¥éª¤</p>
<p>2.é€šè¿‡æ‰§è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">python manage.py showmigrations</span><br></pre></td></tr></table></figure>
<p>ç»“æœï¼Œå¯ä»¥çœ‹åˆ°å½“å‰é¡¹ç›®ï¼Œæ‰€æœ‰çš„appåŠå¯¹åº”çš„å·²ç»ç”Ÿæ•ˆçš„migrationæ–‡ä»¶å¦‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git_hook</span><br><span class="line"> [X] 0001_initial</span><br><span class="line">guardian</span><br><span class="line"> [X] 0001_initial</span><br><span class="line">kombu_transport_django</span><br><span class="line"> [X] 0001_initial</span><br><span class="line">message</span><br><span class="line"> (no migrations)</span><br><span class="line">order</span><br><span class="line"> [X] 0001_initial</span><br><span class="line">pay</span><br><span class="line"> [X] 0001_initial</span><br><span class="line"> [x] 0002_add_model</span><br><span class="line">sessions</span><br><span class="line"> [X] 0001_initial</span><br></pre></td></tr></table></figure>
<p>3.é€šè¿‡æ‰§è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">python manage.py migrate â€“fake pay zero</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„ payå°±æ˜¯ä½ è¦é‡ç½®çš„app 4.ä¹‹åå†æ‰§è¡Œ
<code>python manage.pu showmigrations</code>ï¼Œä½ ä¼šå‘ç° æ–‡ä»¶å‰çš„ [x]
å˜æˆäº†[ ]</p>
<p>ç°åœ¨ï¼Œä½ å¯ä»¥åˆ é™¤pay è¿™ä¸ª appä¸‹çš„migrationsæ¨¡å—ä¸­ é™¤ init.py
ä¹‹å¤–çš„æ‰€æœ‰æ–‡ä»¶ã€‚</p>
<p>5.ä¹‹åï¼Œæ‰§è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">python manage.py makemigrations</span><br></pre></td></tr></table></figure>
<p>ç¨‹åºä¼šå†æ¬¡ä¸ºè¿™ä¸ªapp ç”Ÿæˆ 0001_initial.py ä¹‹ç±»çš„æ–‡ä»¶</p>
<p>6.æœ€é‡è¦çš„ä¸€æ­¥æ¥äº†, æ‰§è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">python manage.py migrate â€“fake-inital</span><br></pre></td></tr></table></figure>
<p>â€“fake-inital ä¼šåœ¨æ•°æ®åº“ä¸­çš„ migrationsè¡¨ä¸­è®°å½•å½“å‰è¿™ä¸ªapp æ‰§è¡Œåˆ°
0001_initial.py ï¼Œä½†æ˜¯å®ƒä¸ä¼šçœŸçš„æ‰§è¡Œè¯¥æ–‡ä»¶ä¸­çš„ ä»£ç ã€‚
è¿™æ ·å°±åšåˆ°äº†ï¼Œæ—¢ä¸å¯¹ç°æœ‰çš„æ•°æ®åº“æ”¹åŠ¨ï¼Œè€Œåˆå¯ä»¥é‡ç½® migraion
æ–‡ä»¶ï¼Œå¦ˆå¦ˆå†ä¹Ÿä¸ç”¨åœ¨ migrationæ¨¡å—ä¸­çœ‹åˆ°ä¸€æ¨æ–‡ä»¶äº†ã€‚</p>
<h3 id="é‡æ–°ç”Ÿæˆæ•°æ®åº“ä¸­çš„æŸå¼ è¡¨">é‡æ–°ç”Ÿæˆæ•°æ®åº“ä¸­çš„æŸå¼ è¡¨</h3>
<p>1.åˆ é™¤æ•°æ®åº“ä¸­çš„django_migration è¡¨ä¸­å¯¹åº”çš„è®°å½•ä»¥åŠä½ è¦é‡æ–°å¯¼çš„è¡¨</p>
<p>2.å°†ä½ è¦å¯¼çš„é‚£ä¸ªappä¸­çš„migrate æ–‡ä»¶åˆ é™¤æ‰</p>
<p>3.é‡æ–°å¯¼å…¥ä½ éœ€è¦çš„è¡¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">python manage.py makemigration shop(ä½ è¦å¯¼çš„app)</span><br><span class="line">python manage.py migrate shop</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å®Œæˆäº†ã€‚</p>
<h3 id="è¡¨å…³ç³»">è¡¨å…³ç³»</h3>
<ul>
<li><p>åˆ†ç±»</p>
<ul>
<li><p>ForeignKeyï¼šä¸€å¯¹å¤šï¼Œå°†å­—æ®µå®šä¹‰åœ¨å¤šçš„ç«¯ä¸­</p></li>
<li><p>ManyToManyFieldï¼šå¤šå¯¹å¤šï¼Œå°†å­—æ®µå®šä¹‰åœ¨ä¸¤ç«¯</p></li>
<li><p>OneToOneFieldï¼šä¸€å¯¹ä¸€ï¼Œå°†å­—æ®µå®šä¹‰åœ¨ä»»æ„ä¸€ç«¯ä¸­</p></li>
</ul></li>
<li><p>ç”¨ä¸€è®¿é—®å¤š</p>
<ul>
<li>æ ¼å¼
<ul>
<li>å¯¹è±¡.æ¨¡å‹ç±»å°å†™_set</li>
</ul></li>
<li>ç¤ºä¾‹
<ul>
<li>grade.students_set</li>
</ul></li>
</ul></li>
<li><p>ç”¨ä¸€è®¿é—®ä¸€</p>
<ul>
<li>æ ¼å¼
<ul>
<li>å¯¹è±¡.æ¨¡å‹ç±»å°å†™</li>
</ul></li>
<li>ç¤ºä¾‹
<ul>
<li>grade.students</li>
</ul></li>
</ul></li>
<li><p>è®¿é—®id</p>
<ul>
<li>æ ¼å¼
<ul>
<li>å¯¹è±¡.å±æ€§_id</li>
</ul></li>
<li>ç¤ºä¾‹
<ul>
<li>student.sgrade_id</li>
</ul></li>
</ul></li>
</ul>
<h3 id="æ¨¡å‹è¿‡æ»¤">æ¨¡å‹è¿‡æ»¤</h3>
<ul>
<li>filter()ï¼šè¿”å›ç¬¦åˆç­›é€‰æ¡ä»¶çš„ç»“æœ</li>
<li>exclude()ï¼šè¿”å›ä¸ç¬¦åˆç­›é€‰æ¡ä»¶çš„ç»“æœ</li>
<li>all()ï¼šè¿”å›æ‰€æœ‰æ•°æ®</li>
<li>order_by('id')ï¼šæ’åºï¼Œå¦‚æœè¦é€†åºå°±åŠ ä¸ª<code>-</code></li>
<li>values()ï¼šä¸€æ¡æ•°æ®å°±æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œè¿”å›ä¸€ä¸ªåˆ—è¡¨</li>
<li>è¿ç»­ä½¿ç”¨
<ul>
<li>é“¾å¼è°ƒç”¨</li>
<li>Person.objects.filter().filter().xxxx.eclude().exclude().yyyy</li>
</ul></li>
</ul>
<h3 id="æ–¹æ³•">æ–¹æ³•</h3>
<ul>
<li><p>å¯¹è±¡æ–¹æ³•</p>
<ul>
<li>å¯ä»¥è°ƒç”¨å¯¹è±¡çš„å±æ€§ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨ç±»çš„å±æ€§</li>
</ul></li>
<li><p>ç±»æ–¹æ³•</p>
<ul>
<li>ä¸èƒ½è°ƒç”¨å¯¹è±¡å±æ€§ï¼Œåªèƒ½è°ƒç”¨ç±»å±æ€§</li>
</ul>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@classmethod</span><br><span class="line">def create(cls, p_name, p_age&#x3D;100):</span><br><span class="line">	return cls(p_name&#x3D;p_name, p_age&#x3D;p_age)</span><br></pre></td></tr></table></figure></p></li>
<li><p>é™æ€æ–¹æ³•</p>
<ul>
<li>å•¥éƒ½ä¸èƒ½è°ƒç”¨ï¼Œä¸èƒ½è·å–å¯¹è±¡å±æ€§ï¼Œä¹Ÿä¸èƒ½è·å–ç±»å±æ€§</li>
<li>åªæ˜¯å¯„ç”Ÿåœ¨æˆ‘ä»¬è¿™ä¸ªç±»ä¸Šè€Œå·²</li>
</ul></li>
</ul>
<h3 id="è·å–å•ä¸ªå¯¹è±¡">è·å–å•ä¸ªå¯¹è±¡</h3>
<ul>
<li>get
<ul>
<li>æŸ¥è¯¢æ¡ä»¶æ²¡æœ‰åŒ¹é…çš„å¯¹è±¡ï¼Œä¼šæŠ›å¼‚å¸¸ï¼ŒDoesNotExist</li>
<li>å¦‚æœæŸ¥è¯¢æ¡ä»¶å¯¹åº”å¤šä¸ªå¯¹è±¡ï¼Œä¼šæŠ›å¼‚å¸¸ï¼ŒMultipleObjectsReturned</li>
</ul></li>
<li>first</li>
<li>last</li>
<li>count</li>
<li>exist</li>
</ul>
<h3 id="firstå’Œlast">firstå’Œlast</h3>
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹å¯ä»¥æ­£å¸¸ä»QuerySetä¸­è·å–</li>
<li>éšè—bug
<ul>
<li>å¯èƒ½ä¼šå‡ºç° firstå’Œlastè·å–åˆ°çš„æ˜¯ç›¸åŒçš„å¯¹è±¡
<ul>
<li>æ˜¾å¼ï¼Œæ‰‹åŠ¨å†™æ’åºè§„åˆ™ï¼ˆå…ˆorder_byï¼‰</li>
</ul></li>
</ul></li>
</ul>
<h3 id="åˆ‡ç‰‡">åˆ‡ç‰‡</h3>
<ul>
<li>å’Œpythonä¸­çš„åˆ‡ç‰‡ä¸å¤ªä¸€æ ·</li>
<li>QuerySet[5:15] è·å–ç¬¬äº”æ¡åˆ°ç¬¬åäº”æ¡æ•°æ®
<ul>
<li>ç›¸å½“äºSQLä¸­limitå’Œoffset</li>
</ul></li>
</ul>
<h3 id="ç¼“å­˜é›†">ç¼“å­˜é›†</h3>
<ul>
<li>filter</li>
<li>exclude</li>
<li>all</li>
<li>éƒ½ä¸ä¼šçœŸæ­£çš„å»æŸ¥è¯¢æ•°æ®åº“</li>
<li>åªæœ‰æˆ‘ä»¬åœ¨è¿­ä»£ç»“æœé›†ï¼Œæˆ–è€…è·å–å•ä¸ªå¯¹è±¡å±æ€§çš„æ—¶å€™ï¼Œå®ƒæ‰ä¼šå»æŸ¥è¯¢æ•°æ®åº“</li>
<li>æ‡’æŸ¥è¯¢
<ul>
<li>ä¸ºäº†ä¼˜åŒ–æˆ‘ä»¬ç»“æ„å’ŒæŸ¥è¯¢</li>
</ul></li>
</ul>
<h3 id="æŸ¥è¯¢æ¡ä»¶">æŸ¥è¯¢æ¡ä»¶</h3>
<ul>
<li>å±æ€§__è¿ç®—ç¬¦=å€¼</li>
<li>gt å¤§äº</li>
<li>lt å°äº</li>
<li>gte å¤§äºç­‰äº</li>
<li>lte å°äºç­‰äº</li>
<li>in åœ¨æŸä¸€é›†åˆä¸­</li>
<li>contains ç±»ä¼¼äº æ¨¡ç³ŠæŸ¥è¯¢ like</li>
<li>startswith ä»¥xxå¼€å§‹ æœ¬è´¨ä¹Ÿæ˜¯like</li>
<li>endswith ä»¥ xx ç»“æŸ ä¹Ÿæ˜¯like</li>
<li>exact</li>
<li>å‰é¢åŒæ—¶æ·»åŠ i , ignore å¿½ç•¥
<ul>
<li>iexact</li>
<li>icontains</li>
<li>istartswith</li>
<li>iendswith</li>
</ul></li>
<li>djangoä¸­æŸ¥è¯¢æ¡ä»¶æœ‰æ—¶åŒºé—®é¢˜
<ul>
<li>å…³é—­djangoä¸­è‡ªå®šä¹‰çš„æ—¶åŒº</li>
<li>åœ¨æ•°æ®åº“ä¸­åˆ›å»ºå¯¹åº”çš„æ—¶åŒºè¡¨</li>
</ul></li>
</ul>
<h3 id="æ¨¡å‹æˆå‘˜">æ¨¡å‹æˆå‘˜</h3>
<ul>
<li>æ˜¾æ€§å±æ€§
<ul>
<li>å¼€å‘è€…æ‰‹åŠ¨ä¹¦å†™çš„å±æ€§</li>
</ul></li>
<li>éšæ€§å±æ€§
<ul>
<li>å¼€å‘è€…æ²¡æœ‰ä¹¦å†™ï¼ŒORMè‡ªåŠ¨ç”Ÿæˆçš„</li>
<li>å¦‚æœä½ æŠŠéšæ€§å±æ€§æ‰‹åŠ¨å£°æ˜äº†ï¼Œç³»ç»Ÿå°±ä¸ä¼šä¸ºä½ äº§ç”Ÿéšæ€§å±æ€§äº†</li>
</ul></li>
</ul>
<h3 id="ä»mysqlåˆ°model">ä»MySqlåˆ°model</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">python manage.py inspectdb &gt; backstage/models.py</span><br></pre></td></tr></table></figure>
<h3 id="sortæ’åº">sortæ’åº</h3>
<p>2ï¼‰keyå‚æ•°/å‡½æ•°
ä»python2.4å¼€å§‹ï¼Œlist.sort()å’Œsorted()å‡½æ•°å¢åŠ äº†keyå‚æ•°æ¥æŒ‡å®šä¸€ä¸ªå‡½æ•°ï¼Œæ­¤å‡½æ•°å°†åœ¨æ¯ä¸ªå…ƒç´ æ¯”è¾ƒå‰è¢«è°ƒç”¨ã€‚
ä¾‹å¦‚é€šè¿‡keyæŒ‡å®šçš„å‡½æ•°æ¥å¿½ç•¥å­—ç¬¦ä¸²çš„å¤§å°å†™ï¼š ä»£ç å¦‚ä¸‹:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sorted(<span class="string">"This is a test string from Andrew"</span>.split(), key=str.lower)</span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'Andrew'</span>, <span class="string">'from'</span>, <span class="string">'is'</span>, <span class="string">'string'</span>, <span class="string">'test'</span>, <span class="string">'This'</span>]</span><br></pre></td></tr></table></figure>
<p>keyå‚æ•°çš„å€¼ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œæ­¤å‡½æ•°åªæœ‰ä¸€ä¸ªå‚æ•°ä¸”è¿”å›ä¸€ä¸ªå€¼ç”¨æ¥è¿›è¡Œæ¯”è¾ƒã€‚è¿™ä¸ªæŠ€æœ¯æ˜¯å¿«é€Ÿçš„å› ä¸ºkeyæŒ‡å®šçš„å‡½æ•°å°†å‡†ç¡®åœ°å¯¹æ¯ä¸ªå…ƒç´ è°ƒç”¨ã€‚</p>
<p>æ›´å¹¿æ³›çš„ä½¿ç”¨æƒ…å†µæ˜¯ç”¨å¤æ‚å¯¹è±¡çš„æŸäº›å€¼æ¥å¯¹å¤æ‚å¯¹è±¡çš„åºåˆ—æ’åºï¼Œä¾‹å¦‚ï¼š</p>
<p>ä»£ç å¦‚ä¸‹:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">student_tuples = [</span><br><span class="line">(<span class="string">'john'</span>, <span class="string">'A'</span>, <span class="number">15</span>),</span><br><span class="line">(<span class="string">'jane'</span>, <span class="string">'B'</span>, <span class="number">12</span>),</span><br><span class="line">(<span class="string">'dave'</span>, <span class="string">'B'</span>, <span class="number">10</span>),</span><br><span class="line">]</span><br><span class="line">sorted(student_tuples, key=<span class="keyword">lambda</span> student: student[<span class="number">2</span>])   <span class="comment"># sort by age</span></span><br><span class="line">[(<span class="string">'dave'</span>, <span class="string">'B'</span>, <span class="number">10</span>), (<span class="string">'jane'</span>, <span class="string">'B'</span>, <span class="number">12</span>), (<span class="string">'john'</span>, <span class="string">'A'</span>, <span class="number">15</span>)]</span><br></pre></td></tr></table></figure>
<h3 id="paginatoråˆ†é¡µ">Paginatoråˆ†é¡µ</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.core.paginator <span class="keyword">import</span> Paginator</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿›è¡Œåˆ†é¡µ</span></span><br><span class="line">pagenator = Paginator(result_list, limit)</span><br><span class="line">result = pagenator.page(page).object_list</span><br></pre></td></tr></table></figure>
<h3 id="popé—´æ¥ä¿®æ”¹é”®çš„keyå€¼">pop()é—´æ¥ä¿®æ”¹é”®çš„keyå€¼</h3>
<p>pop()ä¸€èˆ¬ç”¨ä½œåˆ é™¤åˆ—è¡¨ä¸­å…ƒç´ ï¼Œä½†æ˜¯å®ƒçš„è¿”å›å€¼å¾ˆæœ‰è¶£</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pop(key[,default])</span><br></pre></td></tr></table></figure>
<ul>
<li>key: è¦åˆ é™¤çš„é”®/å€¼å¯¹æ‰€å¯¹åº”çš„é”®</li>
<li>default:
å¯é€‰å‚æ•°ï¼Œç»™å®šé”®ä¸åœ¨å­—å…¸ä¸­æ—¶å¿…é¡»è®¾ç½®ï¼Œå¦è€…ä¼šæŠ¥é”™(æ²¡æœ‰é»˜è®¤å€¼)ï¼Œæ­¤æ—¶è¿”å›defaultå€¼ï¼Œ</li>
</ul>
<p>Python å­—å…¸ pop()
æ–¹æ³•åˆ é™¤ç»™å®šé”®æ‰€å¯¹åº”çš„é”®/å€¼å¯¹ï¼Œå¹¶è¿”å›è¢«åˆ é™¤çš„å€¼ã€‚ç»™å®šé”®å¦‚æœä¸åœ¨å­—å…¸ä¸­ï¼Œåˆ™å¿…é¡»è®¾ç½®ä¸€ä¸ªdefaultå€¼ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œæ­¤æ—¶è¿”å›çš„å°±æ˜¯defaultå€¼ã€‚</p>
<h3 id="model_to_dictå•ä¸ªå¯¹è±¡è½¬å­—å…¸">model_to_dict()å•ä¸ªå¯¹è±¡è½¬å­—å…¸</h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">from django.forms import model_to_dict</span><br><span class="line"></span><br><span class="line">result &#x3D; UserUserinfo.objects.filter(nickname__contains&#x3D;key).first()</span><br><span class="line">result &#x3D; model_to_dict(result)</span><br></pre></td></tr></table></figure>
<h3 id="å–æ—¥æœŸåŒºé—´">å–æ—¥æœŸåŒºé—´</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> dateutil.relativedelta <span class="keyword">import</span> relativedelta</span><br><span class="line"></span><br><span class="line">now_date = datetime.datetime.now().date()</span><br><span class="line">dates = &#123;</span><br><span class="line">    <span class="string">'1'</span>: now_date - datetime.timedelta(days=<span class="number">1</span>),  <span class="comment"># è¿‘ä¸€å¤©</span></span><br><span class="line">    <span class="string">'2'</span>: now_date - datetime.timedelta(weeks=<span class="number">1</span>),  <span class="comment"># è¿‘ä¸€å‘¨</span></span><br><span class="line">    <span class="string">'3'</span>: now_date - relativedelta(months=<span class="number">1</span>)  <span class="comment"># è¿‘ä¸€æœˆ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">parameter_time = dates.get(<span class="string">'%s'</span> % time)</span><br><span class="line">obj_list = Customer.objects.filter(deal_date__gte=parameter_time, deal_date__lte=cur_date)</span><br></pre></td></tr></table></figure>
<h3
id="djangoä¸­é€šè¿‡modelåå­—è·å–model">djangoä¸­é€šè¿‡modelåå­—è·å–model</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; from django.apps import apps</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; apps.get_app_config(<span class="string">'auth'</span>) </span></span><br><span class="line">&lt;AuthConfig: auth&gt;</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ³¨æ„å¾—åˆ°çš„ç»“æœæ˜¯è¿­ä»£å™¨(iterator)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; auth = apps.get_app_config(<span class="string">'auth'</span>)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; auth.get_models()</span></span><br><span class="line">&lt;generator object get_models at 0x31422d0&gt;</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; <span class="keyword">for</span> i <span class="keyword">in</span> auth.get_models():</span></span><br><span class="line">...  print i</span><br><span class="line">... </span><br><span class="line">&lt;class 'django.contrib.auth.models.Permission'&gt;</span><br><span class="line">&lt;class 'django.contrib.auth.models.Group'&gt;</span><br><span class="line">&lt;class 'django.contrib.auth.models.User'&gt;</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; auth.get_model(<span class="string">'User'</span>)         </span></span><br><span class="line">&lt;class 'django.contrib.auth.models.User'&gt;</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; User = auth.get_model(<span class="string">'User'</span>)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; User.objects.all()[0]</span></span><br><span class="line">&lt;User: root&gt;</span><br></pre></td></tr></table></figure>
<h3 id="æ—¶é—´ç±»å‹">æ—¶é—´ç±»å‹</h3>
<ol type="1">
<li><p>default=datetime.now()</p>
<p>modelæ¯æ¬¡åˆå§‹åŒ–ï¼Œéƒ½ä¼šè‡ªåŠ¨è®¾ç½®è¯¥å­—æ®µçš„é»˜è®¤å€¼ä¸ºåˆå§‹åŒ–æ—¶é—´ã€‚</p></li>
<li><p>default=datetime.now</p>
<p>modelæ¯æ¬¡è¿›è¡Œæ–°å¢æˆ–ä¿®æ”¹æ“ä½œï¼Œéƒ½ä¼šè‡ªåŠ¨è®¾ç½®è¯¥å­—æ®µçš„å€¼ä¸ºæ“ä½œæ—¶é—´ã€‚è®¾ç½®åä»å¯ä»¥ä½¿ç”¨ORMæ‰‹åŠ¨ä¿®æ”¹è¯¥å­—æ®µã€‚</p></li>
<li><p>auto_now_add=True</p>
<p>é»˜è®¤å€¼ä¸ºFalseï¼Œè‹¥è®¾ç½®ä¸ºTrueï¼Œmodelæ¯æ¬¡è¿›è¡Œæ–°å¢æ“ä½œï¼Œéƒ½ä¼šè‡ªåŠ¨è®¾ç½®è¯¥å­—æ®µçš„å€¼ä¸ºæ“ä½œæ—¶é—´ã€‚è®¾ç½®ä¸ºTrueåæ— æ³•ä½¿ç”¨ORMæ‰‹åŠ¨ä¿®æ”¹è¯¥å­—æ®µï¼Œå“ªæ€•å¡«å……äº†å­—æ®µçš„å€¼ä¹Ÿä¼šè¢«è¦†ç›–ã€‚</p></li>
<li><p>auto_now=True</p>
<p>é»˜è®¤å€¼ä¸ºFalseï¼Œè‹¥è®¾ç½®ä¸ºTrueï¼Œmodelæ¯æ¬¡è¿›è¡Œæ–°å¢æˆ–ä¿®æ”¹æ“ä½œï¼Œéƒ½ä¼šè‡ªåŠ¨è®¾ç½®è¯¥å­—æ®µçš„å€¼ä¸ºæ“ä½œæ—¶é—´ã€‚è®¾ç½®ä¸ºTrueåæ— æ³•ä½¿ç”¨ORMæ‰‹åŠ¨ä¿®æ”¹è¯¥å­—æ®µï¼Œå“ªæ€•å¡«å……äº†å­—æ®µçš„å€¼ä¹Ÿä¼šè¢«è¦†ç›–ã€‚</p></li>
<li><p>è¦æ³¨æ„çš„ç‚¹</p>
<p>é™¤éæƒ³è®¾ç½®åŠ¨æ€é»˜è®¤æ—¶é—´ä¸ºé¡¹ç›®çš„å¯åŠ¨æ—¶é—´ï¼Œå¦åˆ™default=datetime.now()è¿™ç§ç”¨æ³•æ˜¯é”™è¯¯çš„ï¼Œä¼šå¾—åˆ°æœŸæœ›ä¹‹å¤–çš„ç»“æœã€‚</p>
<p>ä½¿ç”¨User.objects.updateæ–¹æ³•æ—¶ï¼Œè®¾ç½®çš„default=datetime.nowå’Œauto_now=Trueéƒ½ä¸ä¼šç”Ÿæ•ˆï¼Œç”±äºè®¾ç½®äº†auto_now=Trueçš„å­—æ®µä¸èƒ½æ‰‹åŠ¨ä¿®æ”¹ï¼Œæ­¤æ—¶åªèƒ½ä½¿ç”¨saveæ–¹æ³•ä¿®æ”¹æ•°æ®ï¼Œè¿™å¯¹äºå¤šä¸ªæ•°æ®çš„æ›´æ–°æ˜¯ä¸å‹å¥½çš„ã€‚</p>
<p>å› æ­¤å¦‚æœè®¾ç½®åŠ¨æ€é»˜è®¤æ—¶é—´çš„å­—æ®µï¼Œåº”è¯¥ä½¿ç”¨default=datetime.nowå’Œauto_now_add=Trueæ¥å®ç°ã€‚</p></li>
</ol>
<h3 id="djangè·å–modelså­—æ®µæ–¹æ³•">djangè·å–modelså­—æ®µæ–¹æ³•</h3>
<p>é€šè¿‡._meta.fieldsè·å– ä»¥Studentè¿™ä¸ªmodelä¸ºä¾‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">In [59]: Student._meta.fields</span><br><span class="line">Out[59]: </span><br><span class="line">(&lt;django.db.models.fields.AutoField: id&gt;,</span><br><span class="line"> &lt;django.db.models.fields.CharField: stu_name&gt;,</span><br><span class="line"> &lt;django.db.models.fields.CharField: stu_no&gt;,</span><br><span class="line"> &lt;django.db.models.fields.CharField: stu_sex&gt;,</span><br><span class="line"> &lt;django.db.models.fields.IntegerField: stu_age&gt;,</span><br><span class="line"> &lt;django.db.models.fields.DateTimeField: stu_birth&gt;)</span><br></pre></td></tr></table></figure>
<p>è·å–å­—æ®µåï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">In [62]: stu = Student._meta.fields </span><br><span class="line">In [62]: [stu[i].name for i in range(len(stu))]</span><br><span class="line">Out[62]: [u'id', 'stu_name', 'stu_no', 'stu_sex', 'stu_age', 'stu_birth']</span><br></pre></td></tr></table></figure>
<h3 id="ä¿®æ”¹æ•°æ®åº“ä¸­éƒ¨åˆ†ä¿¡æ¯">ä¿®æ”¹æ•°æ®åº“ä¸­éƒ¨åˆ†ä¿¡æ¯</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_work</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        data = simplejson.loads(request.body)</span><br><span class="line">    <span class="keyword">except</span> Exception:</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">"code"</span>: <span class="number">-1</span>, <span class="string">"msg"</span>: <span class="string">'å‚æ•°æ¥å—å¤±è´¥'</span>&#125;)</span><br><span class="line">    print(data)</span><br><span class="line">    DataModel = firsttypeid_to_model(data[<span class="string">'firsttypeid'</span>]).objects.create()</span><br><span class="line">    <span class="comment"># è·å–è¯¥æ¨¡å‹å†…æ‰€æœ‰å­—æ®µåæ•°æ®</span></span><br><span class="line">    fields_data = DataModel._meta.fields</span><br><span class="line">    <span class="comment"># è¿™é‡Œæ˜¯å°†å½“å‰çš„modelè½¬æ¢æˆæ•°æ®å­—å…¸ï¼Œæ–¹ä¾¿åé¢ä¿®æ”¹åæäº¤</span></span><br><span class="line">    data_dict = DataModel.__dict__</span><br><span class="line">    <span class="keyword">for</span> key <span class="keyword">in</span> data:</span><br><span class="line">        <span class="keyword">for</span> field <span class="keyword">in</span> fields_data:</span><br><span class="line">            <span class="comment"># è¿™æ ·æˆ–è¾“å‡ºè¿™æ¡è®°å½•çš„æ‰€æœ‰å­—æ®µåï¼Œéœ€è¦çš„è¯è¿˜å¯ä»¥è¾“å‡ºverbose_name</span></span><br><span class="line">            <span class="keyword">if</span> field.name == key:</span><br><span class="line">                <span class="comment"># è¿›è¡ŒåŒ¹é…ï¼Œå°†å‰ç«¯ä¼ æ¥çš„å­—æ®µåŒ¹é…åˆ°ï¼Œç„¶åä¿®æ”¹æ•°æ®åº“é‡Œé¢çš„æ•°æ®</span></span><br><span class="line">                <span class="keyword">if</span> data[key] == <span class="string">''</span>:</span><br><span class="line">                    data_dict[key] = <span class="literal">None</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    data_dict[key] = data[key]</span><br><span class="line">    data_dict[<span class="string">'secondtypeid_id'</span>] = data[<span class="string">'secondtypeid'</span>]</span><br><span class="line">    <span class="comment"># ä¿å­˜æ•°æ®åˆ°æ•°æ®åº“ï¼Œè¿™æ ·çš„å¥½å¤„å°±æ˜¯æé«˜æ•ˆç‡ï¼Œé¿å…è¿‡å¤šé‡å¤æ“ä½œ</span></span><br><span class="line">    DataModel.save()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;<span class="string">"code"</span>: <span class="number">1</span>, <span class="string">"msg"</span>: <span class="string">'æˆåŠŸ'</span>&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="å¤–é”®ä¸èƒ½ç›´æ¥æ’å…¥">å¤–é”®ä¸èƒ½ç›´æ¥æ’å…¥</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">publisher = UserAdmin.objects.get(id=publisherid)</span><br><span class="line">    obj = UserNotice.objects.create(noticetitle=title, noticecontent=content, publisherid=publisher)</span><br></pre></td></tr></table></figure>
<h3 id="å»é‡æŸ¥è¯¢">å»é‡æŸ¥è¯¢</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">works = MainDataTougaolanmu.objects.all().values(<span class="string">'userid_id'</span>).distinct()</span><br></pre></td></tr></table></figure>
<h3 id="è§£å†³è·¨åŸŸ">è§£å†³è·¨åŸŸ</h3>
<p>åœ¨æ•´ä¸ªé¡¹ç›®çš„setting.pyä¸­è¿›è¡Œä¿®æ”¹</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    'django.contrib.admin',</span><br><span class="line">    'django.contrib.auth',</span><br><span class="line">    'django.contrib.contenttypes',</span><br><span class="line">    'django.contrib.sessions',</span><br><span class="line">    'django.contrib.messages',</span><br><span class="line">    'django.contrib.staticfiles',</span><br><span class="line"><span class="addition">+   'corsheaders',  # è·¨åŸŸ</span></span><br><span class="line">    'learn1',</span><br><span class="line">    'backstage',</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">MIDDLEWARE = [</span><br><span class="line">    'django.middleware.security.SecurityMiddleware',</span><br><span class="line">    'django.contrib.sessions.middleware.SessionMiddleware',</span><br><span class="line"><span class="addition">+   'corsheaders.middleware.CorsMiddleware',  # è§£å†³è·¨åŸŸ</span></span><br><span class="line">    'django.middleware.common.CommonMiddleware',</span><br><span class="line">    'django.middleware.csrf.CsrfViewMiddleware',</span><br><span class="line">    'django.contrib.auth.middleware.AuthenticationMiddleware',</span><br><span class="line">    'django.contrib.messages.middleware.MessageMiddleware',</span><br><span class="line">    'django.middleware.clickjacking.XFrameOptionsMiddleware',</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è·¨åŸŸå¢åŠ å¿½ç•¥</span></span><br><span class="line">CORS_ALLOW_CREDENTIALS = <span class="literal">True</span></span><br><span class="line">CORS_ORIGIN_ALLOW_ALL = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">CORS_ALLOW_METHODS = (</span><br><span class="line">    <span class="string">'DELETE'</span>,</span><br><span class="line">    <span class="string">'GET'</span>,</span><br><span class="line">    <span class="string">'OPTIONS'</span>,</span><br><span class="line">    <span class="string">'PATCH'</span>,</span><br><span class="line">    <span class="string">'POST'</span>,</span><br><span class="line">    <span class="string">'PUT'</span>,</span><br><span class="line">    <span class="string">'VIEW'</span>,</span><br><span class="line">)</span><br><span class="line">CORS_ALLOW_HEADERS = (</span><br><span class="line">    <span class="string">'XMLHttpRequest'</span>,</span><br><span class="line">    <span class="string">'X_FILENAME'</span>,</span><br><span class="line">    <span class="string">'accept-encoding'</span>,</span><br><span class="line">    <span class="string">'authorization'</span>,</span><br><span class="line">    <span class="string">'content-type'</span>,</span><br><span class="line">    <span class="string">'dnt'</span>,</span><br><span class="line">    <span class="string">'origin'</span>,</span><br><span class="line">    <span class="string">'user-agent'</span>,</span><br><span class="line">    <span class="string">'x-csrftoken'</span>,</span><br><span class="line">    <span class="string">'x-requested-with'</span>,</span><br><span class="line">    <span class="string">'token'</span>,    <span class="comment"># token</span></span><br><span class="line">    <span class="string">'authentication'</span>,   <span class="comment"># token</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>Django</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>Django</tag>
      </tags>
  </entry>
  <entry>
    <title>pycharmè¿œç¨‹è°ƒè¯•é¡¹ç›®</title>
    <url>/pycharm%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95%E9%A1%B9%E7%9B%AE/</url>
    <content><![CDATA[<p>æœåŠ¡å™¨ä¸Šæ²¡æœ‰IDEï¼Œç¼–å†™ä»£ç å¾ˆä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©åœ¨æœ¬åœ°ç”¨pycharmè¿œç¨‹è°ƒè¯•ç¨‹åºï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰é€‰æ‹©åœ¨æœ¬åœ°pycharmä½¿ç”¨sshè¿æ¥Terminalï¼Œå› ä¸ºçœŸçš„å¤ªå¡äº†ï¼Œæˆ‘è¿˜æ˜¯ç”¨xshellä½œä¸ºå‘½ä»¤è¡Œä½¿ç”¨ã€‚</p>
<p>å‚è€ƒï¼šhttps://www.cnblogs.com/weihengblog/p/9656257.html</p>
<a id="more"></a>
<p>pycharmæ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„pythonå¼€å‘å·¥å…·ï¼Œç°åœ¨å¾ˆå¤šä»£ç æœ€ç»ˆåœ¨çº¿ä¸Šè·‘çš„ç¯å¢ƒéƒ½æ˜¯linuxï¼Œè€Œå¼€å‘ç¯å¢ƒå¯èƒ½è¿˜æ˜¯windowsä¸‹å¼€å‘ï¼Œè¿™å°±éœ€è¦ç»å¸¸åœ¨linuxä¸Šè¿›è¡Œè°ƒè¯•ï¼Œæˆ–è€…åœ¨linuxå¯¹ä»£ç è¿›è¡Œç¼–å†™ï¼Œè€Œpycharmæä¾›äº†éå¸¸ä¾¿æ·çš„æ–¹å¼ã€‚å…·ä½“å®ç°åœ¨windowsä¸Šè¿œç¨‹linuxå¼€å‘å’Œè°ƒè¯•çš„ä»£ç æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol type="1">
<li><p>æœ¬åœ°å’Œè¿œç¨‹åŒæ­¥</p></li>
<li><p>é…ç½®Project Interpreterï¼ˆä½¿ç”¨è¿œç¨‹çš„Pythonè§£é‡Šå™¨ï¼‰</p></li>
<li><p>è®¾ç½®Terminalè¿è¡Œçš„Pythonç‰ˆæœ¬</p></li>
<li><p>ä½¿ç”¨Terminalç™»é™†åˆ°LinuxæœåŠ¡å™¨</p></li>
</ol>
<h3 id="ä¸€æœ¬åœ°å’Œè¿œç¨‹ä»£ç åŒæ­¥">ä¸€ã€æœ¬åœ°å’Œè¿œç¨‹ä»£ç åŒæ­¥</h3>
<p>é¦–å…ˆï¼Œåœ¨æœ¬åœ°å’Œè¿œç¨‹æ‹¥æœ‰ç›¸åŒçš„é¡¹ç›®ä»£ç ï¼š</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201012105507.png"
alt="1321568-20180916144244833-1490970117" />
<figcaption
aria-hidden="true">1321568-20180916144244833-1490970117</figcaption>
</figure>
<p><strong>åœ¨windowså¹³å°ä½¿ç”¨Pycharmæ‰“å¼€é¡¹ç›®,ç„¶åï¼šTools -&gt; Deployment
-&gt; configurationï¼Œç„¶åæ–°å»ºè¿œç¨‹æœåŠ¡å™¨</strong></p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201012105650.png"
alt="1321568-20180916144731393-549531962" />
<figcaption
aria-hidden="true">1321568-20180916144731393-549531962</figcaption>
</figure>
<p><strong>ç„¶åè¿›è¡ŒæœåŠ¡å™¨é…ç½®</strong></p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201012105658.png"
alt="1321568-20180916145358775-782073356" />
<figcaption
aria-hidden="true">1321568-20180916145358775-782073356</figcaption>
</figure>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201012105705.png"
alt="1321568-20180916145549234-784619187" />
<figcaption
aria-hidden="true">1321568-20180916145549234-784619187</figcaption>
</figure>
<p><strong>ç‚¹å‡»Ok</strong>ï¼Œ<strong>ç»è¿‡ä¸Šé¢æ­¥éª¤çš„é…ç½®åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨PyCharm
ç•Œé¢çš„å³è¾¹æŸ¥çœ‹è¿œç«¯ä»£ç ï¼Œå¦‚ä¸‹å›¾ï¼š</strong></p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201012105836.png"
alt="1321568-20180916145725516-1886186686" />
<figcaption
aria-hidden="true">1321568-20180916145725516-1886186686</figcaption>
</figure>
<p><strong>åˆ‡è®°ï¼å‹¾é€‰ Automatic Upload
å®ç°æœ¬åœ°è‡ªåŠ¨åŒæ­¥åˆ°è¿œç«¯</strong></p>
<h3 id="äºŒé…ç½®project-interpreterä½¿ç”¨è¿œç¨‹çš„pythonè§£é‡Šå™¨">äºŒã€é…ç½®Project
Interpreterï¼ˆä½¿ç”¨è¿œç¨‹çš„Pythonè§£é‡Šå™¨ï¼‰</h3>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201012105842.png"
alt="1321568-20180916145905889-619698935" />
<figcaption
aria-hidden="true">1321568-20180916145905889-619698935</figcaption>
</figure>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201012105846.png"
alt="1321568-20180916150051936-1448125681" />
<figcaption
aria-hidden="true">1321568-20180916150051936-1448125681</figcaption>
</figure>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201012105852.png"
alt="1321568-20180916150149777-1149968755" />
<figcaption
aria-hidden="true">1321568-20180916150149777-1149968755</figcaption>
</figure>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201012105900.png"
alt="1321568-20180916150602788-417269814" />
<figcaption
aria-hidden="true">1321568-20180916150602788-417269814</figcaption>
</figure>
<p><strong>ç‚¹å‡» OK ä¿å­˜ï¼Œç‚¹å‡»Finishå®Œæˆã€‚ç„¶ååœ¨ç¼–è¾‘æ–°æ·»åŠ çš„Python
Interpreterï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</strong></p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201012110011.png"
alt="1321568-20180916151536382-1761728586" />
<figcaption
aria-hidden="true">1321568-20180916151536382-1761728586</figcaption>
</figure>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201012110017.png"
alt="1321568-20180916151652947-1922094213" />
<figcaption
aria-hidden="true">1321568-20180916151652947-1922094213</figcaption>
</figure>
<p><strong>è¿™æ ·ï¼Œæœ¬åœ°å’Œè¿œç¨‹çš„é¡¹ç›®
ä»¥æ¥çš„pipéƒ½æ˜¯ç›¸åŒçš„ï¼Œè§£é‡Šå™¨ä¹Ÿæ˜¯ç›¸åŒçš„ã€‚</strong></p>
<h3
id="ä¸‰è®¾ç½®terminalè¿è¡Œçš„pythonç‰ˆæœ¬">ä¸‰ã€è®¾ç½®Terminalè¿è¡Œçš„Pythonç‰ˆæœ¬</h3>
<p><strong>File -&gt; Settings -&gt; Tools -&gt; SSH Terminalï¼Œåœ¨
Deployment server
é€‰æ‹©LinuxæœåŠ¡å™¨çš„Pythonç‰ˆæœ¬è·¯å¾„ã€‚ï¼ˆé…ç½®å·²ç»å­˜åœ¨ï¼Œåªè¦é€‰æ‹©å³å¯ï¼‰</strong></p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201012110030.png"
alt="1321568-20180916151811986-1349908586" />
<figcaption
aria-hidden="true">1321568-20180916151811986-1349908586</figcaption>
</figure>
<h3
id="å››ä½¿ç”¨terminalç™»é™†åˆ°linuxæœåŠ¡å™¨">å››ã€ä½¿ç”¨Terminalç™»é™†åˆ°LinuxæœåŠ¡å™¨</h3>
<p><strong>é€‰æ‹© Tools -&gt; Start SSH sessionï¼Œé»˜è®¤ä¼šå¼€å¯Linux
sshä¼šè¯çª—å£ï¼Œå¦‚ä¸‹å›¾ï¼š</strong></p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201012110034.png"
alt="1321568-20180916151852453-923493946" />
<figcaption
aria-hidden="true">1321568-20180916151852453-923493946</figcaption>
</figure>
<p><strong>å°±å¯ä»¥æ‰§è¡ŒLinuxå‘½ä»¤äº†ï¼Œåœ¨è¿œç¨‹Linuxä¸»æœºä¸Šï¼Œå¦‚ä¸‹å›¾ï¼š</strong></p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201012110042.png"
alt="1321568-20180916152101674-143914985" />
<figcaption
aria-hidden="true">1321568-20180916152101674-143914985</figcaption>
</figure>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>pycharm</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonä¸­==å’Œisçš„åŒºåˆ«</title>
    <url>/python%E4%B8%AD-%E5%92%8Cis%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    <content><![CDATA[<p>å¸¸è§çš„ä¸€ç§ç†è§£æ˜¯==åˆ¤æ–­å€¼ç›¸ç­‰ï¼Œisåˆ¤æ–­å†…å­˜ä¸­æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªä½ç½®ï¼Œä½†å…¶å®è¿™ä¸ªå’Œpythonçš„äº¤äº’æ¨¡å¼ï¼Œpyæ–‡ä»¶æ¨¡å¼éƒ½æœ‰ç‚¹å…³ç³»ï¼Œè¿™é‡Œç®€å•æ€»ç»“ä¸€ä¸‹ç½‘ä¸Šæœç½—çš„å†…å®¹ã€‚</p>
<a id="more"></a>
<h3 id="é—®é¢˜å‡ºç°">é—®é¢˜å‡ºç°</h3>
<p>åœ¨pyæ–‡ä»¶ä¸­</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="string">"hello"</span></span><br><span class="line">b = <span class="string">"hello"</span></span><br><span class="line">print(a <span class="keyword">is</span> b)  <span class="comment"># è¾“å‡º True </span></span><br><span class="line">print(a == b)  <span class="comment"># è¾“å‡º True</span></span><br><span class="line"></span><br><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">b = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">print(a <span class="keyword">is</span> b)  <span class="comment"># è¾“å‡º False</span></span><br><span class="line">print(a == b)  <span class="comment"># è¾“å‡º True </span></span><br><span class="line"></span><br><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">b = a</span><br><span class="line">print(a <span class="keyword">is</span> b)  <span class="comment"># è¾“å‡º True </span></span><br><span class="line">print(a == b)  <span class="comment"># è¾“å‡º True</span></span><br></pre></td></tr></table></figure>
<p>å®˜æ–¹æ–‡æ¡£ä¸­è¯´ is è¡¨ç¤ºçš„æ˜¯å¯¹è±¡æ ‡ç¤ºç¬¦ï¼ˆobject identityï¼‰ï¼Œè€Œ ==
è¡¨ç¤ºçš„æ˜¯ç›¸ç­‰ï¼ˆequalityï¼‰ã€‚is
çš„ä½œç”¨æ˜¯ç”¨æ¥æ£€æŸ¥å¯¹è±¡çš„æ ‡ç¤ºç¬¦æ˜¯å¦ä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡åœ¨å†…å­˜ä¸­çš„åœ°å€æ˜¯å¦ä¸€æ ·ï¼Œè€Œ
== æ˜¯ç”¨æ¥æ£€æŸ¥ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚</p>
<p>æˆ‘ä»¬åœ¨æ£€æŸ¥ a is b çš„æ—¶å€™ï¼Œå…¶å®ç›¸å½“äºæ£€æŸ¥ id(a) == id(b)ã€‚è€Œæ£€æŸ¥ a ==
b çš„æ—¶å€™ï¼Œå®é™…æ˜¯è°ƒç”¨äº†å¯¹è±¡ a çš„ <code>__eq()__</code>æ–¹æ³•ï¼Œa == b ç›¸å½“äº
<code>a.__eq__(b)</code>ã€‚</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¦‚æœ a is b è¿”å›Trueçš„è¯ï¼Œå³ a å’Œ b
æŒ‡å‘åŒä¸€å—å†…å­˜åœ°å€çš„è¯ï¼Œa == b ä¹Ÿè¿”å›Trueï¼Œå³ a å’Œ b çš„å€¼ä¹Ÿç›¸ç­‰ã€‚</p>
<p>æ¥ä¸‹æ¥å†çœ‹ä¸‹é¢çš„ä»£ç </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="string">"hello"</span></span><br><span class="line">b = <span class="string">"hello"</span></span><br><span class="line">print(a <span class="keyword">is</span> b)  <span class="comment"># è¾“å‡º True </span></span><br><span class="line">print(a == b)  <span class="comment"># è¾“å‡º True</span></span><br><span class="line"></span><br><span class="line">a = <span class="string">"hello world"</span></span><br><span class="line">b = <span class="string">"hello world"</span></span><br><span class="line">print(a <span class="keyword">is</span> b)  <span class="comment"># è¾“å‡º False</span></span><br><span class="line">print(a == b)  <span class="comment"># è¾“å‡º True</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬åˆå‘ç°helloä½¿ç”¨isåˆ¤æ–­ä¸ºTrueï¼Œä½†hello
worldåˆ¤æ–­ä¸ºFalseã€‚è¿™å°±å’Œpythonä¸­çš„å°æ•´æ•°å¯¹è±¡æ± å’Œå¤§æ•´æ•°å¯¹è±¡æ± å’Œinternæœºåˆ¶æœ‰å…³ç³»äº†ã€‚</p>
<h3 id="å°æ•´æ•°å¯¹è±¡æ± ">å°æ•´æ•°å¯¹è±¡æ± </h3>
<p>pythonè§£é‡Šå™¨ä¸ºäº†æå‡è¿è¡Œé€Ÿåº¦ä½¿ç”¨äº†å°æ•´æ•°å¯¹è±¡æ± ï¼Œæ¥é¿å…ä¸ºæ•´æ•°é¢‘ç¹å®šä¹‰ä¸é”€æ¯å†…å­˜ç©ºé—´ã€‚</p>
<p>å°æ•´æ•°å¯¹è±¡æ± å®šä¹‰çš„èŒƒå›´<strong>[-5,256]</strong>åœ¨è¿™ä¸ªèŒƒå›´çš„æ•´æ•°å¯¹è±¡éƒ½æ˜¯æå‰åˆ›å»ºå¥½çš„ï¼Œä¸ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶ä»¥å†…å­˜åƒåœ¾å›æ”¶ï¼Œåœ¨è¿™ä¸ªèŒƒå›´å†…çš„æ•´æ•°ä½¿ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡(å¼•ç”¨
idå†…å­˜åœ°å€å€¼ç›¸åŒ)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a=-5</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; b=-5</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a is b</span></span><br><span class="line">True</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a=256</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; b=256</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a is b</span></span><br><span class="line">True</span><br></pre></td></tr></table></figure>
<h3 id="å¤§æ•´æ•°å¯¹è±¡æ± ">å¤§æ•´æ•°å¯¹è±¡æ± </h3>
<p>å¤§æ•´æ•°å¯¹è±¡æ± æ˜¯åœ¨ä¸Šè¿°èŒƒå›´ä¹‹å¤–</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a=-6</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; b=-6</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a is b</span></span><br><span class="line">False</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a=257</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; b=257</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a is b</span></span><br><span class="line">False</span><br></pre></td></tr></table></figure>
<h3 id="internæœºåˆ¶">internæœºåˆ¶</h3>
<p>å¦‚æœä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„å­—ç¬¦ä¸²å˜é‡å®ƒä»¬çš„å€¼ç›¸åŒä¸”ä»…ç”±æ•°å­—å­—æ¯ä¸‹åˆ’çº¿ç»„æˆå¹¶ä¸”é•¿åº¦ä¸è¶…è¿‡20ä¸ªå­—ç¬¦ï¼Œæˆ–è€…å€¼ä»…å«æœ‰ä¸€ä¸ªå­—ç¬¦æ—¶ï¼Œå†…å­˜ç©ºé—´ä¸­åªåˆ›å»ºä¸€ä¸ªå¯¹è±¡æ¥è®©è¿™äº›å˜é‡éƒ½æŒ‡å‘è¯¥å†…å­˜åœ°å€ï¼ˆå…±äº«å¼•ç”¨ï¼‰ï¼Œå½“å­—ç¬¦ä¸²ä¸æ»¡è¶³è¯¥æ¡ä»¶æ—¶ï¼Œç›¸åŒå€¼çš„å­—ç¬¦ä¸²å˜é‡åœ¨åˆ›å»ºæ—¶éƒ½ä¼šç”³è¯·ä¸€ä¸ªæ–°çš„å†…å­˜åœ°å€æ¥ä¿å­˜å€¼ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å•ä¸ªå­—ç¬¦æˆ–è€…ä¸ºç©ºä»¥åŠç©ºæ ¼çš„å­—ç¬¦ä¸²ï¼Œæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå…±äº«å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line">// ä¸¤ä¸ªç›¸åŒçš„å•å­—ç¬¦</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a = <span class="string">'a'</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; b = <span class="string">'a'</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; id(a), id(b)</span></span><br><span class="line">(140478486488208, 140478486488208)</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a is b</span></span><br><span class="line">True</span><br><span class="line">// ä¸¤ä¸ªç›¸åŒçš„ç©ºå­—ç¬¦ä¸²</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a = <span class="string">''</span> </span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; b = <span class="string">''</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; id(a), id(b)</span></span><br><span class="line">(140377617439408, 140377617439408)</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a is b</span></span><br><span class="line">True</span><br><span class="line">// ä¸¤ä¸ªç›¸åŒç©ºæ ¼çš„å­—ç¬¦ä¸²</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a = <span class="string">' '</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; b = <span class="string">' '</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; id(a), id(b)</span></span><br><span class="line">(140377616103608, 140377616103608)</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; </span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a is b</span></span><br><span class="line">True</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸¤ä¸ªç›¸åŒå€¼çš„å­—ç¬¦ä¸²ï¼Œæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå…±äº«å¼•ç”¨</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a = <span class="string">'liunx'</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; b = <span class="string">'liunx'</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; id(a), id(b)</span></span><br><span class="line">(140478486363976, 140478486363976)</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a is b</span></span><br><span class="line">True</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸¤ä¸ªç›¸åŒå€¼ä½†é•¿åº¦ä¸è¶…è¿‡20ä½çš„å­—ç¬¦ä¸²ï¼Œæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå…±äº«å¼•ç”¨</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a = <span class="string">'linux'</span> * 4</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; b = <span class="string">'linux'</span> * 4</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; id(a), id(b)</span></span><br><span class="line">(140478486391736, 140478486391736)</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a is b</span></span><br><span class="line">True</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸¤ä¸ªç›¸åŒå€¼ä½†é•¿åº¦è¶…è¿‡20ä½çš„å­—ç¬¦ä¸²ï¼Œä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a = <span class="string">'linux'</span> * 5</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; b = <span class="string">'linux'</span> * 5</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; id(a), id(b)</span></span><br><span class="line">(140478486354640, 140478486355280)</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a is b</span></span><br><span class="line">False</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸¤ä¸ªç›¸åŒå€¼ä½†åŒ…å«ç‰¹æ®Šå­—ç¬¦ä¸²(éå¤§å°å†™å­—æ¯å’Œæ•°å­—æˆ–ä¸‹åˆ’çº¿)çš„ï¼Œä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a = <span class="string">'**'</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; b = <span class="string">'**'</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a is b</span></span><br><span class="line">False</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a = <span class="string">'_-'</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; b = <span class="string">'_-'</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a is b</span></span><br><span class="line">False</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a = <span class="string">'a*c'</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; b = <span class="string">'a*c'</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a is b</span></span><br><span class="line">False</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a = <span class="string">'lin ux'</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; b = <span class="string">'lin ux'</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; id(a), id(b)</span></span><br><span class="line">(140478486364088, 140478485729384)</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a is b</span></span><br><span class="line">False</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šæ˜¯åœ¨äº¤äº’æ¨¡å¼ä¸‹çš„ç»“æœï¼Œä½†æ˜¯åœ¨pycharmä¸­è¿è¡Œå¦‚ä¸‹ä»£ç å¾—åˆ°çš„ç»“æœä¼šæ˜¯True</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">c = <span class="string">"hello world"</span></span><br><span class="line">d = <span class="string">"hello world"</span></span><br><span class="line">print(c == d)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line">print(c <span class="keyword">is</span> d)</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>
<p>è¯´æ˜åœ¨äº¤äº’æ¨¡å¼ä¸‹å’Œåœ¨æ–‡ä»¶pyä¸­ä¹Ÿè¿˜æ˜¯å­˜åœ¨åŒºåˆ«ï¼Œæˆ–è€…ä¹Ÿå¯èƒ½æ˜¯pycharmè¿™ä¸ªIDEå¼•èµ·çš„ã€‚</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>lxmlç›¸å…³æ“ä½œ</title>
    <url>/lxml%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C/</url>
    <content><![CDATA[<p>scrapyä½œä¸ºçˆ¬è™«æ¡†æ¶è¿˜æ˜¯æ¯”è¾ƒå…¨èƒ½çš„ï¼Œä½†æ˜¯æˆ‘ä¹‹å‰é‡åˆ°è¿‡ä¸€ä¸ªé—®é¢˜å°±æ˜¯è¦å°†ä¸€ä¸ªèŠ‚ç‚¹çš„æŸäº›å­èŠ‚ç‚¹åˆ é™¤ï¼Œè¿™ä¸ªæ“ä½œå¥½åƒscrapyçš„selectorå¥½åƒä¸èƒ½å®ç°ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯æˆ‘è‡ªå·±æ²¡æ‰¾åˆ°æ–¹æ³•ã€‚æˆ‘çš„è§£å†³æ–¹æ³•æ˜¯ç›´æ¥å°†responseçš„å†…å®¹æ„å»ºæˆlxmlç„¶åå†è¿›è¡ŒèŠ‚ç‚¹åˆ é™¤å’Œä¿¡æ¯æå–ã€‚</p>
<a id="more"></a>
<h2 id="å¦‚ä½•æ„å»ºå¯¹è±¡">1.å¦‚ä½•æ„å»ºå¯¹è±¡</h2>
<p>é¦–å…ˆæˆ‘ä»¬è¦å¼•å…¥lxmlï¼ˆhtmlä¹Ÿæ˜¯lxmlçš„ä¸€ç§ï¼‰åŒ…ï¼Œç„¶åè°ƒç”¨<code>etree.HTML()</code>å‡½æ•°è§£æhtmlæ¥æ„å»ºElement</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line">element = etree.HTML(response.text).xpath(<span class="string">'//div[@class="con_main"]'</span>)[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<h2 id="å»é™¤ç‰¹å®šèŠ‚ç‚¹">2.å»é™¤ç‰¹å®šèŠ‚ç‚¹</h2>
<p>æ„å»ºå®Œå¯¹è±¡åï¼Œæˆ‘ä»¬é€‰æ‹©<code>find</code>,<code>findall</code>,<code>getchildren</code>ç­‰æ–¹æ³•é€‰å®šæƒ³è¦å‰”é™¤çš„èŠ‚ç‚¹ï¼Œç„¶åå†è°ƒç”¨<code>remove</code>å‡½æ•°å°†å…¶å»æ‰ï¼ŒElementè¿˜æœ‰å¾ˆå¤šçš„æ–¹æ³•æˆ‘ä¹Ÿæ²¡æœ‰å…¨éƒ¨ç”¨è¿‡ï¼Œå¦‚æœæœ‰éœ€è¦å¯ä»¥å‚è§<a
href="https://lxml.de/api/lxml.etree._Element-class.html">lxmlå®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> pp <span class="keyword">in</span> element.findall(<span class="string">'p[@style]'</span>):</span><br><span class="line">    element.remove(pp)</span><br></pre></td></tr></table></figure>
<h2 id="å®Œæˆä¿¡æ¯æå–">3.å®Œæˆä¿¡æ¯æå–</h2>
<p>ä¹‹åå°±æ˜¯æ­£å¸¸çš„å®Œæˆå¯¹æ‰€éœ€ä¿¡æ¯çš„å¤„ç†ï¼Œå»æ¯›åˆºï¼Œæ ¼å¼åŒ–ï¼Œåˆ—è¡¨åŒ–ç­‰æ“ä½œï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">content = element.xpath(<span class="string">'string(.)'</span>).replace(<span class="string">'\xa0'</span>, <span class="string">''</span>).replace(<span class="string">'a("conten");'</span>, <span class="string">''</span>).split(<span class="string">'\n'</span>)</span><br><span class="line"><span class="comment"># è¿™ä¸€å¥æ˜¯å»é™¤åˆ—è¡¨ä¸­çš„ç©ºå…ƒç´ </span></span><br><span class="line">item[<span class="string">'content'</span>] = [i <span class="keyword">for</span> i <span class="keyword">in</span> content <span class="keyword">if</span> i != <span class="string">''</span>]</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„ï¼š</strong></p>
<ul>
<li>è™½ç„¶<code>Element</code>å’Œscrapyçš„<code>selector</code>éƒ½å¯ä»¥æ˜¯è°ƒç”¨<code>xpath</code>æ–¹æ³•å½¢å¼ä¸Šä¹Ÿå¾ˆç±»ä¼¼ä½†æ˜¯<code>Element</code>å¯¹è±¡<code>xpath('string(.)')</code>ä¹‹åæ˜¯ä¸ç”¨<code>extract_first()</code>çš„</li>
</ul>
<h2 id="extractå’Œextract_first">4.extractï¼ˆï¼‰å’Œextract_firstï¼ˆï¼‰</h2>
<p>å¦‚æœæ‚¨æ˜¯Scrapyçš„é•¿æœŸç”¨æˆ·ï¼Œåˆ™å¯èƒ½ç†Ÿæ‚‰<code>.extract()</code>å’Œ<code>.extract_first()</code>é€‰æ‹©å™¨æ–¹æ³•ã€‚è®¸å¤šåšå®¢æ–‡ç« å’Œæ•™ç¨‹ä¹Ÿæ­£åœ¨ä½¿ç”¨å®ƒä»¬ã€‚Scrapyä»æ”¯æŒè¿™äº›æ–¹æ³•ï¼Œ<strong>æ²¡æœ‰è®¡åˆ’</strong>å¼ƒç”¨å®ƒä»¬ã€‚</p>
<p>ä½†æ˜¯ï¼ŒScrapyç”¨æ³•æ–‡æ¡£ç°åœ¨ä½¿ç”¨<code>.get()</code>å’Œ
<code>.getall()</code>æ–¹æ³•ç¼–å†™ã€‚æˆ‘ä»¬è®¤ä¸ºè¿™äº›æ–°æ–¹æ³•å¯ä»¥ä½¿ä»£ç æ›´ç®€æ´æ˜“è¯»ã€‚</p>
<p>ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†è¿™äº›æ–¹æ³•å¦‚ä½•ç›¸äº’æ˜ å°„ï¼š</p>
<ol type="1">
<li><p><code>SelectorList.get()</code>ä¸<code>SelectorList.extract_first()</code>ï¼š
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; response.css(<span class="string">'a::attr(href)'</span>).get()</span></span><br><span class="line">'image1.html'</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; response.css(<span class="string">'a::attr(href)'</span>).extract_first()</span></span><br><span class="line">'image1.html'</span><br></pre></td></tr></table></figure></p></li>
<li><p><code>SelectorList.getall()</code>ä¸<code>SelectorList.extract()</code>ï¼š</p></li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; response.css(<span class="string">'a::attr(href)'</span>).getall()</span></span><br><span class="line">['image1.html', 'image2.html', 'image3.html', 'image4.html', 'image5.html']</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; response.css(<span class="string">'a::attr(href)'</span>).extract()</span></span><br><span class="line">['image1.html', 'image2.html', 'image3.html', 'image4.html', 'image5.html']</span><br></pre></td></tr></table></figure>
<ol start="3" type="1">
<li><code>Selector.get()</code>ä¸<code>Selector.extract()</code>ï¼š</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; response.css(<span class="string">'a::attr(href)'</span>)[0].get()</span></span><br><span class="line">'image1.html'</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; response.css(<span class="string">'a::attr(href)'</span>)[0].extract()</span></span><br><span class="line">'image1.html'</span><br></pre></td></tr></table></figure>
<ol start="4" type="1">
<li>ä¸ºäº†ä¿æŒä¸€è‡´æ€§ï¼Œè¿˜æœ‰<code>Selector.getall()</code>ï¼Œå®ƒè¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼š</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; response.css(<span class="string">'a::attr(href)'</span>)[0].getall()</span></span><br><span class="line">['image1.html']</span><br></pre></td></tr></table></figure>
<p>å› æ­¤ï¼Œä¸»è¦åŒºåˆ«åœ¨äº<code>.get()</code>å’Œ<code>.getall()</code>æ–¹æ³•çš„è¾“å‡ºæ›´å¯é¢„æµ‹ï¼š<code>.get()</code>å§‹ç»ˆè¿”å›å•ä¸ªç»“æœï¼Œ<code>.getall()</code>
å§‹ç»ˆè¿”å›æ‰€æœ‰æå–ç»“æœçš„åˆ—è¡¨ã€‚ä½¿ç”¨<code>.extract()</code>methodæ—¶ï¼Œç»“æœæ˜¯å¦ä¸ºåˆ—è¡¨å¹¶ä¸æ€»æ˜¯å¾ˆæ˜æ˜¾ï¼›å¾—åˆ°ä¸€ä¸ªç»“æœ<code>.extract()</code>æˆ–è€…<code>.extract_first()</code>åº”è¯¥è¢«è°ƒç”¨ã€‚</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>çˆ¬è™«</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>çˆ¬è™«</tag>
        <tag>ä¿¡æ¯æå–</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonæ“ä½œrediså¤§å…¨</title>
    <url>/python%E6%93%8D%E4%BD%9Credis%E5%A4%A7%E5%85%A8/</url>
    <content><![CDATA[<p>redisæ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„é”®å€¼å¯¹æ•°æ®åº“ï¼Œç”¨é€”å¹¿æ³›ï¼Œæˆ‘ç°åœ¨ä¸»è¦æ˜¯åœ¨å®ç°å¢é‡çˆ¬è™«çš„æ—¶å€™ä½¿ç”¨äº†redisä¸­çš„hashesç±»å‹ï¼Œè¿™é‡Œè®°å½•ä¸€äº›redisçš„ç›¸å…³æ“ä½œã€‚</p>
<a id="more"></a>
<h3 id="ä¸€å­—ç¬¦ä¸²-strings">ä¸€ã€å­—ç¬¦ä¸² strings</h3>
<p>Pythonæ“ä½œRedisçš„redisæ¨¡å—å¯¹å­—ç¬¦ä¸²ï¼ˆstringï¼‰çš„ä¸»è¦æ“ä½œå‡½æ•°åŒ…æ‹¬ï¼šSETã€GETã€GETSETã€SETEXã€SETNXã€MSETã€MSETNXã€INCR(INCRBY,DECR,DECRBYåœ¨pythonä¸­åº¸åŒä¸€ä¸ªå‡½æ•°incrå®ç°)ã€APPENDã€SETRANGEã€STRLENã€‚å‡½æ•°è¯´æ˜å¦‚ä¸‹ï¼š</p>
<ol type="1">
<li><strong>SET</strong>ï¼š ä¸ºæŒ‡å®šçš„é”®ï¼ˆkeyï¼‰è®¾ç½®å€¼ï¼ˆvalueï¼‰ï¼Œ set(self,
name, value, **kwargs)ã€‚</li>
<li><strong>GET</strong>ï¼šè·å–æŒ‡å®šé”®ï¼ˆkeyï¼‰ç»‘å®šçš„å€¼ï¼ˆvalueï¼‰ï¼Œget(self,
name)ã€‚</li>
<li><strong>GETSET</strong>ï¼šä¸ºæŒ‡å®šçš„é”®ï¼ˆkeyï¼‰è®¾ç½®æ–°çš„å€¼ï¼ˆvalueï¼‰ï¼Œå¹¶è¿”å›æ—§çš„å€¼ï¼ˆold
Valueï¼‰ï¼Œgetset(self, name, value)</li>
<li><strong>SETEX</strong>ï¼šä¸ºæŒ‡å®šçš„é”®ï¼ˆkeyï¼‰è®¾ç½®è¿‡æœŸä»¥ç§’ï¼ˆsecondï¼‰è®¡çš„è¿‡æœŸæ—¶é—´ï¼Œsetex(self,
name, value, time)</li>
<li><strong>SETNX</strong>ï¼šé”®ï¼ˆkeyï¼‰ä¸å­˜åœ¨æ—¶ï¼Œä¸ºé”®ï¼ˆkeyï¼‰æŒ‡å®šå€¼ï¼ˆvalueï¼‰ï¼Œsetnx(self,
name, value)</li>
<li><strong>MSET</strong>ï¼šä¸€æ¬¡æ€§è®¾ç½®å¤šä¸ªé”®-å€¼(key-value)å¯¹,å‡½æ•°è®¾ç½®çš„é”®-å€¼å¯¹ï¼ˆå³mappingæ‰€æŒ‡å†…å®¹ï¼‰æ•°æ®è¦ä»¥Pythonå­—å…¸æ•°æ®ç±»å‹ä¼ å…¥ï¼Œmset(self,
mapping)</li>
<li><strong>MSETNX</strong>ï¼šé”®-å€¼(key-value)å¯¹ä¸å­˜åœ¨æ—¶ï¼Œè®¾ç½®é”®-å€¼ï¼ˆkey-valueï¼‰å¯¹,msetnx(self,
mapping)ï¼Œmappingå€¼å‚è€ƒ6</li>
<li><strong>INCR</strong>ï¼šè‡ªå¢å‡½æ•°ï¼Œé»˜è®¤æ­¥é•¿ä¸º1ï¼Œé€šè¿‡å¯¹æ­¥é•¿ï¼ˆamountï¼‰å¤§å°ä»¥åŠå­—ç¬¦çš„æ§åˆ¶å®ç°äº†INCRBYï¼ˆamount&gt;=1ï¼‰ã€DECRï¼ˆamount=-1ï¼‰ã€DECRBYï¼ˆamount&lt;=-1ï¼‰ç­‰å‡½æ•°åŠŸèƒ½ï¼Œincr(self,
name, amount=1)</li>
<li><strong>APPEND</strong>ï¼šä¸ºæŒ‡å®šçš„å­—ç¬¦ä¸²è¿½åŠ å€¼ï¼Œè‹¥ä¸å­˜åœ¨åˆ™ç›´æ¥åˆ›å»ºï¼Œappend(self,
key, value)</li>
<li><strong>SETRANGE</strong>ï¼šç”¨ value å‚æ•°è¦†å†™ç»™å®š key
æ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼ï¼Œä»åç§»é‡ offset å¼€å§‹ï¼Œsetrange(self, name, offset,
value)</li>
<li><strong>STRLEN</strong>ï¼šè¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå½“nameä¸å­˜åœ¨æ—¶è¿”å›0ï¼Œstrlen(self,
name)</li>
</ol>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="comment"># __author__ = 'free'</span></span><br><span class="line"></span><br><span class="line">pool = redis.ConnectionPool(host=<span class="string">'127.0.0.1'</span>, port=<span class="number">6379</span>)</span><br><span class="line"></span><br><span class="line">r = redis.Redis(connection_pool=pool)</span><br><span class="line"></span><br><span class="line">r.flushall() <span class="comment"># æ¸…ç©ºRedis</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">r.setex(<span class="string">'name'</span>, value=<span class="string">'natasha'</span>, time=<span class="number">2</span>) <span class="comment"># è®¾ç½®æ–°å€¼ï¼Œè¿‡æœŸæ—¶é—´ä¸º3s</span></span><br><span class="line">r.mset(k1 = <span class="string">'v1'</span>, k2 = <span class="string">'v2'</span>, k3 = <span class="string">'v3'</span>) <span class="comment"># æ‰¹é‡è®¾ç½®æ–°å€¼</span></span><br><span class="line">print(r.mget(<span class="string">'k1'</span>, <span class="string">'k2'</span>, <span class="string">'k3'</span>, <span class="string">'k4'</span>)) <span class="comment"># æ‰¹é‡è·å–æ–°å€¼</span></span><br><span class="line">print(r.getset(<span class="string">'name'</span>, <span class="string">'natasha'</span>)) <span class="comment"># è®¾ç½®æ–°å€¼å¹¶è·å–åŸæ¥çš„å€¼</span></span><br><span class="line">print(r.getrange(<span class="string">'name'</span>, <span class="number">0</span>, <span class="number">1</span>)) <span class="comment"># è·å–å­åºåˆ— 0 &lt;= x &lt;= 1</span></span><br><span class="line">r.setrange(<span class="string">'name'</span>, <span class="number">0</span>, <span class="string">'NATASHA'</span>) <span class="comment"># ä¿®æ”¹å­—ç¬¦ä¸²å†…å®¹ï¼Œä»æŒ‡å®šå­—ç¬¦ä¸²ç´¢å¼•å¼€å§‹å‘åæ›¿æ¢ï¼ˆæ–°å€¼å¤ªé•¿æ—¶ï¼Œåˆ™å‘åæ·»åŠ ï¼‰ï¼Œè¿”å›å€¼çš„é•¿åº¦</span></span><br><span class="line">i = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> i &lt; <span class="number">2</span>:</span><br><span class="line">    print(r.get(<span class="string">'name'</span>))</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    i += <span class="number">1</span></span><br><span class="line">    source = <span class="string">'foo'</span></span><br><span class="line">    r.set(<span class="string">'n1'</span>, source)</span><br><span class="line">    r.setbit(<span class="string">'n1'</span>, <span class="number">7</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">æ³¨ï¼šå¦‚æœåœ¨Redisä¸­æœ‰ä¸€ä¸ªå¯¹åº”ï¼š n1 = "foo"ï¼Œ</span></span><br><span class="line"><span class="string">é‚£ä¹ˆå­—ç¬¦ä¸²fooçš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸ºï¼š01100110 01101111 01101111</span></span><br><span class="line"><span class="string">æ‰€ä»¥ï¼Œå¦‚æœæ‰§è¡Œ setbit('n1', 7, 1)ï¼Œåˆ™å°±ä¼šå°†ç¬¬7ä½è®¾ç½®ä¸º1ï¼Œ</span></span><br><span class="line"><span class="string">é‚£ä¹ˆæœ€ç»ˆäºŒè¿›åˆ¶åˆ™å˜æˆ 01100111 01101111 01101111ï¼Œå³ï¼š"goo"</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line">print(r.get(<span class="string">'n1'</span>))</span><br><span class="line">print(r.getbit(<span class="string">'n1'</span>, <span class="number">7</span>)) <span class="comment"># è·å–n1å¯¹åº”çš„å€¼çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­çš„æŸä½çš„å€¼ ï¼ˆ0æˆ–1ï¼‰</span></span><br><span class="line">r.set(<span class="string">'n2'</span>, <span class="string">'å¨œå¡”è'</span>)</span><br><span class="line">print(r.strlen(<span class="string">'n2'</span>)) <span class="comment"># è¿”å›å¯¹åº”çš„å­—èŠ‚é•¿åº¦ï¼ˆä¸€ä¸ªæ±‰å­—3ä¸ªå­—èŠ‚ï¼‰</span></span><br><span class="line">r.set(<span class="string">'num'</span>, <span class="number">1</span>)</span><br><span class="line">r.incr(<span class="string">'num'</span>, amount=<span class="number">10</span>)</span><br><span class="line">r.decr(<span class="string">'num'</span>, amount=<span class="number">1</span>)</span><br><span class="line">print(r.get(<span class="string">'num'</span>)) <span class="comment"># è‡ªå¢numå¯¹åº”çš„å€¼ï¼Œå½“nameä¸å­˜åœ¨æ—¶ï¼Œåˆ™åˆ›å»ºnameï¼amountï¼Œå¦åˆ™ï¼Œåˆ™è‡ªå¢ã€‚</span></span><br><span class="line">r.append(<span class="string">'num'</span>, <span class="number">111</span>)</span><br><span class="line">print(r.get(<span class="string">'num'</span>)) <span class="comment"># åœ¨redis numå¯¹åº”çš„å€¼åé¢è¿½åŠ å†…å®¹</span></span><br></pre></td></tr></table></figure></p>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š <figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="string">b'v1'</span>, <span class="string">b'v2'</span>, <span class="string">b'v3'</span>, <span class="literal">None</span>]</span><br><span class="line"></span><br><span class="line"><span class="string">b'natasha'</span></span><br><span class="line"></span><br><span class="line"><span class="string">b'goo'</span></span><br><span class="line"></span><br><span class="line"><span class="string">b'NAtasha'</span></span><br><span class="line"></span><br><span class="line"><span class="string">b'NAtasha'</span></span><br><span class="line"></span><br><span class="line"><span class="string">b'NAtasha'</span></span><br><span class="line"></span><br><span class="line"><span class="string">b'NAtasha'</span></span><br><span class="line"></span><br><span class="line"><span class="string">b'goo'</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="number">7</span></span><br><span class="line"></span><br><span class="line"><span class="string">b'10'</span></span><br><span class="line"></span><br><span class="line"><span class="string">b'10111'</span></span><br></pre></td></tr></table></figure></p>
<h3 id="äºŒåˆ—è¡¨-lists">äºŒã€åˆ—è¡¨ lists</h3>
<p>Pythonæ“ä½œRedisä¸»è¦åˆ©ç”¨äº†redisæ¨¡å—æ¥å®ç°ï¼Œlistè¡¨æ“ä½œå‡½æ•°ä¸»è¦æ¨¡æ‹Ÿäº†Redisæ“ä½œå‘½ä»¤LPUSHï¼ŒLRANGEï¼ŒLINDEXï¼ŒBLPOPï¼ŒBRPOPã€‚å‡½æ•°è¯´æ˜å¦‚ä¸‹ï¼š</p>
<ol type="1">
<li><strong>lpush</strong>å‡½æ•°å®ç°äº†ä»å‘æŒ‡å®šredisåˆ—è¡¨å¤´éƒ¨å‹å…¥æ•°æ®åŠŸèƒ½ï¼Œlpush
key value</li>
<li><strong>lrange</strong>è·å–åˆ—è¡¨æŒ‡å®šèŒƒå›´çš„å‡½æ•°ï¼Œlrange key start
end</li>
<li><strong>lindex</strong>æ ¹æ®åˆ—è¡¨ä¸‹æ ‡é‡è·å–åˆ—è¡¨å…ƒç´ å€¼ï¼Œ lindex key
index</li>
<li><strong>blpop</strong>ä»åˆ—è¡¨å¤´éƒ¨å–å‡ºç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›è¯¥å…ƒç´ å€¼å¹¶ä»åˆ—è¡¨åˆ é™¤ï¼ˆlä»£è¡¨leftï¼Œå·¦è¾¹ï¼‰</li>
<li><strong>brpop</strong>ä»åˆ—è¡¨å°¾éƒ¨å–å‡ºç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›è¯¥å…ƒç´ å€¼å¹¶ä»åˆ—è¡¨åˆ é™¤ï¼ˆrä»£è¡¨rightï¼Œå³è¾¹ï¼‰</li>
<li><strong>LPUSHXã€RPUSHX</strong>ä»¥åŠå…¶ä»–ä¸€äº›Redisåˆ—è¡¨ï¼ˆListï¼‰å‡½æ•°ç›®å‰ç‰ˆæœ¬æ— æ³•å®ç°ï¼Œå¦‚æœ‰å¯å®ç°æ–¹æ³•åšå®¢ä»£ç äº‹ä¾‹å°†ä¼šå¾—åˆ°æ›´æ–°ã€‚</li>
</ol>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="comment"># __author__ = 'free'</span></span><br><span class="line"></span><br><span class="line">pool = redis.ConnectionPool(host=<span class="string">'127.0.0.1'</span>, port=<span class="number">6379</span>)</span><br><span class="line"></span><br><span class="line">r = redis.Redis(connection_pool=pool)</span><br><span class="line"></span><br><span class="line">r.flushall() <span class="comment"># æ¸…ç©ºRedis</span></span><br><span class="line"></span><br><span class="line">r.lpush(<span class="string">'oo'</span>, <span class="number">11</span>) <span class="comment"># ä¿å­˜é¡ºåºä¸º: 33,22,11</span></span><br><span class="line">r.lpushx(<span class="string">'oo'</span>, <span class="number">00</span>) <span class="comment"># åœ¨nameå¯¹åº”çš„listä¸­æ·»åŠ å…ƒç´ ï¼Œåªæœ‰nameå·²ç»å­˜åœ¨æ—¶ï¼Œå€¼æ·»åŠ åˆ°åˆ—è¡¨çš„æœ€å·¦è¾¹</span></span><br><span class="line">print(r.llen(<span class="string">'oo'</span>)) <span class="comment"># nameå¯¹åº”çš„listå…ƒç´ çš„ä¸ªæ•°</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">r.linsert(<span class="string">'oo'</span>, <span class="string">'before'</span>, <span class="number">11</span>, <span class="number">99</span>) <span class="comment"># åœ¨11ä¹‹å‰æ’å…¥å€¼99</span></span><br><span class="line">r.lset(<span class="string">'oo'</span>, <span class="number">1</span>, <span class="number">88</span>) <span class="comment"># å¯¹nameå¯¹åº”çš„listä¸­çš„æŸä¸€ä¸ªç´¢å¼•ä½ç½®é‡æ–°èµ‹å€¼</span></span><br><span class="line">print(r.lrange(<span class="string">'oo'</span>, <span class="number">0</span>, <span class="number">-1</span>)) <span class="comment"># åœ¨nameå¯¹åº”çš„åˆ—è¡¨åˆ†ç‰‡è·å–æ•°æ®</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">r.lrem(<span class="string">'oo'</span>, <span class="number">88</span>, num=<span class="number">1</span>) <span class="comment"># åœ¨nameå¯¹åº”çš„listä¸­åˆ é™¤æŒ‡å®šçš„å€¼.num=0ï¼Œåˆ é™¤åˆ—è¡¨ä¸­æ‰€æœ‰çš„æŒ‡å®šå€¼ï¼›num=2,ä»å‰åˆ°åï¼Œåˆ é™¤2ä¸ªï¼›num=-2,ä»åå‘å‰ï¼Œåˆ é™¤2ä¸ª</span></span><br><span class="line">print(r.lrange(<span class="string">'oo'</span>, <span class="number">0</span>, <span class="number">-1</span>))</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">print(r.lpop(<span class="string">'oo'</span>)) <span class="comment"># åœ¨nameå¯¹åº”çš„åˆ—è¡¨çš„å·¦ä¾§è·å–ç¬¬ä¸€ä¸ªå…ƒç´ å¹¶åœ¨åˆ—è¡¨ä¸­ç§»é™¤ï¼Œè¿”å›å€¼åˆ™æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">print(r.lindex(<span class="string">'oo'</span>, <span class="number">0</span>)) <span class="comment"># åœ¨nameå¯¹åº”çš„åˆ—è¡¨ä¸­æ ¹æ®ç´¢å¼•è·å–åˆ—è¡¨å…ƒç´ </span></span><br><span class="line">r.lpush(<span class="string">'l1'</span>, <span class="number">11</span>) <span class="comment"># indexä¸º0</span></span><br><span class="line">r.rpush(<span class="string">'l1'</span>, <span class="number">22</span>)</span><br><span class="line">r.rpush(<span class="string">'l1'</span>, <span class="number">33</span>)</span><br><span class="line">r.rpush(<span class="string">'l1'</span>, <span class="number">44</span>)</span><br><span class="line">r.rpush(<span class="string">'l1'</span>, <span class="number">55</span>) <span class="comment"># indexä¸º4</span></span><br><span class="line">r.ltrim(<span class="string">'l1'</span>, <span class="number">1</span>, <span class="number">3</span>) <span class="comment"># åœ¨nameå¯¹åº”çš„åˆ—è¡¨ä¸­ç§»é™¤æ²¡æœ‰åœ¨[start-end]ç´¢å¼•ä¹‹é—´çš„å€¼</span></span><br><span class="line">print(r.lrange(<span class="string">'l1'</span>, <span class="number">0</span>, <span class="number">-1</span>))</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">r.rpoplpush(<span class="string">'l1'</span>, <span class="string">'l1'</span>) <span class="comment"># ä»ä¸€ä¸ªåˆ—è¡¨å–å‡ºæœ€å³è¾¹çš„å…ƒç´ ï¼ŒåŒæ—¶å°†å…¶æ·»åŠ è‡³å¦ä¸€ä¸ªåˆ—è¡¨çš„æœ€å·¦è¾¹;srcè¦å–æ•°æ®çš„åˆ—è¡¨çš„name, dstè¦æ·»åŠ æ•°æ®çš„åˆ—è¡¨çš„name</span></span><br><span class="line">print(r.lrange(<span class="string">'l1'</span>, <span class="number">0</span>, <span class="number">-1</span>))</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">r.brpoplpush(<span class="string">'l1'</span>, <span class="string">'l1'</span>, timeout=<span class="number">3</span>) <span class="comment"># # timeoutï¼Œå½“srcå¯¹åº”çš„åˆ—è¡¨ä¸­æ²¡æœ‰æ•°æ®æ—¶ï¼Œé˜»å¡ç­‰å¾…å…¶æœ‰æ•°æ®çš„è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œ0 è¡¨ç¤ºæ°¸è¿œé˜»å¡</span></span><br><span class="line">print(r.lrange(<span class="string">'l1'</span>, <span class="number">0</span>, <span class="number">-1</span>))</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">print(r.blpop(<span class="string">'l1'</span>, <span class="number">3</span>)) <span class="comment"># ä»åˆ—è¡¨å¤´éƒ¨å–å‡ºç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›è¯¥å…ƒç´ å€¼å¹¶ä»åˆ—è¡¨åˆ é™¤ï¼ˆlä»£è¡¨leftï¼Œå·¦è¾¹ï¼‰</span></span><br><span class="line">print(r.lrange(<span class="string">'l1'</span>, <span class="number">0</span>, <span class="number">-1</span>))</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string"># ç”±äºredisç±»åº“ä¸­æ²¡æœ‰æä¾›å¯¹åˆ—è¡¨å…ƒç´ çš„å¢é‡è¿­ä»£ï¼Œå¦‚æœæƒ³è¦å¾ªç¯nameå¯¹åº”çš„åˆ—è¡¨çš„æ‰€æœ‰å…ƒç´ ï¼Œé‚£ä¹ˆå°±éœ€è¦ï¼š</span></span><br><span class="line"><span class="string"># 1ã€è·å–nameå¯¹åº”çš„æ‰€æœ‰åˆ—è¡¨</span></span><br><span class="line"><span class="string"># 2ã€å¾ªç¯åˆ—è¡¨</span></span><br><span class="line"><span class="string"># ä½†æ˜¯ï¼Œå¦‚æœåˆ—è¡¨éå¸¸å¤§ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½åœ¨ç¬¬ä¸€æ­¥æ—¶å°±å°†ç¨‹åºçš„å†…å®¹æ’‘çˆ†ï¼Œæ‰€æœ‰æœ‰å¿…è¦è‡ªå®šä¹‰ä¸€ä¸ªå¢é‡è¿­ä»£çš„åŠŸèƒ½ï¼š</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">'è‡ªå®šä¹‰å¢é‡è¿­ä»£ï¼š'</span>)</span><br><span class="line">r.flushall()</span><br><span class="line">r.lpush(<span class="string">'l1'</span>, <span class="number">11</span>) <span class="comment"># indexä¸º0</span></span><br><span class="line">r.rpush(<span class="string">'l1'</span>, <span class="number">22</span>)</span><br><span class="line">r.rpush(<span class="string">'l1'</span>, <span class="number">33</span>)</span><br><span class="line">r.rpush(<span class="string">'l1'</span>, <span class="number">44</span>)</span><br><span class="line">r.rpush(<span class="string">'l1'</span>, <span class="number">55</span>) <span class="comment"># indexä¸º4</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">list_iter</span><span class="params">(name)</span>:</span></span><br><span class="line">list_count = r.llen(name)</span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> range(list_count):</span><br><span class="line">	<span class="keyword">yield</span> r.lindex(name, index)</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> list_iter(<span class="string">'l1'</span>):</span><br><span class="line">	print(item)</span><br></pre></td></tr></table></figure> è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">2</span></span><br><span class="line"></span><br><span class="line">[<span class="string">b'0'</span>, <span class="string">b'88'</span>, <span class="string">b'11'</span>]</span><br><span class="line"></span><br><span class="line">[<span class="string">b'0'</span>, <span class="string">b'11'</span>]</span><br><span class="line"></span><br><span class="line"><span class="string">b'0'</span></span><br><span class="line"></span><br><span class="line"><span class="string">b'11'</span></span><br><span class="line"></span><br><span class="line">[<span class="string">b'22'</span>, <span class="string">b'33'</span>, <span class="string">b'44'</span>]</span><br><span class="line"></span><br><span class="line">[<span class="string">b'44'</span>, <span class="string">b'22'</span>, <span class="string">b'33'</span>]</span><br><span class="line"></span><br><span class="line">[<span class="string">b'33'</span>, <span class="string">b'44'</span>, <span class="string">b'22'</span>]</span><br><span class="line"></span><br><span class="line">(<span class="string">b'l1'</span>, <span class="string">b'33'</span>)</span><br><span class="line"></span><br><span class="line">[<span class="string">b'44'</span>, <span class="string">b'22'</span>]</span><br><span class="line"></span><br><span class="line">è‡ªå®šä¹‰å¢é‡è¿­ä»£ï¼š</span><br><span class="line"></span><br><span class="line"><span class="string">b'11'</span></span><br><span class="line"></span><br><span class="line"><span class="string">b'22'</span></span><br><span class="line"></span><br><span class="line"><span class="string">b'33'</span></span><br><span class="line"></span><br><span class="line"><span class="string">b'44'</span></span><br><span class="line"></span><br><span class="line"><span class="string">b'55'</span></span><br></pre></td></tr></table></figure>
<h3 id="ä¸‰é›†åˆ-sets">ä¸‰ã€é›†åˆ sets</h3>
<p>Redis æ•°æ®åº“é›†åˆå¯¹è±¡(set
object)æ˜¯ç”±stringç±»å‹çš„æ— é‡å¤å…ƒç´ çš„æ— éœ€é›†åˆï¼Œåº•å±‚ç¼–ç å¯ä»¥æ˜¯intsetæˆ–è€…hashtableã€‚intsetç¼–ç çš„é›†åˆå¯¹è±¡ç”¨æ•´æ•°é›†åˆæœ€ä¸ºåº•å±‚å®ç°ï¼Œæ‰€æœ‰å¯¹è±¡å…ƒç´ ä¿å­˜åœ¨æ•´æ•°é›†åˆä¸­ã€‚Pythonçš„redisæ¨¡å—å®ç°äº†
SADDã€SCARD ã€SDIFF ã€SDIFFSTOREã€SINTER ã€SINTERSTOREã€SISMEMBER
ã€SMEMBERS
ã€SMOVEã€SPOPã€SRANDMEMBERã€SREMã€SUNIONã€SUNIONSTOREæ“ä½œå‘½ä»¤çš„åŸºæœ¬ç”¨æ³•ã€‚å‡½æ•°è¯´æ˜å¦‚ä¸‹ï¼š</p>
<ol type="1">
<li><strong>SADD</strong>ï¼šå‘é›†åˆå¯¹è±¡æ·»åŠ æˆå‘˜ï¼Œsadd(self, name,
value)</li>
<li><strong>SCARD</strong>ï¼šè·å–é›†åˆå…ƒç´ ä¸ªæ•°ï¼Œscard(self, name)</li>
<li><strong>SDIFF</strong>ï¼šè¿”å›ç»™å®šå¤šä¸ªé›†åˆå¯¹è±¡çš„å·®é›†(set key1-set
key2..-set keyn)ï¼Œä»å·¦åˆ°å³è®¡ç®—é›†åˆå·®é›†ï¼Œsdiff(self, keys, *args)</li>
<li><strong>SDIFFSTORE</strong>ï¼šè¿”å›ç»™å®šç»™å®šå¤šä¸ªé›†åˆå¯¹è±¡çš„å·®é›†å¹¶å­˜å‚¨åœ¨ç›®æ ‡ï¼ˆdestï¼‰é›†åˆä¸­ï¼Œsdiffstore(self,
dest, keys, *args)</li>
<li><strong>SINTER</strong>ï¼šè¿”å›ç»™å®šæ‰€æœ‰é›†åˆï¼ˆkeys, <em>argsï¼‰çš„äº¤é›†,
sinter(self, keys,</em> args)</li>
<li><strong>SINTERSTORE</strong>ï¼šè¿”å›ç»™å®šæ‰€æœ‰é›†åˆï¼ˆkeys,
<em>argsï¼‰çš„äº¤é›†å¹¶å­˜å‚¨åœ¨ é›†åˆ(dest) ä¸­, sinterstore(self, dest,
keys,</em> args)</li>
<li><strong>SISMEMBER</strong>ï¼šåˆ¤æ–­ valueå…ƒç´ æ˜¯å¦æ˜¯é›†åˆ name
çš„æˆå‘˜,è¿”å›å¸ƒå°”é€»è¾‘å€¼Trueæˆ–è€…Falseï¼Œsismember(self, name, value)</li>
<li><strong>SMEMBERS</strong>ï¼šè¿”å›é›†åˆä¸­æ‰€å…ƒç´ å€¼çš„Pythoné›†åˆç±»å‹æ•°æ®ï¼Œsmembers(self,
name)</li>
<li><strong>SMOVE</strong>ï¼šå°†å…ƒç´ valueä»é›†åˆsrcç§»åŠ¨åˆ° é›†åˆ
destã€‚è‹¥å…ƒç´ valueåœ¨é›†åˆsrcä¸­ä¸å­˜åœ¨ï¼Œåˆ™é›†åˆdestä¸­ä¸ä¼šæ·»åŠ å…ƒç´ valueï¼Œ
smove(self, src, dest, value)</li>
<li><strong>SPOP</strong>ï¼šç§»é™¤å¹¶è¿”å›é›†åˆä¸­çš„ä¸€ä¸ªéšæœºå…ƒç´ , spop(self,
name)</li>
<li><strong>SRANDMEMBER</strong>ï¼šè¿”å›é›†åˆä¸­ä¸€ä¸ªéšæœºæ•°ï¼Œä½†æ˜¯ä¸åšç§»é™¤æ“ä½œ,
srandmember(self, name)ã€‚ä»Redis 2.6 ç‰ˆæœ¬å¼€å§‹ï¼Œ åœ¨å‘½ä»¤è¡Œä¸‹Srandmember
å‘½ä»¤æ¥å—å¯é€‰è¿”å›å…ƒç´ æ•°é‡çš„å‚æ•° redis&gt;SRANDMEMBER name count</li>
<li><strong>SREM</strong>ï¼šç§»é™¤é›†åˆä¸­ä¸€ä¸ªå…ƒç´ ï¼Œsrem(self, name,
value)ï¼Œredisæ¨¡å—ä»»ç„¶æ²¿ç”¨Redis 2.4 ç‰ˆæœ¬ä»¥å‰çš„åªæ¥å—å•ä¸ªå…ƒç´ çš„ç”¨æ³•ã€‚</li>
<li><strong>SUNION</strong>ï¼šè¿”å›æ‰€æœ‰ç»™å®šé›†åˆçš„å¹¶é›†ä¸­æ‰€æœ‰å…ƒç´ ï¼Œsunion(self,
keys, *args)</li>
<li><strong>SUNIONSTORE</strong>ï¼šæ‰€æœ‰ç»™å®šé›†åˆçš„å¹¶é›†å­˜å‚¨åœ¨é›†åˆdest ä¸­,
sunionstore(self, dest, keys, *args)</li>
<li><strong>SSCAN</strong>ï¼šè¿­ä»£é›†åˆä¸­çš„å…ƒç´ ï¼Œsscan(self, name,
cursor=0, match=None, count=None)</li>
</ol>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="comment"># __author__ = 'free'</span></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">pool = redis.ConnectionPool(host=<span class="string">'127.0.0.1'</span>, port=<span class="number">6379</span>)</span><br><span class="line"></span><br><span class="line">r = redis.Redis(connection_pool=pool)</span><br><span class="line"></span><br><span class="line">r.flushall() <span class="comment"># æ¸…ç©ºRedis</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">r.sadd(<span class="string">'s1'</span>, <span class="string">'v1'</span>, <span class="string">'v1'</span>, <span class="string">'v2'</span>, <span class="string">'v3'</span>) <span class="comment"># nameå¯¹åº”çš„é›†åˆä¸­æ·»åŠ å…ƒç´ </span></span><br><span class="line">r.sadd(<span class="string">'s2'</span>, <span class="string">'v2'</span>, <span class="string">'v4'</span>) <span class="comment"># nameå¯¹åº”çš„é›†åˆä¸­æ·»åŠ å…ƒç´ </span></span><br><span class="line">print(r.scard(<span class="string">'s1'</span>)) <span class="comment"># è·å–nameå¯¹åº”çš„é›†åˆä¸­å…ƒç´ ä¸ªæ•°</span></span><br><span class="line">print(r.sdiff(<span class="string">'s1'</span>, <span class="string">'s2'</span>)) <span class="comment">#åœ¨ç¬¬ä¸€ä¸ªnameå¯¹åº”çš„é›†åˆä¸­ä¸”ä¸åœ¨å…¶ä»–nameå¯¹åº”çš„é›†åˆçš„å…ƒç´ é›†åˆ</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">r.sdiffstore(<span class="string">'s3'</span>, <span class="string">'s1'</span>, <span class="string">'s2'</span>) <span class="comment"># è·å–ç¬¬ä¸€ä¸ªnameå¯¹åº”çš„é›†åˆä¸­ä¸”ä¸åœ¨å…¶ä»–nameå¯¹åº”çš„é›†åˆï¼Œå†å°†å…¶æ–°åŠ å…¥åˆ°destå¯¹åº”çš„é›†åˆä¸­</span></span><br><span class="line">print(r.smembers(<span class="string">'s3'</span>)) <span class="comment"># è·å–s3å¯¹åº”çš„é›†åˆçš„æ‰€æœ‰æˆå‘˜</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">print(r.sinter(<span class="string">'s1'</span>, <span class="string">'s2'</span>)) <span class="comment"># è·å–s1, s2å¯¹åº”é›†åˆçš„äº¤é›†</span></span><br><span class="line">r.sinterstore(<span class="string">'s4'</span>, <span class="string">'s1'</span>, <span class="string">'s2'</span>) <span class="comment"># è·å–s1, s2å¯¹åº”é›†åˆçš„äº¤é›†ï¼Œå¹¶å°†å…¶å­˜æ”¾åˆ°é›†åˆæ˜¯s4ä¸­</span></span><br><span class="line">print(r.smembers(<span class="string">'s4'</span>))</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">print(r.sunion(<span class="string">'s1'</span>, <span class="string">'s2'</span>)) <span class="comment"># è·å–s1, s2å¯¹åº”é›†åˆçš„å¹¶é›†</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">r.sunionstore(<span class="string">'s5'</span>, <span class="string">'s1'</span>, <span class="string">'s2'</span>) <span class="comment"># è·å–s1, s2å¯¹åº”é›†åˆçš„äº¤é›†ï¼Œå¹¶å°†å…¶å­˜æ”¾åˆ°é›†åˆæ˜¯s5ä¸­</span></span><br><span class="line">print(r.smembers(<span class="string">'s5'</span>))</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">print(r.sismember(<span class="string">'s4'</span>, <span class="string">'v4'</span>)) <span class="comment"># æ£€æŸ¥valueæ˜¯å¦æ˜¯nameå¯¹åº”çš„é›†åˆçš„æˆå‘˜</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">r.smove(<span class="string">'s2'</span>, <span class="string">'s1'</span>, <span class="string">'v4'</span>) <span class="comment"># å°†é›†åˆs2ä¸­æˆå‘˜v4ç§»è‡³é›†åˆs1ä¸­</span></span><br><span class="line">print(r.smembers(<span class="string">'s1'</span>))</span><br><span class="line">r.srem(<span class="string">'s1'</span>, <span class="string">'v1'</span>) <span class="comment"># åœ¨nameå¯¹åº”çš„é›†åˆä¸­åˆ é™¤æŸäº›å€¼</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">print(r.spop(<span class="string">'s1'</span>)) <span class="comment"># ä»é›†åˆçš„å³ä¾§ï¼ˆå°¾éƒ¨ï¼‰ç§»é™¤ä¸€ä¸ªæˆå‘˜ï¼Œå¹¶å°†å…¶è¿”å› æ³¨æ„ï¼šé›†åˆæ˜¯æ— åºçš„ï¼Œæ•…ç»“æœéšæœºï¼</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">print(r.srandmember(<span class="string">'s1'</span>)) <span class="comment"># ä»nameå¯¹åº”çš„é›†åˆä¸­éšæœºè·å– numbers ä¸ªå…ƒç´ (Redis 2.6+)</span></span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br><span class="line">&#123;<span class="string">b'v3'</span>, <span class="string">b'v1'</span>&#125;</span><br><span class="line"></span><br><span class="line">&#123;<span class="string">b'v3'</span>, <span class="string">b'v1'</span>&#125;</span><br><span class="line"></span><br><span class="line">&#123;<span class="string">b'v2'</span>&#125;</span><br><span class="line"></span><br><span class="line">&#123;<span class="string">b'v2'</span>&#125;</span><br><span class="line"></span><br><span class="line">&#123;<span class="string">b'v3'</span>, <span class="string">b'v2'</span>, <span class="string">b'v4'</span>, <span class="string">b'v1'</span>&#125;</span><br><span class="line"></span><br><span class="line">&#123;<span class="string">b'v3'</span>, <span class="string">b'v2'</span>, <span class="string">b'v4'</span>, <span class="string">b'v1'</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"></span><br><span class="line">&#123;<span class="string">b'v3'</span>, <span class="string">b'v2'</span>, <span class="string">b'v4'</span>, <span class="string">b'v1'</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">b'v2'</span></span><br><span class="line"></span><br><span class="line"><span class="string">b'v3'</span></span><br></pre></td></tr></table></figure>
<h3 id="å››æœ‰åºé›†åˆ-sorted-sets">å››ã€æœ‰åºé›†åˆ sorted sets</h3>
<table>
<colgroup>
<col style="width: 31%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">å‘½ä»¤</th>
<th style="text-align: left;">æè¿°</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Redis Zadd å‘½ä»¤</td>
<td
style="text-align: left;">å‘æœ‰åºé›†åˆæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ï¼Œæˆ–è€…æ›´æ–°å·²å­˜åœ¨æˆå‘˜çš„åˆ†æ•°</td>
</tr>
<tr class="even">
<td style="text-align: left;">Redis Zcard å‘½ä»¤</td>
<td style="text-align: left;">è·å–æœ‰åºé›†åˆçš„æˆå‘˜æ•°</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Redis Zcount å‘½ä»¤</td>
<td style="text-align: left;">è®¡ç®—åœ¨æœ‰åºé›†åˆä¸­æŒ‡å®šåŒºé—´åˆ†æ•°çš„æˆå‘˜æ•°</td>
</tr>
<tr class="even">
<td style="text-align: left;">Redis Zincrby å‘½ä»¤</td>
<td style="text-align: left;">æœ‰åºé›†åˆä¸­å¯¹æŒ‡å®šæˆå‘˜çš„åˆ†æ•°åŠ ä¸Šå¢é‡
increment</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Redis Zinterstore å‘½ä»¤</td>
<td
style="text-align: left;">è®¡ç®—ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªæœ‰åºé›†çš„äº¤é›†å¹¶å°†ç»“æœé›†å­˜å‚¨åœ¨æ–°çš„æœ‰åºé›†åˆ
key ä¸­</td>
</tr>
<tr class="even">
<td style="text-align: left;">Redis Zlexcount å‘½ä»¤</td>
<td
style="text-align: left;">åœ¨æœ‰åºé›†åˆä¸­è®¡ç®—æŒ‡å®šå­—å…¸åŒºé—´å†…æˆå‘˜æ•°é‡</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Redis Zrange å‘½ä»¤</td>
<td
style="text-align: left;">é€šè¿‡ç´¢å¼•åŒºé—´è¿”å›æœ‰åºé›†åˆæˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜</td>
</tr>
<tr class="even">
<td style="text-align: left;">Redis Zrangebylex å‘½ä»¤</td>
<td style="text-align: left;">é€šè¿‡å­—å…¸åŒºé—´è¿”å›æœ‰åºé›†åˆçš„æˆå‘˜</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Redis Zrangebyscore å‘½ä»¤</td>
<td style="text-align: left;">é€šè¿‡åˆ†æ•°è¿”å›æœ‰åºé›†åˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜</td>
</tr>
<tr class="even">
<td style="text-align: left;">Redis Zrank å‘½ä»¤</td>
<td style="text-align: left;">è¿”å›æœ‰åºé›†åˆä¸­æŒ‡å®šæˆå‘˜çš„ç´¢å¼•</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Redis Zrem å‘½ä»¤</td>
<td style="text-align: left;">ç§»é™¤æœ‰åºé›†åˆä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜</td>
</tr>
<tr class="even">
<td style="text-align: left;">Redis Zremrangebylex å‘½ä»¤</td>
<td
style="text-align: left;">ç§»é™¤æœ‰åºé›†åˆä¸­ç»™å®šçš„å­—å…¸åŒºé—´çš„æ‰€æœ‰æˆå‘˜</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Redis Zremrangebyrank å‘½ä»¤</td>
<td
style="text-align: left;">ç§»é™¤æœ‰åºé›†åˆä¸­ç»™å®šçš„æ’ååŒºé—´çš„æ‰€æœ‰æˆå‘˜</td>
</tr>
<tr class="even">
<td style="text-align: left;">Redis Zremrangebyscore å‘½ä»¤</td>
<td
style="text-align: left;">ç§»é™¤æœ‰åºé›†åˆä¸­ç»™å®šçš„åˆ†æ•°åŒºé—´çš„æ‰€æœ‰æˆå‘˜</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Redis Zrevrange å‘½ä»¤</td>
<td
style="text-align: left;">è¿”å›æœ‰åºé›†ä¸­æŒ‡å®šåŒºé—´å†…çš„æˆå‘˜ï¼Œé€šè¿‡ç´¢å¼•ï¼Œåˆ†æ•°ä»é«˜åˆ°åº•</td>
</tr>
<tr class="even">
<td style="text-align: left;">Redis Zrevrangebyscore å‘½ä»¤</td>
<td
style="text-align: left;">è¿”å›æœ‰åºé›†ä¸­æŒ‡å®šåˆ†æ•°åŒºé—´å†…çš„æˆå‘˜ï¼Œåˆ†æ•°ä»é«˜åˆ°ä½æ’åº</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Redis Zrevrank å‘½ä»¤</td>
<td
style="text-align: left;">è¿”å›æœ‰åºé›†åˆä¸­æŒ‡å®šæˆå‘˜çš„æ’åï¼Œæœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å‡(ä»å¤§åˆ°å°)æ’åº</td>
</tr>
<tr class="even">
<td style="text-align: left;">Redis Zscore å‘½ä»¤</td>
<td style="text-align: left;">è¿”å›æœ‰åºé›†ä¸­ï¼Œæˆå‘˜çš„åˆ†æ•°å€¼</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Redis Zunionstore å‘½ä»¤</td>
<td
style="text-align: left;">è®¡ç®—ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªæœ‰åºé›†çš„å¹¶é›†ï¼Œå¹¶å­˜å‚¨åœ¨æ–°çš„
key ä¸­</td>
</tr>
<tr class="even">
<td style="text-align: left;">Redis Zscan å‘½ä»¤</td>
<td
style="text-align: left;">è¿­ä»£æœ‰åºé›†åˆä¸­çš„å…ƒç´ ï¼ˆåŒ…æ‹¬å…ƒç´ æˆå‘˜å’Œå…ƒç´ åˆ†å€¼ï¼‰</td>
</tr>
</tbody>
</table>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="comment"># __author__ = 'free'</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">pool = redis.ConnectionPool(host=<span class="string">'127.0.0.1'</span>, port=<span class="number">6379</span>)</span><br><span class="line"></span><br><span class="line">r = redis.Redis(connection_pool=pool)</span><br><span class="line"></span><br><span class="line">r.flushall() <span class="comment"># æ¸…ç©ºRedis</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">r.zadd(<span class="string">'z1'</span>, <span class="string">'11'</span>, <span class="number">1</span>, <span class="string">'22'</span>, <span class="number">2</span>, <span class="string">'33'</span>, <span class="number">3</span>, <span class="string">'44'</span>, <span class="number">4</span>, <span class="string">'55'</span>, <span class="number">5</span>, <span class="string">'66'</span>, <span class="number">6</span>, <span class="string">'66'</span>, <span class="number">7</span>) <span class="comment"># åœ¨nameå¯¹åº”çš„æœ‰åºé›†åˆä¸­æ·»åŠ å…ƒç´ </span></span><br><span class="line">print(r.zcard(<span class="string">'z1'</span>)) <span class="comment"># è·å–nameå¯¹åº”çš„æœ‰åºé›†åˆå…ƒç´ çš„æ•°é‡</span></span><br><span class="line">print(r.zcount(<span class="string">'z1'</span>, <span class="number">1</span>, <span class="number">2</span>)) <span class="comment"># è·å–nameå¯¹åº”çš„æœ‰åºé›†åˆä¸­åˆ†æ•° åœ¨ [min,max] ä¹‹é—´çš„ä¸ªæ•°</span></span><br><span class="line">r.zincrby(<span class="string">'z1'</span>, <span class="string">'11'</span>, amount=<span class="number">5</span>) <span class="comment"># è‡ªå¢nameå¯¹åº”çš„æœ‰åºé›†åˆçš„ name å¯¹åº”çš„åˆ†æ•°</span></span><br><span class="line">print(r.zrange(<span class="string">'z1'</span>, <span class="number">0</span>, <span class="number">-1</span>, desc=<span class="literal">False</span>, withscores=<span class="literal">True</span>)) <span class="comment"># å€¼11è¢«æ’åºåˆ°æœ€å;æ­¤å¤„è¡¨ç¤ºæŒ‰å…ƒç´ çš„å€¼å‡åºæ’åˆ—</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">print(r.zrank(<span class="string">'z1'</span>, <span class="number">33</span>)) <span class="comment"># è·å–æŸä¸ªå€¼åœ¨ nameå¯¹åº”çš„æœ‰åºé›†åˆä¸­çš„æ’è¡Œï¼ˆä» 0 å¼€å§‹ï¼‰</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">r.zrem(<span class="string">'z1'</span>, <span class="string">'66'</span>) <span class="comment"># åˆ é™¤nameå¯¹åº”çš„æœ‰åºé›†åˆä¸­å€¼æ˜¯valuesçš„æˆå‘˜</span></span><br><span class="line">print(r.zrange(<span class="string">'z1'</span>, <span class="number">0</span>, <span class="number">-1</span>, desc=<span class="literal">False</span>, withscores=<span class="literal">True</span>))</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">r.zremrangebyrank(<span class="string">'z1'</span>, <span class="number">0</span>, <span class="number">1</span>) <span class="comment"># æ ¹æ®æ’è¡ŒèŒƒå›´åˆ é™¤</span></span><br><span class="line">print(r.zrange(<span class="string">'z1'</span>, <span class="number">0</span>, <span class="number">-1</span>, desc=<span class="literal">False</span>, withscores=<span class="literal">True</span>))</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">r.zremrangebyscore(<span class="string">'z1'</span>, <span class="number">4.5</span>, <span class="number">5.5</span>) <span class="comment"># æ ¹æ®åˆ†æ•°èŒƒå›´åˆ é™¤</span></span><br><span class="line">print(r.zrange(<span class="string">'z1'</span>, <span class="number">0</span>, <span class="number">-1</span>, desc=<span class="literal">False</span>, withscores=<span class="literal">True</span>))</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">print(r.zscore(<span class="string">'z1'</span>, <span class="number">11</span>)) <span class="comment"># è·å–nameå¯¹åº”æœ‰åºé›†åˆä¸­ value å¯¹åº”çš„åˆ†æ•°</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">r.zadd(<span class="string">"zset_name"</span>, <span class="string">"a1"</span>, <span class="number">6</span>, <span class="string">"a2"</span>, <span class="number">2</span>, <span class="string">"a3"</span>, <span class="number">5</span>)</span><br><span class="line">r.zadd(<span class="string">'zset_name1'</span>, a1=<span class="number">7</span>, b1=<span class="number">10</span>, b2=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">è·å–ä¸¤ä¸ªæœ‰åºé›†åˆçš„äº¤é›†å¹¶æ”¾å…¥desté›†åˆï¼Œå¦‚æœé‡åˆ°ç›¸åŒå€¼ä¸åŒåˆ†æ•°ï¼Œåˆ™æŒ‰ç…§aggregateè¿›è¡Œæ“ä½œ</span></span><br><span class="line"><span class="string">aggregateçš„å€¼ä¸º: SUM MIN MAX</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line">r.zinterstore(<span class="string">'zset_name2'</span>, (<span class="string">'zset_name'</span>, <span class="string">'zset_name1'</span>), aggregate=<span class="string">'Sum'</span>)</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">print(r.zrange(<span class="string">'zset_name2'</span>, <span class="number">0</span>, <span class="number">-1</span>, desc=<span class="literal">False</span>, withscores=<span class="literal">True</span>))</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span></span><br><span class="line"></span><br><span class="line">[(<span class="string">b'22'</span>, <span class="number">2.0</span>), (<span class="string">b'33'</span>, <span class="number">3.0</span>), (<span class="string">b'44'</span>, <span class="number">4.0</span>), (<span class="string">b'55'</span>, <span class="number">5.0</span>), (<span class="string">b'11'</span>, <span class="number">6.0</span>), (<span class="string">b'66'</span>, <span class="number">6.0</span>)]</span><br><span class="line"></span><br><span class="line"><span class="number">1</span></span><br><span class="line"></span><br><span class="line">[(<span class="string">b'22'</span>, <span class="number">2.0</span>), (<span class="string">b'33'</span>, <span class="number">3.0</span>), (<span class="string">b'44'</span>, <span class="number">4.0</span>), (<span class="string">b'55'</span>, <span class="number">5.0</span>), (<span class="string">b'11'</span>, <span class="number">6.0</span>)]</span><br><span class="line"></span><br><span class="line">[(<span class="string">b'44'</span>, <span class="number">4.0</span>), (<span class="string">b'55'</span>, <span class="number">5.0</span>), (<span class="string">b'11'</span>, <span class="number">6.0</span>)]</span><br><span class="line"></span><br><span class="line">[(<span class="string">b'44'</span>, <span class="number">4.0</span>), (<span class="string">b'11'</span>, <span class="number">6.0</span>)]</span><br><span class="line"></span><br><span class="line"><span class="number">6.0</span></span><br><span class="line"></span><br><span class="line">[(<span class="string">b'a1'</span>, <span class="number">13.0</span>)]</span><br></pre></td></tr></table></figure>
<h3 id="äº”å“ˆå¸Œ-hashes">äº”ã€å“ˆå¸Œ hashes</h3>
<p>Redis
æ•°æ®åº“hashæ•°æ®ç±»å‹æ˜¯ä¸€ä¸ªstringç±»å‹çš„keyå’Œvalueçš„æ˜ å°„è¡¨ï¼Œé€‚ç”¨äºå­˜å‚¨å¯¹è±¡ã€‚redis
ä¸­æ¯ä¸ªhashå¯ä»¥å­˜å‚¨é”®å€¼å¯¹å¤šè¾¾40äº¿ã€‚Pythonçš„redisæ¨¡å—å®ç°äº†Rediså“ˆå¸Œï¼ˆHashï¼‰å‘½ä»¤è¡Œæ“ä½œçš„å‡ ä¹å…¨éƒ¨å‘½ä»¤ï¼ŒåŒ…æ‹¬HDELã€HEXISTSã€HGETã€HGETALLã€HINCRBYã€HKEYSã€HLEN
ã€HMGET ã€HMSET ã€HSET ã€HSETNX ã€HVALS
ã€HINCRBYFLOATç­‰å‘½ä»¤ã€‚å‡½æ•°è¯´æ˜å¦‚ä¸‹ï¼š</p>
<ol type="1">
<li><strong>HDEL</strong>ï¼šåˆ é™¤å¯¹åº”å“ˆå¸Œï¼ˆHashï¼‰è¡¨çš„æŒ‡å®šé”®ï¼ˆkeyï¼‰çš„å­—æ®µï¼Œhdel(self,
name, key)</li>
<li><strong>HEXISTS</strong>ï¼šæ£€æµ‹å“ˆå¸Œï¼ˆHashï¼‰è¡¨å¯¹åº”é”®ï¼ˆkeyï¼‰å­—æ®µæ˜¯å¦å­˜åœ¨ï¼Œè¿”å›å¸ƒå°”é€»è¾‘ï¼Œhexists(self,
name, key)</li>
<li><strong>HGET</strong>ï¼šè·å–å“ˆå¸Œï¼ˆHashï¼‰æŒ‡å®šé”®ï¼ˆkeyï¼‰å¯¹åº”çš„å€¼ï¼Œhget(self,
name, key)</li>
<li><strong>HGETALL</strong>ï¼šè·å–å“ˆå¸Œ(Hash)è¡¨çš„é”®-å€¼å¯¹ï¼ˆkey-value
pairsï¼‰,è¿”å›pythonå­—å…¸ç±»å‹æ•°æ®ï¼Œhgetall(self, name)</li>
<li><strong>HINCRBY</strong>ï¼šä¸ºå“ˆå¸Œè¡¨ï¼ˆHashï¼‰æŒ‡å®šé”®ï¼ˆkeyï¼‰å¯¹åº”çš„å€¼ï¼ˆkeyï¼‰åŠ ä¸ŠæŒ‡å®šçš„æ•´æ•°æ•°å€¼ï¼ˆintï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰hincrby(self&gt;,
name, key, amount=1)ï¼ŒRedis ä¸­æœ¬æ“ä½œçš„å€¼è¢«é™åˆ¶åœ¨ 64
ä½(bit)æœ‰ç¬¦å·æ•°å­—ã€‚</li>
<li><strong>HKEYS</strong>ï¼šè¿”å›å“ˆå¸Œè¡¨ï¼ˆHashï¼‰å¯¹åº”é”®ï¼ˆkeyï¼‰çš„æ•°ç»„ï¼ˆPythonç§°ä¹‹ä¸ºåˆ—è¡¨Listï¼‰ï¼Œhkeys(self,
name)</li>
<li><strong>HLEN</strong>ï¼š è·å–å“ˆå¸Œè¡¨ï¼ˆHashï¼‰ä¸­é”®-å€¼å¯¹ï¼ˆkey-value
pairsï¼‰ä¸ªæ•°ï¼Œhlen(self, name)</li>
<li><strong>HMGET</strong>ï¼šè·å–å“ˆå¸Œè¡¨ï¼ˆHashï¼‰ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªç»™ç‚¹å­—æ®µçš„å€¼ï¼Œä¸å­˜åœ¨è¿”å›nil(Rediså‘½ä»¤è¡Œ)/None(Python)ï¼Œhmget(self,
name, keys)ï¼Œå…¶ä¸­keyså¯ä»¥ä¸ºåˆ—è¡¨ï¼ˆlistï¼‰</li>
<li><strong>HMSET</strong>ï¼šè®¾ç½®å¯¹ä¸ªé”®-å€¼å¯¹ï¼ˆkey-value
pairsï¼‰åˆ°å“ˆå¸Œè¡¨ï¼ˆHashï¼‰ä¸­ï¼Œpythonè¾“å…¥å€¼ï¼ˆmappingï¼‰ä¸ºå­—å…¸ï¼ˆdictionaryï¼‰ç±»å‹ï¼Œhmset(self,
name, mapping)</li>
<li><strong>HSET</strong>ï¼šä¸ºå“ˆå¸Œè¡¨ï¼ˆHashï¼‰èµ‹å€¼ï¼Œè‹¥é”®ï¼ˆkeyï¼‰å­˜åœ¨å€¼ï¼ˆvalueï¼‰åˆ™è¦†ç›–ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºï¼Œhset(self,
name, key, value)</li>
<li><strong>HSETNX</strong>ï¼šä¸ºå“ˆå¸Œè¡¨ï¼ˆHashï¼‰ä¸å­˜å€¼ï¼ˆvalueï¼‰çš„é”®ï¼ˆkeyï¼‰èµ‹å€¼ï¼Œå­˜åœ¨æ“ä½œæ— æ•ˆï¼Œå¯¹åº”å€¼ï¼ˆvalueï¼‰æ— å˜åŒ–ï¼Œhsetnx(self,
name, key, value)</li>
<li><strong>HVALS</strong>ï¼šè¿”å›å“ˆå¸Œè¡¨ï¼ˆHashï¼‰å¯¹åº”å€¼ï¼ˆvalueï¼‰çš„åˆ—è¡¨ï¼Œhvals(self,
name)</li>
<li><strong>HINCRBYFLOAT</strong>ï¼šä¸ºå“ˆå¸Œè¡¨ key
ä¸­çš„æŒ‡å®šå­—æ®µçš„æµ®ç‚¹æ•°å€¼åŠ ä¸Šå¢é‡ increment ï¼Œhincrbyfloat(self, name, key,
amount=1.0)</li>
</ol>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="comment"># __author__ = 'free'</span></span><br><span class="line"></span><br><span class="line">pool = redis.ConnectionPool(host=<span class="string">'127.0.0.1'</span>, port=<span class="number">6379</span>)</span><br><span class="line"></span><br><span class="line">r = redis.Redis(connection_pool=pool)</span><br><span class="line"></span><br><span class="line">r.flushall() <span class="comment"># æ¸…ç©ºRedis</span></span><br><span class="line"></span><br><span class="line">r.hset(<span class="string">'n1'</span>, <span class="string">'k1'</span>, <span class="string">'v1'</span>) <span class="comment"># hset(name, key, value),nameå¯¹åº”çš„hashä¸­è®¾ç½®ä¸€ä¸ªé”®å€¼å¯¹ï¼ˆä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºï¼›å¦åˆ™ï¼Œä¿®æ”¹ï¼‰</span></span><br><span class="line">print(r.hget(<span class="string">'n1'</span>, <span class="string">'k1'</span>))</span><br><span class="line">r.hmset(<span class="string">'n2'</span>, &#123;<span class="string">'k1'</span>: <span class="string">'v1'</span>, <span class="string">'k2'</span>: <span class="string">'v2'</span>, <span class="string">'k3'</span>: <span class="string">'v3'</span>&#125;) <span class="comment"># hmset(name, mapping),åœ¨nameå¯¹åº”çš„hashä¸­æ‰¹é‡è®¾ç½®é”®å€¼å¯¹</span></span><br><span class="line">print(r.hmget(<span class="string">'n2'</span>, <span class="string">'k2'</span>))</span><br><span class="line">print(r.hgetall(<span class="string">'n2'</span>)) <span class="comment"># è·å–nameå¯¹åº”hashçš„æ‰€æœ‰é”®å€¼</span></span><br><span class="line">print(r.hlen(<span class="string">'n2'</span>)) <span class="comment"># è·å–nameå¯¹åº”çš„hashä¸­é”®å€¼å¯¹çš„ä¸ªæ•°</span></span><br><span class="line">print(r.hkeys(<span class="string">'n2'</span>)) <span class="comment"># è·å–nameå¯¹åº”çš„hashä¸­æ‰€æœ‰çš„keyçš„å€¼</span></span><br><span class="line">print(r.hvals(<span class="string">'n2'</span>)) <span class="comment"># è·å–nameå¯¹åº”çš„hashä¸­æ‰€æœ‰çš„valueçš„å€¼</span></span><br><span class="line">print(r.hexists(<span class="string">'n2'</span>, <span class="string">'k4'</span>)) <span class="comment"># æ£€æŸ¥nameå¯¹åº”çš„hashæ˜¯å¦å­˜åœ¨å½“å‰ä¼ å…¥çš„key</span></span><br><span class="line">r.hdel(<span class="string">'n2'</span>, <span class="string">'k3'</span>) <span class="comment"># å°†nameå¯¹åº”çš„hashä¸­æŒ‡å®škeyçš„é”®å€¼å¯¹åˆ é™¤</span></span><br><span class="line">r.hset(<span class="string">'n3'</span>, <span class="string">'k1'</span>, <span class="number">1</span>)</span><br><span class="line">r.hincrby(<span class="string">'n3'</span>, <span class="string">'k1'</span>, amount=<span class="number">1</span>) <span class="comment"># hincrby(name, key, amount=1),è‡ªå¢nameå¯¹åº”çš„hashä¸­çš„æŒ‡å®škeyçš„valueçš„å€¼ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºkey=amount</span></span><br><span class="line">print(r.hgetall(<span class="string">'n3'</span>))</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">b'v1'</span></span><br><span class="line"></span><br><span class="line">[<span class="string">b'v2'</span>]</span><br><span class="line"></span><br><span class="line">&#123;<span class="string">b'k1'</span>: <span class="string">b'v1'</span>, <span class="string">b'k2'</span>: <span class="string">b'v2'</span>, <span class="string">b'k3'</span>: <span class="string">b'v3'</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br><span class="line">[<span class="string">b'k1'</span>, <span class="string">b'k2'</span>, <span class="string">b'k3'</span>]</span><br><span class="line"></span><br><span class="line">[<span class="string">b'v1'</span>, <span class="string">b'v2'</span>, <span class="string">b'v3'</span>]</span><br><span class="line"></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"></span><br><span class="line">&#123;<span class="string">b'k1'</span>: <span class="string">b'2'</span>&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonèµ‹å€¼&amp;æµ…æ‹·è´&amp;æ·±æ‹·è´</title>
    <url>/python%E8%B5%8B%E5%80%BC-%E6%B5%85%E6%8B%B7%E8%B4%9D-%E6%B7%B1%E6%8B%B7%E8%B4%9D/</url>
    <content><![CDATA[<p>è®°å½•Pythonä¸­èµ‹å€¼&amp;æµ…æ‹·è´&amp;æ·±æ‹·è´å’ŒåŒºåˆ«ï¼ŒåŒæ—¶è¿˜æœ‰list.append()æ—¶æµ…æ‹·è´çš„é—®é¢˜</p>
<a id="more"></a>
<h2 id="èµ‹å€¼">èµ‹å€¼</h2>
<p>åœ¨pythonä¸­ï¼Œå¯¹è±¡çš„èµ‹å€¼å°±æ˜¯ç®€å•çš„å¯¹è±¡å¼•ç”¨ï¼Œè¿™ç‚¹å’ŒC++æ˜¯ä¸åŒçš„</p>
<p>å¦‚ä¸‹ä¾‹å­ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span><br><span class="line">b = a Â  <span class="comment"># é‡‡ç”¨ç®€å•çš„=èµ‹å€¼</span></span><br><span class="line">print(a==b)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹é¢æ˜¯è¾“å‡ºç»“æœï¼š</span></span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>
<p>è¿™ç§æƒ…å†µä¸‹ï¼Œbå’Œaæ˜¯ä¸€æ ·çš„ï¼Œä»–ä»¬æŒ‡å‘åŒä¸€ç‰‡å†…å­˜ï¼Œbä¸è¿‡æ˜¯açš„åˆ«åï¼Œæ˜¯å¼•ç”¨ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨aä¸bæ˜¯å¦ç›¸åŒæ¥åˆ¤æ–­ï¼Œè¿”å›<code>True</code>ï¼Œè¡¨æ˜ä»–ä»¬åœ°å€ç›¸åŒï¼Œå†…å®¹ç›¸åŒã€‚</p>
<p>èµ‹å€¼æ“ä½œ(åŒ…æ‹¬å¯¹è±¡ä½œä¸ºå‚æ•°ã€è¿”å›å€¼)ä¸ä¼šå¼€è¾Ÿæ–°çš„å†…å­˜ç©ºé—´ï¼Œå®ƒåªæ˜¯å¤åˆ¶äº†æ–°å¯¹è±¡çš„å¼•ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé™¤äº†bè¿™ä¸ªåå­—ä»¥å¤–ï¼Œæ²¡æœ‰å…¶å®ƒçš„å†…å­˜å¼€é”€ã€‚</p>
<p>ä¿®æ”¹äº†aï¼Œå°±å½±å“äº†bï¼›åŒç†ï¼Œä¿®æ”¹äº†bå°±å½±å“äº†aã€‚ä¸‹é¢çš„ä¾‹å­å°è¯•å¯¹bè¿›è¡Œä¿®æ”¹ï¼Œåœ¨åé¢åŠ å…¥æ–°çš„å…ƒç´ â€™dâ€™ï¼Œé€šè¿‡è§‚å¯Ÿè¾“å‡ºç»“æœå‘ç°ï¼šåœ¨ä¿®æ”¹åˆ—è¡¨bçš„åŒæ—¶ï¼Œåˆ—è¡¨aä¹Ÿä¼šè¢«ä¿®æ”¹ï¼Œå› ä¸ºä¸¤è€…ç”¨çš„æ˜¯åŒä¸€ä¸ªå†…å­˜ç©ºé—´ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span><br><span class="line">b = a</span><br><span class="line">b.append(<span class="string">'d'</span>)</span><br><span class="line">print(<span class="string">'a = &#123;&#125;'</span>.format(a))</span><br><span class="line">print(<span class="string">'b = &#123;&#125;'</span>.format(b))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹é¢æ˜¯è¾“å‡ºç»“æœï¼š</span></span><br><span class="line">a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>]</span><br><span class="line">b = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>]</span><br></pre></td></tr></table></figure>
<h2 id="æµ…æ‹·è´">æµ…æ‹·è´</h2>
<p>æµ…æ‹·è´ä¼šåˆ›å»ºæ–°å¯¹è±¡ï¼Œå…¶å†…å®¹æ˜¯åŸå¯¹è±¡çš„å¼•ç”¨ã€‚</p>
<p>æµ…æ‹·è´æœ‰ä¸‰ç§å½¢å¼ï¼šåˆ‡ç‰‡æ“ä½œï¼Œå·¥å‚å‡½æ•°ï¼Œ<code>copy</code>æ¨¡å—ä¸­çš„copyå‡½æ•°ã€‚</p>
<p><strong>æ¯”å¦‚å¯¹ä¸Šè¿°aï¼š</strong></p>
<ul>
<li>1ã€åˆ‡ç‰‡æ“ä½œï¼šb = a[:] æˆ–è€… b = [each for each in a]</li>
<li>2ã€å·¥å‚å‡½æ•°ï¼šb = list(a)</li>
<li>3ã€copyå‡½æ•°ï¼šb = copy.copy(a) #ä½¿ç”¨æ—¶è¦import copyæ¨¡å—</li>
</ul>
<p>æµ…æ‹·è´äº§ç”Ÿçš„bä¸å†æ˜¯aäº†ï¼Œä½¿ç”¨iså¯ä»¥å‘ç°ä»–ä»¬ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œä½¿ç”¨idæŸ¥çœ‹ï¼Œå‘ç°å®ƒä»¬ä¹Ÿä¸æŒ‡å‘åŒä¸€ç‰‡å†…å­˜ã€‚ä½†æ˜¯å½“æˆ‘ä»¬ä½¿ç”¨
id(x) for x in a å’Œ id(x) for x in b
æ—¶ï¼Œå¯ä»¥çœ‹åˆ°äºŒè€…åŒ…å«çš„å…ƒç´ çš„åœ°å€æ˜¯ç›¸åŒçš„ã€‚</p>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œaå’Œbæ˜¯ä¸åŒçš„å¯¹è±¡ï¼Œä¿®æ”¹bç†è®ºä¸Šä¸ä¼šå½±å“aã€‚æ¯”å¦‚b.append([4,5])ã€‚</p>
<p><strong>ä»£ç æ•ˆæœå¦‚ä¸‹ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, [<span class="string">'yellow'</span>, <span class="string">'red'</span>]]</span><br><span class="line">b = a[:] Â <span class="comment"># é‡‡ç”¨äº†åˆ‡ç‰‡æ“ä½œå¯¹åˆ—è¡¨bè¿›è¡Œèµ‹å€¼</span></span><br><span class="line">b.append(<span class="string">'green'</span>) <span class="comment"># å¯¹åˆ—è¡¨bæ‰§è¡Œæ·»åŠ å…ƒç´ æ“ä½œ</span></span><br><span class="line">print(<span class="string">'a = &#123;&#125;'</span>.format(a))</span><br><span class="line">print(<span class="string">'b = &#123;&#125;'</span>.format(b))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹é¢æ˜¯è¾“å‡ºç»“æœï¼š</span></span><br><span class="line">a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, [<span class="string">'yellow'</span>, <span class="string">'red'</span>]] Â <span class="comment"># aä¸­çš„å…ƒç´ ä¸å‘ç”Ÿå˜åŒ–</span></span><br><span class="line">b = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, [<span class="string">'yellow'</span>, <span class="string">'red'</span>], <span class="string">'green'</span>] Â <span class="comment"># bä¸­å¢åŠ äº†ä¸€ä¸ªå…ƒç´ 'green'</span></span><br></pre></td></tr></table></figure>
<p><strong>ä½†æ˜¯è¦æ³¨æ„ï¼š</strong>æµ…æ‹·è´ä¹‹æ‰€ä»¥ç§°ä¸ºæµ…æ‹·è´ï¼Œæ˜¯å®ƒä»…ä»…åªæ‹·è´äº†ä¸€å±‚ï¼Œåœ¨aä¸­æœ‰ä¸€ä¸ªåµŒå¥—çš„listï¼Œå¦‚æœæˆ‘ä»¬ä¿®æ”¹äº†å®ƒï¼Œæƒ…å†µå°±ä¸ä¸€æ ·äº†ã€‚</p>
<p>a[3].append(â€œblueâ€)ã€‚æŸ¥çœ‹bï¼Œä½ å°†å‘ç°bä¹Ÿå‘ç”Ÿäº†å˜åŒ–ã€‚è¿™æ˜¯å› ä¸ºï¼Œä½ ä¿®æ”¹äº†åµŒå¥—çš„listã€‚ä¿®æ”¹å¤–å±‚å…ƒç´ ï¼Œä¼šä¿®æ”¹å®ƒçš„å¼•ç”¨ï¼Œè®©å®ƒä»¬æŒ‡å‘åˆ«çš„ä½ç½®ï¼Œä¿®æ”¹åµŒå¥—åˆ—è¡¨ä¸­çš„å…ƒç´ ï¼Œåˆ—è¡¨çš„åœ°å€å¹¶ä¸ºå‘ç”Ÿå˜åŒ–ï¼ŒæŒ‡å‘çš„éƒ½æ˜¯åŒä¸€ä¸ªä½ç½®ã€‚</p>
<p><strong>ä»£ç å¦‚ä¸‹ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, [<span class="string">'yellow'</span>, <span class="string">'red'</span>]]</span><br><span class="line">b = a[:] Â <span class="comment"># é‡‡ç”¨äº†åˆ‡ç‰‡æ“ä½œå¯¹åˆ—è¡¨bè¿›è¡Œèµ‹å€¼</span></span><br><span class="line">a[<span class="number">3</span>].append(<span class="string">'blue'</span>) Â <span class="comment"># åœ¨aåˆ—è¡¨ä¸­çš„ç¬¬3ä¸ªå…ƒç´ ä¸­å¢åŠ å…ƒç´ 'blue'ï¼Œç”±äºa[3]æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œä»è€Œæ˜¯åœ¨åˆ—è¡¨åå¢åŠ äº†å…ƒç´ 'blue'ï¼Œä»è¾“å‡ºç»“æœä¸­å¯ä»¥çœ‹å‡ºæ¥ã€‚</span></span><br><span class="line">print(<span class="string">'a = &#123;&#125;'</span>.format(a))</span><br><span class="line">print(<span class="string">'b = &#123;&#125;'</span>.format(b))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹é¢æ˜¯è¾“å‡ºç»“æœï¼š</span></span><br><span class="line">a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, [<span class="string">'yellow'</span>, <span class="string">'red'</span>, <span class="string">'blue'</span>]]</span><br><span class="line">b = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, [<span class="string">'yellow'</span>, <span class="string">'red'</span>, <span class="string">'blue'</span>]]</span><br></pre></td></tr></table></figure>
<h2 id="æ·±æ‹·è´">æ·±æ‹·è´</h2>
<p>æ·±æ‹·è´åªæœ‰ä¸€ç§å½¢å¼ï¼Œ<code>copy</code>æ¨¡å—ä¸­çš„<code>deepcopy</code>å‡½æ•°ã€‚</p>
<p>å’Œæµ…æ‹·è´å¯¹åº”ï¼Œæ·±æ‹·è´æ‹·è´äº†å¯¹è±¡çš„æ‰€æœ‰å…ƒç´ ï¼ŒåŒ…æ‹¬å¤šå±‚åµŒå¥—çš„å…ƒç´ ã€‚å› è€Œï¼Œå®ƒçš„æ—¶é—´å’Œç©ºé—´å¼€é”€è¦é«˜ã€‚</p>
<p>åŒæ ·å¯¹laï¼Œè‹¥ä½¿ç”¨<code>b = copy.deepcopy(a)</code>ï¼Œå†ä¿®æ”¹bå°†ä¸ä¼šå½±å“åˆ°aäº†ã€‚å³ä½¿åµŒå¥—çš„åˆ—è¡¨å…·æœ‰æ›´æ·±çš„å±‚æ¬¡ï¼Œä¹Ÿä¸ä¼šäº§ç”Ÿä»»ä½•å½±å“ï¼Œå› ä¸ºæ·±æ‹·è´å‡ºæ¥çš„å¯¹è±¡æ ¹æœ¬å°±æ˜¯ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ï¼Œä¸å†ä¸åŸæ¥çš„å¯¹è±¡æœ‰ä»»ä½•å…³è”ã€‚</p>
<p><strong>å®ä¾‹ä»£ç å¦‚ä¸‹ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line">a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, [<span class="string">'yellow'</span>, <span class="string">'red'</span>]]</span><br><span class="line">b = copy.deepcopy(a) Â  <span class="comment"># é‡‡ç”¨æ·±æ‹·è´å¯¹aè¿›è¡Œæ·±æ‹·è´æ“ä½œ</span></span><br><span class="line">b.append(<span class="string">'xyz'</span>)</span><br><span class="line">print(<span class="string">'a = &#123;&#125;'</span>.format(a))</span><br><span class="line">print(<span class="string">'b = &#123;&#125;'</span>.format(b))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹é¢æ˜¯è¾“å‡ºç»“æœï¼š</span></span><br><span class="line">a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, [<span class="string">'yellow'</span>, <span class="string">'red'</span>]] Â  <span class="comment"># ä½¿ç”¨æ·±æ‹·è´ï¼Œå¯¹bçš„ä¿®æ”¹ä¸ä¼šå½±å“åˆ°a</span></span><br><span class="line">b = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, [<span class="string">'yellow'</span>, <span class="string">'red'</span>], <span class="string">'xyz'</span>]</span><br></pre></td></tr></table></figure>
<p><strong>æˆ–è€…ç”¨ä¸‹é¢çš„ä»£ç ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line">a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, [<span class="string">'yellow'</span>, <span class="string">'red'</span>]]</span><br><span class="line">b = copy.deepcopy(a) Â  <span class="comment"># é‡‡ç”¨æ·±æ‹·è´å¯¹aè¿›è¡Œæ·±æ‹·è´æ“ä½œ</span></span><br><span class="line">a[<span class="number">3</span>].append(<span class="string">'crazy'</span>)</span><br><span class="line">print(<span class="string">'a = &#123;&#125;'</span>.format(a))</span><br><span class="line">print(<span class="string">'b = &#123;&#125;'</span>.format(b))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹é¢æ˜¯è¾“å‡ºç»“æœï¼š</span></span><br><span class="line">a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, [<span class="string">'yellow'</span>, <span class="string">'red'</span>, <span class="string">'crazy'</span>]] Â </span><br><span class="line">b = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, [<span class="string">'yellow'</span>, <span class="string">'red'</span>]] Â  <span class="comment"># å¯¹açš„ä¿®æ”¹ä¸ä¼šå½±å“åˆ°b</span></span><br></pre></td></tr></table></figure>
<p><strong>æˆ–è€…ç”¨ä¸‹é¢çš„ä»£ç ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line">a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, [<span class="string">'yellow'</span>, <span class="string">'red'</span>]]</span><br><span class="line">b = copy.deepcopy(a) Â  <span class="comment"># é‡‡ç”¨æ·±æ‹·è´å¯¹aè¿›è¡Œæ·±æ‹·è´æ“ä½œ</span></span><br><span class="line">a[<span class="number">3</span>].append(<span class="string">'crazy'</span>)</span><br><span class="line">b.append(<span class="string">'dddd'</span>)</span><br><span class="line">print(<span class="string">'a = &#123;&#125;'</span>.format(a))</span><br><span class="line">print(<span class="string">'b = &#123;&#125;'</span>.format(b))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹é¢æ˜¯è¾“å‡ºç»“æœï¼š</span></span><br><span class="line">a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, [<span class="string">'yellow'</span>, <span class="string">'red'</span>, <span class="string">'crazy'</span>]]</span><br><span class="line">b = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, [<span class="string">'yellow'</span>, <span class="string">'red'</span>], <span class="string">'dddd'</span>]</span><br></pre></td></tr></table></figure>
<h2 id="å…³äºæ‹·è´æ“ä½œçš„æé†’">å…³äºæ‹·è´æ“ä½œçš„æé†’</h2>
<ul>
<li>å¯¹äºéå®¹å™¨ç±»å‹ï¼Œå¦‚æ•°å­—ï¼Œå­—ç¬¦ï¼Œä»¥åŠå…¶å®ƒâ€œåŸå­â€ç±»å‹ï¼Œæ²¡æœ‰æ‹·è´ä¸€è¯´ã€‚äº§ç”Ÿçš„éƒ½æ˜¯åŸå¯¹è±¡çš„å¼•ç”¨ã€‚</li>
<li>å¦‚æœå…ƒç»„å˜é‡å€¼åŒ…å«åŸå­ç±»å‹å¯¹è±¡ï¼Œå³ä½¿é‡‡ç”¨äº†æ·±æ‹·è´ï¼Œä¹Ÿåªèƒ½å¾—åˆ°æµ…æ‹·è´ã€‚</li>
</ul>
<h2 id="list.appendçš„æµ…æ‹·è´é—®é¢˜">list.append()çš„æµ…æ‹·è´é—®é¢˜</h2>
<p>Pythonä¸­çš„appendæ–¹æ³•æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„æ–¹æ³•ï¼Œå¯ä»¥å°†ä¸€ä¸ªå¯¹è±¡æ·»åŠ åˆ°åˆ—è¡¨æœ«å°¾ï¼Œè¿™é‡Œé¢å¯ä»¥å­˜åœ¨ä¸€ä¸ªæµ…æ‹·è´çš„å¤§å‘ï¼</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a = [1, 3, 5, <span class="string">"a"</span>]</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; b = []</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; b.append(a)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; b</span></span><br><span class="line">[[1, 3, 5, 'a']]</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a.append(<span class="string">"aha"</span>)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; b    <span class="comment"># surprise?</span></span></span><br><span class="line">[[1, 3, 5, 'a', 'aha']]</span><br></pre></td></tr></table></figure>
<p>äº‹å®ä¸Šï¼Œappendæ–¹æ³•æ˜¯æµ…æ‹·è´ã€‚åœ¨Pythonä¸­ï¼Œå¯¹è±¡èµ‹å€¼å®é™…ä¸Šæ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼Œå½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åæŠŠå®ƒèµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼ŒPythonå¹¶æ²¡æœ‰æ‹·è´è¿™ä¸ªå¯¹è±¡ï¼Œè€Œåªæ˜¯æ‹·è´äº†è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œè¿™å°±æ˜¯æµ…æ‹·è´ã€‚</p>
<p>æˆ‘ä»¬é€æ­¥æ¥çœ‹ã€‚é¦–å…ˆï¼Œb.append(a)å°±æ˜¯å¯¹aè¿›è¡Œäº†æµ…æ‹·è´ï¼Œç»“æœä¸ºb=[[1, 3,
5, 'a']]ï¼Œä½†b[0]ä¸aå¼•ç”¨çš„å¯¹è±¡æ˜¯ç›¸åŒçš„ï¼Œè¿™å¯ä»¥é€šè¿‡idå‡½æ•°è¿›è¡ŒéªŒè¯ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; id(b[0])</span></span><br><span class="line">3145735177480</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; id(a)</span></span><br><span class="line">3145735177480</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥ï¼Œåœ¨æ—¥å¸¸ä½¿ç”¨appendå‡½æ•°çš„æ—¶å€™ï¼Œå°±éœ€è¦å°†æµ…æ‹·è´å˜ä¸ºæ·±æ‹·è´ï¼ˆå…¶å®ä¹Ÿä¸èƒ½å«æ·±æ‹·è´ï¼Œåº”è¯¥æ˜¯åŒé‡æµ…æ‹·è´ï¼Œå¯ä»¥çœ‹ä¸Šé¢æµ…æ‹·è´çš„å†…å®¹ï¼Œåªæ‹·è´ä¸€å±‚ï¼‰ï¼Œæœ‰ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>b.append(list(a))</li>
<li>b.append(a[:])</li>
</ul>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonè°ƒç”¨CIC</title>
    <url>/python%E8%B0%83%E7%94%A8CIC/</url>
    <content><![CDATA[<p>åœ¨è¿™é‡Œè®°å½•ä¸‹ä½¿ç”¨pythoné€šè¿‡å‘½ä»¤è¡Œè°ƒç”¨CICçš„è¿‡ç¨‹ï¼ŒåŒ…å«ç»™pcapæ•´ä½“æ‰“æ ‡ç­¾ï¼Œå¤šä¸ªpcapæ•´åˆç­‰å†…å®¹</p>
<a id="more"></a>
<blockquote>
<p>æ•´ä½“æ€è·¯æ¯”è¾ƒç®€å•ï¼Œä½¿ç”¨pythonè‡ªå¸¦çš„<strong>subprocess</strong>æ¥é€šè¿‡å‘½ä»¤è¡Œè°ƒç”¨æˆ‘ä»¬éƒ¨ç½²å¥½çš„CICç¨‹åºï¼Œç„¶åå°†å¤šä¸ªpcapåŒ…æå–å‡ºçš„CSVè¿›è¡Œæ‰“æ ‡ç­¾å’Œæ•´åˆ</p>
</blockquote>
<h3 id="éƒ¨åˆ†ä»‹ç»">éƒ¨åˆ†ä»‹ç»</h3>
<p>é¦–å…ˆæ˜¯å¼•å…¥å¿…è¦çš„åº“ï¼Œå…¶ä¸­çš„<strong>CIC_dfm</strong>å°±æ˜¯CICéƒ¨ç½²æˆåŠŸådfmæ–‡ä»¶çš„ç»å¯¹è·¯å¾„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> utils.db_config <span class="keyword">import</span> CIC_dfm</span><br></pre></td></tr></table></figure>
<p>ç„¶åæ˜¯è°ƒç”¨CICéƒ¨åˆ†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cmd = <span class="string">'%s %s %s'</span> % (CIC_dfm, pcap_path, csv_save_folder)</span><br><span class="line"><span class="comment"># è°ƒCIC</span></span><br><span class="line">p = subprocess.Popen(cmd, shell=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># é˜»å¡ç­‰å¾…CICæ‰§è¡Œå®Œæˆ</span></span><br><span class="line">return_code = p.wait()</span><br></pre></td></tr></table></figure>
<p>ä¹‹åå°±æ˜¯å¯¹PCAPåˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ªPCAPåŒ…è°ƒç”¨CICè¿›è¡Œå¤„ç†ï¼Œç„¶åå°†å¤„ç†å®Œçš„ç»“æœæ”¾åˆ°ä¸€ä¸ªdfé‡Œæœ€åå†å­˜æˆCSV</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> pcap_path <span class="keyword">in</span> pcap_list:</span><br><span class="line">    pcap_name = pcap_path.split(os.sep)[<span class="number">-1</span>].replace(<span class="string">'.pcap'</span>, <span class="string">''</span>)</span><br><span class="line">    cmd = <span class="string">'%s %s %s'</span> % (CIC_dfm, pcap_path, csv_save_folder)</span><br><span class="line">    <span class="comment"># è°ƒCIC</span></span><br><span class="line">    p = subprocess.Popen(cmd, shell=<span class="literal">True</span>)</span><br><span class="line">    return_code = p.wait()</span><br><span class="line">    csv_path = os.path.join(csv_save_folder, pcap_name + <span class="string">'.pcap_Flow.csv'</span>)</span><br><span class="line">    <span class="keyword">if</span> pcap_path == pcap_list[<span class="number">0</span>]:</span><br><span class="line">        df = pd.read_csv(csv_path, skipinitialspace=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        temp_df = pd.read_csv(csv_path, skipinitialspace=<span class="literal">True</span>)</span><br><span class="line">        df = pd.concat([df, temp_df], ignore_index=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># åˆ é™¤ä¸­é—´ç»“æœ</span></span><br><span class="line">    os.remove(csv_path)</span><br><span class="line"></span><br><span class="line">csv_save_path = os.path.join(csv_save_folder, <span class="string">'%s.csv'</span> % time_now)</span><br><span class="line">df.to_csv(csv_save_path, index=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h3 id="å®Œæ•´ç¨‹åº">å®Œæ•´ç¨‹åº</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> utils.db_config <span class="keyword">import</span> CIC_dfm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">unsupervise_extract</span><span class="params">(mode_id: int, pcap_list: list, csv_save_folder: str)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    æ— ç›‘ç£ç®—æ³•æµé‡ç‰¹å¾æå–ï¼ŒåŒ…å«è®­ç»ƒï¼Œç¦»çº¿æµ‹è¯•å’Œåœ¨çº¿æµ‹è¯•</span></span><br><span class="line"><span class="string">    :param mode_id:</span></span><br><span class="line"><span class="string">        1ä¸ºè®­ç»ƒ;</span></span><br><span class="line"><span class="string">        2ä¸ºç¦»çº¿æµ‹è¯•;</span></span><br><span class="line"><span class="string">        3ä¸ºåœ¨çº¿æµ‹è¯•;</span></span><br><span class="line"><span class="string">    :param pcap_list: è¦è¿›è¡Œç‰¹å¾æå–çš„pcapåŒ…è·¯å¾„åˆ—è¡¨(åœ¨çº¿æµ‹è¯•æ—¶é‡Œé¢åªèƒ½åŒ…å«ä¸€ä¸ª)</span></span><br><span class="line"><span class="string">    :param csv_save_folder: æå–å‡ºçš„csvæ–‡ä»¶è¦ä¿å­˜çš„ç›®å½•</span></span><br><span class="line"><span class="string">    :return: csv_save_path: æå–å‡ºçš„csvæ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line"></span><br><span class="line">    time_now = time.strftime(<span class="string">"%Y%m%d-%H%M%S"</span>, time.localtime())</span><br><span class="line">    os.makedirs(csv_save_folder, exist_ok=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">if</span> mode_id <span class="keyword">not</span> <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]:</span><br><span class="line">        print(<span class="string">'mode_idå‡ºé”™'</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> mode_id == <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">assert</span> len(pcap_list) == <span class="number">1</span></span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            print(<span class="string">'åœ¨çº¿æµ‹è¯•æ—¶pcap_listä¸­åªèƒ½åŒ…å«ä¸€ä¸ªpcapåŒ…'</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> pcap_path <span class="keyword">in</span> pcap_list:</span><br><span class="line">        pcap_name = pcap_path.split(os.sep)[<span class="number">-1</span>].replace(<span class="string">'.pcap'</span>, <span class="string">''</span>)</span><br><span class="line">        cmd = <span class="string">'%s %s %s'</span> % (CIC_dfm, pcap_path, csv_save_folder)</span><br><span class="line">        <span class="comment"># è°ƒCIC</span></span><br><span class="line">        p = subprocess.Popen(cmd, shell=<span class="literal">True</span>)</span><br><span class="line">        return_code = p.wait()</span><br><span class="line">        csv_path = os.path.join(csv_save_folder, pcap_name + <span class="string">'.pcap_Flow.csv'</span>)</span><br><span class="line">        <span class="keyword">if</span> pcap_path == pcap_list[<span class="number">0</span>]:</span><br><span class="line">            df = pd.read_csv(csv_path, skipinitialspace=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            temp_df = pd.read_csv(csv_path, skipinitialspace=<span class="literal">True</span>)</span><br><span class="line">            df = pd.concat([df, temp_df], ignore_index=<span class="literal">True</span>)</span><br><span class="line">        <span class="comment"># åˆ é™¤ä¸­é—´ç»“æœ</span></span><br><span class="line">        os.remove(csv_path)</span><br><span class="line"></span><br><span class="line">    csv_save_path = os.path.join(csv_save_folder, <span class="string">'%s.csv'</span> % time_now)</span><br><span class="line">    df.to_csv(csv_save_path, index=<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> csv_save_path</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">supervise_extract</span><span class="params">(mode_id: int, pcap_list: list, norm_pcap_list: list,</span></span></span><br><span class="line"><span class="function"><span class="params">                      abnorm_pcap_list: list, csv_save_folder: str)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    æœ‰ç›‘ç£ç®—æ³•æµé‡ç‰¹å¾æå–ï¼ŒåŒ…å«è®­ç»ƒï¼Œç¦»çº¿æµ‹è¯•å’Œåœ¨çº¿æµ‹è¯•</span></span><br><span class="line"><span class="string">    :param mode_id:</span></span><br><span class="line"><span class="string">        1ä¸ºè®­ç»ƒ;</span></span><br><span class="line"><span class="string">        2ä¸ºç¦»çº¿æµ‹è¯•;</span></span><br><span class="line"><span class="string">        3ä¸ºåœ¨çº¿æµ‹è¯•;</span></span><br><span class="line"><span class="string">    :param pcap_list: åœ¨çº¿æµ‹è¯•è¦è¿›è¡Œç‰¹å¾æå–çš„pcapåŒ…è·¯å¾„åˆ—è¡¨(é‡Œé¢åªèƒ½åŒ…å«ä¸€ä¸ª)</span></span><br><span class="line"><span class="string">    :param norm_pcap_list: è®­ç»ƒå’Œç¦»çº¿æµ‹è¯•è¦è¿›è¡Œç‰¹å¾æå–çš„å…¨æ­£å¸¸æµé‡pcapåŒ…è·¯å¾„åˆ—è¡¨(è‡³å°‘åŒ…å«ä¸€ä¸ª)</span></span><br><span class="line"><span class="string">    :param abnorm_pcap_list: è®­ç»ƒå’Œç¦»çº¿æµ‹è¯•è¦è¿›è¡Œç‰¹å¾æå–çš„å…¨å¼‚å¸¸æµé‡pcapåŒ…è·¯å¾„åˆ—è¡¨(è‡³å°‘åŒ…å«ä¸€ä¸ª)</span></span><br><span class="line"><span class="string">    :param csv_save_folder: æå–å‡ºçš„csvæ–‡ä»¶è¦ä¿å­˜çš„ç›®å½•</span></span><br><span class="line"><span class="string">    :return: csv_save_path: æå–å‡ºçš„csvæ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line"></span><br><span class="line">    time_now = time.strftime(<span class="string">"%Y%m%d-%H%M%S"</span>, time.localtime())</span><br><span class="line">    os.makedirs(csv_save_folder, exist_ok=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">if</span> mode_id <span class="keyword">not</span> <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]:</span><br><span class="line">        print(<span class="string">'mode_idå‡ºé”™'</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> mode_id == <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">assert</span> len(pcap_list) == <span class="number">1</span></span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            print(<span class="string">'åœ¨çº¿æµ‹è¯•æ—¶pcap_listä¸­åªèƒ½åŒ…å«ä¸€ä¸ªpcapåŒ…'</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">assert</span> len(norm_pcap_list) &gt; <span class="number">0</span> <span class="keyword">and</span> len(abnorm_pcap_list) &gt; <span class="number">0</span></span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            print(<span class="string">'éœ€è¦åŒæ—¶åŒ…å«æ­£å¸¸å’Œå¼‚å¸¸pcapåŒ…'</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> mode_id == <span class="number">3</span>:</span><br><span class="line">        pcap_path = pcap_list[<span class="number">0</span>]</span><br><span class="line">        pcap_name = pcap_path.split(os.sep)[<span class="number">-1</span>].replace(<span class="string">'.pcap'</span>, <span class="string">''</span>)</span><br><span class="line">        cmd = <span class="string">'%s %s %s'</span> % (CIC_dfm, pcap_path, csv_save_folder)</span><br><span class="line">        <span class="comment"># è°ƒCIC</span></span><br><span class="line">        p = subprocess.Popen(cmd, shell=<span class="literal">True</span>)</span><br><span class="line">        return_code = p.wait()</span><br><span class="line">        csv_path = os.path.join(csv_save_folder, pcap_name + <span class="string">'.pcap_Flow.csv'</span>)</span><br><span class="line">        df = pd.read_csv(csv_path, skipinitialspace=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">for</span> pcap_path <span class="keyword">in</span> norm_pcap_list:</span><br><span class="line">            pcap_name = pcap_path.split(os.sep)[<span class="number">-1</span>].replace(<span class="string">'.pcap'</span>, <span class="string">''</span>)</span><br><span class="line">            cmd = <span class="string">'%s %s %s'</span> % (CIC_dfm, pcap_path, csv_save_folder)</span><br><span class="line">            <span class="comment"># è°ƒCIC</span></span><br><span class="line">            p = subprocess.Popen(cmd, shell=<span class="literal">True</span>)</span><br><span class="line">            return_code = p.wait()</span><br><span class="line">            csv_path = os.path.join(csv_save_folder, pcap_name + <span class="string">'.pcap_Flow.csv'</span>)</span><br><span class="line">            <span class="keyword">if</span> pcap_path == norm_pcap_list[<span class="number">0</span>]:</span><br><span class="line">                df_norm = pd.read_csv(csv_path, skipinitialspace=<span class="literal">True</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                temp_df = pd.read_csv(csv_path, skipinitialspace=<span class="literal">True</span>)</span><br><span class="line">                df_norm = pd.concat([df_norm, temp_df], ignore_index=<span class="literal">True</span>)</span><br><span class="line">            df_norm[<span class="string">'Label'</span>] = <span class="number">0</span></span><br><span class="line">            <span class="comment"># åˆ é™¤ä¸­é—´ç»“æœ</span></span><br><span class="line">            os.remove(csv_path)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> pcap_path <span class="keyword">in</span> abnorm_pcap_list:</span><br><span class="line">            pcap_name = pcap_path.split(os.sep)[<span class="number">-1</span>].replace(<span class="string">'.pcap'</span>, <span class="string">''</span>)</span><br><span class="line">            cmd = <span class="string">'%s %s %s'</span> % (CIC_dfm, pcap_path, csv_save_folder)</span><br><span class="line">            <span class="comment"># è°ƒCIC</span></span><br><span class="line">            p = subprocess.Popen(cmd, shell=<span class="literal">True</span>)</span><br><span class="line">            return_code = p.wait()</span><br><span class="line">            csv_path = os.path.join(csv_save_folder, pcap_name + <span class="string">'.pcap_Flow.csv'</span>)</span><br><span class="line">            <span class="keyword">if</span> pcap_path == abnorm_pcap_list[<span class="number">0</span>]:</span><br><span class="line">                df_abnorm = pd.read_csv(csv_path, skipinitialspace=<span class="literal">True</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                temp_df = pd.read_csv(csv_path, skipinitialspace=<span class="literal">True</span>)</span><br><span class="line">                df_abnorm = pd.concat([df_abnorm, temp_df], ignore_index=<span class="literal">True</span>)</span><br><span class="line">            df_abnorm[<span class="string">'Label'</span>] = <span class="number">1</span></span><br><span class="line">            <span class="comment"># åˆ é™¤ä¸­é—´ç»“æœ</span></span><br><span class="line">            os.remove(csv_path)</span><br><span class="line"></span><br><span class="line">        df = pd.concat([df_abnorm, df_norm], ignore_index=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    csv_save_path = os.path.join(csv_save_folder, <span class="string">'%s.csv'</span> % time_now)</span><br><span class="line">    df.to_csv(csv_save_path, index=<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> csv_save_path</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    pcap_list = [<span class="string">'/home/*/test1.pcap'</span>, <span class="string">'/home/*/test2.pcap'</span>, <span class="string">'/home/*/test3.pcap'</span>]</span><br><span class="line">    <span class="comment"># pcap_list = ['/home/*/test1.pcap']</span></span><br><span class="line">    csv_save_folder = <span class="string">'/home/*'</span></span><br><span class="line">    mode_id = <span class="number">1</span></span><br><span class="line">    _ = unsupervise_extract(mode_id, pcap_list, csv_save_folder)</span><br><span class="line"></span><br><span class="line">    norm_pcap_list = [<span class="string">'/home/*/test1.pcap'</span>, <span class="string">'/home/*/test3.pcap'</span>]</span><br><span class="line">    abnorm_pcap_list = [<span class="string">'/home/*/test2.pcap'</span>]</span><br><span class="line">    pcap_list = [<span class="string">'/home/*/test1.pcap'</span>]</span><br><span class="line">    mode_id = <span class="number">2</span></span><br><span class="line">    _ = supervise_extract(mode_id, pcap_list, norm_pcap_list, abnorm_pcap_list, csv_save_folder)</span><br><span class="line"></span><br><span class="line">    print(_)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>CICFlowMeter</category>
      </categories>
      <tags>
        <tag>CICFlowMeter</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonç¨‹åºæ‰“åŒ…æˆexe</title>
    <url>/python%E7%A8%8B%E5%BA%8F%E6%89%93%E5%8C%85%E6%88%90exe/</url>
    <content><![CDATA[<p>è®°å½•å¸®è¡¨å§å†™äº†ä¸€ä¸ªtxtè½¬xlsxï¼ŒåŒæ—¶è¿›è¡Œæ ¼å¼è½¬æ¢å’Œåˆå¹¶å»é‡çš„è„šæœ¬ï¼Œæœ€åå°†å…¶æ‰“åŒ…æˆexeè¿‡ç¨‹ä¸­é‡åˆ°çš„å°é—®é¢˜</p>
<a id="more"></a>
<h3 id="æ ¼å¼è½¬åŒ–">æ ¼å¼è½¬åŒ–</h3>
<p>æœ¬èº«å°†æœ‰æ ¼å¼çš„txtè½¬å˜ä¸ºxlsxæ˜¯æ²¡æœ‰éš¾åº¦çš„ï¼Œåªéœ€è¦ä½¿ç”¨<code>pd.read_csv(txt_path, sep='\t', header=0)</code>å³å¯è½»æ¾è¯»å…¥ã€‚</p>
<p>åç»­ä¸»è¦éœ€è¦è¿›è¡Œæ ¼å¼çš„å˜åŒ–ï¼Œæ•°æ®æœ¬èº«æ˜¯ä¸€ä¸ªå¯¹ç…§è¯•éªŒï¼Œç®€å•æ¥è¯´ä¸»è¦æ˜¯ä¸¤æ­¥ï¼š</p>
<ol type="1">
<li>æ ¹æ®å·²æœ‰åˆ—è¿›è¡Œä¸€ä¸ªæ–°åˆ—çš„è®¡ç®—ï¼Œå’Œä¸€äº›æ ¼å¼ä¸Šçš„ä¿®æ”¹</li>
<li>å°†ç°åœ¨å»¶çºµè½´æ–¹å‘çš„concatè½¬å˜ä¸ºå»¶æ¨ªè½´æ–¹å‘çš„concatï¼ŒæŠŠä¸€ä¸ª6*41è¡Œçš„æ•°æ®å˜æˆ41è¡Œ*6åˆ—ï¼ˆçœ‹å›¾å°±æ‡‚äº†ï¼‰</li>
</ol>
<p><img
src="https://zchsakura-blog.oss-cn-beijing.aliyuncs.com/202308072153783.png" /></p>
<p><img
src="https://zchsakura-blog.oss-cn-beijing.aliyuncs.com/202308072154838.png" /></p>
<p>ç¬¬äºŒç‚¹ä¸»è¦æ€è·¯å°±æ˜¯å…ˆåœ¨ç¬¬ä¸€åˆ—ä¸Šå»ºç«‹ç´¢å¼•ï¼Œç„¶åé€šè¿‡éå†ç´¢å¼•ä¸€æ¬¡å–41è¡Œæ•°æ®ï¼Œä¸æ–­åœ°æ·»åŠ åˆ°ä¸€ä¸ªç©ºçš„dataframeä¸Šå»ã€‚ç›´æ¥çœ‹ä»£ç å§ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> glob</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_res</span><span class="params">(df)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> df[<span class="string">'Allele 1'</span>] <span class="keyword">is</span> <span class="keyword">not</span> np.nan <span class="keyword">and</span> df[<span class="string">'Allele 2'</span>] <span class="keyword">is</span> <span class="keyword">not</span> np.nan:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">','</span>.join([str(df[<span class="string">'Allele 1'</span>]), str(df[<span class="string">'Allele 2'</span>])])</span><br><span class="line">    <span class="keyword">elif</span> df[<span class="string">'Allele 1'</span>] <span class="keyword">is</span> <span class="keyword">not</span> np.nan:</span><br><span class="line">        <span class="keyword">return</span> str(df[<span class="string">'Allele 1'</span>])</span><br><span class="line">    <span class="keyword">elif</span> df[<span class="string">'Allele 2'</span>] <span class="keyword">is</span> <span class="keyword">not</span> np.nan:</span><br><span class="line">        <span class="keyword">return</span> str(df[<span class="string">'Allele 2'</span>])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'-'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">format_txt</span><span class="params">(txt_path)</span>:</span></span><br><span class="line">    df = pd.read_csv(txt_path, sep=<span class="string">'\t'</span>, header=<span class="number">0</span>)</span><br><span class="line">    df = df.drop(<span class="string">'Unnamed: 4'</span>, axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    df[<span class="string">'res'</span>] = df.apply(get_res, axis=<span class="number">1</span>)</span><br><span class="line">    df = df.drop([<span class="string">'Allele 1'</span>, <span class="string">'Allele 2'</span>], axis=<span class="number">1</span>)</span><br><span class="line">    df = df.set_index(<span class="string">'Sample Name'</span>)</span><br><span class="line"></span><br><span class="line">    row_index = list(set(df.index.tolist()))</span><br><span class="line">    row_index.sort()</span><br><span class="line"></span><br><span class="line">    res_df = pd.DataFrame()</span><br><span class="line">    res_df[<span class="string">'Marker'</span>] = df.reset_index()[<span class="string">'Marker'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> row_index:</span><br><span class="line">        res_df[i] = df.loc[i, <span class="string">'res'</span>].reset_index()[<span class="string">'res'</span>]</span><br><span class="line"></span><br><span class="line">    res_df = res_df.dropna()</span><br><span class="line">    <span class="comment"># res_df.to_excel(os.path.basename(txt_path.replace('.txt', '.xlsx')), sheet_name='Sheet1', index=False)</span></span><br><span class="line">    <span class="keyword">return</span> res_df</span><br></pre></td></tr></table></figure>
<h3 id="æ‰“åŒ…æˆexe">æ‰“åŒ…æˆexe</h3>
<p>å› ä¸ºè¡¨å§é‚£è¾¹ä¸æ–¹ä¾¿å¼„Pythonç¯å¢ƒï¼Œä»–ä»¬ä¹Ÿä¸å¤ªä¼šç”¨ï¼Œæ‰€ä»¥æˆ‘å°è¯•ç›´æ¥å°†è¿™ä¸ªç®€å•çš„è„šæœ¬æ‰“åŒ…æˆexeã€‚è¿‡ç¨‹ä¸­é‡åˆ°çš„æœ€å¤§çš„é—®é¢˜å°±æ˜¯è·å–exeæ‰€åœ¨è·¯å¾„ã€‚</p>
<p>æœ‰å¾ˆå¤šè·å–è·¯å¾„çš„æ–¹æ³•ä¼šè·å–åˆ°Cç›˜ä¸­åœ°æŸä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œè¿™å¯èƒ½å’ŒPythonæ‰“åŒ…æœ‰å…³ç³»ï¼Œä¹Ÿå¯èƒ½å’Œexeæœ¬èº«æœºåˆ¶æœ‰å…³ç³»ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦ä½¿ç”¨<code>os.path.dirname(os.path.realpath(sys.argv[0]))</code>è¿™è¡Œä»£ç ï¼Œè¿™è¡Œä»£ç æ˜¯å¯ä»¥æˆåŠŸè·å–åˆ°exeæ–‡ä»¶æ‰€åœ¨ç›®å½•äº†ï¼Œå…¶ä»–ä»€ä¹ˆ<code>os.path.dirname(os.path.abspath(__file__))</code>è¿™ç§äº²æµ‹éƒ½æ˜¯ä¸è¡Œçš„ã€‚</p>
<p>æœ€åé™„ä¸Šå®Œæ•´ä»£ç ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> glob</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_res</span><span class="params">(df)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> df[<span class="string">'Allele 1'</span>] <span class="keyword">is</span> <span class="keyword">not</span> np.nan <span class="keyword">and</span> df[<span class="string">'Allele 2'</span>] <span class="keyword">is</span> <span class="keyword">not</span> np.nan:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">','</span>.join([str(df[<span class="string">'Allele 1'</span>]), str(df[<span class="string">'Allele 2'</span>])])</span><br><span class="line">    <span class="keyword">elif</span> df[<span class="string">'Allele 1'</span>] <span class="keyword">is</span> <span class="keyword">not</span> np.nan:</span><br><span class="line">        <span class="keyword">return</span> str(df[<span class="string">'Allele 1'</span>])</span><br><span class="line">    <span class="keyword">elif</span> df[<span class="string">'Allele 2'</span>] <span class="keyword">is</span> <span class="keyword">not</span> np.nan:</span><br><span class="line">        <span class="keyword">return</span> str(df[<span class="string">'Allele 2'</span>])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'-'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">format_txt</span><span class="params">(txt_path)</span>:</span></span><br><span class="line">    df = pd.read_csv(txt_path, sep=<span class="string">'\t'</span>, header=<span class="number">0</span>)</span><br><span class="line">    df = df.drop(<span class="string">'Unnamed: 4'</span>, axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    df[<span class="string">'res'</span>] = df.apply(get_res, axis=<span class="number">1</span>)</span><br><span class="line">    df = df.drop([<span class="string">'Allele 1'</span>, <span class="string">'Allele 2'</span>], axis=<span class="number">1</span>)</span><br><span class="line">    df = df.set_index(<span class="string">'Sample Name'</span>)</span><br><span class="line"></span><br><span class="line">    row_index = list(set(df.index.tolist()))</span><br><span class="line">    row_index.sort()</span><br><span class="line"></span><br><span class="line">    res_df = pd.DataFrame()</span><br><span class="line">    res_df[<span class="string">'Marker'</span>] = df.reset_index()[<span class="string">'Marker'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> row_index:</span><br><span class="line">        res_df[i] = df.loc[i, <span class="string">'res'</span>].reset_index()[<span class="string">'res'</span>]</span><br><span class="line"></span><br><span class="line">    res_df = res_df.dropna()</span><br><span class="line">    <span class="comment"># res_df.to_excel(os.path.basename(txt_path.replace('.txt', '.xlsx')), sheet_name='Sheet1', index=False)</span></span><br><span class="line">    <span class="keyword">return</span> res_df</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    input_list = glob.glob(os.path.join(os.path.dirname(os.path.realpath(sys.argv[<span class="number">0</span>])), <span class="string">'input/*.txt'</span>))</span><br><span class="line">    print(<span class="string">'åœ¨è·‘å•¦'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">assert</span> len(input_list) == <span class="number">2</span></span><br><span class="line">    print(<span class="string">'è¾“å…¥æ•°æ®:'</span>, input_list[<span class="number">0</span>], input_list[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">    df1 = format_txt(input_list[<span class="number">0</span>])</span><br><span class="line">    df2 = format_txt(input_list[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># df1 = format_txt(r'E:\ç ”ç©¶ç”Ÿä½œä¸š\1496_1499_1500.txt')</span></span><br><span class="line">    <span class="comment"># df2 = format_txt(r'E:\ç ”ç©¶ç”Ÿä½œä¸š\SZ-2023080401-ZC-GoldenEye22NC_Allele Table.txt')</span></span><br><span class="line"></span><br><span class="line">    df1 = df1.append(df2, ignore_index=<span class="literal">True</span>)</span><br><span class="line">    df1 = df1.drop_duplicates()</span><br><span class="line">    save_path = os.path.join(os.path.dirname(os.path.realpath(sys.argv[<span class="number">0</span>])), <span class="string">'output'</span>)</span><br><span class="line">    os.makedirs(save_path, exist_ok=<span class="literal">True</span>)</span><br><span class="line">    df1.to_excel(os.path.join(save_path, <span class="string">'åˆå¹¶_%s.xlsx'</span> % datetime.datetime.now().strftime(<span class="string">'%Y_%m_%d_%H_%M_%S'</span>)),</span><br><span class="line">                 sheet_name=<span class="string">'Sheet1'</span>, index=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<p>å¯¹äº†ï¼Œæ‰“åŒ…å·¥å…·ä½¿ç”¨çš„æ˜¯Pyinstallerï¼Œè¿™é‡Œä¹Ÿç®€å•è®°å½•ä¸‹Pyinstalleræœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼ã€‚</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">pyinstaller -F test.py</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å¯ä»¥å°†å•ä¸ªpyæ–‡ä»¶æ‰“åŒ…æˆexeï¼Œå¤šä¸ªpyæˆ‘è¿˜æ²¡æœ‰è¯•è¿‡ï¼Œè¿™ä¸ªåº”è¯¥æ˜¯éœ€è¦åœ¨æœ‰PythonåŒ…çš„è™šæ‹Ÿç¯å¢ƒä¸­å»è¿è¡Œçš„ï¼Œæˆ‘æ˜¯åˆ‡åˆ°ç›¸åº”çš„è™šæ‹Ÿç¯å¢ƒä¸­æ‰§è¡Œçš„ï¼Œæœ€åç”Ÿæˆä¸€ä¸ªdisté‡Œé¢æœ‰ä¸ªexeï¼Œç›²çŒœä¸è¿›åˆé€‚çš„ç¯å¢ƒä¼šå‡ºé—®é¢˜ã€‚</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>EXE</tag>
      </tags>
  </entry>
  <entry>
    <title>scrapyä¸­çš„yieldè¯·æ±‚æœªè¢«æ­£å¸¸æŠ›å‡º</title>
    <url>/scrapy%E4%B8%AD%E7%9A%84yield%E8%AF%B7%E6%B1%82%E6%9C%AA%E8%A2%AB%E6%AD%A3%E5%B8%B8%E6%8A%9B%E5%87%BA/</url>
    <content><![CDATA[<p>æœ‰ä¸€æ¬¡çˆ¬åŒ»ä¹¦çš„æ—¶å€™æœ‰ä¸€ä¸ªå‡½æ•°ä¸ä¼šè¢«æ‰§è¡Œï¼Œæ‰¾äº†åŠå¤©æ²¡æœ‰æ‰¾åˆ°é—®é¢˜æ‰€åœ¨ï¼ŒåªçŸ¥é“æ˜¯ä¸Šä¸€ä¸ª<code>scrapy.Request</code>æ‰§è¡Œå®Œå¹¶æ²¡æœ‰æ­£ç¡®çš„è§¦å‘æ¥ä¸‹æ¥çš„å‡½æ•°ï¼Œæ ¹æ®æŸ¥æ‰¾çš„ä¿¡æ¯åº”è¯¥æ˜¯ç”±äºscrapyè‡ªå¸¦çš„å»é‡æœºåˆ¶å°†æˆ‘çš„è¯·æ±‚ç»™æŠ›å¼ƒäº†ã€‚</p>
<a id="more"></a>
<p>å‚è€ƒï¼šhttps://blog.csdn.net/qq_32670879/article/details/85042464</p>
<p>é—®é¢˜æ¥æºï¼šæˆ‘åœ¨çˆ¬å–åŒ»ä¹¦çš„æ—¶å€™å› ä¸ºæ˜¯ä¹¦ç±æ‰€ä»¥å­˜åœ¨ç« èŠ‚ä¿¡æ¯ï¼Œåœ¨ä¹¦ç±çš„ä»‹ç»é¡µæ—¢æœ‰ä¹¦ç±ç®€ä»‹ï¼Œåˆæœ‰ç›®å½•ï¼Œæˆ‘æƒ³è¦å†™ä¸¤ä¸ªå‡½æ•°æ¥åˆ†åˆ«å¤„ç†ï¼Œå½“ä¹¦ç±ç®€ä»‹è·å–å®Œä¹‹åè¦è¿›å…¥è·å–ç›®å½•ä¿¡æ¯å‡½æ•°çš„æ—¶å€™ä¸èƒ½æ­£ç¡®è¿›å…¥ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20200509152400.png"
alt="image-20200509152349586" />
<figcaption aria-hidden="true">image-20200509152349586</figcaption>
</figure>
<p>ç»è¿‡åœ¨ç½‘ä¸ŠæŸ¥æ‰¾ä¿¡æ¯å‘ç°åº”è¯¥æ˜¯æˆ‘è°ƒç”¨ä¸‹é¢å‡½æ•°çš„æ—¶å€™ï¼Œå› ä¸ºåˆè¯·æ±‚äº†ä¹‹å‰è¯·æ±‚è¿‡çš„<code>response.url</code>å¯¼è‡´scrapyè‡ªå¸¦çš„å»é‡æœºåˆ¶å°†æœ¬æ¬¡è¯·æ±‚å…¨éƒ¨æ‹¦æˆªäº†ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">yield</span> scrapy.Request(response.url, callback=self.chapterList, meta=&#123;<span class="string">'bookName'</span>: item[<span class="string">'name'</span>]&#125;)</span><br></pre></td></tr></table></figure>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20200509153757.png"
alt="20181216232557785" />
<figcaption aria-hidden="true">20181216232557785</figcaption>
</figure>
<p>è§£å†³æ–¹æ³•ï¼šåœ¨å‡½æ•°å‚æ•°ä¸­åŠ å…¥<code>dont_filter=True</code>ï¼Œç»“æœå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">yield</span> scrapy.Request(response.url, callback=self.chapterList, meta=&#123;<span class="string">'bookName'</span>: item[<span class="string">'name'</span>]&#125;, dont_filter=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>çˆ¬è™«</category>
      </categories>
      <tags>
        <tag>scrapy</tag>
      </tags>
  </entry>
  <entry>
    <title>ssh 22 time out</title>
    <url>/ssh-22-time-out/</url>
    <content><![CDATA[<p>è¿™é‡Œè®°å½•ä¸€ä¸‹gitä½¿ç”¨è¿‡ç¨‹ä¸­æ€»æ˜¯ç¢°åˆ°çš„ä¸€ä¸ªé”™è¯¯ï¼Œ<code>ssh: connect to host github.com port 22: Connection timed out</code>ã€‚</p>
<a id="more"></a>
<p>æˆ‘ç¢°è¿‡çš„è¿™ä¸ªé”™è¯¯åŸºæœ¬æ˜¯ç”±ä¸¤ç§åŸå› å¼•èµ·çš„ï¼Œä¸€ç§æ˜¯å…¬é’¥æ²¡é…ç½®å¥½ï¼Œå¦ä¸€ç§å°±æ˜¯ç½‘ç»œåŸå› ã€‚</p>
<p>è¿™é‡Œä¸»è¦è®°å½•ä¸‹ç½‘ç»œåŸå› å¼•èµ·çš„time outè¯¥æ€ä¹ˆåŠã€‚</p>
<h3 id="æ£€æµ‹">æ£€æµ‹</h3>
<p><code>ssh -T git@github.com</code></p>
<p>å¦‚æœå‡ºç°ï¼šYouâ€™ve successfully
authenticatedï¼Œé‚£ä¹ˆè¿æ¥æˆåŠŸå¯ä»¥ä½¿ç”¨äº†ã€‚å¦‚æœå‡ºç°ï¼šssh: connect to host
github.com port 22: Connection timed outï¼Œå°±è¯´æ˜è¿æ¥è¶…æ—¶ã€‚</p>
<p>è¿æ¥å¤±è´¥åï¼Œå¯ä»¥åŒæ ·è¯•è¯•<code>ssh -T -p 443 git@github.com</code>ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰å¼‚å¸¸ã€‚</p>
<p>å¦‚æœåŠ ä¸Š443ä¹‹åèƒ½å¤Ÿsuccessçš„è¯åŸºæœ¬å°±æ˜¯ç½‘ç»œé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨443ç«¯å£å»è¿æ¥gitã€‚</p>
<h3 id="é…ç½®">é…ç½®</h3>
<ol type="1">
<li>cd ~/.ssh</li>
<li>é…ç½®æˆ–æ–°å»ºconfigæ–‡ä»¶</li>
<li>ç¼–è¾‘æ–‡ä»¶å†…å®¹å¹¶ä¿å­˜é€€å‡º</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">User ä½ çš„é‚®ç®±</span><br><span class="line">Hostname ssh.github.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~/.ssh/id_rsa</span><br><span class="line">Port 443</span><br></pre></td></tr></table></figure>
<ol start="4" type="1">
<li>ä½¿ç”¨<code>ssh -T git@github.com</code>æµ‹è¯•ä¸‹</li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>æœåŠ¡å™¨é…ç½®</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>xpathå¸¸ç”¨ç›¸å…³</title>
    <url>/xpath%E5%B8%B8%E7%94%A8%E7%9B%B8%E5%85%B3/</url>
    <content><![CDATA[<p>xpathå¸¸ç”¨è¯­æ³•</p>
<a id="more"></a>
<h3 id="åŒ¹é…æ–‡æœ¬">1.åŒ¹é…æ–‡æœ¬</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a[contains(text(),<span class="string">"ç™¾åº¦æœç´¢"</span>)]</span><br></pre></td></tr></table></figure>
<h3 id="åŒ¹é…å±æ€§">2.åŒ¹é…å±æ€§</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">input[contains(@name,<span class="string">'na'</span>)]</span><br></pre></td></tr></table></figure>
<h3 id="èŠ‚ç‚¹å…³ç³»">3.èŠ‚ç‚¹å…³ç³»</h3>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">è½´åç§°</th>
<th style="text-align: left;">ç»“æœ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ancestor</td>
<td
style="text-align: left;">é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å…ˆè¾ˆï¼ˆçˆ¶ã€ç¥–çˆ¶ç­‰ï¼‰ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: left;">ancestor-or-self</td>
<td
style="text-align: left;">é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å…ˆè¾ˆï¼ˆçˆ¶ã€ç¥–çˆ¶ç­‰ï¼‰ä»¥åŠå½“å‰èŠ‚ç‚¹æœ¬èº«ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: left;">attribute</td>
<td style="text-align: left;">é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å±æ€§ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: left;">child</td>
<td style="text-align: left;">é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å­å…ƒç´ ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: left;">descendant</td>
<td
style="text-align: left;">é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰åä»£å…ƒç´ ï¼ˆå­ã€å­™ç­‰ï¼‰ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: left;">descendant-or-self</td>
<td
style="text-align: left;">é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰åä»£å…ƒç´ ï¼ˆå­ã€å­™ç­‰ï¼‰ä»¥åŠå½“å‰èŠ‚ç‚¹æœ¬èº«ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: left;">following</td>
<td
style="text-align: left;">é€‰å–æ–‡æ¡£ä¸­å½“å‰èŠ‚ç‚¹çš„ç»“æŸæ ‡ç­¾ä¹‹åçš„æ‰€æœ‰èŠ‚ç‚¹ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: left;">following-sibling</td>
<td style="text-align: left;">é€‰å–å½“å‰èŠ‚ç‚¹ä¹‹åçš„æ‰€æœ‰å…„å¼ŸèŠ‚ç‚¹</td>
</tr>
<tr class="odd">
<td style="text-align: left;">namespace</td>
<td style="text-align: left;">é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å‘½åç©ºé—´èŠ‚ç‚¹ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: left;">parent</td>
<td style="text-align: left;">é€‰å–å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: left;">preceding</td>
<td
style="text-align: left;">é€‰å–æ–‡æ¡£ä¸­å½“å‰èŠ‚ç‚¹çš„å¼€å§‹æ ‡ç­¾ä¹‹å‰çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: left;">preceding-sibling</td>
<td style="text-align: left;">é€‰å–å½“å‰èŠ‚ç‚¹ä¹‹å‰çš„æ‰€æœ‰åŒçº§èŠ‚ç‚¹ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: left;">self</td>
<td style="text-align: left;">é€‰å–å½“å‰èŠ‚ç‚¹ã€‚</td>
</tr>
</tbody>
</table>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"1"</span> <span class="attr">href</span>=<span class="string">"www.baidu.com"</span>&gt;</span>æˆ‘æ˜¯ç¬¬1ä¸ªaæ ‡ç­¾<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯pæ ‡ç­¾<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"2"</span> <span class="attr">href</span>=<span class="string">"www.baidu.com"</span>&gt;</span>æˆ‘æ˜¯ç¬¬2ä¸ªaæ ‡ç­¾<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"3"</span> <span class="attr">href</span>=<span class="string">"www.baidu.com"</span>&gt;</span>æˆ‘æ˜¯ç¬¬3ä¸ªaæ ‡ç­¾<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"4"</span> <span class="attr">href</span>=<span class="string">"www.baidu.com"</span>&gt;</span>æˆ‘æ˜¯ç¬¬4ä¸ªaæ ‡ç­¾<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯pæ ‡ç­¾<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"5"</span> <span class="attr">href</span>=<span class="string">"www.baidu.com"</span>&gt;</span>æˆ‘æ˜¯ç¬¬5ä¸ªaæ ‡ç­¾<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è·å–ç¬¬ä¸‰ä¸ªaæ ‡ç­¾çš„ä¸‹ä¸€ä¸ªaæ ‡ç­¾ï¼š"//a<span class="citation"
data-cites="id">[@id='3']</span>/following-sibling::a[1]"</p>
<p>è·å–ç¬¬ä¸‰ä¸ªaæ ‡ç­¾åé¢çš„ç¬¬Nä¸ªæ ‡ç­¾ï¼š"//a<span class="citation"
data-cites="id">[@id='3']</span>/following-sibling::*[N]"</p>
<p>è·å–ç¬¬ä¸‰ä¸ªaæ ‡ç­¾çš„ä¸Šä¸€ä¸ªaæ ‡ç­¾ï¼š"//a<span class="citation"
data-cites="id">[@id='3']</span>/preceding-sibling::a[1]"</p>
<p>è·å–ç¬¬ä¸‰ä¸ªaæ ‡ç­¾çš„å‰é¢çš„ç¬¬Nä¸ªæ ‡ç­¾ï¼š"//a<span class="citation"
data-cites="id">[@id='3']</span>/preceding-sibling::*[N]"</p>
<p>è·å–ç¬¬ä¸‰ä¸ªaæ ‡ç­¾çš„çˆ¶æ ‡ç­¾ï¼š"//a<span class="citation"
data-cites="id">[@id=='3']</span>/.."</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>çˆ¬è™«</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>scrapy</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»è€ƒç ”åˆ°995</title>
    <url>/%E4%BB%8E%E8%80%83%E7%A0%94%E5%88%B0995/</url>
    <content><![CDATA[<p>è¿™ä¹ˆä¹…éƒ½æ²¡æ›´åšäº†ï¼Œä¸»è¦æ˜¯ä¹‹å‰åœ¨å‡†å¤‡å‚åŠ è€ƒç ”ï¼Œ9æœˆåº•çªç„¶å¾—çŸ¥å› ä¸ºç–«æƒ…æ‰©ä¿æŠŠæœ¬å¼Ÿå¼Ÿä¿ä¸Šäº†ï¼Œè¯´å®è¯è¿æ°”å¾ˆå¥½ï¼Œå±å®è¦å¥½å¥½æ„Ÿè°¢å­¦æ ¡ï¼Œåªè¦å­¦æ ¡å¤ŸåŠªåŠ›å°±èƒ½æŠ¬æˆ‘ä¸€æ‰‹ã€‚ä»Šå¤©ä¿ç ”å°˜åŸƒè½å®šäº†è™½ç„¶ç›´æ¥å¼€å§‹995ï¼Œä½†æ˜¯å¿ƒç†å‹åŠ›æ²¡é‚£ä¹ˆå¤§äº†ï¼Œè¿˜è¦å­¦ä¹ æ–°çš„çŸ¥è¯†ï¼Œè‚¯å®šè¦å¤šè®°å½•è®°å½•ã€‚</p>
<a id="more"></a>
<h3 id="ç¢ç¢å¿µ">ç¢ç¢å¿µ</h3>
<p>ä»Šå¤©æ˜¯åæ¨çš„ç¬¬ä¸€å¤©ï¼Œä¿äº†æœ¬é™¢ï¼Œå¤è¯•é€šçŸ¥å·²ç»æ¥å—äº†ï¼Œè¿˜åœ¨ç­‰å¾…å½•å–é€šçŸ¥ï¼Œæ˜¨æ™šå¡«ç³»ç»Ÿç¡å¾—ä¹Ÿæ™šï¼Œä»Šæ—©èµ·çš„ä¹Ÿæ—©è¿™ä¼šå„¿å›°å¾—å¾ˆï¼Œä¹Ÿæ²¡åŠæ³•å­¦ä¹ ï¼Œå°±æ¥è®°å½•ä¸€ä¸‹ã€‚</p>
<p>æœ¬æ¥æˆ‘çš„æˆç»©å°±åœ¨ä¿ç ”è¾¹ç¼˜ï¼Œåªè¦èƒ½æ‹¿åˆ°ä¸€ä¸ªçœå¥–å°±èƒ½ä¿ç ”äº†ï¼Œå¯’å‡å’Œå¤§ä¸‰ä¹Ÿå‚åŠ äº†å‡ ä¸ªæ¯”èµ›ï¼Œè¯´å®è¯ä¸€è¨€éš¾å°½ï¼Œæœ‰äº›äººç¡®å®ä¸æ˜¯é‚£ä¹ˆé è°±ï¼Œä¹Ÿæ€ªæˆ‘ä¹‹å‰ç¡®å®ä¸æ‡‚ï¼Œä¹Ÿæ²¡æœ‰å»æ·±å…¥çš„äº†è§£ï¼Œä»¥ä¸ºè·Ÿç€è€å¸ˆå°±å¯¹äº†ï¼Œè°èƒ½æƒ³åˆ°......</p>
<p>ä»Šå¹´å› ä¸ºç–«æƒ…ï¼Œå›½å®¶ä¸ºäº†ä¸è®©æ¯•ä¸šç”Ÿåœ¨ç¤¾ä¼šä¸Šä¹±æ™ƒï¼Œä¹Ÿå¯¹ç ”ç©¶ç”Ÿè¿›è¡Œäº†æ‰©æ‹›ï¼Œä¿ç ”åé¢ä¹Ÿå°±è¿›è¡Œäº†æ‰©æ‹›ï¼Œè¯´å®è¯æˆ‘æœ¬æ¥éƒ½æ²¡æƒ³ç€èƒ½æ‰©åˆ°æˆ‘ï¼Œæ²¡ç«èµ›åŠ åˆ†å±å®å¤ªå¼Ÿå¼Ÿäº†ï¼Œéƒ½æ˜¯æ„å¤–æƒŠå–œã€‚æœ‰æ—¶å€™ä½ åšå¥½è‡ªå·±çš„äº‹ï¼Œå¹¸ç¦å¯èƒ½å°±é‚£ä¹ˆæ¥äº†ã€‚</p>
<p>å› ä¸ºçŸ¥é“ä¿ç ”çš„æ—¶é—´æ¯”è¾ƒæ™šï¼Œä¹‹å‰çš„å¤ä»¤è¥ä¹Ÿæ²¡æœ‰å‚åŠ é¢„æ¨å…å¾ˆå¤šå­¦æ ¡ä¹Ÿç»“æŸäº†ï¼Œæ‰€ä»¥å¯é€‰æ‹©çš„ç©ºé—´å¹¶ä¸å¤§ï¼ŒåŠ ä¸Šä¹‹å‰ä¸€ç›´åœ¨å­¦æ•°å­¦ï¼Œä¸“ä¸šè¯¾ç¡®å®æ²¡çœ‹ï¼Œä»£ç ä¹Ÿå¾ˆä¹…æ²¡å†™äº†ï¼Œå°¤å…¶æ˜¯å¾ˆå¤šå­¦æ ¡è¿˜è¦æ±‚ç”¨Cï¼Œå› ä¸ºä¹‹å‰åšé¡¹ç›®éƒ½ç”¨çš„Pythonï¼Œæ‰€ä»¥Cä¹Ÿå¿˜å…‰äº†ï¼Œå‡†å¤‡æ—¶é—´ç¡®å®ååˆ†æœ‰é™ã€‚æœ€åè¿˜æ˜¯é€‰æ‹©äº†æœ¬é™¢ï¼Œç´¢æ€§æ‰¾åˆ°äº†ä¸€ä¸ªé è°±çš„å¯¼å¸ˆï¼Œæ‰‹é‡Œä¹Ÿæœ‰å¾ˆå¥½çš„é¡¹ç›®ï¼Œåæ­£è½»æ¾æ˜¯ä¸å¯èƒ½è½»æ¾çš„ï¼Œ995çš„å¿«ä¹ç”Ÿæ´»æˆ‘æ¥äº†ã€‚</p>
<p>ä¿ç ”äº†ç¡®å®è¦è½»æ¾ä¸€äº›ï¼Œå¯èƒ½995åœ¨æ—¶é—´ä¸Šå’Œè€ƒç ”å­¦ä¹ å·®ä¸å¤šï¼Œä½†æ˜¯æ¯•ç«Ÿæ²¡æœ‰é‚£ä¹ˆå¤§çš„å‹åŠ›ï¼Œè€Œä¸”å­¦è¿™äº›æ–°çŸ¥è¯†å±å®æ¯”å­¦é«˜æ•°æœ‰æ„æ€å¤šäº†ï¼Œè™½ç„¶æ•°å­¦è‚¯å®šæ˜¯è¦ç”¨ï¼Œä½†æ˜¯ä¸ç”¨èƒŒå•Šï¼Œåªè¦èƒ½åº”ç”¨å°±è¡Œäº†ï¼Œæˆ‘æ„Ÿè§‰ç ”ç©¶ç”Ÿå¾ˆå¤§çš„ä¸€ä¸ªé˜»ç¢è¿˜æ˜¯è‹±è¯­ï¼Œæˆ‘è‹±è¯­å±å®å¤ªè¾£é¸¡äº†ï¼Œä¸å»å†²å¤–æ ¡è‹±è¯­ä¹Ÿæ˜¯å¾ˆé‡è¦çš„åŸå› ä¹‹ä¸€ã€‚</p>
<p>å› ä¸ºä¸Šä¸€ä¸ªå…è´¹é¢†çš„æœåŠ¡å™¨åˆ°æœŸäº†ï¼Œæ¢äº†ä¸€ä¸ªå­¦ç”ŸæœåŠ¡å™¨ï¼Œä»Šæ—©æŠŠåšå®¢åˆå¼„äº†ä¸€ä¸‹ï¼Œè¿˜å¥½ä¸ç”¨æ€ä¹ˆå¤§æ“ä½œã€‚</p>
<p>éƒ½åç‚¹å¤šäº†ï¼Œæˆ‘çš„å¾…å½•å–é€šçŸ¥æ€ä¹ˆè¿˜æ²¡æ¥å•Šå•Šå•Šå•Šå•Šå•Š~~~~~~~~~~~</p>
<h3 id="å°ç»éªŒ">å°ç»éªŒ</h3>
<p>ä»¥ä¸‹éƒ½æ˜¯ä¸ªäººç»éªŒï¼Œä¸ä¸€å®šé€‚ç”¨äºæ¯ä¸ªå­¦æ ¡æ¯ä¸ªäººã€‚</p>
<p>ä¿ç ”é™¤äº†å¹³æ—¶çš„è¯¾ç¨‹ä¹‹å¤–ï¼Œç«èµ›çœŸçš„å¾ˆé‡è¦ï¼Œå¦‚æœçœŸçš„æœ‰ä¿ç ”æ„å‘ä¸€å®šè¦æ—©å‡†å¤‡ç«èµ›ï¼Œå¤§äºŒæ€ä¹ˆéƒ½è¦å¼€å§‹äº†å§ï¼Œè¿˜æ˜¯è¦æ—©åšäº†è§£ï¼Œæœ‰ä¸€äº›ç«èµ›ç¡®å®æ˜¯æ¯”è¾ƒå¥½æ‹¿å¥–çš„ï¼Œæ‰¾å‡ ä¸ªé è°±çš„é˜Ÿå‹ï¼Œå†æ‰¾ä¸ªé è°±çš„æŒ‡å¯¼è€å¸ˆï¼Œè¿˜æ˜¯æ¯”è¾ƒæœ‰å¸Œæœ›çš„ã€‚</p>
<p>å¦‚æœè‹±è¯­ç¡®å®ä¸å¥½ï¼Œåƒæˆ‘ä¸€æ ·ä¿ç ”äº†å…­çº§éƒ½æ²¡è¿‡ä¼°è®¡ä¹Ÿæ²¡å‡ ä¸ªäººäº†ï¼Œè¿˜å¥½å­¦æ ¡ä¸å¡è¿™ä¸ªã€‚å¦‚æœçœŸçš„æƒ³è¦ä¿ç ”ï¼Œè¿˜æ˜¯æœ€å¥½è¿‡ä¸€ä¸‹å…­çº§ï¼Œèƒ½å¤šé«˜å°±åˆ·å¤šé«˜ï¼Œæ¯•ç«Ÿè€ƒè¯•è¿˜æ˜¯æœ‰åº”è¯•æŠ€å·§çš„ã€‚æˆ‘ä¹‹å‰æ˜¯ä¸çŸ¥é“èƒ½ä¿ç ”ï¼Œå¤§äºŒä¹Ÿæ²¡å¤ªå…³æ³¨ï¼Œå¤§ä¸‰å‘ç°æˆç»©è¿˜å¯ä»¥ï¼Œåœ¨è¾¹ç¼˜ä½†æ˜¯ç–«æƒ…äº†ä¹Ÿæ²¡åŠæ³•å‚åŠ å…­çº§ï¼Œæ‰€ä»¥å‚åŠ äº†ä¹æœˆçš„é‚£åœºï¼Œè¯´å®è¯çªå‡»äº†ä¸€ä¸‹ï¼Œç°åœ¨ä¹Ÿä¸çŸ¥é“å’‹æ ·ã€‚</p>
<p>ä¿ç ”é¢è¯•çš„è‹±è¯­ç¡®å®æ˜¯å¯ä»¥å‡†å¤‡ä¸€ä¸‹çš„ï¼Œå°½æ—©å‡†å¤‡ï¼Œæ€ä¹ˆéƒ½è¦å‡†å¤‡è‡³å°‘ä¸€ä¸ªç¤¼æ‹œå§ï¼Œä¸»è¦å°±æ˜¯è‹±æ–‡è‡ªæˆ‘ä»‹ç»ï¼Œè¿˜æœ‰ä¸€äº›å¸¸è§é¢è¯•é—®é¢˜ï¼Œè¿™äº›ç½‘ä¸Šéƒ½èƒ½æ‰¾åˆ°å¾ˆå¤šæ•™ç¨‹ï¼Œæˆ‘è‹±è¯­ä¹Ÿå°±æ˜¯ä¸ªå¼Ÿå¼Ÿï¼Œå°±ä¸æ•™ä½ ä»¬äº†ã€‚å¯ä»¥é¢è¯•å‰æ‰¾æœ‹å‹å¼€ä¸ªè§†é¢‘ä¼šè®®è¯•ä¸€è¯•ã€‚æˆ‘æ‰¾çš„åŒå­¦ä»–è‹±è¯­æ˜¯æ¯”è¾ƒå¥½çš„ï¼Œè™½ç„¶è‚¯å®šæ¯”ä¸ä¸Šæ¯è¯­ï¼Œä½†æ˜¯æ˜¯å¼€å£äº¤æµä¸ç”¨å‡†å¤‡ä¹Ÿèƒ½éšä¾¿è¿›è¡Œçš„ä¸‹å»çš„é‚£ç§ï¼Œæ¯”æˆ‘æ˜¯å¼ºçš„å¤ªå¤šäº†ã€‚æˆ‘ä»¬ç¬¬ä¸€æ¬¡è¯•ä»–ç›´æ¥ç»™æˆ‘é—®æ²‰é»˜äº†ï¼Œä»–è¯´çš„æˆ‘éƒ½èƒ½å¬æ‡‚ï¼Œä½†æˆ‘å±å®å¼€ä¸äº†å£ï¼Œæ„Ÿè§‰ç›´æ¥åƒæ˜¯è¢«æ²‰é»˜ï¼Œè¯´ä¸å‡ºè¯ã€‚è¿˜æ˜¯è¦æ‰¾äººé”»ç‚¼ä¸€ä¸‹ä¸‹ï¼Œç¡®å®å¥½ä¸€ç‚¹ã€‚</p>
<p>åˆæ˜¯åŠä¸ªå°æ—¶è¿‡å»äº†ï¼Œæˆ‘çš„å¾…å½•å–é€šçŸ¥è¿˜æ²¡æ¥~~~~~~~~~~~</p>
<p>å¸Œæœ›èƒ½åœ¨ä¸­åˆåƒé¥­å‰æ¥ï¼Œä¸æƒ³æŠŠç”µè„‘æ¬å›å»ï¼Œç”µè„‘åƒä¸ªæ¿ç –ï¼Œå¤ªæ²‰äº†...</p>
]]></content>
      <categories>
        <category>ç¢ç¢å¿µ</category>
      </categories>
  </entry>
  <entry>
    <title>åˆ›å»ºpythonè™šæ‹Ÿç¯å¢ƒ</title>
    <url>/%E5%88%9B%E5%BB%BApython%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/</url>
    <content><![CDATA[<p>å¦‚æœåœ¨ä¸€å°ç”µè„‘ä¸Šï¼Œæƒ³å¼€å‘å¤šä¸ªä¸åŒçš„é¡¹ç›®ï¼Œ éœ€è¦ç”¨åˆ°åŒä¸€ä¸ªåŒ…çš„ä¸åŒç‰ˆæœ¬ï¼Œ
å¦‚æœä¸ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼Œ åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹å®‰è£…æˆ–è€…æ›´æ–°ï¼Œ
æ–°ç‰ˆæœ¬ä¼šè¦†ç›–ä»¥å‰çš„ç‰ˆæœ¬ï¼Œ å…¶å®ƒçš„é¡¹ç›®å°±æ— æ³•è¿è¡Œäº†ã€‚</p>
<a id="more"></a>
<h2 id="å®‰è£…è™šæ‹Ÿç¯å¢ƒ">1.å®‰è£…è™šæ‹Ÿç¯å¢ƒ</h2>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo pip install virtualenv</span><br><span class="line">sudo pip install virtualenvwrapper</span><br></pre></td></tr></table></figure>
<p>virtualenvwrapperç±»ä¼¼äºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒç®¡ç†å·¥å…·ä¼šæ¯”åŸç”Ÿçš„virtualenvæ–¹ä¾¿ä¸€äº›</p>
<p>å®‰è£…å®Œè™šæ‹Ÿç¯å¢ƒå¦‚æœæ‰¾ä¸åˆ°mkvirtualenvå‘½ä»¤ï¼Œé¡»é…ç½®ç¯å¢ƒå˜é‡ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 1ã€åœ¨~ï¼ˆå®¶ç›®å½•ï¼‰ä¸‹åˆ›å»ºç›®å½•ç”¨æ¥å­˜æ”¾è™šæ‹Ÿç¯å¢ƒ</span><br><span class="line">mkdir .virtualenvs</span><br><span class="line"></span><br><span class="line"># 2ã€æ‰“å¼€~&#x2F;.bashrcæ–‡ä»¶ï¼Œå¹¶æ·»åŠ å¦‚ä¸‹ï¼š</span><br><span class="line">export WORKON_HOME&#x3D;$HOME&#x2F;.virtualenvs</span><br><span class="line">source &#x2F;usr&#x2F;local&#x2F;bin&#x2F;virtualenvwrapper.sh</span><br><span class="line"></span><br><span class="line"># 3ã€è¿è¡Œ</span><br><span class="line">source ~&#x2F;.bashrc</span><br></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ">2.åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</h2>
<p>å¦‚æœä¸æŒ‡å®šPythonç‰ˆæœ¬ï¼Œé»˜è®¤å®‰è£…çš„æ˜¯Python2çš„è™šæ‹Ÿç¯å¢ƒ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># åœ¨python2ä¸­ï¼Œåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span><br><span class="line">mkvirtualenv è™šæ‹Ÿç¯å¢ƒåç§°</span><br><span class="line">ä¾‹ ï¼š</span><br><span class="line">mkvirtualenv py_flask</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæƒ³è¦æŒ‡å®špythonç‰ˆæœ¬</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkvirtualenv -p python3 è™šæ‹Ÿç¯å¢ƒåç§°</span><br><span class="line">ä¾‹ ï¼š</span><br><span class="line">mkvirtualenv -p python3 py3_flask</span><br></pre></td></tr></table></figure>
<p>æç¤ºï¼š</p>
<p>æ‰€æœ‰çš„è™šæ‹Ÿç¯å¢ƒéƒ½ä½äº/~/ä¸‹çš„éšè—ç›®å½•.virtualenvsä¸‹</p>
<h2 id="ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ">3.ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ</h2>
<h3 id="æŸ¥çœ‹å·²æœ‰è™šæ‹Ÿç¯å¢ƒ">3.1æŸ¥çœ‹å·²æœ‰è™šæ‹Ÿç¯å¢ƒ</h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">workon</span><br></pre></td></tr></table></figure>
<h3 id="è¿›å…¥è™šæ‹Ÿç¯å¢ƒ">3.2è¿›å…¥è™šæ‹Ÿç¯å¢ƒ</h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">workon è™šæ‹Ÿç¯å¢ƒåç§°</span><br></pre></td></tr></table></figure>
<h3 id="é€€å‡ºè™šæ‹Ÿç¯å¢ƒ">3.3é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">deativate</span><br></pre></td></tr></table></figure>
<h3 id="åˆ é™¤è™šæ‹Ÿç¯å¢ƒ">3.4åˆ é™¤è™šæ‹Ÿç¯å¢ƒ</h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å…ˆé€€å‡ºï¼šdeactivate</span><br><span class="line">å†åˆ é™¤ï¼šrmvirtualenv py3_flask</span><br></pre></td></tr></table></figure>
<h2 id="è™šæ‹Ÿç¯å¢ƒå·¥å…·åŒ…ä½ç½®">4.è™šæ‹Ÿç¯å¢ƒå·¥å…·åŒ…ä½ç½®</h2>
<p>~/.virtualenvs/è™šæ‹Ÿç¯å¢ƒåç§°/lib/python3.5/site-packages</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>è™šæ‹Ÿç¯å¢ƒ</tag>
      </tags>
  </entry>
  <entry>
    <title>å›¾ç‰‡è½¬è§†é¢‘</title>
    <url>/%E5%9B%BE%E7%89%87%E8%BD%AC%E8%A7%86%E9%A2%91/</url>
    <content><![CDATA[<p>ä½¿ç”¨pythonçš„cv2åº“å®Œæˆå›¾ç‰‡è½¬è§†é¢‘ï¼Œè§£å†³ç°åº¦å›¾ç‰‡å’Œä¸­æ–‡è·¯å¾„é—®é¢˜</p>
<a id="more"></a>
<p>å…ˆä¸Šä»£ç </p>
<figure class="highlight python"><figcaption><span>img2video.py</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> glob</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">img_array = []</span><br><span class="line"><span class="comment"># å–å›¾ç‰‡çš„æ—¶å€™æ’åº</span></span><br><span class="line"><span class="keyword">for</span> filename <span class="keyword">in</span> sorted(glob.glob(<span class="string">r'***\0X1AA30623C1AE4641\*.png'</span>), key=<span class="keyword">lambda</span> x: int(x.split(<span class="string">'.'</span>)[<span class="number">0</span>].split(<span class="string">'_'</span>)[<span class="number">-1</span>])):</span><br><span class="line">	<span class="comment"># æ³¨æ„è¯»å›¾æ–¹å¼</span></span><br><span class="line">    img = cv2.imdecode(np.fromfile(filename, dtype=np.uint8), <span class="number">1</span>)</span><br><span class="line">    img_array.append(img)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">height, width, channel = img_array[<span class="number">0</span>].shape</span><br><span class="line">size = (width, height)</span><br><span class="line"></span><br><span class="line"><span class="comment"># aviï¼šè§†é¢‘ç±»å‹ï¼Œmp4ä¹Ÿå¯ä»¥</span></span><br><span class="line"><span class="comment"># cv2.VideoWriter_fourcc(*'I420')ï¼šç¼–ç æ ¼å¼</span></span><br><span class="line"><span class="comment"># 50ï¼šè§†é¢‘å¸§ç‡</span></span><br><span class="line"><span class="comment"># size:è§†é¢‘ä¸­å›¾ç‰‡å¤§å°</span></span><br><span class="line">out = cv2.VideoWriter(<span class="string">r'***\0X1AA30623C1AE4641_predict.avi'</span>,</span><br><span class="line">                      cv2.VideoWriter_fourcc(*<span class="string">'I420'</span>),</span><br><span class="line">                      <span class="number">50</span>, size)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> img <span class="keyword">in</span> img_array:</span><br><span class="line">    out.write(img)</span><br><span class="line"></span><br><span class="line">out.release()</span><br></pre></td></tr></table></figure>
<h3 id="ä¸­æ–‡è·¯å¾„">ä¸­æ–‡è·¯å¾„</h3>
<p>cv2åœ¨è¯»å–å¸¦æœ‰ä¸­æ–‡è·¯å¾„å›¾ç‰‡çš„æ—¶å€™ä¸èƒ½ç›´æ¥ä½¿ç”¨<code>cv2.imread()</code>ï¼Œè¯»å‡ºæ¥æ˜¯Noneã€‚éœ€è¦ä½¿ç”¨<code>cv2.imdecode(np.fromfile(filepath, dtype=np.uint8), -1)</code>ï¼Œæ³¨æ„åé¢çš„æ•°å­—å¸¦æœ‰å…·ä½“å«ä¹‰ï¼Œä¸‹é¢å°†ç°åº¦å›¾çš„æ—¶å€™è¯´æ˜ã€‚</p>
<h3 id="ç°åº¦å›¾ç‰‡">ç°åº¦å›¾ç‰‡</h3>
<p><code>cv2.imdecode(np.fromfile(filepath, dtype=np.uint8), flag=-1)</code></p>
<p>æ­¤å¤„çš„<strong>flag</strong>å¸¦æœ‰æ˜ç¡®å«ä¹‰ï¼š</p>
<ul>
<li>flag = -1, 8ä½æ·±åº¦ï¼ŒåŸé€šé“ï¼Œæ­¤æ—¶è¯»å–çš„æ˜¯åŸæ¥çš„å›¾åƒ</li>
<li>flag = 0, 8ä½æ·±åº¦ï¼Œ1é€šé“ï¼Œè¯»å–çš„æ˜¯ç°åº¦å›¾</li>
<li>flag = 1ï¼Œ 8ä½æ·±åº¦ï¼Œ3é€šé“å½©å›¾</li>
<li>flag = 2ï¼Œ åŸæ·±åº¦ï¼Œ ç°åº¦</li>
<li>flag = 3ï¼ŒåŸæ·±åº¦ï¼Œå½©å›¾</li>
<li>flag = 4ï¼Œ 8ä½æ·±åº¦ï¼Œ 3é€šé“å½©å›¾</li>
</ul>
<p>æˆ‘æœ€ç»ˆçš„ç»“æœæ˜¯ä¸€å¼ ç°åº¦å›¾ï¼Œéœ€è¦è¯»æˆä¸‰é€šé“å½©å›¾æ‰èƒ½è¿›è¡Œä¿å­˜ï¼Œæ³¨æ„cv2è¯»å‡ºæ¥çš„æ˜¯BGRè€Œä¸æ˜¯RGBï¼Œåªè¦ä¸­é€”ä¸ç»è¿‡PILä¹‹ç±»çš„è½¬åŒ–ï¼Œç›´æ¥å†<code>cv2.VideoWriter</code>çš„è¯å…¶å®ä¸å½±å“ã€‚</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>å¤„ç†dmå­—æ®µå¤§å°å†™</title>
    <url>/%E5%A4%84%E7%90%86dm%E5%AD%97%E6%AE%B5%E5%A4%A7%E5%B0%8F%E5%86%99/</url>
    <content><![CDATA[<p>è®°å½•ä¸‹ä½¿ç”¨è¾¾æ¢¦æ•°æ®åº“é‡åˆ°çš„å¤§å°å†™é—®é¢˜ï¼Œè¾¾æ¢¦æ•°æ®åº“åœ¨å»ºåº“çš„æ—¶å€™å¯ä»¥é€‰æ‹©ä¸åŒºåˆ†å¤§å°å†™ï¼Œé»˜è®¤æ˜¯é€‰æ‹©åŒºåˆ†çš„ï¼Œæˆ‘çœ‹ç½‘ä¸Šçš„åšå®¢å¾ˆå¤šéƒ½å»ºè®®å–æ¶ˆåŒºåˆ†å¤§å°å†™ï¼Œä½†æ˜¯æˆ‘å¯¹æ¥çš„ç”¨æˆ·è¿™è¾¹å»ºåº“çš„æ—¶å€™æ²¡æœ‰å–æ¶ˆï¼Œç„¶ådmå¥½åƒæœ‰æŠŠå­—æ®µåå…¨éƒ¨å¤§å†™ï¼Œå°±ç®—ä»–ä»¬å»ºè¡¨æ—¶å†™çš„å°å†™ï¼Œæ²¡æœ‰ä»”ç»†ç ”ç©¶ï¼Œæˆ‘è¿™é‡Œä¸»è¦åªæ˜¯åšäº†æœ‰æ— å¤§å†™åˆ¤æ–­ã€‚</p>
<a id="more"></a>
<h4 id="cursor.fetchall">cursor.fetchall()</h4>
<p>å¯¹ä»æ•°æ®åº“ä¸­è·å¾—çš„åˆ—æ•°è¾ƒå°‘çš„æ•°æ®å®é™…ä¸Šéƒ½ä¸ç”¨åˆ¤æ–­é‡Œé¢å­—æ®µåæ˜¯å¤§å†™è¿˜æ˜¯å°å†™ï¼Œå¯ä»¥ç›´æ¥ç”¨tryã€expectæ¥å¤„ç†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    folder_path = save_folder[<span class="number">0</span>][<span class="string">'SAVE_FOLDER'</span>]</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    folder_path = save_folder[<span class="number">0</span>][<span class="string">'SAVE_FOLDER'</span>.lower()]</span><br></pre></td></tr></table></figure>
<h4 id="df-pd.dataframe.from_recordsdb_data">df =
pd.DataFrame.from_records(db_data)</h4>
<p>ä¸ºäº†å¯¹æ•°æ®è¿›è¡Œæ›´å¥½çš„å¤„ç†ï¼Œåœ¨Pythonä¸­ç»å¸¸ä¼šä½¿ç”¨åˆ°pandasæ¥å¤„ç†æ•°æ®ï¼Œå½“æˆ‘ä»¬åœ¨<code>dmPython.connect</code>ä¸­è®¾ç½®äº†<code>cursorclass=dmPython.DictCursor</code>æ—¶ï¼Œæˆ‘ä»¬<code>cursor.fetchall()</code>å›æ¥çš„æ•°æ®ä¼šæ˜¯ä¸€ä¸ªliståŒ…è£¹è‹¥å¹²dictçš„å½¢å¼ï¼Œæ¯ä¸€ä¸ªdictæ˜¯æ•°æ®åº“ä¸­çš„ä¸€è¡Œï¼Œdictä¸­çš„keyå°±æ˜¯æ•°æ®è¡¨ä¸­çš„åˆ—åã€‚æ­¤æ—¶æˆ‘ä»¬å¯ä»¥é‡‡ç”¨<code>pd.DataFrame.from_records()</code>å°†è¿™ç§listç›´æ¥å˜ä¸ºpandasçš„DataFrameæ ¼å¼æ¥è¿›è¡Œå¤„ç†ã€‚</p>
<p>è¿™é‡Œæˆ‘éœ€è¦å°†æ•°æ®åº“ä¸­å–å‡ºæ¥çš„æ•°æ®å…ˆä¿®æ”¹ç±»å‹ï¼Œä½¿ç”¨<code>df.astype()</code>å¯ä»¥ç›´æ¥ä¿®æ”¹dfçš„åˆ—æ•°æ®ç±»å‹ï¼Œè¿™é‡Œéœ€è¦ç”¨åˆ°ä¸€ä¸ªdictæ¥å®Œæˆæ•°æ®ç±»å‹ä¿®æ”¹ï¼Œdictçš„keyæ˜¯dfçš„åˆ—åï¼Œvalueæ˜¯è¦ä¿®æ”¹æˆçš„æ•°æ®ç±»å‹ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">data_types_dict &#x3D; &#123;</span><br><span class="line">    &quot;time_start&quot;: float,</span><br><span class="line">    &quot;ip_client&quot;: str,</span><br><span class="line">    &quot;byte_up&quot;: float,</span><br><span class="line">    &quot;byte_dn&quot;: float</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå°±æ¶‰åŠåˆ°åˆ¤æ–­ä»æ•°æ®åº“ä¸­å–å‡ºæ¥çš„æ•°æ®å­—æ®µåæ˜¯å¤§å†™è¿˜æ˜¯å°å†™ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹ä»£ç å®Œæˆæ•°æ®ä¿®æ”¹ï¼Œä¸»è¦æ€è·¯å°±æ˜¯å½“æˆ‘åˆ¤æ–­æ•°æ®åº“å­—æ®µåæ˜¯å¤§å†™çš„æ—¶å€™æŠŠæˆ‘çš„dictçš„keyä¹Ÿæ”¹ä¸ºå¤§å†™ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">if &#39;time_start&#39; in df.columns.tolist():</span><br><span class="line">    df &#x3D; df.astype(data_types_dict)</span><br><span class="line">elif &#39;time_start&#39;.upper() in df.columns.tolist():</span><br><span class="line">    data_types_dict_upper &#x3D; &#123;&#125;</span><br><span class="line">    for i, j in data_types_dict.items():</span><br><span class="line">        data_types_dict_upper[i.upper()] &#x3D; j</span><br><span class="line">    # print(&#39;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#39;, data_types_dict_upper)</span><br><span class="line">    df &#x3D; df.astype(data_types_dict_upper)</span><br></pre></td></tr></table></figure>
<p>å¦‚æœéœ€è¦è¿›è¡Œåˆ—åä¿®æ”¹ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rename_col &#x3D; &#123;</span><br><span class="line">    &#39;time_start&#39;: &#39;time&#39;,</span><br><span class="line">    &#39;ip_client&#39;: &#39;sIP&#39;,</span><br><span class="line">    &#39;byte_up&#39;: &#39;outlen&#39;,</span><br><span class="line">    &#39;byte_dn&#39;: &#39;inlen&#39;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if &#39;time_start&#39; in df.columns.tolist():</span><br><span class="line">    df &#x3D; df.rename(columns&#x3D;rename_col)</span><br><span class="line">elif &#39;time_start&#39;.upper() in df.columns.tolist():</span><br><span class="line">    rename_col_upper &#x3D; &#123;&#125;</span><br><span class="line">    for i, j in rename_col.items():</span><br><span class="line">        rename_col_upper[i.upper()] &#x3D; j</span><br><span class="line">    # print(&#39;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#39;, rename_col_upper)</span><br><span class="line">    df &#x3D; df.rename(columns&#x3D;rename_col_upper)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>è¾¾æ¢¦</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>è¾¾æ¢¦</tag>
      </tags>
  </entry>
  <entry>
    <title>å¤šå°ç”µè„‘åŒæ­¥åšå®¢</title>
    <url>/%E5%A4%9A%E5%8F%B0%E7%94%B5%E8%84%91%E5%90%8C%E6%AD%A5%E5%8D%9A%E5%AE%A2/</url>
    <content><![CDATA[<p>è®°å½•ä¸€ä¸‹åœ¨å¤šå°ç”µè„‘ä¸ŠåŒæ—¶å†™åšå®¢æ—¶å€™çš„åŒæ­¥é—®é¢˜</p>
<p><a href="https://www.zhihu.com/question/23934523" target="_blank" rel="noopener">å‚è€ƒ</a></p>
<a id="more"></a>
<h3 id="ç¯å¢ƒå®‰è£…">ç¯å¢ƒå®‰è£…</h3>
<h4 id="nodejs">nodejs</h4>
<p>é¦–å…ˆåœ¨è‡ªå·±çš„ç”µè„‘ä¸Šå®‰è£… Node.jsï¼Œä¸‹è½½åœ°å€ï¼š<a
href="https://nodejs.org/zh-cn/download/">node.js</a></p>
<p>å»ºè®®ä¸‹è½½nodejs
14ä»¥ä¸‹çš„ç‰ˆæœ¬ï¼Œ14ä»¥ä¸Šçš„ç‰ˆæœ¬å’Œä¸€äº›è€ç‰ˆçš„hexoä¸å…¼å®¹ï¼Œä¼šæŠ¥é”™</p>
<h4 id="hexo">hexo</h4>
<p>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…hexoï¼Œ-gå¯ä»¥å…¨å±€å®‰è£…ï¼Œåœ¨æ‰€æœ‰æ–‡ä»¶å¤¹éƒ½èƒ½ä½¿ç”¨</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<h3 id="gitåŒæ­¥">gitåŒæ­¥</h3>
<p>æˆ‘è¿™é‡Œé»˜è®¤å·²ç»è‡³å°‘åœ¨ä¸€ä¸ªç”µè„‘ä¸Šé…ç½®å¥½åšå®¢ç«™ç‚¹ä¿¡æ¯äº†ï¼Œå°±ä¸å†™æ€ä¹ˆé…ç½®ç«™ç‚¹ä¿¡æ¯äº†ï¼Œç›´æ¥å†™å¦‚ä½•åœ¨gitä¸Šæ–°å»ºåˆ†æ”¯å­˜æ”¾hexoæºç </p>
<p>åœ¨åšå®¢æ ¹ç›®å½•ä¸‹åœ¨git bashä¸­ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git init</span><br><span class="line">git checkout -b source</span><br><span class="line">git add -A</span><br><span class="line">git commit -m &quot;init blog&quot;</span><br><span class="line">git remote add origin git@github.com:&#123;username&#125;&#x2F;&#123;username&#125;.github.io.git</span><br><span class="line">git push origin source</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¯åœ¨ç¬¬äºŒå°ç”µè„‘ä¸Šè¦æ‹‰å–çš„è¯å°±æ–°å»ºä¸€ä¸ªåšå®¢æ–‡ä»¶å¤¹ä½¿ç”¨initä¹‹åå°†cloneä¸‹æ¥çš„æ–‡ä»¶æ”¾åˆ°åšå®¢æ–‡ä»¶å¤¹é‡Œå†æ‰§è¡Œåç»­æ“ä½œå°±å¥½äº†</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>åšå®¢</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>åŸºäºredisä½¿ç”¨scrapyä¸‹è½½ä¸­é—´ä»¶å®ç°ç®€å•çš„å¢é‡çˆ¬è™«</title>
    <url>/%E5%9F%BA%E4%BA%8Eredis%E4%BD%BF%E7%94%A8scrapy%E4%B8%8B%E8%BD%BD%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%9A%84%E5%A2%9E%E9%87%8F%E7%88%AC%E8%99%AB/</url>
    <content><![CDATA[<p>åœ¨çˆ¬è™«ä¸­æœ‰ä¸€ç§å¾ˆé‡è¦çš„æ“ä½œå°±æ˜¯å¢é‡çˆ¬å–ï¼Œscrapyè‡ªå¸¦çš„ç®¡é“ä¸­çš„å»é‡åªèƒ½å®ç°è¯¥æ¬¡çˆ¬å–é“¾æ¥çš„å»é‡ï¼Œå¹¶ä¸èƒ½å®ç°å¯¹è¿‡å¾€çˆ¬å–æ•°æ®çš„å»é‡ï¼Œæ‰€ä»¥é€‰æ‹©ä½¿ç”¨redisæ¥å®ç°å¢é‡çˆ¬å–ï¼Œè¿™ä¹Ÿæ˜¯å¤§å®¶ç°åœ¨ä½¿ç”¨è¾ƒå¤šçš„æ–¹æ³•</p>
<a id="more"></a>
<p>å‚è€ƒhttps://www.jianshu.com/p/f03479b9222d</p>
<h1 id="å®˜æ–¹å»é‡">1.å®˜æ–¹å»é‡</h1>
<p>ä¸Šé¢æèµ·è¿‡ï¼Œå®˜æ–¹æ–‡æ¡£ä¸­çš„åœ¨ç®¡é“é‡Œé¢„è®¾äº†å»é‡æ¨¡å—ï¼Œä½†åªèƒ½åœ¨æœ¬æ¬¡çˆ¬å–å†…å®¹ä¸­å»é‡ï¼Œæ— æ³•å¯¹æ¯”ä»¥å¾€çˆ¬å–çš„æ•°æ®ã€‚</p>
<figure class="highlight python"><figcaption><span>å®˜æ–¹å»é‡DuplicatesPipeline</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DuplicatesPipeline</span><span class="params">(object)</span>:</span></span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.url_seen = set()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_item</span><span class="params">(self, item, spider)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> item[<span class="string">'art_url'</span>] <span class="keyword">in</span> self.url_seen: <span class="comment">#è¿™é‡Œæ›¿æ¢æˆä½ çš„item['#']</span></span><br><span class="line">            <span class="keyword">raise</span> DropItem(<span class="string">"Duplicate item found: %s"</span> % item)</span><br><span class="line">           </span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.url_seen.add(item[<span class="string">'art_url'</span>]) <span class="comment">#è¿™é‡Œæ›¿æ¢æˆä½ çš„item['#']</span></span><br><span class="line">            <span class="keyword">return</span> item</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºå®˜æ–¹è‡ªå¸¦çš„DuplicatesPipelineç®¡é“ä¸­é—´ä»¶æ²¡åŠæ³•å®Œæˆæˆ‘ä»¬æ‰€éœ€è¦çš„å¢é‡çˆ¬å–ï¼ˆå¯¹æ¯”æ›¾ç»çˆ¬è¿‡çš„å†…å®¹è€Œä¸åªæ˜¯æœ¬æ¬¡ï¼‰</p>
<h1 id="ä½¿ç”¨ç®¡é“ä¸­é—´ä»¶">2.ä½¿ç”¨ç®¡é“ä¸­é—´ä»¶</h1>
<p>æˆ‘åœ¨ç½‘ä¸Šæ‰¾åˆ°çš„å¤§éƒ¨åˆ†æ–¹æ³•éƒ½æ˜¯åœ¨ç®¡é“ä¸­é—´ä»¶ä¸­é€šè¿‡ä½¿ç”¨rediså®ç°äº†ç®€å•çš„å¢é‡çˆ¬å–ï¼ŒåŸç†å°±æ˜¯åœ¨redisä¸­å­˜å‚¨ä¹‹å‰çˆ¬è™«çˆ¬å–è¿‡çš„é¡µé¢urlï¼Œç„¶åitemè¿›å…¥ç®¡é“çš„æ—¶å€™åˆ¤æ–­è¿™ä¸ªitemå¯¹åº”çš„urlåœ¨ä¸åœ¨redisé‡Œï¼Œå¦‚æœåœ¨è¯´æ˜çˆ¬è¿‡ï¼ŒæŠŠè¿™ä¸ªitemä¸¢å¼ƒï¼›å¦‚æœä¸åœ¨å°±ç»§ç»­ä¸‹ä¸€æ­¥ã€‚</p>
<p>ä½†æ˜¯è¿™é‡Œå¹¶æ²¡æœ‰è§£å†³é¡µé¢urlæ²¡å˜ä½†æ˜¯é¡µé¢å†…å®¹å‘ç”Ÿäº†å˜åŒ–çš„æƒ…å†µï¼Œå¦‚æœè¦è§£å†³è¿™ä¸ªé—®é¢˜é‚£ä¹ˆè¿˜åº”è¯¥å°†itemå†…å®¹ç¼–æˆmd5ç¼–ç ï¼Œç„¶åå¯¹æ¯”urlçš„åŒæ—¶å¯¹æ¯”md5ç¼–ç ï¼Œurlç›¸åŒmd5ä¸åŒå°±è¦†ç›–æ‰åŸæ¥çš„ã€‚ä½†æ˜¯æˆ‘æœ¬æ¬¡å¹¶æ²¡æœ‰å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œè¿™ä¸ªåŠŸèƒ½åªé€‚ç”¨äºå†…å®¹ä¼šå‘ç”Ÿå˜åŒ–çš„è¯¦æƒ…é¡µï¼Œä¸€èˆ¬éƒ½ç”¨ä¸ä¸Šï¼Œåªæ˜¯æå‡ºæ¥è§£å†³æ–¹æ³•ã€‚</p>
<figure class="highlight python"><figcaption><span>pipelines.py</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> mysql.connector</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd  <span class="comment">#ç”¨æ¥è¯»MySQL</span></span><br><span class="line"><span class="keyword">import</span> redis </span><br><span class="line">redis_db = redis.Redis(host=<span class="string">'127.0.0.1'</span>, port=<span class="number">6379</span>, db=<span class="number">4</span>) <span class="comment">#è¿æ¥redisï¼Œç›¸å½“äºMySQLçš„conn</span></span><br><span class="line">redis_data_dict = <span class="string">"f_url"</span>  <span class="comment">#keyçš„åå­—ï¼Œå†™ä»€ä¹ˆéƒ½å¯ä»¥ï¼Œè¿™é‡Œçš„keyç›¸å½“äºå­—å…¸åç§°ï¼Œè€Œä¸æ˜¯keyå€¼ã€‚</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DuplicatesPipeline</span><span class="params">(object)</span>:</span></span><br><span class="line">    conn = mysql.connector.connect(user = <span class="string">'root'</span>, password=<span class="string">'yourpassword'</span>, database=<span class="string">'dbname'</span>, charset=<span class="string">'utf8'</span>)    </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        redis_db.flushdb() <span class="comment">#åˆ é™¤å…¨éƒ¨keyï¼Œä¿è¯keyä¸º0ï¼Œä¸ç„¶å¤šæ¬¡è¿è¡Œæ—¶å€™hlenä¸ç­‰äº0ï¼Œåˆšå¼€å§‹è¿™é‡Œè°ƒè¯•çš„æ—¶å€™ç»å¸¸å‡ºé”™ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> redis_db.hlen(redis_data_dict) == <span class="number">0</span>: <span class="comment">#</span></span><br><span class="line">            sql = <span class="string">"SELECT url FROM your_table_name;"</span>  <span class="comment">#ä»ä½ çš„MySQLé‡Œææ•°æ®ï¼Œæˆ‘è¿™é‡Œå–urlæ¥å»é‡ã€‚</span></span><br><span class="line">            df = pd.read_sql(sql, self.conn) <span class="comment">#è¯»MySQLæ•°æ®</span></span><br><span class="line">            <span class="keyword">for</span> url <span class="keyword">in</span> df[<span class="string">'url'</span>].get_values(): <span class="comment">#æŠŠæ¯ä¸€æ¡çš„å€¼å†™å…¥keyçš„å­—æ®µé‡Œ</span></span><br><span class="line">                redis_db.hset(redis_data_dict, url, <span class="number">0</span>) <span class="comment">#æŠŠkeyå­—æ®µçš„å€¼éƒ½è®¾ä¸º0ï¼Œä½ è¦è®¾æˆä»€ä¹ˆéƒ½å¯ä»¥ï¼Œå› ä¸ºåé¢å¯¹æ¯”çš„æ˜¯å­—æ®µï¼Œè€Œä¸æ˜¯å€¼ã€‚</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_item</span><span class="params">(self, item, spider)</span>:</span></span><br><span class="line">    	<span class="keyword">if</span> redis_db.hexists(redis_data_dict, item[<span class="string">'url'</span>]): <span class="comment">#å–itemé‡Œçš„urlå’Œkeyé‡Œçš„å­—æ®µå¯¹æ¯”ï¼Œçœ‹æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨å°±ä¸¢æ‰è¿™ä¸ªitemã€‚ä¸å­˜åœ¨è¿”å›itemç»™åé¢çš„å‡½æ•°å¤„ç†</span></span><br><span class="line">             <span class="keyword">raise</span> DropItem(<span class="string">"Duplicate item found: %s"</span> % item)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> item</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„è¦å°†æ–°å†™çš„ç®¡é“ä¸­é—´ä»¶åœ¨settingä¸­æ³¨å†Œï¼š</p>
<figure class="highlight diff"><figcaption><span>setting.py</span></figcaption><table><tr><td class="code"><pre><span class="line">ITEM_PIPELINES = &#123;</span><br><span class="line">	'shaoerkepu.pipelines.ShaoerkepuPipeline': 300,</span><br><span class="line"><span class="addition">+	'shaoerkepu.pipelines.DuplicatesPipeline': 200,</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä¸»è¦ä½¿ç”¨reidsä¸­çš„hashç±»å‹ï¼ŒåŸå› æ˜¯é€Ÿåº¦ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆé€Ÿåº¦å¿«ä¿ºä¹Ÿä¸æ‡‚ï¼Œæ²¡æœ‰æ·±å…¥äº†è§£è¿‡ã€‚ä¸ªäººæ„Ÿè§‰è¿™é‡Œçš„hashå…¶å®æœ‰ç‚¹åƒæ˜¯å­—å…¸ï¼Œredis_db.hset(redis_data_dict,
url,
0)ï¼Œè¿™é‡Œé¢redis_data_dictç±»ä¼¼å­—å…¸åï¼Œç„¶åurlæ˜¯keyï¼Œ0æ˜¯valueã€‚ä¸€ä¸ªredis_data_dicté‡Œé¢æœ‰å¾ˆå¤šå¯¹keyï¼Œvalueã€‚è¿™é‡Œç”±äºæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨urlä½œä¸ºkeyæ‰€ä»¥æ‰€æœ‰çš„valueéƒ½å†™äº†0ã€‚è¯¦ç»†çš„pythonæ“ä½œrediså¯ä»¥çœ‹æˆ‘çš„å¦ä¸€ç¯‡åšå®¢ã€‚</p>
<h1 id="ä½¿ç”¨ä¸‹è½½ä¸­é—´ä»¶">3.ä½¿ç”¨ä¸‹è½½ä¸­é—´ä»¶</h1>
<p>ä¸Šé¢ä»‹ç»äº†å¤§éƒ¨åˆ†å»é‡å·¥ä½œéƒ½åœ¨ç®¡é“ä¸­é—´ä»¶ä¸­å®ç°ï¼Œå¦‚æœæ¶‰åŠåˆ°å†…å®¹çš„å»é‡ä¹Ÿå°±æ˜¯md5é‚£ä¹ˆå°±å¿…é¡»åœ¨ç®¡é“ä¸­é—´ä»¶ä¸­å®ç°ï¼Œä½†æ˜¯å¦‚æœåªæ¶‰åŠåˆ°å¯¹urlçš„åˆ¤æ–­æˆ‘è§‰å¾—å¯ä»¥åœ¨ä¸‹è½½ä¸­é—´ä»¶ä¸­å®ç°ï¼Œè¿™æ ·å¯ä»¥çœå»æ›´å¤šçš„æ—¶é—´ï¼ˆç†è®ºä¸Šåº”è¯¥æ˜¯è¿™æ ·çš„å§ï¼Œæ¯•ç«Ÿä¸‹è½½ä¸­é—´ä»¶åœ¨requestçš„æ—¶å€™å°±èµ·ä½œç”¨ï¼Œç®¡é“åœ¨æœ€åé¢æ‰èµ·ä½œç”¨ï¼‰ã€‚</p>
<figure class="highlight python"><figcaption><span>middlewares.py</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> scrapy <span class="keyword">import</span> signals</span><br><span class="line"><span class="keyword">from</span> scrapy.exceptions <span class="keyword">import</span> IgnoreRequest</span><br><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"></span><br><span class="line">redis_db = redis.Redis(host=<span class="string">'127.0.0.1'</span>, port=<span class="number">6379</span>, db=<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IngoreRequestMiddleware</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_request</span><span class="params">(self, request, spider)</span>:</span></span><br><span class="line">        <span class="comment"># é€šè¿‡è¿™ä¸€è¡Œä»£ç å®ç°ä¸‹è½½ä¸­é—´ä»¶çš„è‡ªå®šä¹‰ï¼Œä¸å¯èƒ½æ¯ä¸€ä¸ªè¯·æ±‚éƒ½è°ƒç”¨è¯¥ä¸­é—´ä»¶ï¼Œæˆ‘ä»¬æ˜¯å¤šå±‚çˆ¬è™«ï¼Œä¼šå¯¼è‡´ç¬¬ä¸€å±‚å°±è¢«æŠ›å¼ƒï¼Œåˆ°ä¸äº†è¯¦æƒ…é¡µ</span></span><br><span class="line">        <span class="keyword">if</span> request.meta.get(<span class="string">'middleware'</span>) == <span class="string">'IngoreRequestMiddleware'</span>:</span><br><span class="line">            <span class="keyword">if</span> redis_db.hexists(<span class="string">'urls'</span>, request.url):</span><br><span class="line">                <span class="comment"># è°ƒç”¨å¼‚å¸¸æŠ›å¼ƒrequest</span></span><br><span class="line">                <span class="keyword">raise</span> IgnoreRequest(<span class="string">"IgnoreRequest : %s"</span> % request.url)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                redis_db.hset(<span class="string">'urls'</span>, request.url, <span class="number">0</span>)</span><br><span class="line">                <span class="comment"># è¿”å›Noneè¿›è¡Œæ¥ä¸‹æ¥çš„æ“ä½œ</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">None</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„è¦å°†æ–°å†™çš„ä¸‹è½½ä¸­é—´ä»¶åœ¨settingä¸­æ³¨å†Œï¼š</p>
<figure class="highlight diff"><figcaption><span>settings.py</span></figcaption><table><tr><td class="code"><pre><span class="line">DOWNLOADER_MIDDLEWARES = &#123;</span><br><span class="line">#    'shaoerkepu.middlewares.ShaoerkepuDownloaderMiddleware': 543,</span><br><span class="line"><span class="addition">+   'shaoerkepu.middlewares.IngoreRequestMiddleware': 543,</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>çˆ¬è™«</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>çˆ¬è™«</tag>
        <tag>redis</tag>
        <tag>scrapy</tag>
        <tag>å¢é‡çˆ¬å–</tag>
      </tags>
  </entry>
  <entry>
    <title>å°†flaskéƒ¨ç½²åˆ°UbuntuæœåŠ¡å™¨ä¸Š</title>
    <url>/%E5%B0%86flask%E9%83%A8%E7%BD%B2%E5%88%B0Ubuntu%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A/</url>
    <content><![CDATA[<p>æˆ‘ä»¬åšçš„é¡¹ç›®æœ€ç»ˆéƒ½æ˜¯è¦è·‘åœ¨æœåŠ¡å™¨ä¸Šçš„ï¼Œæˆ‘ä»¬ä¸å¯èƒ½åœ¨æœåŠ¡å™¨ä¸Šä¸€ç›´è·‘ç€æˆ‘ä»¬çš„Flaskç¨‹åºï¼Œè€Œä¸”ç¨‹åºä¹Ÿå¯èƒ½å› ä¸ºæŸäº›é”™è¯¯è€ŒæŒ‚æ‰ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯å®ƒçš„å¯ç”¨æ€§ï¼Œè¿™ç¯‡æ–‡ç« å°±æ˜¯æˆ‘æ ¹æ®åˆ«äººçš„<a
href="https://www.cnblogs.com/Ray-liang/p/4173923.html">Flaskéƒ¨ç½²æ•™ç¨‹</a>æ€»ç»“å‡ºæ¥çš„ä¸œè¥¿è¿˜æœ‰å‡ ä¸ªç‰¹åˆ«éœ€è¦æ³¨æ„çš„å°å‘ã€‚</p>
<a id="more"></a>
<p>æ€»ä½“éƒ¨ç½²æ–¹æ¡ˆæ˜¯ï¼š</p>
<ul>
<li><p>Web æœåŠ¡å™¨é‡‡ç”¨ uwsgi host Flask</p></li>
<li><p>ç”¨ Supervisor å¼•ç”¨ uwsgi ä½œå¸¸è§„å¯åŠ¨æœåŠ¡</p></li>
<li><p>åŸºäº Nginx ä½œåå‘ä»£ç†</p></li>
</ul>
<h1 id="å®‰è£…pythonå¹¶åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ">1.å®‰è£…pythonå¹¶åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</h1>
<p>å®‰è£…pythonçš„æ•™ç¨‹æœ‰å¾ˆå¤šä¹Ÿå¾ˆç®€å•è¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚</p>
<p>è¦è¯´ä¸€ä¸‹çš„æ˜¯pythonçš„è™šæ‹Ÿç¯å¢ƒåˆ›å»ºï¼Œå¤§å®¶å¯èƒ½éƒ½çŸ¥é“virtualenvï¼Œä½†æ˜¯å…¶å®åŸç”Ÿçš„virtualenvä½¿ç”¨èµ·æ¥ä¸æ˜¯é‚£ä¹ˆæ–¹ä¾¿ï¼Œæ‰€ä»¥æˆ‘æ¨èä½¿ç”¨virtualenvwrapperæ¥ç®¡ç†æˆ‘ä»¬çš„è™šæ‹Ÿç¯å¢ƒã€‚å…·ä½“æ“ä½œå¯ä»¥å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« <a href="/%E5%88%9B%E5%BB%BApython%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/" title="[åˆ›å»ºpythonè™šæ‹Ÿç¯å¢ƒ]">[åˆ›å»ºpythonè™šæ‹Ÿç¯å¢ƒ]</a>ã€‚</p>
<h1 id="å®‰è£…-uwsgi">2.å®‰è£… uWSGI</h1>
<p>å®‰è£…uwsgiè¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œè®°å¾—è¿›å…¥ç›¸åº”çš„è™šæ‹Ÿç¯å¢ƒ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(venv)my_flask root$ pip install uwsgi</span><br></pre></td></tr></table></figure>
<p>åº”è¯¥æ˜¯ç§’è£…ï¼Œå®‰è£…å®Œæˆ‘ä»¬å…ˆä¸ç®¡ä»–ï¼Œåé¢å†æ¥é…ç½®ä»–ã€‚</p>
<h1 id="å®‰è£…flask">3.å®‰è£…Flask</h1>
<p>æˆ‘æ˜¯ç”¨æ¸…å•æ–‡ä»¶ä¸€æ¬¡æ€§å®‰è£…Flaskå’Œä»–çš„ç›¸å…³ä¾èµ–çš„ï¼Œè¿™æ ·ä¼šæ›´å¿«ã€‚æˆ‘çš„å¼•ç”¨æ¸…å•æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight plain"><figcaption><span>requirements.txt</span></figcaption><table><tr><td class="code"><pre><span class="line">Flask&#x3D;&#x3D;0.10.1</span><br><span class="line">Flask-Login&#x3D;&#x3D;0.2.11</span><br><span class="line">Flask-Mail&#x3D;&#x3D;0.9.1</span><br><span class="line">Flask-Moment&#x3D;&#x3D;0.4.0</span><br><span class="line">Flask-PageDown&#x3D;&#x3D;0.1.5</span><br><span class="line">Flask-SQLAlchemy&#x3D;&#x3D;2.0</span><br><span class="line">Flask-Script&#x3D;&#x3D;2.0.5</span><br><span class="line">Flask-WTF&#x3D;&#x3D;0.10.2</span><br><span class="line">Flask-Cache&#x3D;&#x3D;0.13.1</span><br><span class="line">Flask-Restless&#x3D;&#x3D;0.15.0</span><br><span class="line">Flask-Uploads&#x3D;&#x3D;0.1.3</span><br><span class="line">Jinja2&#x3D;&#x3D;2.7.3</span><br><span class="line">Mako&#x3D;&#x3D;1.0.0</span><br><span class="line">Markdown&#x3D;&#x3D;2.5.1</span><br><span class="line">MarkupSafe&#x3D;&#x3D;0.23</span><br><span class="line">SQLAlchemy&#x3D;&#x3D;0.9.8</span><br><span class="line">WTForms&#x3D;&#x3D;2.0.1</span><br><span class="line">Werkzeug&#x3D;&#x3D;0.9.6</span><br><span class="line">html5lib&#x3D;&#x3D;1.0b3</span><br><span class="line">itsdangerous&#x3D;&#x3D;0.24</span><br><span class="line">six&#x3D;&#x3D;1.8.0</span><br><span class="line">awesome-slugify&#x3D;&#x3D;1.6</span><br></pre></td></tr></table></figure>
<p>å®‰è£…æ¸…å•æ–‡ä»¶ï¼ˆè®°å¾—åœ¨è™šæ‹Ÿç¯å¢ƒä¸­æ“ä½œï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(venv)my_flask root$ pip install -r requirements.txt</span><br></pre></td></tr></table></figure>
<h1 id="é¡¹ç›®æ–‡ä»¶">4.é¡¹ç›®æ–‡ä»¶</h1>
<p>æ¥ä¸‹æ¥å°±æ˜¯ä¸Šä¼ 
Flaskçš„é¡¹ç›®æ–‡ä»¶ï¼Œä¹‹å‰æˆ‘åœ¨å„å¤§çš„â€œè½¬è½½ä¸“ä¸šæˆ·â€é‡Œæ‰¾äº†å¥½å¤šçš„èµ„æ–™ï¼Œåœ¨è¿™ä¸€æ­¥ä¸­å¤§å¤šåªæ˜¯åœ¨ä¸Šé¢åŠ ä¸ªæ ‡å‡†çš„Flaskè¿è¡Œæ–‡ä»¶ï¼Œè™½è¯´åšä¸ªèŒƒä¾‹å¯ä»¥ä½†è¯´å®åœ¨çš„è¿™å¾ˆè®©äººè¿·æƒ‘ï¼Œä¸ºä»€ä¹ˆï¼Ÿå…ˆçœ‹çœ‹ä»£ç å§ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"> </span><br><span class="line">app = Flask(__name__)</span><br><span class="line"> </span><br><span class="line"><span class="meta">@app.route("/")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Hello World!"</span></span><br></pre></td></tr></table></figure>
<p>ç”Ÿäº§ç¯å¢ƒå†…ï¼Œè°ä¼šç”¨è¿™æ ·çš„ä»£ç å‘¢ï¼Œè¿™åªæ˜¯Flask
çš„æœ€ç®€å…¥é—¨èŒƒï¼Œæˆ‘çš„Flaské¡¹ç›®ä¸­ app
æ˜¯è¢«åšåœ¨åŒ…å†…çš„ï¼Œç›¸ä¿¡å¾ˆå¤šäººéƒ½æ˜¯è¿™æ ·åšçš„ï¼Œåœ¨åŒ…å¤–æˆ‘ä»¬é‡‡ç”¨ Flask Script
å†™ä¸€ä¸ª <code>manage.py</code> æ–‡ä»¶
ä½œä¸ºå¯åŠ¨æ–‡ä»¶ï¼Œè¿™æ›´æ–¹ä¾¿äºæ”¯æŒå„ç§çš„é¡¹ç›®</p>
<figure class="highlight python"><figcaption><span>manage.py</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask_script <span class="keyword">import</span> Manager,Server</span><br><span class="line"><span class="keyword">from</span> app <span class="keyword">import</span> app</span><br><span class="line"></span><br><span class="line">manager = Manager(app)</span><br><span class="line">manager.add_command(<span class="string">'runserver'</span>,Server(host=<span class="string">'0.0.0.0'</span>,port=<span class="number">5000</span>,use_debugger=<span class="literal">True</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    manager.run()</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶å¦‚æœæˆ‘ä»¬ä½¿ç”¨å‘½ä»¤ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">python manage.py runserver</span><br></pre></td></tr></table></figure>
<p>å·²ç»å¯ä»¥è¿è¡Œåœ¨æœ¬åœ°
<code>http://127.0.0.1:5000</code>ï¼ˆè®°å¾—å¼€å¯5000ç«¯å£ï¼‰</p>
<h1 id="é…ç½®uwsgi">5.é…ç½®uWSGI</h1>
<p>uWSGIæœ‰ä¸¤ç§å¯åŠ¨æ–¹å¼ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬é€‰äº†é€šè¿‡é…ç½®æ–‡ä»¶å¯åŠ¨çš„æ–¹æ³•</p>
<p>åœ¨é¡¹ç›®ç›®å½•ä¸­æ–°å»º<code>config.ini</code>ï¼Œå†™å…¥å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight python"><figcaption><span>config.ini</span></figcaption><table><tr><td class="code"><pre><span class="line">[uwsgi]</span><br><span class="line"></span><br><span class="line"><span class="comment"># uwsgi å¯åŠ¨æ—¶æ‰€ä½¿ç”¨çš„åœ°å€ä¸ç«¯å£</span></span><br><span class="line"><span class="comment">#http=0.0.0.0:9102</span></span><br><span class="line">socket=<span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">9102</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å‘ç½‘ç«™ç›®å½•</span></span><br><span class="line">chdir = /var/www/flask</span><br><span class="line"></span><br><span class="line">home = /root/.virtualenvs/py3_flask</span><br><span class="line"></span><br><span class="line"><span class="comment"># python å¯åŠ¨ç¨‹åºæ–‡ä»¶</span></span><br><span class="line">wsgi-file = manage.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># python ç¨‹åºå†…ç”¨ä»¥å¯åŠ¨çš„ application å˜é‡å</span></span><br><span class="line">callable = app</span><br><span class="line"></span><br><span class="line"><span class="comment">#daemonize=/www/wwwroot/www.chineseculture.xyz/flask_test/my_flask.log</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤„ç†å™¨æ•°</span></span><br><span class="line">processes = <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># çº¿ç¨‹æ•°</span></span><br><span class="line">threads = <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„9102å°±æ˜¯æˆ‘ä»¬å¤–ç½‘è®¿é—®æ—¶æœåŠ¡å™¨ç›‘å¬çš„åœ°å€ï¼Œè®°å¾—åœ¨æ§åˆ¶å°å¼€å¯9102ç«¯å£ã€‚</p>
<p>é…ç½®å¥½ç«¯å£ä¹‹åï¼Œè¾“å…¥å‘½ä»¤ç›´æ¥è¿è¡ŒuWSGIï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">uwsgi config.ini</span><br></pre></td></tr></table></figure>
<p>åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥é€šè¿‡<code>æœåŠ¡å™¨å…¬ç½‘ip:9102</code>è®¿é—®ä½ çš„Flaskåº”ç”¨</p>
<p><strong>æ³¨æ„ï¼ï¼è¿™é‡Œå‡ºç°äº†ç¬¬ä¸€ä¸ªå‘</strong></p>
<p>uwsgi
å¯åŠ¨æ—¶æ‰€ä½¿ç”¨çš„åœ°å€ä¸ç«¯å£å‰é¢å¯ä»¥å†™httpä¹Ÿå¯ä»¥å†™socketï¼Œå½“æˆ‘ä»¬è¿™é‡Œå†™httpçš„æ—¶å€™æˆ‘ä»¬æ˜¯å¯ä»¥é€šè¿‡<code>æœåŠ¡å™¨å…¬ç½‘ip:9102</code>è®¿é—®Flaskçš„ï¼Œä½†å¦‚æœæ˜¯socketåˆ™ä¸å¯ä»¥ã€‚ç›¸åº”çš„æˆ‘ä»¬åæœŸä½¿ç”¨nginxè¿›è¡Œç«¯å£è½¬å‘åˆ°uwsgiçš„æ—¶å€™æˆ‘ä»¬è¿™é‡Œå¿…é¡»æ˜¯socketï¼Œå¦‚æœæ˜¯httpå°†ä¸æˆåŠŸã€‚</p>
<p>OKï¼Œ æ­¤æ—¶å·²ç»æ­£å¸¸å¯åŠ¨ uwsgi å¹¶å°† Flask é¡¹ç›®è½½å…¥å…¶ä¸­äº†ï¼Œctrl+c
å…³é—­ç¨‹åºã€‚ä½†è¿™åªæ˜¯å‘½ä»¤å¯åŠ¨å½¢å¼ï¼Œè¦ä½¿å…¶éšåŒæœåŠ¡å™¨å¯åŠ¨å¹¶ä½œä¸ºåå°æœåŠ¡è¿è¡Œæ‰æ˜¯è¿è¥ç¯å¢ƒçš„å®é™…æ‰€éœ€è¦ã€‚å› æ­¤æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å®‰è£…å¦ä¸€ä¸ªå·¥å…·æ¥å¼•å¯¼
uwsgi ã€‚</p>
<h1 id="å®‰è£…-supervisor">6.å®‰è£… Supervisor</h1>
<p><a
href="http://supervisord.org/configuration.html">Supervisor</a>å¯ä»¥åŒæ—¶å¯åŠ¨å¤šä¸ªåº”ç”¨ï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œå½“æŸä¸ªåº”ç”¨Crashçš„æ—¶å€™ï¼Œä»–å¯ä»¥è‡ªåŠ¨é‡å¯è¯¥åº”ç”¨ï¼Œä¿è¯å¯ç”¨æ€§ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt-get install supervisor</span><br></pre></td></tr></table></figure>
<p>Supervisor çš„å…¨å±€çš„é…ç½®æ–‡ä»¶ä½ç½®åœ¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;etc&#x2F;supervisor&#x2F;supervisor.conf</span><br></pre></td></tr></table></figure>
<p>æ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬å¹¶ä¸éœ€è¦å»å¯¹å…¶ä½œå‡ºä»»ä½•çš„æ”¹åŠ¨ï¼Œåªéœ€è¦æ·»åŠ ä¸€ä¸ªæ–°çš„ *.conf
æ–‡ä»¶æ”¾åœ¨</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;etc&#x2F;supervisor&#x2F;conf.d&#x2F;</span><br></pre></td></tr></table></figure>
<p>ä¸‹å°±å¯ä»¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ–°å»ºç«‹ä¸€ä¸ªç”¨äºå¯åŠ¨ my_flask é¡¹ç›®çš„ uwsgi çš„
supervisor é…ç½® (å‘½åä¸ºï¼šflask_supervisor.conf)ï¼š</p>
<figure class="highlight python"><figcaption><span>flask_supervisor.conf</span></figcaption><table><tr><td class="code"><pre><span class="line">[program:my_flask]</span><br><span class="line"><span class="comment"># å¯åŠ¨å‘½ä»¤å…¥å£</span></span><br><span class="line">command=/root/.virtualenvs/py3_flask/bin/uwsgi /var/www/flask/config.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‘½ä»¤ç¨‹åºæ‰€åœ¨ç›®å½•</span></span><br><span class="line">directory=/var/www/flask</span><br><span class="line"><span class="comment">#è¿è¡Œå‘½ä»¤çš„ç”¨æˆ·å</span></span><br><span class="line">user=root</span><br><span class="line"></span><br><span class="line">stopasgroup = true</span><br><span class="line">killasgroup = true</span><br><span class="line"></span><br><span class="line">autostart=true</span><br><span class="line">autorestart=true</span><br><span class="line"><span class="comment">#æ—¥å¿—åœ°å€</span></span><br><span class="line">stdout_logfile=/var/www/flask/uwsgi_supervisor.log</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„ï¼ï¼è¿™é‡Œæ˜¯ç¬¬äºŒä¸ªå‘</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">stopasgroup = true  <span class="comment"># ç”¨äºåœæ­¢è¿›ç¨‹ç»„ï¼Œå³åœæ­¢æ‰€æœ‰é€šè¿‡â€œuwsgi.iniâ€é…ç½®å¯åŠ¨çš„è¿›ç¨‹ã€‚</span></span><br><span class="line">killasgroup = true  <span class="comment"># ç”¨äºå…³é—­è¿›ç¨‹ç»„ï¼Œå³å…³é—­æ‰€æœ‰é€šè¿‡â€œuwsgi.iniâ€é…ç½®å¯åŠ¨çš„è¿›ç¨‹ã€‚</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸¤å¥è¯åœ¨å¾ˆå¤šæ•™ç¨‹é‡Œæ˜¯æ²¡æœ‰çš„ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸¤å±€ä»£ç ä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬ä½¿ç”¨<code>supervisorctl</code>å‘½ä»¤stopäº†<code>my_flask</code>ä¹‹åè¿™ä¸ªuwsgiè¿›ç¨‹å ç”¨çš„<code>9102ç«¯å£</code>ä¸ä¼šè¢«é‡Šæ”¾ä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬æ— æ³•å†start
<code>my_flask</code>ã€‚è¿™ä¸ªé—®é¢˜ä¸€å¼€å§‹å›°æ‰°äº†æˆ‘å¥½ä¹…ï¼Œæˆ‘ä¸€ç›´ä¸æ˜ç™½å“ªé‡Œå‡ºäº†é—®é¢˜ï¼Œæ¯æ¬¡restartéƒ½ä¸æˆåŠŸï¼Œå¸Œæœ›çœ‹åˆ°çš„æœ‰ç¼˜äººèƒ½æ³¨æ„ä¸€ä¸‹ã€‚</p>
<p><strong>å¯åŠ¨æœåŠ¡</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo service supervisor start</span><br></pre></td></tr></table></figure>
<p><strong>ç»ˆæ­¢æœåŠ¡</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo service supervisor stop</span><br></pre></td></tr></table></figure>
<h2 id="supervisorè¡¥å……">Supervisorè¡¥å……</h2>
<p>supervisorï¼šè¦å®‰è£…çš„è½¯ä»¶çš„åç§°ã€‚
supervisordï¼šè£…å¥½supervisorè½¯ä»¶åï¼Œsupervisordç”¨äºå¯åŠ¨supervisoræœåŠ¡ã€‚
supervisorctlï¼šç”¨äºç®¡ç†supervisoré…ç½®æ–‡ä»¶ä¸­programã€‚</p>
<p><strong>å¯åŠ¨supervisoræœåŠ¡ï¼š</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">supervisord -c /etc/supervisor/supervisord.conf</span><br></pre></td></tr></table></figure>
<p><strong>supervisorctl æ“ä½œ</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">supervisorctl status</span><br><span class="line"></span><br><span class="line">supervisorctl reload</span><br><span class="line"></span><br><span class="line">supervisorctl stop program_name</span><br><span class="line"></span><br><span class="line">supervisorctl start program_name</span><br><span class="line"></span><br><span class="line">supervisorctl restart program_name</span><br></pre></td></tr></table></figure>
<p># 7.å®‰è£…å¹¶é…ç½®nginx</p>
<p><a
href="http://nginx.com/">Nginx</a>æ˜¯è½»é‡çº§ã€æ€§èƒ½å¼ºã€å ç”¨èµ„æºå°‘ï¼Œèƒ½å¾ˆå¥½çš„å¤„ç†é«˜å¹¶å‘çš„åå‘ä»£ç†è½¯ä»¶ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt-get install nginx</span><br></pre></td></tr></table></figure>
<p>Ubuntu ä¸Šé…ç½® Nginx ä¹Ÿæ˜¯å¾ˆç®€å•ï¼Œä¸è¦å»æ”¹åŠ¨é»˜è®¤çš„ nginx.conf
åªéœ€è¦å°†</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;default</span><br></pre></td></tr></table></figure>
<p>æ–‡ä»¶æ›¿æ¢æ‰å°±å¯ä»¥äº†ã€‚</p>
<p>æ–°å»ºä¸€ä¸ª default æ–‡ä»¶:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen  <span class="number">80</span>;</span><br><span class="line">    server_name XXX.XXX.XXX; <span class="comment">#å…¬ç½‘åœ°å€</span></span><br><span class="line">    </span><br><span class="line">    location / &#123;</span><br><span class="line">        include uwsgi_params;<span class="comment">#è½¬å‘åˆ°é‚£ä¸ªåœ°å€ï¼Œè½¬å‘åˆ°uwgiçš„åœ°å€ï¼Œåœ¨é€šè¿‡uwsgiæ¥å¯åŠ¨æˆ‘ä»¬çš„é¡¹ç›®</span></span><br><span class="line">        uwsgi_pass <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">9102</span>;</span><br><span class="line">        uwsgi_connect_timeout <span class="number">60</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°†defaulté…ç½®æ–‡ä»¶æ›¿æ¢æ‰å°±å¤§åŠŸå‘Šæˆäº†ï¼
è¿˜æœ‰ï¼Œæ›´æ”¹é…ç½®è¿˜éœ€è¦è®°å¾—é‡å¯ä¸€ä¸‹nginx:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>Flask</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>Flask</tag>
        <tag>éƒ¨ç½²è‡³æœåŠ¡å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title>å¼ºåˆ¶å…³é—­ç«¯å£</title>
    <url>/%E5%BC%BA%E5%88%B6%E5%85%B3%E9%97%AD%E7%AB%AF%E5%8F%A3/</url>
    <content><![CDATA[<p>å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬ä¼šé‡åˆ°ç¨‹åºéæ­£å¸¸é€€å‡ºé‚£ä¹ˆå®ƒæ‰€å ç”¨çš„ç«¯å£å¾ˆæœ‰å¯èƒ½å°±æ²¡æœ‰è¢«æ­£å¸¸é‡Šæ”¾ï¼Œå¯¼è‡´æˆ‘ä»¬ä¸‹ä¸€æ¬¡å¯åŠ¨ä»–çš„æ—¶å€™æ— æ³•å¯åŠ¨ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦æ‰‹åŠ¨é‡Šæ”¾ç«¯å£ã€‚</p>
<p>å‚è€ƒï¼šhttps://blog.csdn.net/why444216978/article/details/84062977</p>
<a id="more"></a>
<p>1ã€å¼ºåˆ¶æ€æ­»è¯¥ç«¯å£è¿›ç¨‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo fuser -k -n tcp 80</span><br></pre></td></tr></table></figure>
<p>2ã€æ ¹æ®PIDå…³é—­æŸä¸ªè¢«å ç”¨çš„ç«¯å£</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">netstat -tunlp | grep 80</span><br><span class="line"></span><br><span class="line">lsof -i:80</span><br><span class="line"></span><br><span class="line">sudo kill -9 PID</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>æœåŠ¡å™¨é…ç½®</category>
      </categories>
      <tags>
        <tag>æœåŠ¡å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title>æœåŠ¡å™¨å®‰è£…jupyter</title>
    <url>/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%89%E8%A3%85jupyter/</url>
    <content><![CDATA[<p>å±å®ä¸æƒ³ç”¨xshellä¸Šçš„ipythonï¼Œå‘½ä»¤è¡Œä¹Ÿç¡®å®æ²¡æœ‰jupyteræ–¹ä¾¿ï¼Œæ¯•ç«Ÿjupyterè¿˜å¯ä»¥ä¿å­˜è¿è¡Œè¿‡ç¨‹ï¼Œè¿˜å¯ä»¥è¿›è¡Œæ‹“å±•ã€‚æ‰€ä»¥æˆ‘åœ¨æœåŠ¡å™¨ä¸Šæ­å»ºäº†ä¸€ä¸ªjupyter</p>
<a id="more"></a>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<p>https://blog.csdn.net/qq_42137895/article/details/104283459?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param</p>
<h2 id="å®‰è£…jupyteræœåŠ¡">1. å®‰è£…jupyteræœåŠ¡</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pip3.7 install jupyter</span><br></pre></td></tr></table></figure>
<h2 id="é…ç½®è¿œç¨‹è®¿é—®jupyter">2. é…ç½®è¿œç¨‹è®¿é—®jupyter</h2>
<p>å…ˆè¾“å…¥ipythonè¿›å…¥äº¤äº’æ¨¡å¼ ï¼Œè§å›¾è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼Œè®¾ç½®å¥½å¯†ç è¿‡å</p>
<p>ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª<strong>Verify password</strong>å¤åˆ¶ä¿å­˜ä¸‹æ¥</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201015101310.png"
alt="aHR0cHM6Ly9waWMuZG93bmsuY2MvaXRlbS81ZTQzZDQwZTJmYjM4YjhjM2NkNDMwOTcucG5n" />
<figcaption
aria-hidden="true">aHR0cHM6Ly9waWMuZG93bmsuY2MvaXRlbS81ZTQzZDQwZTJmYjM4YjhjM2NkNDMwOTcucG5n</figcaption>
</figure>
<h3 id="ç”Ÿæˆé…ç½®æ–‡ä»¶">2.1ç”Ÿæˆé…ç½®æ–‡ä»¶</h3>
<p>åœ¨è¾“å…¥ä»¥ä¸‹å†…å®¹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">jupyter notebook --generate-config</span><br></pre></td></tr></table></figure>
<p>å°±ä¼šè‡ªåŠ¨åœ¨æ ¹ç›®å½•ä¸‹ç”Ÿæˆæ–‡ä»¶ï¼ˆ~/.jupyter/jupyter_notebook_config.pyï¼‰ï¼Œå¦‚æœçœ‹ä¸åˆ°ï¼Œé€‰é¡¹ä¸­é€‰æ‹©æ˜¾ç¤ºéšè—æ–‡ä»¶</p>
<h3 id="ä¿®æ”¹é…ç½®æ–‡ä»¶">2.2ä¿®æ”¹é…ç½®æ–‡ä»¶</h3>
<p>å»ºè®®å…ˆæŠŠjupyter_notebook_config.pyæ–‡ä»¶ä¼ è¾“åˆ°æœ¬åœ°ä¿®æ”¹å®Œæˆå†ä¸Šä¼ </p>
<p>æ‰¾åˆ°ä»¥ä¸‹å­—ç¬¦ä¸²è¿›è¡Œä¿®æ”¹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">c.NotebookApp.ip = <span class="string">'*'</span> <span class="comment"># å¦‚æœè¿™é‡Œä¿®è¿‡è¿‡åå¯åŠ¨æœåŠ¡æŠ¥é”™ åˆ™ä¿®æ”¹ä¸ºc.NotebookApp.ip='0.0.0.0'</span></span><br><span class="line">c.NotebookApp.password = <span class="string">u'sha1****'</span> <span class="comment">#å°±ä¹‹å‰ä¿å­˜çš„éªŒè¯å¯†ç </span></span><br><span class="line">c.NotebookApp.open_browser = <span class="literal">False</span> <span class="comment"># è®¾ç½®æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">c.NotebookApp.port = <span class="number">9999</span>  <span class="comment"># è®¾ç½®ç«¯å£</span></span><br><span class="line">c.NotebookApp.allow_remote_access = <span class="literal">True</span></span><br><span class="line">c.ContentsManager.root_dir = <span class="string">'/var/www/jupyter_python'</span>	<span class="comment"># è®¾ç½®jupyteræ˜¾ç¤ºç›®å½•</span></span><br></pre></td></tr></table></figure>
<h3 id="å¯åŠ¨æœåŠ¡">3. å¯åŠ¨æœåŠ¡</h3>
<p>è¿™é‡Œæ¨èä¸¤ç§</p>
<ol type="1">
<li><p>å…¥é—¨ï¼š<code>jupyter notebook --allow-root</code></p>
<blockquote>
<p>ä½†è¿™ç§ä¼šä¸€ç›´å ç€çª—å£ï¼Œæ— æ³•æ‰§è¡Œå…¶ä»–å‘½ä»¤</p>
<p>Ctrl + C å³å¯ç»“æŸ</p>
</blockquote></li>
<li><p>è¿›é˜¶: <code>nohup jupyter notebook --allow-root &amp;</code></p>
<blockquote>
<p>nohupè¡¨ç¤ºno hang up, å°±æ˜¯ä¸æŒ‚èµ·, äºæ˜¯è¿™ä¸ªå‘½ä»¤æ‰§è¡Œåå³ä½¿ç»ˆç«¯é€€å‡º,
ä¹Ÿä¸ä¼šåœæ­¢è¿è¡Œ.</p>
<p>ä½†è¦æ‰‹åŠ¨ç»“æŸ</p>
<p>lsof -i : {ç«¯å£å·}</p>
<p>ç„¶å kill -9 {å¯¹åº”pid} #
9çš„æ„æ€æ˜¯å‘é€KILLä¿¡å·ï¼Œç«‹åˆ»ç»“æŸï¼Œå¯èƒ½ä¼šæœ‰æ•°æ®ä¸¢å¤±</p>
</blockquote></li>
</ol>
<p>å¯åŠ¨ä»¥ååœ¨æœ¬æœº è¾“å…¥<code>http://{æœåŠ¡å™¨ip}:9999</code>è¿›è¡Œè®¿é—®</p>
<h2 id="å®‰è£…å¢å¼ºåŠŸèƒ½è‡ªåŠ¨è¡¥å…¨ä¹‹ç±»">4. å®‰è£…å¢å¼ºåŠŸèƒ½ï¼ˆè‡ªåŠ¨è¡¥å…¨ä¹‹ç±»ï¼‰</h2>
<p>åœ¨ç»ˆç«¯ä¸­ä¾æ¬¡æ‰§è¡Œä»¥ä¸‹4è¡Œä»£ç </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install jupyter_contrib_nbextensions</span><br><span class="line">jupyter contrib nbextension install --user</span><br><span class="line">pip install jupyter_nbextensions_configurator</span><br><span class="line">jupyter nbextensions_configurator enable --user</span><br></pre></td></tr></table></figure>
<p><strong>æ‰§è¡Œå®Œæˆä»¥åï¼Œé‡å¯jupyterï¼Œå³å¯çœ‹åˆ°é™„åŠ é¡¹</strong></p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201015101630.png"
alt="aHR0cHM6Ly9waWMuZG93bmsuY2MvaXRlbS81ZTQzZDhiYTJmYjM4YjhjM2NkNGVlZjUucG5n" />
<figcaption
aria-hidden="true">aHR0cHM6Ly9waWMuZG93bmsuY2MvaXRlbS81ZTQzZDhiYTJmYjM4YjhjM2NkNGVlZjUucG5n</figcaption>
</figure>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>æœåŠ¡å™¨é…ç½®</category>
      </categories>
      <tags>
        <tag>æœåŠ¡å™¨</tag>
        <tag>jupyter</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±åº¦å­¦ä¹ ç¬”è®°(ä¸€)---åŸºç¡€</title>
    <url>/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(%E4%B8%80)---%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<p>å¾…å½•å–å·²ç»ä¸‹æ¥äº†ï¼Œåº”è¯¥æ²¡ä»€ä¹ˆæ„å¤–å°±å°˜åŸƒè½å®šäº†ï¼Œè¿™å‡ å¤©éƒ½æ²¡æ€ä¹ˆç¡å¥½ï¼Œä¸‹åˆå›°å¾—å¾ˆã€‚ä»Šå¤©ä¸‹åˆå’Œæ™šä¸Šå°±çœ‹çœ‹ä»€ä¹ˆæ˜¯æ·±åº¦å­¦ä¹ ï¼Œç¨å¾®äº†è§£ä¸€ä¸‹ï¼Œæ™šä¸Šè·‘ä¸ªæ­¥å›å»æ—©ç‚¹ç¡ã€‚</p>
<a id="more"></a>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<p>https://baike.baidu.com/item/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/3729729?fr=aladdin</p>
<p>https://www.zhihu.com/question/24097648</p>
<p>https://blog.csdn.net/testcs_dn/article/details/85009917</p>
<h2 id="ä»€ä¹ˆæ˜¯æ·±åº¦å­¦ä¹ ">ä»€ä¹ˆæ˜¯æ·±åº¦å­¦ä¹ </h2>
<p>äººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ è¿™å‡ ä¸ªåè¯éƒ½å¾ˆç«çƒ­ï¼Œä½†æ˜¯ä»–ä»¬åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€å‘¢ã€‚</p>
<p>æ ¹æ®æˆ‘çš„æŸ¥æ‰¾å‘ç°ï¼Œæœºå™¨å­¦ä¹ æ˜¯å®ç°äººå·¥æ™ºèƒ½çš„ä¸€ç§æ–¹å¼ï¼Œè€Œæ·±åº¦å­¦ä¹ åˆæ˜¯å®ç°æœºå™¨å­¦ä¹ çš„ä¸€ç§æ–¹å¼ï¼Œæ‰€ä»¥ä»–ä»¬åº”è¯¥æ˜¯ä¸€ç§åŒ…å«çš„å…³ç³»ã€‚ç±»ä¼¼äºä¸‹å›¾</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201012154552.png"
alt="20181218165055573" />
<figcaption aria-hidden="true">20181218165055573</figcaption>
</figure>
<h2 id="æœºå™¨å­¦ä¹ ç¥ç»ç½‘ç»œæ·±åº¦å­¦ä¹ ">æœºå™¨å­¦ä¹ ã€ç¥ç»ç½‘ç»œã€æ·±åº¦å­¦ä¹ </h2>
<h3 id="æœºå™¨å­¦ä¹ ">æœºå™¨å­¦ä¹ </h3>
<p>ç®€å•çš„è¯´æœºå™¨å­¦ä¹ å°±æ˜¯è®©æœºå™¨å»åˆ†ææ•°æ®æ‰¾è§„å¾‹ï¼Œå¹¶é€šè¿‡æ‰¾åˆ°çš„è§„å¾‹å¯¹æ–°çš„æ•°æ®è¿›è¡Œå¤„ç†ã€‚</p>
<p>æœºå™¨å­¦ä¹ ç†è®ºä¸»è¦æ˜¯è®¾è®¡å’Œåˆ†æä¸€äº›è®©è®¡ç®—æœºå¯ä»¥è‡ªåŠ¨â€œå­¦ä¹ â€çš„ç®—æ³•ã€‚<strong>æœºå™¨å­¦ä¹ ç®—æ³•æ˜¯ä¸€ç±»ä»æ•°æ®ä¸­è‡ªåŠ¨åˆ†æè·å¾—è§„å¾‹ï¼Œå¹¶åˆ©ç”¨è§„å¾‹å¯¹æœªçŸ¥æ•°æ®è¿›è¡Œé¢„æµ‹çš„ç®—æ³•ã€‚</strong>å› ä¸ºå­¦ä¹ ç®—æ³•ä¸­æ¶‰åŠäº†å¤§é‡çš„ç»Ÿè®¡å­¦ç†è®ºï¼Œæœºå™¨å­¦ä¹ ä¸æ¨æ–­ç»Ÿè®¡å­¦è”ç³»å°¤ä¸ºå¯†åˆ‡ï¼Œä¹Ÿè¢«ç§°ä¸ºç»Ÿè®¡å­¦ä¹ ç†è®ºã€‚ç®—æ³•è®¾è®¡æ–¹é¢ï¼Œæœºå™¨å­¦ä¹ ç†è®ºå…³æ³¨å¯ä»¥å®ç°çš„ï¼Œè¡Œä¹‹æœ‰æ•ˆçš„å­¦ä¹ ç®—æ³•ã€‚å¾ˆå¤šæ¨è®ºé—®é¢˜å±äºæ— ç¨‹åºå¯å¾ªéš¾åº¦ï¼Œæ‰€ä»¥éƒ¨åˆ†çš„æœºå™¨å­¦ä¹ ç ”ç©¶æ˜¯å¼€å‘å®¹æ˜“å¤„ç†çš„è¿‘ä¼¼ç®—æ³•ã€‚</p>
<h3 id="ç¥ç»ç½‘ç»œ">ç¥ç»ç½‘ç»œ</h3>
<p>ç¥ç»ç½‘ç»œç®€å•ç‚¹å°†å°±æ˜¯ç”±å¥½å¤šä¸ªç¥ç»å…ƒç»„æˆçš„ç³»ç»Ÿã€‚è¿™æ˜¯æ¨¡æ‹Ÿäººç±»çš„ç¥ç»ç½‘ç»œã€‚</p>
<p>ç¥ç»å…ƒæ˜¯ä¸€ä¸ªç®€å•çš„åˆ†ç±»å™¨ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€å¤§å †çŒ«ã€ç‹—ç…§ç‰‡ï¼ŒæŠŠæ¯ä¸€å¼ ç…§ç‰‡é€è¿›ä¸€ä¸ªæœºå™¨é‡Œï¼Œæœºå™¨éœ€è¦åˆ¤æ–­è¿™å¹…ç…§ç‰‡é‡Œçš„ä¸œè¥¿æ˜¯çŒ«è¿˜æ˜¯ç‹—ã€‚æˆ‘ä»¬æŠŠçŒ«ç‹—å›¾ç‰‡å¤„ç†ä¸€ä¸‹ï¼Œå·¦è¾¹æ˜¯ç‹—çš„ç‰¹å¾å‘é‡ï¼Œå³è¾¹æ˜¯çŒ«çš„ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201012160259.png"
alt="20181218165203514" />
<figcaption aria-hidden="true">20181218165203514</figcaption>
</figure>
<p>ç¥ç»å…ƒä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼šå®ƒåªèƒ½åˆ‡ä¸€åˆ€ï¼ä½ ç»™æˆ‘è¯´è¯´ä¸€åˆ€æ€ä¹ˆèƒ½æŠŠä¸‹é¢è¿™ä¸¤ç±»åˆ†å¼€å§ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201012160321.png"
alt="20181218165215861" />
<figcaption aria-hidden="true">20181218165215861</figcaption>
</figure>
<p>è§£å†³åŠæ³•æ˜¯å¤šå±‚ç¥ç»ç½‘ç»œï¼Œåº•å±‚ç¥ç»å…ƒçš„è¾“å‡ºæ˜¯é«˜å±‚ç¥ç»å…ƒçš„è¾“å…¥ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¸­é—´æ¨ªç€ç ä¸€åˆ€ï¼Œç«–ç€ç ä¸€åˆ€ï¼Œç„¶åæŠŠå·¦ä¸Šå’Œå³ä¸‹çš„éƒ¨åˆ†åˆåœ¨ä¸€èµ·ï¼Œä¸å³ä¸Šçš„å·¦ä¸‹éƒ¨åˆ†åˆ†å¼€ï¼›ä¹Ÿå¯ä»¥å›´ç€å·¦ä¸Šè§’çš„è¾¹æ²¿ç 10åˆ€æŠŠè¿™ä¸€éƒ¨åˆ†å…ˆæŒ–å‡ºæ¥ï¼Œç„¶åå’Œå³ä¸‹è§’åˆå¹¶ã€‚</p>
<p>æ¯ç ä¸€åˆ€ï¼Œå…¶å®å°±æ˜¯ä½¿ç”¨äº†ä¸€ä¸ªç¥ç»å…ƒï¼ŒæŠŠä¸åŒç ä¸‹çš„åŠå¹³é¢åšäº¤ã€å¹¶ç­‰è¿ç®—ï¼Œå°±æ˜¯æŠŠè¿™äº›ç¥ç»å…ƒçš„è¾“å‡ºå½“ä½œè¾“å…¥ï¼Œåé¢å†è¿æ¥ä¸€ä¸ªç¥ç»å…ƒã€‚è¿™ä¸ªä¾‹å­ä¸­ç‰¹å¾çš„å½¢çŠ¶ç§°ä¸ºå¼‚æˆ–ï¼Œè¿™ç§æƒ…å†µä¸€ä¸ªç¥ç»å…ƒæä¸å®šï¼Œä½†æ˜¯ä¸¤å±‚ç¥ç»å…ƒå°±èƒ½æ­£ç¡®å¯¹å…¶è¿›è¡Œåˆ†ç±»ã€‚</p>
<p>åªè¦ä½ èƒ½ç è¶³å¤Ÿå¤šåˆ€ï¼ŒæŠŠç»“æœæ‹¼åœ¨ä¸€èµ·ï¼Œä»€ä¹ˆå¥‡æ€ªå½¢çŠ¶çš„è¾¹ç•Œç¥ç»ç½‘ç»œéƒ½èƒ½å¤Ÿè¡¨ç¤ºï¼Œæ‰€ä»¥è¯´ç¥ç»ç½‘ç»œåœ¨ç†è®ºä¸Šå¯ä»¥è¡¨ç¤ºå¾ˆå¤æ‚çš„å‡½æ•°/ç©ºé—´åˆ†å¸ƒã€‚ä½†æ˜¯çœŸå®çš„ç¥ç»ç½‘ç»œæ˜¯å¦èƒ½æ‘†åŠ¨åˆ°æ­£ç¡®çš„ä½ç½®è¿˜è¦çœ‹ç½‘ç»œåˆå§‹å€¼è®¾ç½®ã€æ ·æœ¬å®¹é‡å’Œåˆ†å¸ƒã€‚</p>
<h3 id="æ·±åº¦å­¦ä¹ ">æ·±åº¦å­¦ä¹ </h3>
<p>é‚£ä»€ä¹ˆæ˜¯æ·±åº¦å­¦ä¹ å‘¢ï¼Ÿæ·±åº¦å­¦ä¹ ç®€å•ç‚¹è¯´å°±æ˜¯ä¸€ç§ä¸ºäº†è®©å±‚æ•°è¾ƒå¤šçš„å¤šå±‚ç¥ç»ç½‘ç»œå¯ä»¥è®­ç»ƒï¼Œèƒ½å¤Ÿè¿è¡Œèµ·æ¥è€Œæ¼”åŒ–å‡ºæ¥çš„ä¸€ç³»åˆ—çš„æ–°çš„ç»“æ„å’Œæ–°çš„æ–¹æ³•ã€‚</p>
<p><strong>æ·±åº¦å­¦ä¹ ï¼ˆDeep
Learningï¼‰</strong>æ˜¯æœºå™¨å­¦ä¹ ç ”ç©¶ä¸­çš„ä¸€ä¸ªæ–°çš„é¢†åŸŸï¼Œå…¶åŠ¨æœºåœ¨äºå»ºç«‹ã€æ¨¡æ‹Ÿäººè„‘è¿›è¡Œåˆ†æå­¦ä¹ çš„ç¥ç»ç½‘ç»œï¼Œ<strong>å®ƒæ¨¡ä»¿äººè„‘çš„æœºåˆ¶æ¥è§£é‡Šæ•°æ®</strong>ï¼Œä¾‹å¦‚å›¾åƒï¼Œå£°éŸ³å’Œæ–‡æœ¬ã€‚æ·±åº¦å­¦ä¹ æ˜¯æ— ç›‘ç£å­¦ä¹ çš„ä¸€ç§ã€‚</p>
<p>æ·±åº¦å­¦ä¹ çš„æ¦‚å¿µæºäºäººå·¥ç¥ç»ç½‘ç»œçš„ç ”ç©¶ã€‚å«å¤šéšå±‚çš„å¤šå±‚æ„ŸçŸ¥å™¨å°±æ˜¯ä¸€ç§æ·±åº¦å­¦ä¹ ç»“æ„ã€‚æ·±åº¦å­¦ä¹ é€šè¿‡ç»„åˆä½å±‚ç‰¹å¾å½¢æˆæ›´åŠ æŠ½è±¡çš„é«˜å±‚è¡¨ç¤ºå±æ€§ç±»åˆ«æˆ–ç‰¹å¾ï¼Œä»¥å‘ç°æ•°æ®çš„åˆ†å¸ƒå¼ç‰¹å¾è¡¨ç¤ºã€‚</p>
<p>å°±åƒä¸‹å›¾</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201012160356.png"
alt="20181218165227159" />
<figcaption aria-hidden="true">20181218165227159</figcaption>
</figure>
<p>æ™®é€šçš„ç¥ç»ç½‘ç»œå¯èƒ½åªæœ‰å‡ å±‚ï¼Œæ·±åº¦å­¦ä¹ å¯ä»¥è¾¾åˆ°åå‡ å±‚ã€‚æ·±åº¦å­¦ä¹ ä¸­çš„æ·±åº¦äºŒå­—ä¹Ÿä»£è¡¨äº†ç¥ç»ç½‘ç»œçš„å±‚æ•°ã€‚ç°åœ¨æµè¡Œçš„æ·±åº¦å­¦ä¹ ç½‘ç»œç»“æ„æœ‰"CNN(å·ç§¯ç¥ç»ç½‘ç»œ)ã€RNN(å¾ªç¯ç¥ç»ç½‘ç»œ)ã€DNN(æ·±åº¦ç¥ç»ç½‘ç»œ)çš„ç­‰ã€‚</p>
<p>æœºå™¨å­¦ä¹ æ˜¯äººå·¥æ™ºèƒ½çš„ä¸€ä¸ªå­é›†ï¼Œæ·±åº¦å­¦ä¹ åˆæ˜¯æœºå™¨å­¦ä¹ çš„ä¸€ä¸ªå­é›†ã€‚æœºå™¨å­¦ä¹ ä¸æ·±åº¦å­¦ä¹ éƒ½æ˜¯éœ€è¦å¤§é‡æ•°æ®æ”¯æ’‘çš„ï¼Œæ˜¯å¤§æ•°æ®æŠ€æœ¯ä¸Šçš„ä¸€ä¸ªåº”ç”¨ï¼ŒåŒæ—¶æ·±åº¦å­¦ä¹ è¿˜éœ€è¦æ›´é«˜çš„è¿ç®—èƒ½åŠ›æ”¯æ’‘ï¼Œå¦‚GPUã€‚</p>
<h2 id="æ·±åº¦å­¦ä¹ å…¸å‹æ¨¡å‹">æ·±åº¦å­¦ä¹ å…¸å‹æ¨¡å‹</h2>
<p>å…¸å‹çš„æ·±åº¦å­¦ä¹ æ¨¡å‹æœ‰å·ç§¯ç¥ç»ç½‘ç»œ( convolutional neural
network)ã€DBNå’Œå †æ ˆè‡ªç¼–ç ç½‘ç»œ(stacked auto-encoder
network)æ¨¡å‹ç­‰ï¼Œä¸‹é¢å¯¹è¿™äº›æ¨¡å‹è¿›è¡Œæè¿°ã€‚</p>
<h3 id="å·ç§¯ç¥ç»ç½‘ç»œæ¨¡å‹">å·ç§¯ç¥ç»ç½‘ç»œæ¨¡å‹</h3>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201012161738.jpg"
alt="bd3eb13533fa828b269a8a0ff31f4134960a5aa4" />
<figcaption
aria-hidden="true">bd3eb13533fa828b269a8a0ff31f4134960a5aa4</figcaption>
</figure>
<p>åœ¨æ— ç›‘ç£é¢„è®­ç»ƒå‡ºç°ä¹‹å‰ï¼Œè®­ç»ƒæ·±åº¦ç¥ç»ç½‘ç»œé€šå¸¸éå¸¸å›°éš¾ï¼Œè€Œå…¶ä¸­ä¸€ä¸ªç‰¹ä¾‹æ˜¯å·ç§¯ç¥ç»ç½‘ç»œã€‚å·ç§¯ç¥ç»ç½‘ç»œå—è§†è§‰ç³»ç»Ÿçš„ç»“æ„å¯å‘è€Œäº§ç”Ÿã€‚ç¬¬ä¸€ä¸ªå·ç§¯ç¥ç»ç½‘ç»œè®¡ç®—æ¨¡å‹æ˜¯åœ¨Fukushima(Dçš„ç¥ç»è®¤çŸ¥æœºä¸­æå‡ºçš„ï¼ŒåŸºäºç¥ç»å…ƒä¹‹é—´çš„å±€éƒ¨è¿æ¥å’Œåˆ†å±‚ç»„ç»‡å›¾åƒè½¬æ¢ï¼Œå°†æœ‰ç›¸åŒå‚æ•°çš„ç¥ç»å…ƒåº”ç”¨äºå‰ä¸€å±‚ç¥ç»ç½‘ç»œçš„ä¸åŒä½ç½®ï¼Œå¾—åˆ°ä¸€ç§å¹³ç§»ä¸å˜ç¥ç»ç½‘ç»œç»“æ„å½¢å¼ã€‚åæ¥ï¼ŒLe
Cunç­‰äººåœ¨è¯¥æ€æƒ³çš„åŸºç¡€ä¸Šï¼Œç”¨è¯¯å·®æ¢¯åº¦è®¾è®¡å¹¶è®­ç»ƒå·ç§¯ç¥ç»ç½‘ç»œï¼Œåœ¨ä¸€äº›æ¨¡å¼è¯†åˆ«ä»»åŠ¡ä¸Šå¾—åˆ°ä¼˜è¶Šçš„æ€§èƒ½ã€‚è‡³ä»Šï¼ŒåŸºäºå·ç§¯ç¥ç»ç½‘ç»œçš„æ¨¡å¼è¯†åˆ«ç³»ç»Ÿæ˜¯æœ€å¥½çš„å®ç°ç³»ç»Ÿä¹‹ä¸€ï¼Œå°¤å…¶åœ¨æ‰‹å†™ä½“å­—ç¬¦è¯†åˆ«ä»»åŠ¡ä¸Šè¡¨ç°å‡ºéå‡¡çš„æ€§èƒ½ã€‚</p>
<h3 id="æ·±åº¦ä¿¡ä»»ç½‘ç»œæ¨¡å‹">æ·±åº¦ä¿¡ä»»ç½‘ç»œæ¨¡å‹</h3>
<p>DBNå¯ä»¥è§£é‡Šä¸ºè´å¶æ–¯æ¦‚ç‡ç”Ÿæˆæ¨¡å‹ï¼Œç”±å¤šå±‚éšæœºéšå˜é‡ç»„æˆï¼Œä¸Šé¢çš„ä¸¤å±‚å…·æœ‰æ— å‘å¯¹ç§°è¿æ¥ï¼Œä¸‹é¢çš„å±‚å¾—åˆ°æ¥è‡ªä¸Šä¸€å±‚çš„è‡ªé¡¶å‘ä¸‹çš„æœ‰å‘è¿æ¥ï¼Œæœ€åº•å±‚å•å…ƒçš„çŠ¶æ€ä¸ºå¯è§è¾“å…¥æ•°æ®å‘é‡ã€‚DBNç”±è‹¥2Fç»“æ„å•å…ƒå †æ ˆç»„æˆï¼Œç»“æ„å•å…ƒé€šå¸¸ä¸ºRBMï¼ˆRestIlcted
Boltzmann
Machineï¼Œå—é™ç»å°”å…¹æ›¼æœºï¼‰ã€‚å †æ ˆä¸­æ¯ä¸ªRBMå•å…ƒçš„å¯è§†å±‚ç¥ç»å…ƒæ•°é‡ç­‰äºå‰ä¸€RBMå•å…ƒçš„éšå±‚ç¥ç»å…ƒæ•°é‡ã€‚æ ¹æ®æ·±åº¦å­¦ä¹ æœºåˆ¶ï¼Œé‡‡ç”¨è¾“å…¥æ ·ä¾‹è®­ç»ƒç¬¬ä¸€å±‚RBMå•å…ƒï¼Œå¹¶åˆ©ç”¨å…¶è¾“å‡ºè®­ç»ƒç¬¬äºŒå±‚RBMæ¨¡å‹ï¼Œå°†RBMæ¨¡å‹è¿›è¡Œå †æ ˆé€šè¿‡å¢åŠ å±‚æ¥æ”¹å–„æ¨¡å‹æ€§èƒ½ã€‚åœ¨æ— ç›‘ç£é¢„è®­ç»ƒè¿‡ç¨‹ä¸­ï¼ŒDBNç¼–ç è¾“å…¥åˆ°é¡¶å±‚RBMåï¼Œè§£ç é¡¶å±‚çš„çŠ¶æ€åˆ°æœ€åº•å±‚çš„å•å…ƒï¼Œå®ç°è¾“å…¥çš„é‡æ„ã€‚RBMä½œä¸ºDBNçš„ç»“æ„å•å…ƒï¼Œä¸æ¯ä¸€å±‚DBNå…±äº«å‚æ•°ã€‚</p>
<h3 id="å †æ ˆè‡ªç¼–ç ç½‘ç»œæ¨¡å‹">å †æ ˆè‡ªç¼–ç ç½‘ç»œæ¨¡å‹</h3>
<p>å †æ ˆè‡ªç¼–ç ç½‘ç»œçš„ç»“æ„ä¸DBNç±»ä¼¼ï¼Œç”±è‹¥å¹²ç»“æ„å•å…ƒå †æ ˆç»„æˆï¼Œä¸åŒä¹‹å¤„åœ¨äºå…¶ç»“æ„å•å…ƒä¸ºè‡ªç¼–ç æ¨¡å‹(
auto-en-coder)è€Œä¸æ˜¯RBMã€‚è‡ªç¼–ç æ¨¡å‹æ˜¯ä¸€ä¸ªä¸¤å±‚çš„ç¥ç»ç½‘ç»œï¼Œç¬¬ä¸€å±‚ç§°ä¸ºç¼–ç å±‚ï¼Œç¬¬äºŒå±‚ç§°ä¸ºè§£ç å±‚ã€‚</p>
<h2 id="cuadcompute-unified-device-architecture">CUADï¼ˆCompute Unified
Device Architectureï¼‰</h2>
<p>CUDAï¼ˆCompute Unified Device Architectureï¼‰ï¼Œæ˜¯æ˜¾å¡å‚å•†<a
href="https://baike.baidu.com/item/NVIDIA">NVIDIA</a>æ¨å‡ºçš„è¿ç®—å¹³å°ã€‚
CUDAâ„¢æ˜¯ä¸€ç§ç”±NVIDIAæ¨å‡ºçš„é€šç”¨<a
href="https://baike.baidu.com/item/å¹¶è¡Œè®¡ç®—/113443">å¹¶è¡Œè®¡ç®—</a>æ¶æ„ï¼Œè¯¥æ¶æ„ä½¿<a
href="https://baike.baidu.com/item/GPU">GPU</a>èƒ½å¤Ÿè§£å†³å¤æ‚çš„è®¡ç®—é—®é¢˜ã€‚
å®ƒåŒ…å«äº†CUDA<a
href="https://baike.baidu.com/item/æŒ‡ä»¤é›†æ¶æ„">æŒ‡ä»¤é›†æ¶æ„</a>ï¼ˆ<a
href="https://baike.baidu.com/item/ISA">ISA</a>ï¼‰ä»¥åŠGPUå†…éƒ¨çš„å¹¶è¡Œè®¡ç®—å¼•æ“ã€‚
å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨<a
href="https://baike.baidu.com/item/Cè¯­è¨€">Cè¯­è¨€</a>æ¥ä¸ºCUDAâ„¢æ¶æ„ç¼–å†™ç¨‹åºï¼ŒCè¯­è¨€æ˜¯åº”ç”¨æœ€å¹¿æ³›çš„ä¸€ç§é«˜çº§ç¼–ç¨‹è¯­è¨€ã€‚æ‰€ç¼–å†™å‡ºçš„ç¨‹åºå¯ä»¥åœ¨æ”¯æŒCUDAâ„¢çš„å¤„ç†å™¨ä¸Šä»¥è¶…é«˜æ€§èƒ½è¿è¡Œã€‚CUDA3.0å·²ç»å¼€å§‹æ”¯æŒ<a
href="https://baike.baidu.com/item/C%2B%2B">C++</a>å’Œ<a
href="https://baike.baidu.com/item/FORTRAN">FORTRAN</a>ã€‚</p>
<p>åœ¨ä¸Šæ–‡æåˆ°äº†ï¼Œæ·±åº¦å­¦ä¹ éœ€è¦å¤šçš„æ•°æ®æ¥è¿›è¡Œå­¦ä¹ ï¼Œé‚£ä¹ˆè®¡ç®—èƒ½åŠ›å°±æ˜¯å¾ˆé‡è¦çš„ä¸€ç¯ã€‚</p>
<p>éšç€GPUçš„ä¸æ–­å‘å±•ï¼Œå®ƒåœ¨è®¡ç®—èƒ½åŠ›ä¸Šå·²ç»è¶…è¿‡äº†é€šç”¨CPUï¼Œä»…ä»…ç”¨æ¥åšæ˜¾å¡æœ‰ç‚¹æµªè´¹äº†ã€‚äºæ˜¯å¼€å‘äººå‘˜å°±å°†ç›®å…‰ç„å‘äº†GPUã€‚</p>
<p>åƒè®¸å¤šçš„æŠ€æœ¯æ–¹å‘ä¸€æ ·ï¼Œæ·±åº¦å­¦ä¹ ä¹Ÿæ‹¥æœ‰ç€è‡ªå·±çš„æ¡†æ¶ï¼Œå®ƒå¯ä»¥è®©å¼€å‘äººå‘˜ä¸éœ€è¦æ‰‹å†™CUDAå°±èƒ½è·‘GPUã€‚</p>
<h2 id="æ·±åº¦å­¦ä¹ æ¡†æ¶">æ·±åº¦å­¦ä¹ æ¡†æ¶</h2>
<p><strong>ä¸ºä½•è¦ç”¨æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Ÿ</strong></p>
<ul>
<li>ä¸éœ€è¦æ‰‹å†™CUDAå°±èƒ½è·‘GPU</li>
<li>è‡ªåŠ¨å¸®ä½ å¤æ‚å¤åˆå‡½æ•°çš„æ¢¯åº¦</li>
</ul>
<p>æ·±åº¦å­¦ä¹ ä»æ­¤å˜å¾—å‚»ç“œï¼</p>
<h3 id="æ¡†æ¶æ€»è§ˆ">æ¡†æ¶æ€»è§ˆ</h3>
<p>ç°å¦‚ä»Šå¼€æºç”Ÿæ€éå¸¸å®Œå–„ï¼Œæ·±åº¦å­¦ä¹ ç›¸å…³çš„å¼€æºæ¡†æ¶ä¼—å¤šï¼Œå…‰æ˜¯ä¸ºäººç†ŸçŸ¥çš„å°±æœ‰caffeï¼Œtensorflowï¼Œpytorch/caffe2ï¼Œkerasï¼Œmxnetï¼Œpaddldpaddleï¼Œtheanoï¼Œcntkï¼Œdeeplearning4jï¼Œmatconvnetç­‰ã€‚</p>
<p>å¦‚ä½•é€‰æ‹©æœ€é€‚åˆä½ çš„å¼€æºæ¡†æ¶æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚æœ‰ä¸‰AIåœ¨å‰æ®µæ—¶é—´é‡Œï¼Œç»™å¤§å®¶æ•´ç†äº†<strong>12ä¸ªæ·±åº¦å­¦ä¹ å¼€æºæ¡†æ¶å¿«é€Ÿå…¥é—¨çš„æ•™ç¨‹å’Œä»£ç </strong>ï¼Œä¾›åˆå­¦è€…è¿›è¡ŒæŒ‘é€‰ï¼Œä¸€ä¸ªåˆæ ¼çš„æ·±åº¦å­¦ä¹ ç®—æ³•å·¥ç¨‹å¸ˆæ€ä¹ˆç€å¾—ç†Ÿæ‚‰å…¶ä¸­çš„3ä¸ªä»¥ä¸Šå§ã€‚</p>
<p>ä¸‹é¢æ˜¯å„å¤§å¼€æºæ¡†æ¶çš„ä¸€ä¸ªæ€»è§ˆã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201012165318.jpg"
alt="v2-d2af0dc0108888b3eea1140d20656883_720w" />
<figcaption
aria-hidden="true">v2-d2af0dc0108888b3eea1140d20656883_720w</figcaption>
</figure>
<p><strong>(1)
ä¸ç®¡æ€ä¹ˆè¯´ï¼Œtensorflow/pytorchä½ éƒ½å¿…é¡»ä¼šï¼Œè¿™æ˜¯ç›®å‰å¼€å‘è€…æœ€å–œæ¬¢ï¼Œå¼€æºé¡¹ç›®æœ€ä¸°å¯Œçš„ä¸¤ä¸ªæ¡†æ¶ã€‚</strong></p>
<p><strong>(2)
å¦‚æœä½ è¦è¿›è¡Œç§»åŠ¨ç«¯ç®—æ³•çš„å¼€å‘ï¼Œé‚£ä¹ˆCaffeæ˜¯ä¸èƒ½ä¸ä¼šçš„ã€‚</strong></p>
<p><strong>(3)
å¦‚æœä½ éå¸¸ç†Ÿæ‚‰Matlabï¼Œmatconvnetä½ ä¸åº”è¯¥é”™è¿‡ã€‚</strong></p>
<p><strong>(4)
å¦‚æœä½ è¿½æ±‚é«˜æ•ˆè½»é‡ï¼Œé‚£ä¹ˆdarknetå’Œmxnetä½ ä¸èƒ½ä¸ç†Ÿæ‚‰ã€‚</strong></p>
<p><strong>(5)
å¦‚æœä½ å¾ˆæ‡’ï¼Œæƒ³å†™æœ€å°‘çš„ä»£ç å®Œæˆä»»åŠ¡ï¼Œé‚£ä¹ˆç”¨keraså§ã€‚</strong></p>
<p><strong>(6)
å¦‚æœä½ æ˜¯javaç¨‹åºå‘˜ï¼Œé‚£ä¹ˆæŒæ¡deeplearning4jæ²¡é”™çš„ã€‚</strong></p>
<p><strong>å…¶ä»–çš„æ¡†æ¶ï¼Œä¹Ÿè‡ªæœ‰å®ƒçš„ç‰¹ç‚¹ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å¤šå»ç”¨ç”¨ã€‚</strong></p>
<h2 id="ç›‘ç£å­¦ä¹ ä¸éç›‘ç£å­¦ä¹ ">ç›‘ç£å­¦ä¹ ä¸éç›‘ç£å­¦ä¹ </h2>
<h3 id="ç›‘ç£å­¦ä¹ supervised-learning">ç›‘ç£å­¦ä¹ ï¼ˆsupervised
learningï¼‰</h3>
<p>ä»ç»™å®šçš„è®­ç»ƒæ•°æ®é›†ä¸­å­¦ä¹ å‡ºä¸€ä¸ªå‡½æ•°ï¼ˆæ¨¡å‹å‚æ•°ï¼‰ï¼Œå½“æ–°çš„æ•°æ®åˆ°æ¥æ—¶ï¼Œå¯ä»¥æ ¹æ®è¿™ä¸ªå‡½æ•°é¢„æµ‹ç»“æœã€‚ç›‘ç£å­¦ä¹ çš„è®­ç»ƒé›†è¦æ±‚åŒ…æ‹¬è¾“å…¥è¾“å‡ºï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ç‰¹å¾å’Œç›®æ ‡ã€‚è®­ç»ƒé›†ä¸­çš„ç›®æ ‡æ˜¯ç”±äººæ ‡æ³¨çš„ã€‚ç›‘ç£å­¦ä¹ å°±æ˜¯æœ€å¸¸è§çš„åˆ†ç±»ï¼ˆæ³¨æ„å’Œèšç±»åŒºåˆ†ï¼‰é—®é¢˜ï¼Œé€šè¿‡å·²æœ‰çš„è®­ç»ƒæ ·æœ¬ï¼ˆå³å·²çŸ¥æ•°æ®åŠå…¶å¯¹åº”çš„è¾“å‡ºï¼‰å»è®­ç»ƒå¾—åˆ°ä¸€ä¸ªæœ€ä¼˜æ¨¡å‹ï¼ˆè¿™ä¸ªæ¨¡å‹å±äºæŸä¸ªå‡½æ•°çš„é›†åˆï¼Œæœ€ä¼˜è¡¨ç¤ºæŸä¸ªè¯„ä»·å‡†åˆ™ä¸‹æ˜¯æœ€ä½³çš„ï¼‰ï¼Œå†åˆ©ç”¨è¿™ä¸ªæ¨¡å‹å°†æ‰€æœ‰çš„è¾“å…¥æ˜ å°„ä¸ºç›¸åº”çš„è¾“å‡ºï¼Œå¯¹è¾“å‡ºè¿›è¡Œç®€å•çš„åˆ¤æ–­ä»è€Œå®ç°åˆ†ç±»çš„ç›®çš„ã€‚ä¹Ÿå°±å…·æœ‰äº†å¯¹æœªçŸ¥æ•°æ®åˆ†ç±»çš„èƒ½åŠ›ã€‚ç›‘ç£å­¦ä¹ çš„ç›®æ ‡å¾€å¾€æ˜¯è®©è®¡ç®—æœºå»å­¦ä¹ æˆ‘ä»¬å·²ç»åˆ›å»ºå¥½çš„åˆ†ç±»ç³»ç»Ÿï¼ˆæ¨¡å‹ï¼‰ã€‚</p>
<p>ç›‘ç£å­¦ä¹ æ˜¯è®­ç»ƒç¥ç»ç½‘ç»œå’Œå†³ç­–æ ‘çš„å¸¸è§æŠ€æœ¯ã€‚è¿™ä¸¤ç§æŠ€æœ¯é«˜åº¦ä¾èµ–äº‹å…ˆç¡®å®šçš„åˆ†ç±»ç³»ç»Ÿç»™å‡ºçš„ä¿¡æ¯ï¼Œå¯¹äºç¥ç»ç½‘ç»œï¼Œåˆ†ç±»ç³»ç»Ÿåˆ©ç”¨ä¿¡æ¯åˆ¤æ–­ç½‘ç»œçš„é”™è¯¯ï¼Œç„¶åä¸æ–­è°ƒæ•´ç½‘ç»œå‚æ•°ã€‚å¯¹äºå†³ç­–æ ‘ï¼Œåˆ†ç±»ç³»ç»Ÿç”¨å®ƒæ¥åˆ¤æ–­å“ªäº›å±æ€§æä¾›äº†æœ€å¤šçš„ä¿¡æ¯ã€‚</p>
<p>å¸¸è§çš„æœ‰ç›‘ç£å­¦ä¹ ç®—æ³•ï¼šå›å½’åˆ†æå’Œç»Ÿè®¡åˆ†ç±»ã€‚æœ€å…¸å‹çš„ç®—æ³•æ˜¯KNNå’ŒSVMã€‚</p>
<p>æœ‰ç›‘ç£å­¦ä¹ æœ€å¸¸è§çš„å°±æ˜¯ï¼šregression&amp;classification</p>
<p>Regressionï¼šYæ˜¯å®æ•°vectorã€‚å›å½’é—®é¢˜ï¼Œå°±æ˜¯æ‹Ÿåˆ(x,y)çš„ä¸€æ¡æ›²çº¿ï¼Œä½¿å¾—ä»·å€¼å‡½æ•°(costfunction)
Læœ€å°</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201013165823.gif"
alt="20150919203859752" />
<figcaption aria-hidden="true">20150919203859752</figcaption>
</figure>
<p>Classificationï¼šYæ˜¯ä¸€ä¸ªæœ‰ç©·æ•°(finitenumber)ï¼Œå¯ä»¥çœ‹åšç±»æ ‡å·ï¼Œåˆ†ç±»é—®é¢˜é¦–å…ˆè¦ç»™å®šæœ‰lableçš„æ•°æ®è®­ç»ƒåˆ†ç±»å™¨ï¼Œæ•…å±äºæœ‰ç›‘ç£å­¦ä¹ è¿‡ç¨‹ã€‚åˆ†ç±»è¿‡ç¨‹ä¸­cost
function l(X,Y)æ˜¯Xå±äºç±»Yçš„æ¦‚ç‡çš„è´Ÿå¯¹æ•°ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201013165841.gif"
alt="20150919203917364" />
<figcaption aria-hidden="true">20150919203917364</figcaption>
</figure>
<p>å…¶ä¸­fi(X)=P(Y=i|X)ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201013165858.gif"
alt="20150919203935408" />
<figcaption aria-hidden="true">20150919203935408</figcaption>
</figure>
<h3 id="æ— ç›‘ç£å­¦ä¹ unsupervised-learning">æ— ç›‘ç£å­¦ä¹ ï¼ˆunsupervised
learningï¼‰</h3>
<p>è¾“å…¥æ•°æ®æ²¡æœ‰è¢«æ ‡è®°ï¼Œä¹Ÿæ²¡æœ‰ç¡®å®šçš„ç»“æœã€‚æ ·æœ¬æ•°æ®ç±»åˆ«æœªçŸ¥ï¼Œéœ€è¦æ ¹æ®æ ·æœ¬é—´çš„ç›¸ä¼¼æ€§å¯¹æ ·æœ¬é›†è¿›è¡Œåˆ†ç±»ï¼ˆèšç±»ï¼Œclusteringï¼‰è¯•å›¾ä½¿ç±»å†…å·®è·æœ€å°åŒ–ï¼Œç±»é—´å·®è·æœ€å¤§åŒ–ã€‚é€šä¿—ç‚¹å°†å°±æ˜¯å®é™…åº”ç”¨ä¸­ï¼Œä¸å°‘æƒ…å†µä¸‹æ— æ³•é¢„å…ˆçŸ¥é“æ ·æœ¬çš„æ ‡ç­¾ï¼Œä¹Ÿå°±æ˜¯è¯´æ²¡æœ‰è®­ç»ƒæ ·æœ¬å¯¹åº”çš„ç±»åˆ«ï¼Œå› è€Œåªèƒ½ä»åŸå…ˆæ²¡æœ‰æ ·æœ¬æ ‡ç­¾çš„æ ·æœ¬é›†å¼€å§‹å­¦ä¹ åˆ†ç±»å™¨è®¾è®¡ã€‚</p>
<p>éç›‘ç£å­¦ä¹ ç›®æ ‡ä¸æ˜¯å‘Šè¯‰è®¡ç®—æœºæ€ä¹ˆåšï¼Œè€Œæ˜¯è®©å®ƒï¼ˆè®¡ç®—æœºï¼‰è‡ªå·±å»å­¦ä¹ æ€æ ·åšäº‹æƒ…ã€‚éç›‘ç£å­¦ä¹ æœ‰ä¸¤ç§æ€è·¯ã€‚ç¬¬ä¸€ç§æ€è·¯æ˜¯åœ¨æŒ‡å¯¼Agentæ—¶ä¸ä¸ºå…¶æŒ‡å®šæ˜ç¡®åˆ†ç±»ï¼Œè€Œæ˜¯åœ¨æˆåŠŸæ—¶ï¼Œé‡‡ç”¨æŸç§å½¢å¼çš„æ¿€åŠ±åˆ¶åº¦ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç±»è®­ç»ƒé€šå¸¸ä¼šç½®äºå†³ç­–é—®é¢˜çš„æ¡†æ¶é‡Œï¼Œå› ä¸ºå®ƒçš„ç›®æ ‡ä¸æ˜¯ä¸ºäº†äº§ç”Ÿä¸€ä¸ªåˆ†ç±»ç³»ç»Ÿï¼Œè€Œæ˜¯åšå‡ºæœ€å¤§å›æŠ¥çš„å†³å®šï¼Œè¿™ç§æ€è·¯å¾ˆå¥½çš„æ¦‚æ‹¬äº†ç°å®ä¸–ç•Œï¼Œagentå¯ä»¥å¯¹æ­£ç¡®çš„è¡Œä¸ºåšå‡ºæ¿€åŠ±ï¼Œè€Œå¯¹é”™è¯¯è¡Œä¸ºåšå‡ºæƒ©ç½šã€‚</p>
<p>æ— ç›‘ç£å­¦ä¹ çš„æ–¹æ³•åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p>
<ol type="1">
<li><p>ä¸€ç±»ä¸ºåŸºäºæ¦‚ç‡å¯†åº¦å‡½æ•°ä¼°è®¡çš„ç›´æ¥æ–¹æ³•ï¼šæŒ‡è®¾æ³•æ‰¾åˆ°å„ç±»åˆ«åœ¨ç‰¹å¾ç©ºé—´çš„åˆ†å¸ƒå‚æ•°ï¼Œå†è¿›è¡Œåˆ†ç±»ã€‚</p></li>
<li><p>å¦ä¸€ç±»æ˜¯ç§°ä¸ºåŸºäºæ ·æœ¬é—´ç›¸ä¼¼æ€§åº¦é‡çš„ç®€æ´èšç±»æ–¹æ³•ï¼šå…¶åŸç†æ˜¯è®¾æ³•å®šå‡ºä¸åŒç±»åˆ«çš„æ ¸å¿ƒæˆ–åˆå§‹å†…æ ¸ï¼Œç„¶åä¾æ®æ ·æœ¬ä¸æ ¸å¿ƒä¹‹é—´çš„ç›¸ä¼¼æ€§åº¦é‡å°†æ ·æœ¬èšé›†æˆä¸åŒçš„ç±»åˆ«ã€‚</p></li>
</ol>
<p>åˆ©ç”¨èšç±»ç»“æœï¼Œå¯ä»¥æå–æ•°æ®é›†ä¸­éšè—ä¿¡æ¯ï¼Œå¯¹æœªæ¥æ•°æ®è¿›è¡Œåˆ†ç±»å’Œé¢„æµ‹ã€‚åº”ç”¨äºæ•°æ®æŒ–æ˜ï¼Œæ¨¡å¼è¯†åˆ«ï¼Œå›¾åƒå¤„ç†ç­‰ã€‚</p>
<p>PCAå’Œå¾ˆå¤šdeep learningç®—æ³•éƒ½å±äºæ— ç›‘ç£å­¦ä¹ ã€‚</p>
<h3 id="ä¸¤è€…çš„ä¸åŒç‚¹">ä¸¤è€…çš„ä¸åŒç‚¹</h3>
<ol type="1">
<li><p>æœ‰ç›‘ç£å­¦ä¹ æ–¹æ³•å¿…é¡»è¦æœ‰è®­ç»ƒé›†ä¸æµ‹è¯•æ ·æœ¬ã€‚åœ¨è®­ç»ƒé›†ä¸­æ‰¾è§„å¾‹ï¼Œè€Œå¯¹æµ‹è¯•æ ·æœ¬ä½¿ç”¨è¿™ç§è§„å¾‹ã€‚è€Œéç›‘ç£å­¦ä¹ æ²¡æœ‰è®­ç»ƒé›†ï¼Œåªæœ‰ä¸€ç»„æ•°æ®ï¼Œåœ¨è¯¥ç»„æ•°æ®é›†å†…å¯»æ‰¾è§„å¾‹ã€‚</p></li>
<li><p>æœ‰ç›‘ç£å­¦ä¹ çš„æ–¹æ³•å°±æ˜¯è¯†åˆ«äº‹ç‰©ï¼Œè¯†åˆ«çš„ç»“æœè¡¨ç°åœ¨ç»™å¾…è¯†åˆ«æ•°æ®åŠ ä¸Šäº†æ ‡ç­¾ã€‚å› æ­¤è®­ç»ƒæ ·æœ¬é›†å¿…é¡»ç”±å¸¦æ ‡ç­¾çš„æ ·æœ¬ç»„æˆã€‚è€Œéç›‘ç£å­¦ä¹ æ–¹æ³•åªæœ‰è¦åˆ†æçš„æ•°æ®é›†çš„æœ¬èº«ï¼Œé¢„å…ˆæ²¡æœ‰ä»€ä¹ˆæ ‡ç­¾ã€‚å¦‚æœå‘ç°æ•°æ®é›†å‘ˆç°æŸç§èšé›†æ€§ï¼Œåˆ™å¯æŒ‰è‡ªç„¶çš„èšé›†æ€§åˆ†ç±»ï¼Œä½†ä¸äºˆä»¥æŸç§é¢„å…ˆåˆ†ç±»æ ‡ç­¾å¯¹ä¸Šå·ä¸ºç›®çš„ã€‚</p></li>
<li><p>éç›‘ç£å­¦ä¹ æ–¹æ³•åœ¨å¯»æ‰¾æ•°æ®é›†ä¸­çš„è§„å¾‹æ€§ï¼Œè¿™ç§è§„å¾‹æ€§å¹¶ä¸ä¸€å®šè¦è¾¾åˆ°åˆ’åˆ†æ•°æ®é›†çš„ç›®çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ä¸€å®šè¦â€œåˆ†ç±»â€ã€‚</p>
<p>è¿™ä¸€ç‚¹æ˜¯æ¯”æœ‰ç›‘ç£å­¦ä¹ æ–¹æ³•çš„ç”¨é€”è¦å¹¿ã€‚
è­¬å¦‚åˆ†æä¸€å †æ•°æ®çš„ä¸»åˆ†é‡ï¼Œæˆ–åˆ†ææ•°æ®é›†æœ‰ä»€ä¹ˆç‰¹ç‚¹éƒ½å¯ä»¥å½’äºéç›‘ç£å­¦ä¹ æ–¹æ³•çš„èŒƒç•´ã€‚</p></li>
<li><p>ç”¨éç›‘ç£å­¦ä¹ æ–¹æ³•åˆ†ææ•°æ®é›†çš„ä¸»åˆ†é‡ä¸ç”¨K-Lå˜æ¢è®¡ç®—æ•°æ®é›†çš„ä¸»åˆ†é‡åˆæœ‰åŒºåˆ«ã€‚åè€…ä»æ–¹æ³•ä¸Šè®²ä¸æ˜¯å­¦ä¹ æ–¹æ³•ã€‚å› æ­¤ç”¨K-Lå˜æ¢æ‰¾ä¸»åˆ†é‡ä¸å±äºæ— ç›‘ç£å­¦ä¹ æ–¹æ³•ï¼Œå³æ–¹æ³•ä¸Šä¸æ˜¯ã€‚è€Œé€šè¿‡å­¦ä¹ é€æ¸æ‰¾åˆ°è§„å¾‹æ€§è¿™ä½“ç°äº†å­¦ä¹ æ–¹æ³•è¿™ä¸€ç‚¹ã€‚åœ¨äººå·¥ç¥ç»å…ƒç½‘ç»œä¸­å¯»æ‰¾ä¸»åˆ†é‡çš„æ–¹æ³•å±äºæ— ç›‘ç£å­¦ä¹ æ–¹æ³•ã€‚</p></li>
</ol>
<h3 id="ä½•æ—¶é‡‡ç”¨å“ªç§æ–¹æ³•">ä½•æ—¶é‡‡ç”¨å“ªç§æ–¹æ³•</h3>
<p>ç®€å•çš„æ–¹æ³•å°±æ˜¯ä»å®šä¹‰å…¥æ‰‹ï¼Œæœ‰è®­ç»ƒæ ·æœ¬åˆ™è€ƒè™‘é‡‡ç”¨ç›‘ç£å­¦ä¹ æ–¹æ³•ï¼›æ— è®­ç»ƒæ ·æœ¬ï¼Œåˆ™ä¸€å®šä¸èƒ½ç”¨ç›‘ç£å­¦ä¹ æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œç°å®é—®é¢˜ä¸­ï¼Œå³ä½¿æ²¡æœ‰è®­ç»ƒæ ·æœ¬ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å¤Ÿå‡­å€Ÿè‡ªå·±çš„åŒçœ¼ï¼Œä»å¾…åˆ†ç±»çš„æ•°æ®ä¸­ï¼Œäººå·¥æ ‡æ³¨ä¸€äº›æ ·æœ¬ï¼Œå¹¶æŠŠå®ƒä»¬ä½œä¸ºè®­ç»ƒæ ·æœ¬ï¼Œè¿™æ ·çš„è¯ï¼Œå¯ä»¥æŠŠæ¡ä»¶æ”¹å–„ï¼Œç”¨ç›‘ç£å­¦ä¹ æ–¹æ³•æ¥åšã€‚å¯¹äºä¸åŒçš„åœºæ™¯ï¼Œæ­£è´Ÿæ ·æœ¬çš„åˆ†å¸ƒå¦‚æœä¼šå­˜åœ¨åç§»ï¼ˆå¯èƒ½å¤§çš„åç§»ï¼Œå¯èƒ½æ¯”è¾ƒå°ï¼‰ï¼Œè¿™æ ·çš„è¯ï¼Œç›‘ç£å­¦ä¹ çš„æ•ˆæœå¯èƒ½å°±ä¸å¦‚ç”¨éç›‘ç£å­¦ä¹ äº†ã€‚</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>æ·±åº¦å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
        <tag>CUAD</tag>
        <tag>ç¥ç»ç½‘ç»œ</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±åº¦å­¦ä¹ ç¬”è®°(ä¸‰)---åŸºç¡€ç†è§£</title>
    <url>/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(%E4%B8%89)---%E5%9F%BA%E7%A1%80%E7%90%86%E8%A7%A3/</url>
    <content><![CDATA[<p>ç¨å¾®è®°å½•ä¸€ä¸‹çœ‹å´æ©è¾¾è¯¾ç¨‹åå¯¹æ·±åº¦å­¦ä¹ å„ç§æ¦‚å¿µçš„ç†è§£</p>
<a id="more"></a>
<h2 id="æ·±åº¦å­¦ä¹ çš„å¤§è‡´è¿‡ç¨‹">æ·±åº¦å­¦ä¹ çš„å¤§è‡´è¿‡ç¨‹</h2>
<p>åœ¨çœ‹äº†å´æ©è¾¾çš„ç¬¬ä¸€èŠ‚è¯¾ä¹‹åæˆ‘å¯¹æ·±åº¦å­¦ä¹ çš„ç†è§£æ˜¯è¿™æ ·çš„ï¼š</p>
<p>æ·±åº¦å­¦ä¹ å…¶å®å°±æ˜¯ä¸€ä¸ªå¯»æ‰¾æ‹Ÿåˆå‡½æ•°çš„è¿‡ç¨‹ï¼Œè®©æ•°æ®é€šè¿‡è¿™ä¸ªå‡½æ•°ä¹‹åèƒ½è¾“å‡ºå’Œäººçœ‹æ³•ç›¸ä¼¼çš„ç»“æœã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬å…ˆéœ€è¦é€‰å®šä¸€ä¸ª/å‡ ä¸ªæ¨¡å‹ï¼Œç¡®å®šéœ€è¦çš„å‚æ•°ï¼Œè¶…å‚æ•°ä¹‹ç±»çš„</p>
<p>ç„¶åæˆ‘ä»¬è¦å°†å·²æœ‰çš„æ•°æ®åˆ’åˆ†ä¸ºè®­ç»ƒé›†ï¼ŒéªŒè¯é›†å’Œæµ‹è¯•é›†ï¼Œä»¥å¾€çš„æ¯”ä¾‹æ˜¯60ï¼Œ20ï¼Œ20ä¹‹ç±»çš„ï¼Œä½†æ˜¯ç”±äºç°åœ¨å·²ç»æ˜¯å¤§æ•°æ®æ—¶ä»£äº†ï¼Œæœ‰äº›æ•°æ®é›†å·²ç»è¶³å¤Ÿå¤§äº†ï¼Œæˆ‘ä»¬ä¸éœ€è¦é‚£ä¹ˆå¤§çš„éªŒè¯é›†å’Œæµ‹è¯•é›†ï¼Œå¯ä»¥é€‚å½“å‡å°‘Devå’ŒTestçš„å æ¯”ï¼Œæ¯”å¦‚1ï¼Œ0.5ä¹‹ç±»çš„ã€‚<strong>è¿˜æœ‰ä¸€ç‚¹è¦æ³¨æ„</strong>ï¼Œæˆ‘ä»¬å¾ˆæœ‰å¯èƒ½è®­ç»ƒé›†å’ŒéªŒè¯ï¼Œæµ‹è¯•é›†çš„æ¥æºä¸ä¸€æ ·ï¼Œéš¾ä»¥ä¿è¯åŒåˆ†å¸ƒï¼Œå´æ©è¾¾è€å¸ˆå»ºè®®å¤§å®¶è¦ç¡®ä¿éªŒè¯é›†å’Œæµ‹è¯•é›†çš„æ•°æ®æ¥è‡ªåŒä¸€åˆ†å¸ƒ</p>
<p>ä¹‹åæˆ‘ä»¬è¦å°†å‚æ•°åˆå§‹åŒ–ï¼Œæ³¨æ„åˆå§‹åŒ–çš„æ—¶å€™å‚æ•°æ˜¯å¦èƒ½ä¸º0ï¼Œæ˜¯å¦éœ€è¦è¿›è¡Œå½’ä¸€åŒ–ã€‚å½“ç„¶è®­ç»ƒé›†çš„è¾“å…¥è¾“å‡ºä¹Ÿè¦è¿›è¡Œé¢„å¤„ç†ï¼Œä½†æ˜¯é¢„å¤„ç†çš„æ–¹æ³•ç›®å‰è¿˜æ²¡æœ‰è¿›è¡Œå¤ªå¤šçš„è®²è§£ï¼Œåªæœ‰ä¸€ä¸ªå°†å›¾åƒæ‹‰æˆä¸€ç»´å‘é‡</p>
<p>ä¹‹åå°±æ˜¯è®©ç¥ç»ç½‘ç»œé€šè¿‡è®­ç»ƒæ‰¾åˆ°åˆé€‚çš„å‚æ•°ä½¿å¾—è®­ç»ƒé›†çš„æˆæœ¬å‡½æ•°ä¸æ–­é™ä½ã€‚æ•´ä¸ªè¿‡ç¨‹ä¸»è¦åŒ…æ‹¬å‰å‘ä¼ æ’­å’Œåå‘ä¼ æ’­ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œå‰å‘ä¼ æ’­å°±æ˜¯ä¸ºäº†è®¡ç®—å‡ºæˆæœ¬å‡½æ•°ï¼Œåå‘ä¼ æ’­å°±æ˜¯è®©æˆæœ¬å‡½æ•°å¯¹å„ä¸ªå‚æ•°æ±‚å¯¼ï¼Œç„¶åé€šè¿‡æ¢¯åº¦ä¸‹é™çš„æ–¹æ³•è®©æˆæœ¬å‡½æ•°è¿›ä¸€æ­¥é™ä½ã€‚</p>
<p>å‰åå‘ä¼ æ’­çš„è¿­ä»£æ¬¡æ•°å’Œæ¢¯åº¦ä¸‹é™å­¦ä¹ ç‡éƒ½é€šè¿‡è¶…å‚æ•°æ¥æ§åˆ¶ï¼Œæœ€åå°†è®­ç»ƒå‡ºæ¥çš„å„ç§å‚æ•°ä¿å­˜ä¸‹æ¥ï¼Œè¿™æ ·å°±å®Œæˆäº†ä¸€ä¸ªæ¨¡å‹çš„ç®€å•è®­ç»ƒã€‚å½“ç„¶å…¶ä¸­è¿˜æœ‰å¾ˆå¤šçš„æ­£åˆ™åŒ–ï¼Œå½’ä¸€åŒ–ä¹‹ç±»çš„æ“ä½œï¼Œä½†æ˜¯æœ€ç®€å•çš„ä¸€ä¸ªæ¨¡å‹ï¼ˆæ¯”å¦‚é€»è¾‘å›å½’ï¼‰å¤§è‡´å°±æ˜¯è¿™äº›æ­¥éª¤äº†ã€‚</p>
<p>ç„¶ååœ¨éªŒè¯é›†ä¸Šé€šè¿‡è¿è¡ŒåŒä¸€ç½‘ç»œä¸åŒè¶…å‚æ•°å’Œä¸åŒç½‘ç»œä¹‹é—´çš„æ¨¡å‹æ¥æ¯”è¾ƒæ¨¡å‹æ€§èƒ½ï¼Œç„¶åå†è·‘æµ‹è¯•é›†ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆè¦å‘é‡åŒ–">ä¸ºä»€ä¹ˆè¦å‘é‡åŒ–</h2>
<p>å› ä¸ºè¾“å…¥æ•°æ®è‚¯å®šæ˜¯ä¸€ä¸ªåºå¤§çš„æ•°æ®é›†ï¼Œå¦‚æœç”¨å•çº¯çš„æ ‡é‡é‚£ä¹ˆä¸€å®šéœ€è¦å¾ˆå¤šçš„å¾ªç¯ï¼Œä½†æ˜¯å¾ªç¯çš„æ•ˆç‡æ˜¯å¾ˆä½çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¼•å…¥å‘é‡æ“ä½œï¼Œå‘é‡æ“ä½œä¸€æ¬¡æ€§å¯ä»¥å®Œæˆæ•´ä¸ªå¾ªç¯çš„æ‰€æœ‰è¿ç®—ï¼Œæ•ˆç‡æå‡æå¤§ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆè¦éçº¿æ€§çš„æ¿€æ´»å‡½æ•°">ä¸ºä»€ä¹ˆè¦éçº¿æ€§çš„æ¿€æ´»å‡½æ•°</h2>
<p>å› ä¸ºå¦‚æœä½¿ç”¨çº¿æ€§çš„æ¿€æ´»å‡½æ•°é‚£ä¹ˆæ­£å‘ä¼ æ’­çš„è¾“å‡ºä»…ä»…æ˜¯è¾“å…¥çš„çº¿æ€§ç»„åˆï¼Œæ ¹æœ¬æ²¡æœ‰æ”¹å˜ï¼Œä¸ç®¡ä½ ä½¿ç”¨å¤šå°‘éšå±‚éƒ½å’Œå•éšå±‚æ˜¯ä¸€æ ·çš„æ•ˆæœã€‚</p>
<h2 id="å‚æ•°åˆå§‹åŒ–">å‚æ•°åˆå§‹åŒ–</h2>
<p>ä¸ºä»€ä¹ˆwå‚æ•°ä¸èƒ½ç›´æ¥åˆå§‹åŒ–ä¸ºå…¨0ï¼Ÿ</p>
<p>å½“ä½ è¿™ä¸€å±‚åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œä½ æ˜¯å¯ä»¥å°†è¿™ä¸ªèŠ‚ç‚¹çš„wå‚æ•°åˆå§‹åŒ–ä¸º0çš„ã€‚ä½†æ˜¯å¦‚æœä½ è¿™ä¸€å±‚ä¸æ­¢ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè€Œä¸”é‡‡ç”¨äº†å…¨è¿æ¥çš„è¯ï¼Œä½ è¿˜å°†WçŸ©é˜µåˆå§‹åŒ–æˆäº†0çŸ©é˜µï¼Œé‚£ä¹ˆä½ è¿™ä¸€å±‚æ¯ä¸ªèŠ‚ç‚¹çš„wå‚æ•°ä¹‹é—´æ˜¯ä¸€ä¸ªçº¿æ€§å…³ç³»ï¼Œå’Œåªæœ‰ä¸€ä¸ªèŠ‚ç‚¹æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆè¦ç”¨æ·±å±‚è¡¨ç¤º">ä¸ºä»€ä¹ˆè¦ç”¨æ·±å±‚è¡¨ç¤º</h2>
<p>ä½ å¯ä»¥ç›´è§‰ä¸ŠæŠŠè¿™ç§ç¥ç»ç½‘ç»œçš„å‰å‡ å±‚å½“ä½œæ¢æµ‹ç®€å•çš„å‡½æ•°ï¼Œæ¯”å¦‚è¾¹ç¼˜ï¼Œä¹‹åæŠŠå®ƒä»¬è·Ÿåå‡ å±‚ç»“åˆåœ¨ä¸€èµ·ï¼Œé‚£ä¹ˆæ€»ä½“ä¸Šå°±èƒ½å­¦ä¹ æ›´å¤šå¤æ‚çš„å‡½æ•°ã€‚ä¸€èˆ¬ä½ ä¼šä»æ¯”è¾ƒå°çš„ç»†èŠ‚å…¥æ‰‹ï¼Œæ¯”å¦‚è¾¹ç¼˜ï¼Œç„¶åå†ä¸€æ­¥æ­¥åˆ°æ›´å¤§æ›´å¤æ‚çš„åŒºåŸŸï¼Œæ¯”å¦‚ä¸€åªçœ¼ç›æˆ–æ˜¯ä¸€ä¸ªé¼»å­ï¼Œå†æŠŠçœ¼ç›é¼»å­è£…ä¸€å—ç»„æˆæ›´å¤æ‚çš„éƒ¨åˆ†ã€‚</p>
<h2 id="è¶…å‚æ•°">è¶…å‚æ•°</h2>
<p>æ¯”å¦‚ç®—æ³•ä¸­çš„<strong>learning rate</strong> $ a $
ï¼ˆå­¦ä¹ ç‡ï¼‰ã€<strong>iterations</strong>(æ¢¯åº¦ä¸‹é™æ³•å¾ªç¯çš„æ•°é‡)ã€$ L $
ï¼ˆéšè—å±‚æ•°ç›®ï¼‰ã€$ n^{[l]} $ ï¼ˆéšè—å±‚å•å…ƒæ•°ç›®ï¼‰ã€<strong>choice of
activation
function</strong>ï¼ˆæ¿€æ´»å‡½æ•°çš„é€‰æ‹©ï¼‰éƒ½éœ€è¦ä½ æ¥è®¾ç½®ï¼Œè¿™äº›æ•°å­—å®é™…ä¸Šæ§åˆ¶äº†æœ€åçš„å‚æ•°$
W $ å’Œ $ b
$çš„å€¼ï¼Œæ‰€ä»¥å®ƒä»¬è¢«ç§°ä½œè¶…å‚æ•°ã€‚åé¢è¿˜æœ‰å¾ˆå¤šè¶…å‚æ•°æˆ‘è¿˜æœ‰æ²¡å­¦åˆ°ï¼Œæ€»çš„æ¥è®²å°±æ˜¯èƒ½å½±å“å‚æ•°çš„æ›´é«˜çº§å‚æ•°ã€‚</p>
<p>è¶…å‚æ•°çš„å–å€¼å¹¶æ²¡æœ‰æ˜ç¡®çš„è§„å®šï¼Œè¿™ç›®å‰è¿˜æ˜¯ä¸€ä¸ªç»éªŒæ€§çš„è¿‡ç¨‹ï¼Œæ–°æ‰‹ä¸Šè·¯æœ€å¤šçš„è¿˜æ˜¯è¦ä¸æ–­çš„å°è¯•ï¼Œé€šè¿‡ä¸æ–­åœ°ä¿®æ”¹è¶…å‚æ•°å¯¹æ¯”ç»“æœæ¥ä¸æ–­ä¿®æ­£æœ€åæ‰¾åˆ°ä¸€ä¸ªç›¸å¯¹åˆé€‚çš„ã€‚</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>æ·±åº¦å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ æ‰“å°è®­ç»ƒæ—¥å¿—</title>
    <url>/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%89%93%E5%8D%B0%E8%AE%AD%E7%BB%83%E6%97%A5%E5%BF%97/</url>
    <content><![CDATA[<p>è¿™é‡Œè®°å½•ä¸‹æˆ‘ä½¿ç”¨pythonçš„sklearnåº“ä¸­çš„æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œè®­ç»ƒè¿‡ç¨‹ä¸­ä½¿ç”¨æ‰“å°è®­ç»ƒæ—¥å¿—çš„æ–¹æ³•ã€‚</p>
<a id="more"></a>
<blockquote>
<p>scikit-learnæ˜¯Pythonååˆ†å‡ºåçš„ä¸€ä¸ªç®—æ³•åº“ï¼Œé‡Œé¢åŒ…å«äº†éå¸¸å¤šçš„æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåœºæ™¯éœ€è¦é€‰ç”¨å¤šä¸ªæœºå™¨å­¦ä¹ ç®—æ³•åŒæ—¶è¦åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è¿›è¡Œè®­ç»ƒä¿¡æ¯çš„æ‰“å°ï¼Œåº“ä¸­çš„æœ‰äº›ç®—æ³•æœ¬èº«æ˜¯è‡ªå¸¦è®­ç»ƒæ—¥å¿—æ‰“å°çš„ï¼Œä½†æ˜¯æœ‰äº›æ²¡æœ‰ï¼Œå› æ­¤æˆ‘ä»¬ä¸»è¦éœ€è¦è§£å†³ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ol type="1">
<li>å¸¦è®­ç»ƒè¿‡ç¨‹çš„ç®—æ³•å°†è®­ç»ƒè¿‡ç¨‹æ‰“å°åˆ°æŒ‡å®šæ–‡ä»¶ä¸­</li>
<li>ä¸å¸¦è®­ç»ƒè¿‡ç¨‹çš„ç®—æ³•äººä¸ºåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æ‰“å°ä¸€äº›ç®€å•çš„è®­ç»ƒå†…å®¹</li>
</ol>
</blockquote>
<h3 id="å¸¦è¿‡ç¨‹ç®—æ³•è®­ç»ƒæ—¥å¿—æ‰“å°">å¸¦è¿‡ç¨‹ç®—æ³•è®­ç»ƒæ—¥å¿—æ‰“å°</h3>
<h4 id="å¯ç”¨è®­ç»ƒæ—¥å¿—">å¯ç”¨è®­ç»ƒæ—¥å¿—</h4>
<p>è™½ç„¶æœ‰ä¸€äº›ç®—æ³•æ˜¯è‡ªå¸¦è®­ç»ƒè¿‡ç¨‹è¾“å‡ºçš„ï¼Œä½†æ˜¯åŸºæœ¬é»˜è®¤éƒ½æ˜¯ä¸è¾“å‡ºæˆ–è€…åªè¾“å‡ºå¾ˆå°‘ä¸€éƒ¨åˆ†ä¿¡æ¯çš„ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦æŸ¥çœ‹sklearnåº“ä¸­è¿™ä¸ªç®—æ³•çš„å®ç°æ³¨é‡Šï¼Œçœ‹æœ‰æ²¡æœ‰æ§åˆ¶è®­ç»ƒè¿‡ç¨‹è¾“å‡ºçš„å‚æ•°ï¼Œä¸‹é¢ä¸¾ä¸€äº›ä¾‹å­ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¾ˆå¤šç®—æ³•çš„è®­ç»ƒè¿‡ç¨‹æ‰“å°éƒ½æ˜¯é€šè¿‡verboseè¿™ä¸ªå‚æ•°æ§åˆ¶çš„ï¼Œä¾‹å¦‚</span></span><br><span class="line">clf = ensemble.HistGradientBoostingClassifier(verbose=<span class="number">1</span>, **hyperparameter)</span><br><span class="line">clf = ExtraTreesClassifier(verbose=<span class="number">3</span>, **hyperparameter)</span><br><span class="line">clf = RandomForestClassifier(verbose=<span class="number">99</span>, **hyperparameter)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½†ä¹Ÿæœ‰ä¸€äº›æ˜¯é€šè¿‡åˆ«çš„å‚æ•°æ§åˆ¶çš„ï¼Œè¿˜æ˜¯è¦è‡ªå·±å»çœ‹ç®—æ³•å®ç°é‡Œé¢çš„æ³¨é‡Š</span></span><br><span class="line">clf = LocalOutlierFactor(novelty=<span class="literal">True</span>, **hyperparameter)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”šè‡³Lightgbmè¿˜æ˜¯åœ¨fit()å‡½æ•°ä¸­æ§åˆ¶çš„</span></span><br><span class="line">clf.fit(x, y, eval_set=[(x, y)], callbacks=[lgb.log_evaluation(<span class="number">1</span>)])</span><br></pre></td></tr></table></figure>
<h4 id="å°†è®­ç»ƒæ—¥å¿—è¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶">å°†è®­ç»ƒæ—¥å¿—è¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶</h4>
<p>è¿™äº›ç®—æ³•åŸºæœ¬éƒ½æ²¡æœ‰å‚æ•°æ¥æ¥å—è®­ç»ƒæ—¥å¿—è¾“å‡ºä½ç½®ï¼ˆæˆ‘é‡è§çš„åªæœ‰ä¸€ä¸ªä¾‹å¤–ï¼Œä¸‹é¢ä¼šè®²ï¼‰ï¼ŒåŸºæœ¬éƒ½æ˜¯å°†è®­ç»ƒæ—¥å¿—ç›´æ¥é»˜è®¤è¾“å‡ºåˆ°å‘½ä»¤è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†åŸæœ¬è¾“å‡ºåˆ°å‘½ä»¤è¡Œä¸­çš„å†…å®¹é‡å®šå‘è¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶ä¸­ã€‚</p>
<p>è¿™é‡Œä¸»è¦ç”¨åˆ°<strong>sys.stdout</strong>ï¼Œä¸‹é¢å…ˆç®€å•ä»‹ç»ä¸‹<strong>sys.stdout</strong>çš„åŸºæœ¬ç”¨æ³•</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">print(<span class="string">'111'</span>)</span><br><span class="line"></span><br><span class="line">oldPrint = sys.stdout   <span class="comment"># ç”¨äºåæœŸè¿˜åŸ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠŠè¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶</span></span><br><span class="line">sys.stdout=open(<span class="string">'outfile.log'</span>,<span class="string">"a+"</span>) </span><br><span class="line">print(<span class="string">'222'</span>)</span><br><span class="line"></span><br><span class="line">sys.stdout.close() <span class="comment"># å…³é—­æ–‡ä»¶</span></span><br><span class="line">sys.stdout = oldPrint  <span class="comment"># è¿˜åŸè¾“å‡ºä½ç½®åˆ°å‘½ä»¤è¡Œ</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå…¶å®çœ‹èµ·æ¥å·²ç»é‡å®šå‘çš„åŠŸèƒ½å·²ç»å®ç°äº†ï¼Œæˆ‘ä»¬åªéœ€è¦å°†print('222')æ¢ä¸ºæˆ‘ä»¬æ‰§è¡Œæ¨¡å‹è®­ç»ƒçš„å†…å®¹å³å¯ï¼Œå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train_model</span><span class="params">(algorithm, clf, x, y, train_log_path)</span>:</span></span><br><span class="line">    cmd = sys.stdout</span><br><span class="line">    sys.stdout = open(train_log_path, mode=<span class="string">'a'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">    start = time.time()</span><br><span class="line"></span><br><span class="line">    clf.fit(x, y)</span><br><span class="line"></span><br><span class="line">    end = time.time()</span><br><span class="line">    sys.stdout.close()</span><br><span class="line">    sys.stdout = cmd</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> start, end</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯æˆ‘ä»¬åœ¨å®é™…ä½¿ç”¨çš„è¿‡ç¨‹ä¸­è¿˜æ˜¯å‘ç°äº†ä¸€äº›é—®é¢˜ï¼Œå°±æ˜¯æœ‰äº›ç®—æ³•ä½¿ç”¨çš„æ—¶å€™æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯æœ‰äº›ç®—æ³•å°±ä¸ä¼šå®æ—¶å†™å…¥ï¼Œè€Œæ˜¯æ•´ä¸ªè®­ç»ƒç»“æŸäº†æ‰æŠŠå†…å®¹å†™å…¥æŒ‡å®šæ–‡ä»¶ï¼Œæˆ‘ä»¬æ€è€ƒåº”è¯¥æ˜¯flushçš„é—®é¢˜ï¼Œäºæ˜¯é‡å†™äº†ä¸‹<strong>sys.stdout</strong>çš„<strong>wirte()</strong>å’Œ<strong>flush()</strong>æ–¹æ³•</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Logger</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, filename=<span class="string">'default.log'</span>, stream=sys.stdout)</span>:</span></span><br><span class="line">        self.terminal = stream</span><br><span class="line">        self.log = open(filename, <span class="string">'a'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">write</span><span class="params">(self, message)</span>:</span></span><br><span class="line">        <span class="comment"># self.terminal.write(message)</span></span><br><span class="line">        <span class="comment"># self.terminal.flush()</span></span><br><span class="line">        self.log.write(message)</span><br><span class="line">        self.log.flush()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">flush</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train_model</span><span class="params">(algorithm, clf, x, y, train_log_path)</span>:</span></span><br><span class="line">    cmd = sys.stdout</span><br><span class="line">    sys.stdout = Logger(train_log_path, sys.stdout)</span><br><span class="line">    <span class="comment"># sys.stdout = open(train_log_path, mode='a', encoding='utf-8')</span></span><br><span class="line">    start = time.time()</span><br><span class="line"></span><br><span class="line">    clf.fit(x, y)</span><br><span class="line"></span><br><span class="line">    end = time.time()</span><br><span class="line">    <span class="comment"># sys.stdout.close()</span></span><br><span class="line">    sys.stdout = cmd</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> start, end</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·è¿›è¡Œä¿®æ”¹ä¹‹åå‘ç°æ‰€æœ‰ç®—æ³•çš„è®­ç»ƒæ—¥å¿—éƒ½èƒ½å®æ—¶å†™å…¥åˆ°æŒ‡å®šæ–‡ä»¶ä¸­ã€‚</p>
<h4 id="é‡å®šå‘é—®é¢˜">é‡å®šå‘é—®é¢˜</h4>
<p>å°†è®­ç»ƒæ—¥å¿—é‡å®šå‘åˆ°æŒ‡å®šæ–‡ä»¶è¯´ç™½äº†å°±æ˜¯ä¿®æ”¹<strong>sys.stdout</strong>çš„æŒ‡å‘ï¼Œä½†æ˜¯è¿˜æœ‰æä¸ªåˆ«çš„ç®—æ³•å†…éƒ¨ä¼šæœ‰ä¸€ä¸ªä¸“é—¨çš„å‚æ•°æ¥æŒ‡å®šè®­ç»ƒæ—¥å¿—è¾“å‡ºä½ç½®ï¼Œä¾‹å¦‚catboost</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fit</span><span class="params">(self, X, y=None, cat_features=None, text_features=None, embedding_features=None, sample_weight=None, baseline=None, use_best_model=None, eval_set=None, verbose=None, logging_level=None, plot=False, column_description=None, verbose_eval=None, metric_period=None, silent=None, early_stopping_rounds=None, save_snapshot=None, snapshot_file=None, snapshot_interval=None, init_model=None, callbacks=None, log_cout=sys.stdout, log_cerr=sys.stderr)</span>:</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°catboostçš„<strong>fit()</strong>å‡½æ•°ä¸­æœ‰ä¸€ä¸ªä¸“é—¨çš„å‚æ•°<strong>log_cout</strong>æ¥æ§åˆ¶è¾“å‡ºï¼Œè¿™ç§ç®—æ³•åœ¨é‡å®šå‘è®­ç»ƒæ—¥å¿—çš„æ—¶å€™å°±éœ€è¦å°†æˆ‘ä»¬ä¿®æ”¹è¿‡çš„<strong>sys.stdout</strong>ä¼ å…¥<strong>fit()</strong>ä¸­ã€‚</p>
<h4 id="æ•ˆæœå±•ç¤º">æ•ˆæœå±•ç¤º</h4>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ç®—æ³•HGBæ­£åœ¨è¿›è¡Œè®­ç»ƒ</span><br><span class="line">Binning 0.123 GB of training data: 1.479 s</span><br><span class="line">Binning 0.014 GB of validation data: 0.017 s</span><br><span class="line">Fitting gradient boosted rounds:</span><br><span class="line">[1&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 10, train loss: 0.40411, val loss: 0.40415, in 0.159s</span><br><span class="line">[2&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 9, train loss: 0.34343, val loss: 0.34353, in 0.062s</span><br><span class="line">[3&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 8, train loss: 0.29777, val loss: 0.29790, in 0.058s</span><br><span class="line">[4&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 8, train loss: 0.26076, val loss: 0.26084, in 0.059s</span><br><span class="line">[5&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 8, train loss: 0.23027, val loss: 0.23030, in 0.057s</span><br><span class="line">[6&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 9, train loss: 0.20460, val loss: 0.20460, in 0.056s</span><br><span class="line">[7&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 8, train loss: 0.18270, val loss: 0.18263, in 0.061s</span><br><span class="line">[8&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 9, train loss: 0.16379, val loss: 0.16374, in 0.060s</span><br><span class="line">[9&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 10, train loss: 0.14730, val loss: 0.14720, in 0.060s</span><br><span class="line">[10&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 9, train loss: 0.13293, val loss: 0.13283, in 0.061s</span><br><span class="line">[11&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 9, train loss: 0.12029, val loss: 0.12016, in 0.061s</span><br><span class="line">[12&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 11, train loss: 0.10902, val loss: 0.10894, in 0.063s</span><br><span class="line">[13&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 12, train loss: 0.09799, val loss: 0.09816, in 0.064s</span><br><span class="line">[14&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 8, train loss: 0.08923, val loss: 0.08939, in 0.060s</span><br><span class="line">[15&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 9, train loss: 0.08115, val loss: 0.08130, in 0.061s</span><br><span class="line">[16&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 10, train loss: 0.07382, val loss: 0.07382, in 0.064s</span><br><span class="line">[17&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 9, train loss: 0.06734, val loss: 0.06732, in 0.062s</span><br><span class="line">[18&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 9, train loss: 0.06146, val loss: 0.06148, in 0.064s</span><br><span class="line">[19&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 9, train loss: 0.05623, val loss: 0.05628, in 0.063s</span><br><span class="line">[20&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 11, train loss: 0.05124, val loss: 0.05127, in 0.063s</span><br><span class="line">[21&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 10, train loss: 0.04676, val loss: 0.04682, in 0.066s</span><br><span class="line">[22&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 12, train loss: 0.04273, val loss: 0.04286, in 0.063s</span><br><span class="line">[23&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 13, train loss: 0.03913, val loss: 0.03934, in 0.061s</span><br><span class="line">[24&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 13, train loss: 0.03588, val loss: 0.03615, in 0.064s</span><br><span class="line">[25&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 14, train loss: 0.03303, val loss: 0.03333, in 0.063s</span><br><span class="line">[26&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 14, train loss: 0.03044, val loss: 0.03079, in 0.065s</span><br><span class="line">[27&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 14, train loss: 0.02812, val loss: 0.02852, in 0.067s</span><br><span class="line">[28&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 9, train loss: 0.02533, val loss: 0.02568, in 0.061s</span><br><span class="line">[29&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 12, train loss: 0.02338, val loss: 0.02374, in 0.067s</span><br><span class="line">[30&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 11, train loss: 0.02164, val loss: 0.02198, in 0.062s</span><br><span class="line">[31&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 11, train loss: 0.02003, val loss: 0.02043, in 0.065s</span><br><span class="line">[32&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 11, train loss: 0.01863, val loss: 0.01887, in 0.060s</span><br><span class="line">[33&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 11, train loss: 0.01729, val loss: 0.01762, in 0.064s</span><br><span class="line">[34&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 10, train loss: 0.01607, val loss: 0.01643, in 0.065s</span><br><span class="line">[35&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 10, train loss: 0.01503, val loss: 0.01544, in 0.069s</span><br><span class="line">[36&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 10, train loss: 0.01404, val loss: 0.01454, in 0.068s</span><br><span class="line">[37&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 9, train loss: 0.01317, val loss: 0.01373, in 0.064s</span><br><span class="line">[38&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 10, train loss: 0.01239, val loss: 0.01297, in 0.065s</span><br><span class="line">[39&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 11, train loss: 0.01160, val loss: 0.01222, in 0.064s</span><br><span class="line">[40&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 14, train loss: 0.01092, val loss: 0.01152, in 0.066s</span><br><span class="line">[41&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 12, train loss: 0.01032, val loss: 0.01089, in 0.066s</span><br><span class="line">[42&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 11, train loss: 0.00974, val loss: 0.01033, in 0.068s</span><br><span class="line">[43&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 11, train loss: 0.00921, val loss: 0.00981, in 0.065s</span><br><span class="line">[44&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 11, train loss: 0.00873, val loss: 0.00935, in 0.071s</span><br><span class="line">[45&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 13, train loss: 0.00831, val loss: 0.00895, in 0.067s</span><br><span class="line">[46&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 14, train loss: 0.00792, val loss: 0.00857, in 0.066s</span><br><span class="line">[47&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 12, train loss: 0.00753, val loss: 0.00820, in 0.068s</span><br><span class="line">[48&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 11, train loss: 0.00716, val loss: 0.00790, in 0.062s</span><br><span class="line">[49&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 10, train loss: 0.00682, val loss: 0.00760, in 0.063s</span><br><span class="line">[50&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 14, train loss: 0.00650, val loss: 0.00734, in 0.062s</span><br><span class="line">[51&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 10, train loss: 0.00620, val loss: 0.00703, in 0.064s</span><br><span class="line">[52&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 12, train loss: 0.00593, val loss: 0.00676, in 0.067s</span><br><span class="line">[53&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 13, train loss: 0.00572, val loss: 0.00654, in 0.062s</span><br><span class="line">[54&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 11, train loss: 0.00553, val loss: 0.00634, in 0.068s</span><br><span class="line">[55&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 12, train loss: 0.00535, val loss: 0.00616, in 0.068s</span><br><span class="line">[56&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 18, train loss: 0.00516, val loss: 0.00598, in 0.061s</span><br><span class="line">[57&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 17, train loss: 0.00497, val loss: 0.00579, in 0.067s</span><br><span class="line">[58&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 17, train loss: 0.00481, val loss: 0.00563, in 0.064s</span><br><span class="line">[59&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 11, train loss: 0.00467, val loss: 0.00550, in 0.064s</span><br><span class="line">[60&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 15, train loss: 0.00452, val loss: 0.00537, in 0.066s</span><br><span class="line">[61&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 13, train loss: 0.00440, val loss: 0.00526, in 0.069s</span><br><span class="line">[62&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 15, train loss: 0.00426, val loss: 0.00513, in 0.064s</span><br><span class="line">[63&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 17, train loss: 0.00414, val loss: 0.00502, in 0.070s</span><br><span class="line">[64&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 16, train loss: 0.00403, val loss: 0.00494, in 0.067s</span><br><span class="line">[65&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 12, train loss: 0.00395, val loss: 0.00488, in 0.063s</span><br><span class="line">[66&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 15, train loss: 0.00385, val loss: 0.00479, in 0.067s</span><br><span class="line">[67&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 11, train loss: 0.00377, val loss: 0.00473, in 0.065s</span><br><span class="line">[68&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 18, train loss: 0.00367, val loss: 0.00464, in 0.067s</span><br><span class="line">[69&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 19, train loss: 0.00358, val loss: 0.00458, in 0.065s</span><br><span class="line">[70&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 14, train loss: 0.00352, val loss: 0.00453, in 0.060s</span><br><span class="line">[71&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 13, train loss: 0.00344, val loss: 0.00447, in 0.065s</span><br><span class="line">[72&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 16, train loss: 0.00337, val loss: 0.00443, in 0.067s</span><br><span class="line">[73&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 17, train loss: 0.00332, val loss: 0.00439, in 0.063s</span><br><span class="line">[74&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 17, train loss: 0.00324, val loss: 0.00433, in 0.068s</span><br><span class="line">[75&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 15, train loss: 0.00320, val loss: 0.00429, in 0.065s</span><br><span class="line">[76&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 16, train loss: 0.00315, val loss: 0.00423, in 0.065s</span><br><span class="line">[77&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 15, train loss: 0.00310, val loss: 0.00420, in 0.065s</span><br><span class="line">[78&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 12, train loss: 0.00304, val loss: 0.00412, in 0.067s</span><br><span class="line">[79&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 20, train loss: 0.00300, val loss: 0.00409, in 0.065s</span><br><span class="line">[80&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 21, train loss: 0.00296, val loss: 0.00405, in 0.064s</span><br><span class="line">[81&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 14, train loss: 0.00291, val loss: 0.00402, in 0.069s</span><br><span class="line">[82&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 10, train loss: 0.00287, val loss: 0.00397, in 0.066s</span><br><span class="line">[83&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 13, train loss: 0.00282, val loss: 0.00395, in 0.065s</span><br><span class="line">[84&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 15, train loss: 0.00279, val loss: 0.00394, in 0.060s</span><br><span class="line">[85&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 16, train loss: 0.00276, val loss: 0.00392, in 0.065s</span><br><span class="line">[86&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 14, train loss: 0.00272, val loss: 0.00390, in 0.064s</span><br><span class="line">[87&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 18, train loss: 0.00269, val loss: 0.00388, in 0.063s</span><br><span class="line">[88&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 13, train loss: 0.00265, val loss: 0.00387, in 0.061s</span><br><span class="line">[89&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 11, train loss: 0.00261, val loss: 0.00384, in 0.066s</span><br><span class="line">[90&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 18, train loss: 0.00259, val loss: 0.00383, in 0.067s</span><br><span class="line">[91&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 14, train loss: 0.00254, val loss: 0.00383, in 0.073s</span><br><span class="line">[92&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 16, train loss: 0.00252, val loss: 0.00381, in 0.063s</span><br><span class="line">[93&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 12, train loss: 0.00249, val loss: 0.00379, in 0.066s</span><br><span class="line">[94&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 17, train loss: 0.00245, val loss: 0.00378, in 0.065s</span><br><span class="line">[95&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 11, train loss: 0.00242, val loss: 0.00376, in 0.065s</span><br><span class="line">[96&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 14, train loss: 0.00239, val loss: 0.00375, in 0.064s</span><br><span class="line">[97&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 15, train loss: 0.00236, val loss: 0.00372, in 0.068s</span><br><span class="line">[98&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 17, train loss: 0.00234, val loss: 0.00371, in 0.060s</span><br><span class="line">[99&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 21, train loss: 0.00232, val loss: 0.00370, in 0.068s</span><br><span class="line">[100&#x2F;100] 1 tree, 31 leaves, max depth &#x3D; 11, train loss: 0.00230, val loss: 0.00368, in 0.066s</span><br><span class="line">Fit 100 trees in 8.440 s, (3100 total leaves)</span><br><span class="line">Time spent computing histograms: 2.781s</span><br><span class="line">Time spent finding best splits:  0.320s</span><br><span class="line">Time spent applying splits:      0.423s</span><br><span class="line">Time spent predicting:           0.086s</span><br><span class="line">è®­ç»ƒå®Œæˆ	è®­ç»ƒç”¨æ—¶8.475976943969727 Seconds	æ¨¡å‹ä¿å­˜åœ¨: *****\142-20220605-173439</span><br><span class="line">æœ‰ç›‘ç£ç®—æ³•å¼€å§‹è¿›è¡Œè®­ç»ƒé›†ACCè®¡ç®—</span><br><span class="line">è®¡ç®—å®Œæˆ	è®­ç»ƒé›†å‡†ç¡®ç‡: 0.99939108823808</span><br></pre></td></tr></table></figure>
<h3 id="ä¸å¸¦è¿‡ç¨‹ç®—æ³•è®­ç»ƒæ—¥å¿—æ‰“å°">ä¸å¸¦è¿‡ç¨‹ç®—æ³•è®­ç»ƒæ—¥å¿—æ‰“å°</h3>
<p>è¿™éƒ¨åˆ†ç®—æ³•æœ¬èº«ä¸è‡ªå¸¦è®­ç»ƒæ—¥å¿—è¾“å‡ºï¼Œå¦‚æœè¦æ”¹æºç çš„è¯å°±éœ€è¦æ·±åˆ»ç†è§£æ¯ç§ç®—æ³•æœºåˆ¶ï¼Œè€Œä¸”<strong>sklearn</strong>è¿™ç§æˆç†Ÿçš„åº“åº•å±‚å¯èƒ½æ˜¯å°è£…å¥½çš„æ–‡ä»¶ï¼Œæ ¹æœ¬ä¸æ˜¯pyæ–‡ä»¶ï¼Œä¿®æ”¹æºç çš„éš¾åº¦å¯èƒ½ä¼šæœ‰äº›å¤§ã€‚
å¦‚æœåªæ˜¯å•çº¯çš„ä¸ºäº†çœ‹åˆ°æˆ‘ä»¬çš„ç®—æ³•ç¡®å®åœ¨è¿è¡Œå…¶å®æ²¡æœ‰å¿…è¦éè¦æ‰“å°å’Œç®—æ³•æœºåˆ¶ç›¸å…³çš„å†…å®¹ï¼Œæ‰“å°ä¸€äº›ç®—æ³•è¿è¡Œæ—¶é—´ï¼Œä½¿ç”¨è®­ç»ƒé›†è¿™äº›æ•°æ®å…¶å®ä¹Ÿå°±å¤Ÿäº†ã€‚æ‰€ä»¥è¿™é‡Œæˆ‘é€‰æ‹©ä½¿ç”¨pythonå¤šçº¿ç¨‹åœ¨ç®—æ³•è®­ç»ƒçš„æ—¶å€™æ‰“å°ä¸€äº›ç®€å•çš„ä¿¡æ¯è®©ä½¿ç”¨è€…èƒ½çœ‹åˆ°æˆ‘ä»¬çš„ç®—æ³•åœ¨è¿è¡Œå°±è¡Œäº†ã€‚</p>
<h4 id="å¤šçº¿ç¨‹æ‰“å°è®­ç»ƒä¿¡æ¯">å¤šçº¿ç¨‹æ‰“å°è®­ç»ƒä¿¡æ¯</h4>
<p>å®é™…ä¸Šå°±æ˜¯ç®€å•ä½¿ç”¨äº†pythonçš„å¤šçº¿ç¨‹ï¼Œæ²¡æœ‰ä»€ä¹ˆå¤æ‚çš„åŒæ­¥ï¼Œèµ„æºï¼Œé”ä¹‹ç±»çš„é—®é¢˜ï¼Œå¯¹äºæˆ‘ä»¬è¿™ä¸ªç®€å•çš„åœºæ™¯æ¥è¯´å”¯ä¸€è¦æ€è€ƒçš„å°±æ˜¯å¦‚ä½•åœæ­¢çº¿ç¨‹ï¼Œä¹Ÿæ²¡ä»€ä¹ˆè¯´çš„ï¼Œç›´æ¥çœ‹ä»£ç å§ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¦åœ¨åå°è¿è¡Œçš„ä»»åŠ¡</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_train_content</span><span class="params">(algorithm, start, stop_flag)</span>:</span></span><br><span class="line">    <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">        print(<span class="string">'%sç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:%.2fç§’'</span> % (algorithm, time.time() - start))</span><br><span class="line">        time.sleep(random.uniform(<span class="number">0</span>, <span class="number">3</span>))</span><br><span class="line">        <span class="keyword">if</span> stop_flag():</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train_model</span><span class="params">(algorithm, clf, x, y, train_log_path)</span>:</span></span><br><span class="line">    cmd = sys.stdout</span><br><span class="line">    sys.stdout = Logger(train_log_path, sys.stdout)</span><br><span class="line">    <span class="comment"># sys.stdout = open(train_log_path, mode='a', encoding='utf-8')</span></span><br><span class="line">    start = time.time()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> algorithm <span class="keyword">in</span> [<span class="string">'CART'</span>, <span class="string">'KNN'</span>, <span class="string">'HBOS'</span>, <span class="string">'OCSVM'</span>, <span class="string">'KDE'</span>, <span class="string">'LOF'</span>]:</span><br><span class="line">        stop_flag = <span class="literal">False</span></span><br><span class="line">        t = Thread(target=print_train_content, args=(algorithm, start, <span class="keyword">lambda</span>: stop_flag))</span><br><span class="line">        t.daemon = <span class="number">1</span></span><br><span class="line">        t.start()</span><br><span class="line">        clf.fit(x, y)</span><br><span class="line">        stop_flag = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        clf.fit(x, y)</span><br><span class="line"></span><br><span class="line">    end = time.time()</span><br><span class="line">    <span class="comment"># sys.stdout.close()</span></span><br><span class="line">    sys.stdout = cmd</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> start, end</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç é‡Œçš„çº¿ç¨‹åªæ˜¯ç®€å•ä½¿ç”¨äº†æ‰“å°è®­ç»ƒæ—¶é•¿ï¼Œçº¿ç¨‹æ‰“å°çš„å†…å®¹å¯ä»¥è‡ªå·±éšä¾¿å®šåˆ¶ï¼Œåªè¦å¾€é‡Œé¢ä¼ å‚æ•°å°±è¡Œäº†ã€‚</p>
<p>æˆ‘ä»¬åœæ­¢çº¿ç¨‹çš„æ–¹å¼ä¸»è¦æ˜¯é€šè¿‡<strong>stop_flag</strong>è¿™ä¸ªæ ‡å¿—ä½æ¥å®ç°çš„ï¼Œæ ‡å¿—ä½å¯ä»¥é€šè¿‡å…¨å±€å˜é‡çš„å½¢å¼å£°æ˜ï¼Œä¹Ÿå¯ä»¥åƒæˆ‘è¿™æ ·ä½¿ç”¨lambdaå£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œè¿™æ ·å°±æ˜¾å¾—ç¨å¾®ç¾è§‚ä¸€ç‚¹ç‚¹ã€‚</p>
<h4 id="æ•ˆæœå±•ç¤º-1">æ•ˆæœå±•ç¤º</h4>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ç®—æ³•OCSVMæ­£åœ¨è¿›è¡Œè®­ç»ƒ</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:0.00ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:2.34ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:4.77ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:5.32ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:5.35ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:6.18ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:7.84ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:8.27ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:9.33ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:9.60ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:12.00ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:14.31ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:15.62ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:16.47ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:16.85ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:17.16ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:19.70ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:20.43ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:20.66ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:21.01ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:22.92ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:24.12ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:24.96ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:25.63ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:26.88ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:27.00ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:28.12ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:28.43ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:30.28ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:32.33ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:34.06ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:36.52ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:38.98ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:39.21ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:39.71ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:42.49ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:43.58ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:44.71ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:44.83ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:46.16ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:47.25ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:47.54ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:47.58ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:47.75ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:49.05ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:49.34ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:50.88ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:53.53ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:54.78ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:57.68ç§’</span><br><span class="line">OCSVMç®—æ³•æ­£åœ¨è®­ç»ƒ,è®­ç»ƒæ—¶é•¿:58.34ç§’</span><br><span class="line">è®­ç»ƒå®Œæˆ	è®­ç»ƒç”¨æ—¶59.8736629486084 Seconds	æ¨¡å‹ä¿å­˜åœ¨: ***\167-20220622-165753</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>çº¿ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±åº¦å­¦ä¹ ç¬”è®°(é›¶)---è‹±è¯­</title>
    <url>/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(%E9%9B%B6)---%E8%8B%B1%E8%AF%AD/</url>
    <content><![CDATA[<p>è®°å½•ä¸€ä¸‹å¸¸ç”¨è‹±è¯­è¯æ±‡</p>
<a id="more"></a>
<p>ç›‘ç£å­¦ä¹  supervised learning</p>
<p>æ— ç›‘ç£å­¦ä¹  unsupervised learning</p>
<p>ç»Ÿä¸€è®¡ç®—è®¾å¤‡æ¶æ„ CUADï¼ˆCompute Unified Device Architectureï¼‰</p>
<p>å¾®åˆ† Differentiate</p>
<p>å·ç§¯ç¥ç»ç½‘ç»œ convolutional neural network</p>
<p>å¾ªç¯ç¥ç»ç½‘ç»œ Circulating neural network</p>
<p>é“¾å¼æ³•åˆ™ chain rule</p>
<p>æ­£å‘ä¼ æ’­ forward propagation</p>
<p>åå‘ä¼ æ’­ backward propagation</p>
<p>å¹¿æ’­ broadcasting</p>
<p>å˜å¹³ flatten</p>
<p>æ ‡é‡ scalar</p>
<p>åç§»é‡ï¼Œåå·® bias</p>
<p>æ–¹å·® variance</p>
<p>æ‹Ÿåˆ fit</p>
<p>æ­£åˆ™åŒ– regularization</p>
<p>å½’ä¸€åŒ– Normalization</p>
<p>èŒƒæ•° norm</p>
<p>éªŒè¯é›† validation/development</p>
<p>å¼—ç½—è´å°¼ä¹Œæ–¯èŒƒæ•° Frobenius norm</p>
<p>æ­£äº¤åŒ– orthogonalization</p>
<p>æ»¤æ³¢å™¨ filter</p>
<p>æ ¸ kernal</p>
<p>å¡«å…… padding</p>
<p>æ‰¹å¤„ç† batch</p>
<p>ä¼˜åŒ– optimization</p>
<p>ç®—æ³• algorithm</p>
<p>åŠ¨é‡ momentum</p>
<p>è¡°å‡ decay</p>
<p>ç¦»æ•£ discrete</p>
<p>éç‚¹ saddle point</p>
<p>é±¼å­é…± caviar</p>
<p>éšè— hidden</p>
<p>å±‚ layer</p>
<p>çº¿æ€§ linear</p>
<p>éçº¿æ€§ nonlinear</p>
<p>è¾¹ç•Œ boundaries</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>æ·±åº¦å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
        <tag>è‹±è¯­</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±åº¦å­¦ä¹ ç¬”è®°(äºŒ)---æ¡†æ¶</title>
    <url>/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(%E4%BA%8C)---%E6%A1%86%E6%9E%B6/</url>
    <content><![CDATA[<p>æ˜¨å¤©å¤§è‡´äº†è§£äº†ä¸€ä¸‹ä»€ä¹ˆæ˜¯æ·±åº¦å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œäººå·¥æ™ºèƒ½ï¼Œæœºå™¨å­¦ä¹ ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»ï¼Œæ·±åº¦å­¦ä¹ æ¡†æ¶çš„æ€»è§ˆã€‚ä»Šå¤©æ¥æ‰¾æ‰¾å„ä¸ªæ¡†æ¶ä¹‹é—´çš„å¯¹æ¯”å’Œç›®å‰æ¯”è¾ƒå¸¸ç”¨çš„tensorflowå’Œpytorchä¸€äº›èµ„æ–™ã€‚æˆ‘è§‰å¾—æ¡†æ¶å±å®æ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œè®©æˆ‘å¯ä»¥ä¸ç”¨å†™CUDAï¼Œåæ­£Djangoçš„ORMæ˜¯å±å®èˆ’æœï¼Œè½»æ¾æ‘†è„±å·¨é•¿çš„MySqlï¼Œä½†æ˜¯ä¼šæœ‰ä¸€äº›è‡ªå·±ç‰¹æ®Šçš„åœ°æ–¹ï¼Œæ¯”å¦‚æ’å…¥ä¸€ä¸ªå¸¦å¤–é”®çš„æ•°æ®æ—¶è¦å…ˆè·å–å…¶ä¸»é”®Modelï¼Œè¿˜æ˜¯è¦å¤šäº†è§£å¤šè®°å½•ã€‚</p>
<a id="more"></a>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<p>https://www.zhihu.com/question/330766768/answer/1398232292</p>
<p>https://www.zhihu.com/question/66200879</p>
<h2 id="æ€»è§ˆ">æ€»è§ˆ</h2>
<p>ä¸Šæ¥å…ˆå‘ä¸€å¼ å›¾</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201013092727.jpg"
alt="v2-d2af0dc0108888b3eea1140d20656883_720w" />
<figcaption
aria-hidden="true">v2-d2af0dc0108888b3eea1140d20656883_720w</figcaption>
</figure>
<h2 id="caffe">Caffe</h2>
<p><strong>æ¦‚è¿°ï¼š</strong>Caffe æ˜¯ä¼¯å…‹åˆ©çš„è´¾æ‰¬æ¸…ä¸»å¯¼å¼€å‘ï¼Œä»¥ C++/CUDA
ä»£ç ä¸ºä¸»ï¼Œæœ€æ—©çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ä¹‹ä¸€ï¼Œæ¯”TensorFlowã€Mxnetã€Pytorch
ç­‰éƒ½æ›´æ—©ï¼Œéœ€è¦è¿›è¡Œç¼–è¯‘å®‰è£…ã€‚æ”¯æŒå‘½ä»¤è¡Œã€Python å’Œ Matlab
æ¥å£ï¼Œå•æœºå¤šå¡ã€å¤šæœºå¤šå¡ç­‰éƒ½å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨ã€‚ç›®å‰ master
åˆ†æ”¯å·²ç»åœæ­¢æ›´æ–°ï¼Œintel åˆ†æ”¯ç­‰è¿˜åœ¨ç»´æŠ¤ï¼Œcaffe æ¡†æ¶å·²ç»éå¸¸ç¨³å®šã€‚</p>
<p><strong>é€šç”¨æµç¨‹ï¼š</strong></p>
<p>å‡†å¤‡æ•°æ®â€”â€”å®šä¹‰ç½‘ç»œâ€”â€”é…ç½®è®­ç»ƒå‚æ•°â€”â€”è®­ç»ƒ/æµ‹è¯•</p>
<p>ä»¥ä¸Šçš„æµç¨‹ç›¸äº’ä¹‹é—´æ˜¯è§£è€¦åˆçš„ï¼Œæ‰€ä»¥ caffe çš„ä½¿ç”¨éå¸¸ç®€å•ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>ä»¥ C++/CUDA/python ä»£ç ä¸ºä¸»ï¼Œé€Ÿåº¦å¿«ï¼Œæ€§èƒ½é«˜ã€‚</li>
<li>å·¥å‚è®¾è®¡æ¨¡å¼ï¼Œä»£ç ç»“æ„æ¸…æ™°ï¼Œå¯è¯»æ€§å’Œæ‹“å±•æ€§å¼ºã€‚</li>
<li>æ”¯æŒå‘½ä»¤è¡Œã€Python å’Œ Matlab æ¥å£ï¼Œä½¿ç”¨æ–¹ä¾¿ã€‚</li>
<li>CPU å’Œ GPU ä¹‹é—´åˆ‡æ¢æ–¹ä¾¿ï¼Œå¤š GPU è®­ç»ƒæ–¹ä¾¿ã€‚</li>
<li>å·¥å…·ä¸°å¯Œï¼Œç¤¾åŒºæ´»è·ƒã€‚</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>æºä»£ç ä¿®æ”¹é—¨æ§›è¾ƒé«˜ï¼Œéœ€è¦å®ç°å‰å‘åå‘ä¼ æ’­ï¼Œä»¥åŠ CUDA ä»£ç ã€‚</li>
<li>ä¸æ”¯æŒè‡ªåŠ¨æ±‚å¯¼ã€‚</li>
<li>ä¸æ”¯æŒæ¨¡å‹çº§å¹¶è¡Œï¼Œåªæ”¯æŒæ•°æ®çº§å¹¶è¡Œ</li>
<li>ä¸é€‚åˆäºéå›¾åƒä»»åŠ¡ã€‚</li>
</ul>
<h2 id="tensorflow">Tensorflow</h2>
<p><strong>æ¦‚è¿°ï¼š</strong>TensorFlow æ˜¯ Google brain
æ¨å‡ºçš„å¼€æºæœºå™¨å­¦ä¹ åº“ï¼Œå¯ç”¨ä½œå„ç±»æ·±åº¦å­¦ä¹ ç›¸å…³çš„ä»»åŠ¡ã€‚TensorFlow = Tensor
+ Flowï¼ŒTensor å°±æ˜¯å¼ é‡ï¼Œä»£è¡¨ N ç»´æ•°ç»„ï¼Œè¿™ä¸ Caffe ä¸­çš„ blob
æ˜¯ç±»ä¼¼çš„ï¼›Flow å³æµï¼Œä»£è¡¨åŸºäºæ•°æ®æµå›¾çš„è®¡ç®—ã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong>TensorFlow
æœ€å¤§çš„ç‰¹ç‚¹æ˜¯è®¡ç®—å›¾ï¼Œå³å…ˆå®šä¹‰å¥½å›¾ï¼Œç„¶åè¿›è¡Œè¿ç®—ï¼Œè€Œä¸”ä»£ç éƒ½åŒ…å«ä¸¤éƒ¨åˆ†ï¼š</p>
<p>åˆ›å»ºè®¡ç®—å›¾ï¼Œè¡¨ç¤ºè®¡ç®—çš„æ•°æ®æµã€‚å¯ä»¥å°†å®ƒçœ‹åšæ˜¯Caffe ä¸­çš„ prototxt
çš„å®šä¹‰è¿‡ç¨‹ã€‚</p>
<p>è¿è¡Œä¼šè¯ï¼Œæ‰§è¡Œå›¾ä¸­çš„è¿ç®—ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ Caffe ä¸­çš„è®­ç»ƒè¿‡ç¨‹ã€‚ä¼šè¯æ¯” Caffe
çµæ´»å¾ˆå¤šï¼Œç”±äºæ˜¯ Python æ¥å£ï¼Œå–ä¸­é—´ç»“æœåˆ†æï¼ŒDebug ç­‰æ–¹ä¾¿å¾ˆå¤šã€‚</p>
<h2 id="pytorch">Pytorch</h2>
<p><strong>æ¦‚è¿°ï¼š</strong> Pytorch = Python + Torchã€‚Torch
æ˜¯çº½çº¦å¤§å­¦çš„ä¸€ä¸ªæœºå™¨å­¦ä¹ å¼€æºæ¡†æ¶ï¼Œä½†æ˜¯ç”±äºä½¿ç”¨çš„æ˜¯ä¸€ç§ç»å¤§éƒ¨åˆ†äººç»å¯¹æ²¡æœ‰å¬è¿‡çš„
Lua è¯­è¨€ï¼Œå¯¼è‡´å¾ˆå¤šäººéƒ½è¢«å“é€€ã€‚åæ¥éšç€ Python çš„ç”Ÿæ€è¶Šæ¥è¶Šå®Œå–„ï¼ŒFacebook
äººå·¥æ™ºèƒ½ç ”ç©¶é™¢æ¨å‡ºäº† Pytorch å¹¶å¼€æºã€‚Pytorch ä¸æ˜¯ç®€å•çš„å°è£… Torch
å¹¶æä¾›Python æ¥å£ï¼Œè€Œæ˜¯å¯¹ Tensor ä»¥ä¸Šçš„æ‰€æœ‰ä»£ç è¿›è¡Œäº†é‡æ„ï¼ŒåŒ TensorFlow
ä¸€æ ·ï¼Œå¢åŠ äº†è‡ªåŠ¨æ±‚å¯¼ã€‚åæ¥ Caffe2 å…¨éƒ¨å¹¶å…¥
Pytorchï¼Œå¦‚ä»Šå·²ç»æˆä¸ºäº†éå¸¸æµè¡Œçš„æ¡†æ¶ã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>åŠ¨æ€å›¾è®¡ç®—ã€‚TensorFlow ä»é™æ€å›¾å‘å±•åˆ°äº†åŠ¨æ€å›¾æœºåˆ¶ Eager Execution
ï¼Œpytorch åˆ™ä¸€å¼€å§‹å°±æ˜¯åŠ¨æ€å›¾æœºåˆ¶ã€‚åŠ¨æ€å›¾æœºåˆ¶çš„å¥½å¤„å°±æ˜¯éšæ—¶éšåœ°ä¿®æ”¹ï¼Œéšå¤„
debug ï¼Œæ²¡æœ‰ç±»ä¼¼ç¼–è¯‘çš„è¿‡ç¨‹ã€‚</li>
<li>ç®€å•ã€‚ç›¸æ¯” TensorFlow1.0 ä¸­ Tensorã€Variableã€Session
ç­‰æ¦‚å¿µå……æ–¥ï¼Œæ•°æ®è¯»å–æ¥å£é¢‘ç¹æ›´æ–°ï¼Œtf.nnã€tf.layersã€tf.contrib
å„è‡ªé‡å¤ï¼ŒPytorch åˆ™æ˜¯ä» Tensor åˆ° Variable å†åˆ°nn.Module
ï¼Œæœ€æ–°çš„Pytorch å·²ç»å°† Tensor å’Œ Variable
åˆå¹¶ï¼Œè¿™åˆ†åˆ«å°±æ˜¯ä»æ•°æ®å¼ é‡åˆ°ç½‘ç»œçš„æŠ½è±¡å±‚æ¬¡çš„é€’è¿›ã€‚</li>
</ul>
<h2 id="mxnet">Mxnet</h2>
<p><strong>æ¦‚è¿°ï¼š</strong> Mxnet
æ˜¯ç”±ææ²ç­‰äººé¢†å¯¼å¼€å‘çš„éå¸¸çµæ´»ï¼Œæ‰©å±•æ€§å¾ˆå¼ºçš„æ¡†æ¶ï¼Œè¢« Amazon
å®šä¸ºå®˜æ–¹æ¡†æ¶ã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong> Mxnet
åŒæ—¶æ‹¥æœ‰å‘½ä»¤å¼ç¼–ç¨‹å’Œç¬¦å·å¼ç¼–ç¨‹çš„ç‰¹ç‚¹ã€‚åœ¨å‘½ä»¤å¼ç¼–ç¨‹ä¸Š MXNet
æä¾›å¼ é‡è¿ç®—ï¼Œè¿›è¡Œæ¨¡å‹çš„è¿­ä»£è®­ç»ƒå’Œæ›´æ–°ä¸­çš„æ§åˆ¶é€»è¾‘ï¼›åœ¨å£°æ˜å¼ç¼–ç¨‹ä¸­ MXNet
æ”¯æŒç¬¦å·è¡¨è¾¾å¼ï¼Œç”¨æ¥æè¿°ç¥ç»ç½‘ç»œï¼Œå¹¶åˆ©ç”¨ç³»ç»Ÿæä¾›çš„è‡ªåŠ¨æ±‚å¯¼æ¥è®­ç»ƒæ¨¡å‹ã€‚Mxnet
æ€§èƒ½éå¸¸é«˜ï¼Œæ¨èèµ„æºä¸å¤Ÿçš„åŒå­¦ä½¿ç”¨ã€‚</p>
<h2 id="keras">Keras</h2>
<p><strong>æ¦‚è¿°ï¼š</strong> Keras
æ˜¯ä¸€ä¸ªå¯¹å°ç™½ç”¨æˆ·éå¸¸å‹å¥½è€Œç®€å•çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œä¸¥æ ¼æ¥è¯´å¹¶ä¸æ˜¯ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œè€Œæ˜¯ä¸€ä¸ªé«˜åº¦æ¨¡å—åŒ–çš„ç¥ç»ç½‘ç»œåº“ã€‚Keras
åœ¨é«˜å±‚å¯ä»¥è°ƒç”¨ TensorFlowï¼ŒCNTKï¼ŒTheano ï¼Œè¿˜æœ‰æ›´å¤šçš„åº“ä¹Ÿåœ¨è¢«é™†ç»­æ”¯æŒä¸­ã€‚
Keras çš„ç‰¹ç‚¹æ˜¯èƒ½å¤Ÿå¿«é€Ÿå®ç°æ¨¡å‹çš„æ­å»ºï¼Œæ˜¯é«˜æ•ˆåœ°è¿›è¡Œç§‘å­¦ç ”ç©¶çš„å…³é”®ã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>é«˜åº¦æ¨¡å—åŒ–ï¼Œæ­å»ºç½‘ç»œéå¸¸ç®€æ´ã€‚</li>
<li>API å¾ˆç®€å•ï¼Œå…·æœ‰ç»Ÿä¸€çš„é£æ ¼ã€‚</li>
<li>å®¹æ˜“æ‰©å±•ï¼Œåªéœ€ä½¿ç”¨ python æ·»åŠ æ–°ç±»å’Œå‡½æ•°ã€‚</li>
</ul>
<h2 id="paddlepaddle">Paddlepaddle</h2>
<p><strong>æ¦‚è¿°ï¼š</strong> æ­£æ‰€è°“ Google æœ‰ Tensorflowï¼ŒFacebook æœ‰
Pytorchï¼ŒAmazon æœ‰ Mxnetï¼Œä½œä¸ºå›½å†…æœºå™¨å­¦ä¹ çš„å…ˆé©±ï¼Œç™¾åº¦ä¹Ÿæœ‰
PaddlePaddleï¼Œå…¶ä¸­ Paddle å³ Parallel Distributed Deep Learning
(å¹¶è¡Œåˆ†å¸ƒå¼æ·±åº¦å­¦ä¹ )ã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong>paddle çš„æ€§èƒ½ä¹Ÿå¾ˆä¸é”™ï¼Œæ•´ä½“ä½¿ç”¨èµ·æ¥ä¸
tensorflow
éå¸¸ç±»ä¼¼ï¼Œæ‹¥æœ‰ä¸­æ–‡å¸®åŠ©æ–‡æ¡£ï¼Œåœ¨ç™¾åº¦å†…éƒ¨ä¹Ÿè¢«ç”¨äºæ¨èç­‰ä»»åŠ¡ã€‚å¦å¤–ï¼Œé…å¥—äº†ä¸€ä¸ªå¯è§†åŒ–æ¡†æ¶
visualdlï¼Œä¸ tensorboard ä¹Ÿæœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ã€‚</p>
<h2 id="cntk">CNTK</h2>
<p><strong>æ¦‚è¿°ï¼š</strong>CNTK
æ˜¯å¾®è½¯å¼€æºçš„æ·±åº¦å­¦ä¹ å·¥å…·åŒ…ï¼Œå®ƒé€šè¿‡æœ‰å‘å›¾å°†ç¥ç»ç½‘ç»œæè¿°ä¸ºä¸€ç³»åˆ—è®¡ç®—æ­¥éª¤ã€‚åœ¨æœ‰å‘å›¾ä¸­ï¼Œå¶èŠ‚ç‚¹è¡¨ç¤ºè¾“å…¥å€¼æˆ–ç½‘ç»œå‚æ•°ï¼Œè€Œå…¶ä»–èŠ‚ç‚¹è¡¨ç¤ºå…¶è¾“å…¥ä¸Šçš„çŸ©é˜µè¿ç®—ã€‚CNTK
å…è®¸ç”¨æˆ·éå¸¸è½»æ¾åœ°å®ç°å’Œç»„åˆæµè¡Œçš„æ¨¡å‹ï¼ŒåŒ…æ‹¬å‰é¦ˆ
DNNï¼Œå·ç§¯ç½‘ç»œï¼ˆCNNï¼‰å’Œå¾ªç¯ç½‘ç»œï¼ˆRNN /
LSTMï¼‰ã€‚ä¸ç›®å‰å¤§éƒ¨åˆ†æ¡†æ¶ä¸€æ ·ï¼Œå®ç°äº†è‡ªåŠ¨æ±‚å¯¼ï¼Œåˆ©ç”¨éšæœºæ¢¯åº¦ä¸‹é™æ–¹æ³•è¿›è¡Œä¼˜åŒ–ã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>CNTK æ€§èƒ½è¾ƒé«˜ï¼ŒæŒ‰ç…§å…¶å®˜æ–¹çš„è¯´æ³•ï¼Œæ¯”å…¶ä»–çš„å¼€æºæ¡†æ¶æ€§èƒ½éƒ½æ›´é«˜ã€‚</li>
<li>é€‚åˆåšè¯­éŸ³ï¼ŒCNTK
æœ¬å°±æ˜¯å¾®è½¯è¯­éŸ³å›¢é˜Ÿå¼€æºçš„ï¼Œè‡ªç„¶æ˜¯æ›´åˆé€‚åšè¯­éŸ³ä»»åŠ¡ï¼Œä½¿ç”¨ RNN
ç­‰æ¨¡å‹ï¼Œä»¥åŠåœ¨æ—¶ç©ºå°ºåº¦åˆ†åˆ«è¿›è¡Œå·ç§¯éå¸¸å®¹æ˜“ã€‚</li>
</ul>
<h2 id="matconvnet">Matconvnet</h2>
<p><strong>æ¦‚è¿°ï¼š</strong>ä¸åŒäºå„ç±»æ·±åº¦å­¦ä¹ æ¡†æ¶å¹¿æ³›ä½¿ç”¨çš„è¯­è¨€
Pythonï¼ŒMatConvnet æ˜¯ç”¨ matlab ä½œä¸ºæ¥å£è¯­è¨€çš„å¼€æºæ·±åº¦å­¦ä¹ åº“ï¼Œåº•å±‚è¯­è¨€æ˜¯
cudaã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong>å› ä¸ºæ˜¯åœ¨ matlab ä¸‹é¢ï¼Œæ‰€ä»¥ debug
çš„è¿‡ç¨‹éå¸¸çš„æ–¹ä¾¿ï¼Œè€Œä¸”æœ¬èº«å°±æœ‰å¾ˆå¤šçš„ç ”ç©¶è€…ä¸€ç›´éƒ½ä½¿ç”¨ matlab è¯­è¨€ã€‚</p>
<h2 id="deeplearning4j">Deeplearning4j</h2>
<p><strong>æ¦‚è¿°ï¼š</strong>ä¸åŒäºæ·±åº¦å­¦ä¹ å¹¿æ³›åº”ç”¨çš„è¯­è¨€ Pythonï¼ŒDL4J æ˜¯ä¸º
java å’Œ jvm ç¼–å†™çš„å¼€æºæ·±åº¦å­¦ä¹ åº“ï¼Œæ”¯æŒå„ç§æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong>DL4J æœ€é‡è¦çš„ç‰¹ç‚¹æ˜¯æ”¯æŒåˆ†å¸ƒå¼ï¼Œå¯ä»¥åœ¨ Spark å’Œ
Hadoop ä¸Šè¿è¡Œï¼Œæ”¯æŒåˆ†å¸ƒå¼ CPU å’Œ GPU è¿è¡Œã€‚DL4J
æ˜¯ä¸ºå•†ä¸šç¯å¢ƒï¼Œè€Œéç ”ç©¶æ‰€è®¾è®¡çš„ï¼Œå› æ­¤æ›´åŠ è´´è¿‘æŸäº›ç”Ÿäº§ç¯å¢ƒã€‚</p>
<h2 id="chainer">Chainer</h2>
<p><strong>æ¦‚è¿°ï¼š</strong>chainer ä¹Ÿæ˜¯ä¸€ä¸ªåŸºäº python
çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œèƒ½å¤Ÿè½»æ¾ç›´è§‚åœ°ç¼–å†™å¤æ‚çš„ç¥ç»ç½‘ç»œæ¶æ„ï¼Œåœ¨æ—¥æœ¬ä¼ä¸šä¸­åº”ç”¨å¹¿æ³›ã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong> chainer é‡‡ç”¨ â€œDefine-by-Runâ€
æ–¹æ¡ˆï¼Œå³é€šè¿‡å®é™…çš„å‰å‘è®¡ç®—åŠ¨æ€å®šä¹‰ç½‘ç»œã€‚æ›´ç¡®åˆ‡åœ°è¯´ï¼Œchainer
å­˜å‚¨è®¡ç®—å†å²è€Œä¸æ˜¯ç¼–ç¨‹é€»è¾‘ï¼Œpytorch çš„åŠ¨æ€å›¾æœºåˆ¶æ€æƒ³ä¸»è¦å°±æ¥æºäº
chaineã€‚</p>
<h2 id="lasagnetheano">Lasagne/Theano</h2>
<p><strong>æ¦‚è¿°ï¼š</strong> Lasagen å…¶å®å°±æ˜¯å°è£…äº†çš„
theanoï¼Œåè€…æ˜¯ä¸€ä¸ªå¾ˆè€ç‰Œçš„æ¡†æ¶ï¼Œåœ¨ 2008 å¹´çš„æ—¶å€™å°±ç”± Yoshua Bengio
é¢†å¯¼çš„è’™ç‰¹åˆ©å°” LISA ç»„å¼€æºäº†ã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong> theano
çš„ä½¿ç”¨æˆæœ¬é«˜ï¼Œéœ€è¦ä»åº•å±‚å¼€å§‹å†™ä»£ç æ„å»ºæ¨¡å‹ï¼ŒLasagen å¯¹å…¶è¿›è¡Œäº†å°è£…ï¼Œä½¿å¾—
theano ä½¿ç”¨èµ·æ¥æ›´ç®€å•ã€‚</p>
<h2 id="darknet">Darknet</h2>
<p><strong>æ¦‚è¿°ï¼š</strong> Darknet æœ¬èº«æ˜¯ Joseph Redmon ä¸ºäº† Yolo
ç³»åˆ—å¼€å‘çš„æ¡†æ¶ã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong> Darknet å‡ ä¹æ²¡æœ‰ä¾èµ–åº“ï¼Œæ˜¯ä» C å’Œ CUDA
å¼€å§‹æ’°å†™çš„æ·±åº¦å­¦ä¹ å¼€æºæ¡†æ¶ï¼Œæ”¯æŒ CPU å’Œ GPUã€‚Darknetè·Ÿ caffe
é¢‡æœ‰å‡ åˆ†ç›¸ä¼¼ä¹‹å¤„ï¼Œå´æ›´åŠ è½»é‡çº§ï¼Œéå¸¸å€¼å¾—å­¦ä¹ ä½¿ç”¨ã€‚</p>
<h2 id="æ¨¡å‹çš„æ±‚å¯¼">æ¨¡å‹çš„æ±‚å¯¼</h2>
<p>åœ¨ä¸Šé¢çš„å­¦ä¹ ä¸­ç»å¸¸å¯ä»¥çœ‹åˆ°å¾ˆå¤šæ¡†æ¶å…·æœ‰è‡ªåŠ¨æ±‚å¯¼(Automatic
Differentiation,AD)çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯è‡ªåŠ¨æ±‚å¯¼åŠŸèƒ½å‘¢ï¼Œäºæ˜¯æˆ‘åˆæ‰¾äº†æ‰¾èµ„æ–™è®°å½•å¦‚ä¸‹ï¼š</p>
<p>æœ€è¿‘åœ¨ä¸Šå…³äº è‡ªåŠ¨æ±‚å¯¼ (Automatic Differentiation, AD) çš„è¯¾ç¨‹ (<a
href="https://link.zhihu.com/?target=https%3A//harvard-iacs.github.io/2019-CS207/">CS207</a>)ï¼Œæ­£å¥½æ¥å›ç­”ä¸€ä¸‹ã€‚
å…¶å®ä¸åªæ˜¯ TensorFlowï¼ŒPytorch è¿™äº›ä¸ºæ·±åº¦å­¦ä¹ è®¾è®¡çš„åº“ç”¨åˆ°
ADï¼Œå¾ˆå¤šç‰©ç†ï¼ŒåŒ–å­¦ç­‰åŸºç¡€ç§‘å­¦è®¡ç®—è½¯ä»¶ä¹Ÿåœ¨å¤§é‡çš„ä½¿ç”¨
ADã€‚è€Œä¸”ï¼Œå…¶å®TensorFlowã€Pytorch ä¹Ÿå¹¶éåªèƒ½ç”¨äºdeep
learningï¼Œæœ¬è´¨ä¸Šä»–ä»¬æ˜¯ä¸€ç§</p>
<blockquote>
<p>Tensor computation built on a tape-based autograd system
--å¼•è‡ªPytorch</p>
<p>å¼ é‡è®¡ç®—å»ºç«‹åœ¨ä¸€ä¸ªåŸºäºå·ç§¯çš„è‡ªåŠ¨æ¢¯åº¦ç³»ç»Ÿä¹‹ä¸Š(æ¸£æ¸£çš„è‡ªç¿»)</p>
</blockquote>
<p>è‡ªåŠ¨æ±‚å¯¼åˆ†æˆä¸¤ç§æ¨¡å¼ï¼Œä¸€ç§æ˜¯ <code>Forward Mode</code>ï¼Œå¦å¤–ä¸€ç§æ˜¯
<code>Reverse Mode</code>ã€‚ä¸€èˆ¬çš„æœºå™¨å­¦ä¹ åº“ç”¨çš„åä¸€ç§ï¼ŒåŸå› åé¢è¯´ã€‚</p>
<h3 id="forward-mode">Forward Mode</h3>
<p>åŸºäºçš„å°±æ˜¯å°±æœ€åŸºæœ¬çš„ <code>é“¾å¼æ³•åˆ™ chain rule</code>,</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201013102123.svg"
alt="equation" />
<figcaption aria-hidden="true">equation</figcaption>
</figure>
<p>è¿™ä¸ª <code>Forward Mode</code> å°±æ˜¯ç”¨
<code>chain rule</code>ï¼Œåƒå‰¥æ´‹è‘±ä¸€æ ·ä¸€å±‚ä¸€å±‚ç®—å‡ºæ¥ï¼Œä»¥</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201013102157.svg"
alt="equation (1)" />
<figcaption aria-hidden="true">equation (1)</figcaption>
</figure>
<p>ä¸ºä¾‹ã€‚æˆ‘ä»¬å¯ä»¥æŠŠä»–çš„è®¡ç®—å›¾ç”»å‡ºæ¥ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201013102221.jpg"
alt="v2-e9c6ceeb331fc63e511e749c685af544_720w" />
<figcaption
aria-hidden="true">v2-e9c6ceeb331fc63e511e749c685af544_720w</figcaption>
</figure>
<p>å‡å¦‚æˆ‘è¦è®¡ç®—<span
class="math inline">\(f&#39;(\frac{\pi}{16})\)</span>ï¼Œå¯ä»¥æ ¹æ®ä¸Šé¢çš„å›¾å¾—åˆ°ä¸€ä¸ªè¡¨æ ¼</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201013102339.jpg"
alt="v2-084054f3b8b43c30ca32a7e33b0ae1b1_720w" />
<figcaption
aria-hidden="true">v2-084054f3b8b43c30ca32a7e33b0ae1b1_720w</figcaption>
</figure>
<p>é‚£ä¹ˆä¸Šé¢è¿™ä¸ªè¡¨é‡Œï¼Œæ¯ä¸€æ­¥æˆ‘ä»¬æ—¢è¦ç®— forward çš„å€¼ <span
class="math inline">\(f(a)\)</span> ï¼Œä¹Ÿè¦ç®— backward çš„å€¼<span
class="math inline">\(f&#39;(a)\)</span>ã€‚</p>
<p><strong>æœ‰æ²¡æœ‰åŠæ³•åŒæ—¶æŠŠè¿™ä¸¤ä¸ªå€¼ç®—å‡ºæ¥å‘¢ï¼Ÿ</strong></p>
<p>é¦–å…ˆå¼•å…¥ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼ŒäºŒå…ƒæ•°ã€‚äºŒå…ƒæ•°å…¶å®è·Ÿå¤æ•°å·®ä¸å¤šï¼Œä¹Ÿæ˜¯ä¸€ç§å®æ•°çš„æ¨å¹¿ã€‚æˆ‘ä»¬å›å¿†ä¸€ä¸‹ï¼Œä¸€ä¸ªå¤æ•°å¯ä»¥å†™æˆè¿™æ ·çš„å½¢å¼ï¼š</p>
<p>äºŒå…ƒæ•°å…¶å®è·Ÿå¤æ•°å·®ä¸å¤šï¼Œä¹Ÿæ˜¯ä¸€ç§å®æ•°çš„æ¨å¹¿ã€‚æˆ‘ä»¬å›å¿†ä¸€ä¸‹ï¼Œä¸€ä¸ªå¤æ•°å¯ä»¥å†™æˆè¿™æ ·çš„å½¢å¼ï¼š</p>
<p><span class="math inline">\(z = a + ib\)</span> ; <span
class="math inline">\(i^2 = -1\)</span></p>
<p>å¯¹äºå¤æ•°çš„ç†è§£ï¼Œä¸€ä¸ªæ¯”è¾ƒç›´è§‚çš„ä¾‹å­å°±æ˜¯ã€‚æœ¬æ¥å®æ•°éƒ½æ˜¯åœ¨ä¸€ä¸ªå®æ•°è½´ï¼ˆxè½´ï¼‰çš„ã€‚å¤éƒ¨
<span class="math inline">\(ib\)</span> ç›¸å½“äºå¤šäº†ä¸€ä¸ª y è½´å‡ºæ¥ã€‚</p>
<p>é‚£ä¹ˆäºŒå…ƒæ•°æ˜¯è¿™ä¸ªäºšå­ï¼š</p>
<p><span class="math inline">\(z = a + \epsilon b\)</span> ; <span
class="math inline">\(\epsilon^2 = 0\)</span></p>
<p>è¿™ä¸ªäºŒå…ƒæ•°å¾ˆç¥å¥‡çš„ä¸€ä¸ªæ€§è´¨æ˜¯ï¼Œä½ å¸¦ç€ä»–åšè¿ç®—ï¼Œå¾—å‡ºæ¥çš„äºŒå…ƒéƒ¨ <span
class="math inline">\(\epsilon b\)</span>
å‰é¢çš„ç³»æ•°ï¼Œå°±æ˜¯å¯¼æ•°ã€‚ä¸¾ä¸ªæ —å­ï¼Œ æˆ‘ä»¬è¦æ±‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201013145302.svg"
alt="equation (4)" />
<figcaption aria-hidden="true">equation (4)</figcaption>
</figure>
<p>æˆ‘ä»¬å¯ä»¥ä»¤ <span class="math inline">\(x = a + \epsilon
b\)</span>ï¼Œæ‰€ä»¥</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201013145314.svg"
alt="equation (5)" />
<figcaption aria-hidden="true">equation (5)</figcaption>
</figure>
<p>æˆ‘ä»¬æŠŠä¸Šé¢çš„ä¸‰è§’å‡½æ•°å±•å¼€ï¼Œ</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201013145332.svg"
alt="equation (6)" />
<figcaption aria-hidden="true">equation (6)</figcaption>
</figure>
<p>å¾—åˆ°</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201013145408.svg"
alt="equation (7)" />
<figcaption aria-hidden="true">equation (7)</figcaption>
</figure>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒäºŒå…ƒéƒ¨ <span class="math inline">\(\cos(a)\)</span>
æ°å¥½å°±æ˜¯åŸå‡½æ•° <span class="math inline">\(\sin(a)\)</span> çš„å¯¼æ•°ã€‚</p>
<h3 id="reverse-mode">Reverse Mode</h3>
<p>è¿™ä¸ªæ¨¡å¼å°±æ¯”è¾ƒç®€å•å’Œç›´æ¥äº†ã€‚å°±æ˜¯è¯´ï¼Œä¸Šé¢é‚£ä¸ªè¡¨é‡Œé¢ï¼Œæˆ‘æ¯æ¬¡åªè®¡ç®—æ¯ä¸ªâ€œå°è¿ç®—â€çš„æ¢¯åº¦ï¼ˆä¹Ÿæ˜¯æ˜¯é‚£ä¸ªå›¾é‡Œé¢çš„æ¯ä¸ªèŠ‚ç‚¹ï¼‰ï¼Œæœ€åæˆ‘å†æ ¹æ®
<code>chain rule</code> æŠŠâ€œå°è¿ç®—â€ä»¬çš„æ¢¯åº¦ä¸²èµ·æ¥ã€‚å…¶å®
<code>forward mode</code> å’Œ <code>reverse mode</code>
å¹¶æ²¡æœ‰æœ¬è´¨çš„åŒºåˆ«ï¼Œåªæ˜¯è¯´ï¼Œ<code>reverse mode</code>åœ¨è®¡ç®—æ¢¯åº¦å…ˆä¸è€ƒè™‘
<code>chain rule</code>ï¼Œæœ€åå†ç”¨ <code>chain rule</code>
æŠŠæ¢¯åº¦ç»„èµ·æ¥ã€‚è€Œå‰è€…åˆ™æ˜¯ç›´æ¥å°±åº”ç”¨ <code>chain rule</code>
æ¥ç®—æ¢¯åº¦ã€‚</p>
<p>ä¸‹é¢æ€»ç»“ä¸€ä¸‹ <code>reverse mode</code> çš„æµç¨‹ï¼š</p>
<ul>
<li>åˆ›å»ºè®¡ç®—å›¾</li>
<li>è®¡ç®—å‰å‘ä¼ æ’­çš„å€¼åŠæ¯ä¸ªæ“ä½œçš„æ¢¯åº¦
<ul>
<li>è¿™é‡Œæ²¡æœ‰ <code>chain rule</code> çš„äº‹</li>
<li>æ¯”å¦‚è¿™ä¸ªæ“ä½œæ˜¯ä¹˜æ³• <span class="math inline">\(x_3 =
x_1*x_2\)</span>ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦æŠŠ <span
class="math inline">\(\frac{\partial x_3}{\partial x_2}\)</span> ä»¥åŠ
<span class="math inline">\(\frac{\partial x_3}{\partial x_1}\)</span>
ç®—å‡ºæ¥å°±å¥½äº†</li>
</ul></li>
<li>åå‘è®¡ç®—æ¢¯åº¦ä»æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼ˆæ“ä½œï¼‰å¼€å§‹ï¼š<span
class="math inline">\(\overline{x_N} = \frac{\partial f}{\partial x_N} =
1\)</span> , <span class="math inline">\(f = x_N\)</span></li>
<li>æ ¹æ® <code>chain rule</code> é€å±‚æ¨è¿› <span
class="math inline">\(\overline{x_{N-1}} = \frac{\partial f}{\partial
x_N}\frac{\partial x_N}{\partial x_{N-1}}\)</span></li>
<li>å‡å¦‚æœ‰å¤šæ¡æ±‚å¯¼è·¯å¾„ï¼Œæˆ‘ä»¬è¦æŠŠä»–ä»¬åŠ èµ·æ¥ï¼Œä¾‹å¦‚ <span
class="math inline">\(\overline{x_3} = \frac{\partial f}{\partial x_3} =
\frac{\partial f}{\partial x_4}\frac{\partial x_4}{\partial x_3} +
\frac{\partial f}{\partial x_5}\frac{\partial x_5}{\partial
x_3}\)</span></li>
</ul>
<p>ä¸¾ä¸ªæ —å­ï¼Œæˆ‘ä»¬è¦è®¡ç®—å‡½æ•°</p>
<figure>
<img
src="https://www.zhihu.com/equation?tex=+f%5Cleft%28x%2Cy%5Cright%29+%3D+xy+%2B+%5Cexp%5Cleft%28xy%5Cright%29+"
alt="[å…¬å¼]" />
<figcaption aria-hidden="true">[å…¬å¼]</figcaption>
</figure>
<p>åœ¨ç‚¹ <span class="math inline">\(a = (1,2)\)</span> çš„å¯¼æ•°</p>
<p>é¦–å…ˆè¿˜æ˜¯å…ˆæŠŠè®¡ç®—å›¾ç”»å‡ºæ¥</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201013112920.jpg"
alt="v2-96cc3ca7e23d04e7cadc721b547c94bf_720w" />
<figcaption
aria-hidden="true">v2-96cc3ca7e23d04e7cadc721b547c94bf_720w</figcaption>
</figure>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201013112944.jpg"
alt="v2-9da449b7dea30cc4cfdb94d8c6bc7e85_720w" />
<figcaption
aria-hidden="true">v2-9da449b7dea30cc4cfdb94d8c6bc7e85_720w</figcaption>
</figure>
<p>æˆ‘ä»¬é€å±‚çš„æŠ½ä¸å‰¥èŒ§ï¼Œ</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201013113005.svg"
alt="equation (3)" />
<figcaption aria-hidden="true">equation (3)</figcaption>
</figure>
<h3 id="æ€»ç»“">æ€»ç»“</h3>
<ol type="1">
<li>å¯ä»¥å¾ˆæ¸…æ¥šçš„çœ‹åˆ°ï¼Œåœ¨è®­ç»ƒäººå·¥ç¥ç»ç½‘ç»œæ—¶å¸¸ç”¨çš„
<code>backpropagation</code> ä¹Ÿæ˜¯å±äº <code>reverse mode</code>
çš„ã€‚</li>
<li>å‡å¦‚æˆ‘ä»¬è¦è®¡ç®—çš„æ¢¯åº¦çš„å‡½æ•°æ˜¯ <span class="math inline">\(f : R^m
\rightarrow R^n\)</span></li>
</ol>
<ul>
<li>å¦‚æœ n æ˜¯ç›¸å¯¹æ¯”è¾ƒå¤§çš„è¯ï¼Œç”¨ <code>forward</code> æ¯”è¾ƒçœè®¡ç®—</li>
<li>å¦‚æœ m æ˜¯ç›¸å¯¹æ¯”è¾ƒå¤§çš„è¯ï¼Œç”¨ <code>reverse</code> æ¯”è¾ƒçœè®¡ç®—</li>
</ul>
<h2 id="tensorflowä¸pytorchä¹‹äº‰">TensorFlowä¸PyTorchä¹‹äº‰</h2>
<h3 id="æˆ‘ä»¬å¯ä»¥ç”¨-tensorflow-å’Œ-pytorch-æ„å»ºä»€ä¹ˆ">æˆ‘ä»¬å¯ä»¥ç”¨ TensorFlow
å’Œ PyTorch æ„å»ºä»€ä¹ˆï¼Ÿ</h3>
<p>ç¥ç»ç½‘ç»œèµ·åˆæ˜¯è¢«ç”¨äºè§£å†³æ‰‹å†™æ•°å­—è¯†åˆ«æˆ–ç”¨ç›¸æœºè¯†åˆ«æ±½è½¦æ³¨å†Œè½¦ç‰Œç­‰ç®€å•çš„åˆ†ç±»é—®é¢˜ã€‚ä½†éšç€è¿‘æ¥æ¡†æ¶çš„å‘å±•ä»¥åŠè‹±ä¼Ÿè¾¾é«˜è®¡ç®—æ€§èƒ½å›¾å½¢å¤„ç†å•å…ƒï¼ˆGPUï¼‰çš„è¿›æ­¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨
TB
çº§çš„æ•°æ®ä¸Šè®­ç»ƒç¥ç»ç½‘ç»œå¹¶æ±‚è§£è¿œè¿œæ›´åŠ å¤æ‚çš„é—®é¢˜ã€‚ä¸€ä¸ªå€¼å¾—æåŠçš„æˆå°±æ˜¯åœ¨
TensorFlow å’Œ PyTorch ä¸­å®ç°çš„å·ç§¯ç¥ç»ç½‘ç»œåœ¨ ImageNet
ä¸Šéƒ½è¾¾åˆ°äº†å½“å‰æœ€ä½³çš„è¡¨ç°ã€‚è®­ç»ƒåçš„æ¨¡å‹å¯ä»¥ç”¨åœ¨ä¸åŒçš„åº”ç”¨ä¸­ï¼Œæ¯”å¦‚ç›®æ ‡æ£€æµ‹ã€å›¾åƒè¯­ä¹‰åˆ†å‰²ç­‰ç­‰ã€‚</p>
<p>å°½ç®¡ç¥ç»ç½‘ç»œæ¶æ„å¯ä»¥åŸºäºä»»ä½•æ¡†æ¶å®ç°ï¼Œä½†ç»“æœå´å¹¶ä¸ä¸€æ ·ã€‚è®­ç»ƒè¿‡ç¨‹æœ‰å¤§é‡å‚æ•°éƒ½ä¸æ¡†æ¶æ¯æ¯ç›¸å…³ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ åœ¨
PyTorch ä¸Šè®­ç»ƒä¸€ä¸ªæ•°æ®é›†ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ GPU
æ¥å¢å¼ºå…¶è®­ç»ƒè¿‡ç¨‹ï¼Œå› ä¸ºå®ƒä»¬è¿è¡Œåœ¨ CUDAï¼ˆä¸€ç§ C++ åç«¯ï¼‰ä¸Šã€‚TensorFlow
ä¹Ÿèƒ½ä½¿ç”¨ GPUï¼Œä½†å®ƒä½¿ç”¨çš„æ˜¯è‡ªå·±å†…ç½®çš„ GPU
åŠ é€Ÿã€‚å› æ­¤ï¼Œæ ¹æ®ä½ æ‰€é€‰æ¡†æ¶çš„ä¸åŒï¼Œè®­ç»ƒæ¨¡å‹çš„æ—¶é—´ä¹Ÿæ€»æ˜¯å„ä¸ç›¸åŒã€‚</p>
<h3 id="pytorch-å’Œ-tensorflow-å¯¹æ¯”">PyTorch å’Œ TensorFlow å¯¹æ¯”</h3>
<p>PyTorch å’Œ TensorFlow
çš„å…³é”®å·®å¼‚æ˜¯å®ƒä»¬æ‰§è¡Œä»£ç çš„æ–¹å¼ã€‚è¿™ä¸¤ä¸ªæ¡†æ¶éƒ½åŸºäºåŸºç¡€æ•°æ®ç±»å‹å¼ é‡ï¼ˆtensorï¼‰è€Œå·¥ä½œã€‚ä½ å¯ä»¥å°†å¼ é‡çœ‹ä½œæ˜¯ä¸‹å›¾æ‰€ç¤ºçš„å¤šç»´æ•°ç»„ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201013154423.jpg"
alt="v2-eb587bbfe2fc8c7ea156f40148f9466d_720w" />
<figcaption
aria-hidden="true">v2-eb587bbfe2fc8c7ea156f40148f9466d_720w</figcaption>
</figure>
<p><strong>æœºåˆ¶ï¼šåŠ¨æ€å›¾å®šä¹‰ä¸é™æ€å›¾å®šä¹‰</strong></p>
<p>TensorFlow æ¡†æ¶ç”±ä¸¤ä¸ªæ ¸å¿ƒæ„å»ºæ¨¡å—ç»„æˆï¼š</p>
<ul>
<li>ä¸€ä¸ªç”¨äºå®šä¹‰è®¡ç®—å›¾ä»¥åŠåœ¨å„ç§ä¸åŒç¡¬ä»¶ä¸Šæ‰§è¡Œè¿™äº›å›¾çš„è¿è¡Œæ—¶é—´çš„è½¯ä»¶åº“ã€‚</li>
<li>ä¸€ä¸ªå…·æœ‰è®¸å¤šä¼˜ç‚¹çš„è®¡ç®—å›¾ï¼ˆåé¢å¾ˆå¿«å°±ä¼šä»‹ç»è¿™äº›ä¼˜ç‚¹ï¼‰ã€‚</li>
</ul>
<p>è®¡ç®—å›¾æ˜¯ä¸€ç§å°†è®¡ç®—æè¿°æˆæœ‰å‘å›¾çš„æŠ½è±¡æ–¹å¼ã€‚å›¾æ˜¯ä¸€ç§ç”±èŠ‚ç‚¹ï¼ˆé¡¶ç‚¹ï¼‰å’Œè¾¹æ„æˆçš„æ•°æ®ç»“æ„ï¼Œæ˜¯ç”±æœ‰å‘çš„è¾¹æˆå¯¹è¿æ¥çš„é¡¶ç‚¹çš„é›†åˆã€‚</p>
<p>å½“ä½ åœ¨ TensorFlow
ä¸­è¿è¡Œä»£ç æ—¶ï¼Œè®¡ç®—å›¾æ˜¯ä»¥é™æ€æ–¹å¼å®šä¹‰çš„ã€‚ä¸å¤–éƒ¨ä¸–ç•Œçš„æ‰€æœ‰é€šä¿¡éƒ½æ˜¯é€šè¿‡
tf.Sessionobject å’Œ tf.Placeholder
æ‰§è¡Œï¼Œå®ƒä»¬æ˜¯åœ¨è¿è¡Œæ—¶ä¼šè¢«å¤–éƒ¨æ•°æ®æ›¿æ¢çš„å¼ é‡ã€‚ä¾‹å¦‚ï¼Œçœ‹çœ‹ä»¥ä¸‹ä»£ç æ®µï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">15</span></span><br><span class="line">b = <span class="number">5</span></span><br><span class="line">prod = a * b</span><br><span class="line">sum = a + b</span><br><span class="line">result = prod / sum</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure>
<p>ä¸‹å›¾æ˜¯ TensorFlow
ä¸­è¿è¡Œä»£ç ä¹‹å‰ä»¥é™æ€æ–¹å¼ç”Ÿæˆè®¡ç®—å›¾çš„æ–¹å¼ã€‚è®¡ç®—å›¾çš„æ ¸å¿ƒä¼˜åŠ¿æ˜¯èƒ½å®ç°å¹¶è¡ŒåŒ–æˆ–ä¾èµ–é©±åŠ¨å¼è°ƒåº¦ï¼ˆdependency
driving schedulingï¼‰ï¼Œè¿™èƒ½è®©è®­ç»ƒé€Ÿåº¦æ›´å¿«ï¼Œæ›´æœ‰æ•ˆç‡ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201014090128.jpg"
alt="v2-55783f66a4883d2a06ff911c3f5ff647_720w" />
<figcaption
aria-hidden="true">v2-55783f66a4883d2a06ff911c3f5ff647_720w</figcaption>
</figure>
<p>ç±»ä¼¼äº TensorFlowï¼ŒPyTorch ä¹Ÿæœ‰ä¸¤ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š</p>
<ul>
<li>è®¡ç®—å›¾çš„æŒ‰éœ€å’ŒåŠ¨æ€æ„å»º</li>
<li>Autogradï¼šæ‰§è¡ŒåŠ¨æ€å›¾çš„è‡ªåŠ¨å¾®åˆ†</li>
</ul>
<p>å¯ä»¥åœ¨ä¸‹å›¾ä¸­çœ‹åˆ°ï¼Œå›¾ä¼šéšç€æ‰§è¡Œè¿‡ç¨‹è€Œæ”¹å˜å’Œæ‰§è¡ŒèŠ‚ç‚¹ï¼Œæ²¡æœ‰ç‰¹æ®Šçš„ä¼šè¯æ¥å£æˆ–å ä½ç¬¦ã€‚æ•´ä½“è€Œè¨€ï¼Œè¿™ä¸ªæ¡†æ¶ä¸
Python è¯­è¨€çš„æ•´åˆæ›´ç´§å¯†ï¼Œå¤§å¤šæ•°æ—¶å€™æ„Ÿè§‰æ›´æœ¬åœ°åŒ–ã€‚å› æ­¤ï¼ŒPyTorch æ˜¯æ›´
Python åŒ–çš„æ¡†æ¶ï¼Œè€Œ TensorFlow åˆ™æ„Ÿè§‰å®Œå…¨æ˜¯ä¸€ç§æ–°è¯­è¨€ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201013155541.jpg"
alt="v2-01031e3c22483574cc325c29a6f30a22_720w" />
<figcaption
aria-hidden="true">v2-01031e3c22483574cc325c29a6f30a22_720w</figcaption>
</figure>
<p>æ ¹æ®ä½ æ‰€ç”¨çš„æ¡†æ¶ï¼Œåœ¨è½¯ä»¶é¢†åŸŸæœ‰å¾ˆå¤§çš„ä¸åŒã€‚TensorFlow æä¾›äº†ä½¿ç”¨
TensorFlow Fold åº“å®ç°åŠ¨æ€å›¾çš„æ–¹å¼ï¼Œè€Œ PyTorch
çš„åŠ¨æ€å›¾æ˜¯å†…ç½®çš„ã€‚<strong>åˆ†å¸ƒå¼è®­ç»ƒ</strong>PyTorch å’Œ TensorFlow
çš„ä¸€ä¸ªä¸»è¦å·®å¼‚ç‰¹ç‚¹æ˜¯æ•°æ®å¹¶è¡ŒåŒ–ã€‚PyTorch ä¼˜åŒ–æ€§èƒ½çš„æ–¹å¼æ˜¯åˆ©ç”¨ Python
å¯¹å¼‚æ­¥æ‰§è¡Œçš„æœ¬åœ°æ”¯æŒã€‚è€Œç”¨ TensorFlow
æ—¶ï¼Œä½ å¿…é¡»æ‰‹åŠ¨ç¼–å†™ä»£ç ï¼Œå¹¶å¾®è°ƒè¦åœ¨ç‰¹å®šè®¾å¤‡ä¸Šè¿è¡Œçš„æ¯ä¸ªæ“ä½œï¼Œä»¥å®ç°åˆ†å¸ƒå¼è®­ç»ƒã€‚ä½†æ˜¯ï¼Œä½ å¯ä»¥å°†
PyTorch ä¸­çš„æ‰€æœ‰åŠŸèƒ½éƒ½å¤ç°åˆ° TensorFlow
ä¸­ï¼Œä½†è¿™éœ€è¦åšå¾ˆå¤šå·¥ä½œã€‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µå±•ç¤ºäº†ç”¨ PyTorch
ä¸ºæ¨¡å‹å®ç°åˆ†å¸ƒå¼è®­ç»ƒçš„ç®€å•ç¤ºä¾‹ï¼š</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201013160042.jpg"
alt="v2-e1b0acf03e0f77506053395808253a17_720w" />
<figcaption
aria-hidden="true">v2-e1b0acf03e0f77506053395808253a17_720w</figcaption>
</figure>
<p><strong>å¯è§†åŒ–</strong></p>
<p>åœ¨è®­ç»ƒè¿‡ç¨‹çš„å¯è§†åŒ–æ–¹é¢ï¼ŒTensorFlow
æ›´æœ‰ä¼˜åŠ¿ã€‚å¯è§†åŒ–èƒ½å¸®åŠ©å¼€å‘è€…è·Ÿè¸ªè®­ç»ƒè¿‡ç¨‹ä»¥åŠå®ç°æ›´æ–¹ä¾¿çš„è°ƒè¯•ã€‚TensorFlow
çš„å¯è§†åŒ–åº“åä¸º TensorBoardã€‚PyTorch å¼€å‘è€…åˆ™ä½¿ç”¨ Visdomï¼Œä½†æ˜¯ Visdom
æä¾›çš„åŠŸèƒ½å¾ˆç®€å•ä¸”æœ‰é™ï¼Œæ‰€ä»¥ TensorBoard
åœ¨è®­ç»ƒè¿‡ç¨‹å¯è§†åŒ–æ–¹é¢æ›´å¥½ã€‚TensorBoard çš„ç‰¹æ€§ï¼š</p>
<ul>
<li>è·Ÿè¸ªå’Œå¯è§†åŒ–æŸå¤±å’Œå‡†ç¡®åº¦ç­‰æŒ‡æ ‡</li>
<li>å¯è§†åŒ–è®¡ç®—å›¾ï¼ˆæ“ä½œå’Œå±‚ï¼‰</li>
<li>æŸ¥çœ‹æƒé‡ã€åå·®æˆ–å…¶å®ƒå¼ é‡éšæ—¶é—´å˜åŒ–çš„ç›´æ–¹å›¾</li>
<li>å±•ç¤ºå›¾åƒã€æ–‡æœ¬å’ŒéŸ³é¢‘æ•°æ®</li>
<li>åˆ†æ TensorFlow ç¨‹åº</li>
</ul>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201013160133.jpg"
alt="v2-453ad86b4424b3cb8a8677bdb367aa32_720w" />
<figcaption
aria-hidden="true">v2-453ad86b4424b3cb8a8677bdb367aa32_720w</figcaption>
</figure>
<p>Visdom çš„ç‰¹æ€§</p>
<ul>
<li>å¤„ç†å›è°ƒ</li>
<li>ç»˜åˆ¶å›¾è¡¨å’Œç»†èŠ‚</li>
<li>ç®¡ç†ç¯å¢ƒ</li>
</ul>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201013160145.jpg"
alt="v2-6b37a9f7b32fa35d84514613a78f6169_720w" />
<figcaption
aria-hidden="true">v2-6b37a9f7b32fa35d84514613a78f6169_720w</figcaption>
</figure>
<p><strong>ç”Ÿäº§éƒ¨ç½²</strong></p>
<p>åœ¨å°†è®­ç»ƒå¥½çš„æ¨¡å‹éƒ¨ç½²åˆ°ç”Ÿäº§æ–¹é¢ï¼ŒTensorFlow
æ˜¾ç„¶æ˜¯èµ¢å®¶ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ TensorFlow serving åœ¨ TensorFlow
ä¸­éƒ¨ç½²æ¨¡å‹ï¼Œè¿™æ˜¯ä¸€ç§ä½¿ç”¨äº† REST Client API çš„æ¡†æ¶ã€‚ä½¿ç”¨ PyTorch
æ—¶ï¼Œåœ¨æœ€æ–°çš„ 1.0
ç¨³å®šç‰ˆä¸­ï¼Œç”Ÿäº§éƒ¨ç½²è¦å®¹æ˜“ä¸€äº›ï¼Œä½†å®ƒæ²¡æœ‰æä¾›ä»»ä½•ç”¨äºåœ¨ç½‘ç»œä¸Šç›´æ¥éƒ¨ç½²æ¨¡å‹çš„æ¡†æ¶ã€‚ä½ å¿…é¡»ä½¿ç”¨
Flask æˆ– Django ä½œä¸ºåç«¯æœåŠ¡å™¨ã€‚æ‰€ä»¥ï¼Œå¦‚æœè¦è€ƒè™‘æ€§èƒ½ï¼ŒTensorFlow serving
å¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</p>
<p><strong>ç”¨ PyTorch å’Œ TensorFlow å®šä¹‰ä¸€ä¸ªç®€å•çš„ç¥ç»ç½‘ç»œ</strong></p>
<p>æˆ‘ä»¬æ¯”è¾ƒä¸€ä¸‹å¦‚ä½•åœ¨ PyTorch å’Œ TensorFlow ä¸­å£°æ˜ç¥ç»ç½‘ç»œã€‚åœ¨ PyTorch
ä¸­ï¼Œç¥ç»ç½‘ç»œæ˜¯ä¸€ä¸ªç±»ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ torch.nn
è½¯ä»¶åŒ…å¯¼å…¥æ„å»ºæ¶æ„æ‰€å¿…éœ€çš„å±‚ã€‚æ‰€æœ‰çš„å±‚éƒ½é¦–å…ˆåœ¨ <strong>init</strong>()
æ–¹æ³•ä¸­å£°æ˜ï¼Œç„¶ååœ¨ forward() æ–¹æ³•ä¸­å®šä¹‰è¾“å…¥ x
åœ¨ç½‘ç»œæ‰€æœ‰å±‚ä¸­çš„éå†æ–¹å¼ã€‚æœ€åï¼Œæˆ‘ä»¬å£°æ˜ä¸€ä¸ªå˜é‡æ¨¡å‹å¹¶å°†å…¶åˆ†é…ç»™å®šä¹‰çš„æ¶æ„ï¼ˆmodel
= NeuralNet()ï¼‰ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201013162209.webp"
alt="v2-ed5b9a19003e316bf892e8322f8d372b_720w" />
<figcaption
aria-hidden="true">v2-ed5b9a19003e316bf892e8322f8d372b_720w</figcaption>
</figure>
<p>è¿‘æœŸ Keras è¢«åˆå¹¶åˆ°äº† TensorFlow åº“ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ TensorFlow
ä½œä¸ºåç«¯çš„ç¥ç»ç½‘ç»œæ¡†æ¶ã€‚ä»é‚£æ—¶èµ·ï¼Œåœ¨ TensorFlow ä¸­å£°æ˜å±‚çš„å¥æ³•å°±ä¸ Keras
çš„å¥æ³•ç±»ä¼¼äº†ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å£°æ˜å˜é‡å¹¶å°†å…¶åˆ†é…ç»™æˆ‘ä»¬å°†è¦å£°æ˜çš„æ¶æ„ç±»å‹ï¼Œè¿™é‡Œçš„ä¾‹å­æ˜¯ä¸€ä¸ª
Sequential() æ¶æ„ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ model.add()
æ–¹æ³•ä»¥åºåˆ—æ–¹å¼ç›´æ¥æ·»åŠ å±‚ã€‚å±‚çš„ç±»å‹å¯ä»¥ä» tf.layers
å¯¼å…¥ï¼Œå¦‚ä¸‹ä»£ç ç‰‡æ®µæ‰€ç¤ºï¼š</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201013162223.webp"
alt="v2-ed5b9a19003e316bf892e8322f8d372b_720w (1)" />
<figcaption aria-hidden="true">v2-ed5b9a19003e316bf892e8322f8d372b_720w
(1)</figcaption>
</figure>
<h3 id="tensorflow-å’Œ-pytorch-çš„ä¼˜ç¼ºç‚¹">TensorFlow å’Œ PyTorch
çš„ä¼˜ç¼ºç‚¹</h3>
<p>TensorFlowå’ŒPyTorchå„æœ‰å…¶ä¼˜ç¼ºç‚¹ã€‚</p>
<p><strong>TensorFlow çš„ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>ç®€å•çš„å†…ç½®é«˜çº§ API</li>
<li>ä½¿ç”¨ TensorBoard å¯è§†åŒ–è®­ç»ƒ</li>
<li>é€šè¿‡ TensorFlow serving å®¹æ˜“å®ç°ç”Ÿäº§éƒ¨ç½²</li>
<li>å¾ˆå®¹æ˜“çš„ç§»åŠ¨å¹³å°æ”¯æŒ</li>
<li>å¼€æº</li>
<li>è‰¯å¥½çš„æ–‡æ¡£å’Œç¤¾åŒºæ”¯æŒ</li>
</ul>
<p><strong>TensorFlow çš„ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>é™æ€å›¾</li>
<li>è°ƒè¯•æ–¹æ³•</li>
<li>éš¾ä»¥å¿«é€Ÿä¿®æ”¹</li>
</ul>
<p><strong>PyTorch çš„ä¼˜ç‚¹</strong></p>
<ul>
<li>ç±» Python çš„ä»£ç </li>
<li>åŠ¨æ€å›¾</li>
<li>è½»æ¾å¿«é€Ÿçš„ç¼–è¾‘</li>
<li>è‰¯å¥½çš„æ–‡æ¡£å’Œç¤¾åŒºæ”¯æŒ</li>
<li>å¼€æº</li>
<li>å¾ˆå¤šé¡¹ç›®éƒ½ä½¿ç”¨ PyTorch</li>
</ul>
<p><strong>PyTorch çš„ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>å¯è§†åŒ–éœ€è¦ç¬¬ä¸‰æ–¹</li>
<li>ç”Ÿäº§éƒ¨ç½²éœ€è¦ API æœåŠ¡å™¨</li>
</ul>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>æ·±åº¦å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
        <tag>æ¡†æ¶</tag>
        <tag>Tensorflow</tag>
        <tag>Pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±åº¦å­¦ä¹ ç¬”è®°(å››)---ä¼˜åŒ–æ–¹æ³•ç†è§£</title>
    <url>/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(%E5%9B%9B)---%E4%BC%98%E5%8C%96%E6%96%B9%E6%B3%95%E7%90%86%E8%A7%A3/</url>
    <content><![CDATA[<p>è®°å½•ç½‘ç»œæ¨¡å‹çš„å„ç§ä¼˜åŒ–</p>
<a id="more"></a>
<h2 id="è¶…å‚æ•°">è¶…å‚æ•°</h2>
<p>æ¯”å¦‚ç®—æ³•ä¸­çš„<strong>learning rate</strong> $ a $
ï¼ˆå­¦ä¹ ç‡ï¼‰ã€<strong>iterations</strong> (æ¢¯åº¦ä¸‹é™æ³•å¾ªç¯çš„æ•°é‡) ã€$ L $
ï¼ˆéšè—å±‚æ•°ç›®ï¼‰ã€$ n^{[l]} $ ï¼ˆéšè—å±‚å•å…ƒæ•°ç›®ï¼‰ã€<strong>choice of
activation
function</strong>ï¼ˆæ¿€æ´»å‡½æ•°çš„é€‰æ‹©ï¼‰éƒ½éœ€è¦ä½ æ¥è®¾ç½®ï¼Œè¿™äº›æ•°å­—å®é™…ä¸Šæ§åˆ¶äº†æœ€åçš„å‚æ•°$
W $ å’Œ $ b $
çš„å€¼ï¼Œæ‰€ä»¥å®ƒä»¬è¢«ç§°ä½œè¶…å‚æ•°ã€‚åé¢è¿˜æœ‰å¾ˆå¤šè¶…å‚æ•°æˆ‘è¿˜æœ‰æ²¡å­¦åˆ°ï¼Œæ€»çš„æ¥è®²å°±æ˜¯èƒ½å½±å“å‚æ•°çš„æ›´é«˜çº§å‚æ•°ã€‚</p>
<p>è¶…å‚æ•°çš„å–å€¼å¹¶æ²¡æœ‰æ˜ç¡®çš„è§„å®šï¼Œè¿™ç›®å‰è¿˜æ˜¯ä¸€ä¸ªç»éªŒæ€§çš„è¿‡ç¨‹ï¼Œæ–°æ‰‹ä¸Šè·¯æœ€å¤šçš„è¿˜æ˜¯è¦ä¸æ–­çš„å°è¯•ï¼Œé€šè¿‡ä¸æ–­åœ°ä¿®æ”¹è¶…å‚æ•°å¯¹æ¯”ç»“æœæ¥ä¸æ–­ä¿®æ­£æœ€åæ‰¾åˆ°ä¸€ä¸ªç›¸å¯¹åˆé€‚çš„ã€‚</p>
<h2 id="åå·®å’Œæ–¹å·®">åå·®å’Œæ–¹å·®</h2>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201021152647.png"
alt="111" />
<figcaption aria-hidden="true">111</figcaption>
</figure>
<p>å‡è®¾è¿™å°±æ˜¯æ•°æ®é›†ï¼Œå¦‚æœç»™è¿™ä¸ªæ•°æ®é›†æ‹Ÿåˆä¸€æ¡ç›´çº¿ï¼Œå¯èƒ½å¾—åˆ°ä¸€ä¸ªé€»è¾‘å›å½’æ‹Ÿåˆï¼Œä½†å®ƒå¹¶ä¸èƒ½å¾ˆå¥½åœ°æ‹Ÿåˆè¯¥æ•°æ®ï¼Œè¿™æ˜¯é«˜åå·®ï¼ˆ<strong>high
bias</strong>ï¼‰çš„æƒ…å†µï¼Œæˆ‘ä»¬ç§°ä¸ºâ€œæ¬ æ‹Ÿåˆâ€ï¼ˆ<strong>underfitting</strong>ï¼‰ã€‚</p>
<p>ç›¸åçš„å¦‚æœæˆ‘ä»¬æ‹Ÿåˆä¸€ä¸ªéå¸¸å¤æ‚çš„åˆ†ç±»å™¨ï¼Œæ¯”å¦‚æ·±åº¦ç¥ç»ç½‘ç»œæˆ–å«æœ‰éšè—å•å…ƒçš„ç¥ç»ç½‘ç»œï¼Œå¯èƒ½å°±éå¸¸é€‚ç”¨äºè¿™ä¸ªæ•°æ®é›†ï¼Œä½†æ˜¯è¿™çœ‹èµ·æ¥ä¹Ÿä¸æ˜¯ä¸€ç§å¾ˆå¥½çš„æ‹Ÿåˆæ–¹å¼åˆ†ç±»å™¨æ–¹å·®è¾ƒé«˜ï¼ˆ<strong>high
variance</strong>ï¼‰ï¼Œæ•°æ®è¿‡åº¦æ‹Ÿåˆï¼ˆ<strong>overfitting</strong>ï¼‰ã€‚</p>
<h2 id="æ­£åˆ™åŒ–">æ­£åˆ™åŒ–</h2>
<p>æ·±åº¦å­¦ä¹ å¯èƒ½å­˜åœ¨è¿‡æ‹Ÿåˆé—®é¢˜â€”â€”é«˜æ–¹å·®ï¼Œæœ‰ä¸¤ä¸ªè§£å†³æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯æ­£åˆ™åŒ–ï¼Œå¦ä¸€ä¸ªæ˜¯å‡†å¤‡æ›´å¤šçš„æ•°æ®ï¼Œè¿™æ˜¯éå¸¸å¯é çš„æ–¹æ³•ï¼Œä½†ä½ å¯èƒ½æ— æ³•æ—¶æ—¶åˆ»åˆ»å‡†å¤‡è¶³å¤Ÿå¤šçš„è®­ç»ƒæ•°æ®æˆ–è€…è·å–æ›´å¤šæ•°æ®çš„æˆæœ¬å¾ˆé«˜ï¼Œä½†æ­£åˆ™åŒ–é€šå¸¸æœ‰åŠ©äºé¿å…è¿‡æ‹Ÿåˆæˆ–å‡å°‘ä½ çš„ç½‘ç»œè¯¯å·®ã€‚</p>
<h3 id="l2èŒƒæ•°">L2èŒƒæ•°</h3>
<p><span class="math inline">\(\frac{\lambda}{2m}\)</span>ä¹˜ä»¥<span
class="math inline">\(w\)</span>èŒƒæ•°çš„å¹³æ–¹ï¼Œå…¶ä¸­<span
class="math inline">\(\left\| w \right\|_2^2\)</span>æ˜¯<span
class="math inline">\(w\)</span>çš„æ¬§å‡ é‡Œå¾·èŒƒæ•°çš„å¹³æ–¹ï¼Œç­‰äº<span
class="math inline">\(w_{j}\)</span>ï¼ˆ<span
class="math inline">\(j\)</span> å€¼ä»1åˆ°<span
class="math inline">\(n_{x}\)</span>ï¼‰å¹³æ–¹çš„å’Œï¼Œä¹Ÿå¯è¡¨ç¤ºä¸º<span
class="math inline">\(w^{T}w\)</span>ï¼Œä¹Ÿå°±æ˜¯å‘é‡å‚æ•°<span
class="math inline">\(w\)</span>
çš„æ¬§å‡ é‡Œå¾·èŒƒæ•°ï¼ˆ2èŒƒæ•°ï¼‰çš„å¹³æ–¹ï¼Œæ­¤æ–¹æ³•ç§°ä¸º<span
class="math inline">\(L2\)</span>æ­£åˆ™åŒ–ï¼Œå› ä¸ºè¿™é‡Œç”¨äº†æ¬§å‡ é‡Œå¾·èŒƒæ•°ï¼Œè¢«ç§°ä¸ºå‘é‡å‚æ•°<span
class="math inline">\(w\)</span>çš„<span
class="math inline">\(L2\)</span>èŒƒæ•°ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201021162913.png"
alt="fa185e95684bbe6c0e9100164aff2ee5" />
<figcaption
aria-hidden="true">fa185e95684bbe6c0e9100164aff2ee5</figcaption>
</figure>
<p>å› ä¸º<span
class="math inline">\(w\)</span>é€šå¸¸æ˜¯ä¸€ä¸ªé«˜ç»´å‚æ•°çŸ¢é‡ï¼Œå·²ç»å¯ä»¥è¡¨è¾¾é«˜åå·®é—®é¢˜ï¼Œ<span
class="math inline">\(w\)</span>å¯èƒ½åŒ…å«æœ‰å¾ˆå¤šå‚æ•°ï¼Œæˆ‘ä»¬ä¸å¯èƒ½æ‹Ÿåˆæ‰€æœ‰å‚æ•°ï¼Œè€Œ<span
class="math inline">\(b\)</span>åªæ˜¯å•ä¸ªæ•°å­—ï¼Œæ‰€ä»¥<span
class="math inline">\(w\)</span>å‡ ä¹æ¶µç›–æ‰€æœ‰å‚æ•°ï¼Œè€Œä¸æ˜¯<span
class="math inline">\(b\)</span>ï¼Œå¦‚æœåŠ äº†å‚æ•°<span
class="math inline">\(b\)</span>ï¼Œå…¶å®ä¹Ÿæ²¡å¤ªå¤§å½±å“ï¼Œå› ä¸º<span
class="math inline">\(b\)</span>åªæ˜¯ä¼—å¤šå‚æ•°ä¸­çš„ä¸€ä¸ªï¼Œæ‰€ä»¥é€šå¸¸çœç•¥ä¸è®¡ã€‚</p>
<h3 id="l1èŒƒæ•°">L1èŒƒæ•°</h3>
<p>æ­£åˆ™åŒ–ï¼ŒåŠ çš„ä¸æ˜¯<span
class="math inline">\(L2\)</span>èŒƒæ•°ï¼Œè€Œæ˜¯æ­£åˆ™é¡¹<span
class="math inline">\(\frac{\lambda}{m}\)</span>ä¹˜ä»¥<span
class="math inline">\(\sum_{j= 1}^{n_{x}}{|w|}\)</span>ï¼Œ<span
class="math inline">\(\sum_{j =1}^{n_{x}}{|w|}\)</span>ä¹Ÿè¢«ç§°ä¸ºå‚æ•°<span
class="math inline">\(w\)</span>å‘é‡çš„<span
class="math inline">\(L1\)</span>èŒƒæ•°ï¼Œæ— è®ºåˆ†æ¯æ˜¯<span
class="math inline">\(m\)</span>è¿˜æ˜¯<span
class="math inline">\(2m\)</span>ï¼Œå®ƒéƒ½æ˜¯ä¸€ä¸ªæ¯”ä¾‹å¸¸é‡ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201022093917.png"
alt="5190dbc5a98db7a248499f54a04257cc" />
<figcaption
aria-hidden="true">5190dbc5a98db7a248499f54a04257cc</figcaption>
</figure>
<p>å¦‚æœç”¨çš„æ˜¯<span class="math inline">\(L1\)</span>æ­£åˆ™åŒ–ï¼Œ<span
class="math inline">\(w\)</span>æœ€ç»ˆä¼šæ˜¯ç¨€ç–çš„ï¼Œä¹Ÿå°±æ˜¯è¯´<span
class="math inline">\(w\)</span>å‘é‡ä¸­æœ‰å¾ˆå¤š0ï¼Œæœ‰äººè¯´è¿™æ ·æœ‰åˆ©äºå‹ç¼©æ¨¡å‹ï¼Œå› ä¸ºé›†åˆä¸­å‚æ•°å‡ä¸º0ï¼Œå­˜å‚¨æ¨¡å‹æ‰€å ç”¨çš„å†…å­˜æ›´å°‘ã€‚å®é™…ä¸Šï¼Œè™½ç„¶<span
class="math inline">\(L1\)</span>æ­£åˆ™åŒ–ä½¿æ¨¡å‹å˜å¾—ç¨€ç–ï¼Œå´æ²¡æœ‰é™ä½å¤ªå¤šå­˜å‚¨å†…å­˜ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºè¿™å¹¶ä¸æ˜¯<span
class="math inline">\(L1\)</span>æ­£åˆ™åŒ–çš„ç›®çš„ï¼Œè‡³å°‘ä¸æ˜¯ä¸ºäº†å‹ç¼©æ¨¡å‹ï¼Œäººä»¬åœ¨è®­ç»ƒç½‘ç»œæ—¶ï¼Œè¶Šæ¥è¶Šå€¾å‘äºä½¿ç”¨<span
class="math inline">\(L2\)</span>æ­£åˆ™åŒ–ã€‚</p>
<h3 id="å¼—ç½—è´å°¼ä¹Œæ–¯èŒƒæ•°çŸ©é˜µl2èŒƒæ•°">å¼—ç½—è´å°¼ä¹Œæ–¯èŒƒæ•°ï¼ˆçŸ©é˜µL2èŒƒæ•°ï¼‰</h3>
<p>æ­£åˆ™é¡¹ä¸º<span class="math inline">\(\frac{\lambda
}{2m}{\sum\nolimits_{1}^{L}|| W^{[l]}}||^2\)</span>ï¼Œæˆ‘ä»¬ç§°<span
class="math inline">\(||W^{\left[l\right]}||^2\)</span>ä¸ºèŒƒæ•°å¹³æ–¹ï¼Œè¿™ä¸ªçŸ©é˜µèŒƒæ•°<span
class="math inline">\(||W^{\left[l\right]}||^2\)</span>ï¼ˆå³å¹³æ–¹èŒƒæ•°ï¼‰ï¼Œè¢«å®šä¹‰ä¸ºçŸ©é˜µä¸­æ‰€æœ‰å…ƒç´ çš„å¹³æ–¹æ±‚å’Œã€‚è¯¥çŸ©é˜µèŒƒæ•°è¢«ç§°ä½œâ€œå¼—ç½—è´å°¼ä¹Œæ–¯èŒƒæ•°â€ï¼Œç”¨ä¸‹æ ‡<span
class="math inline">\(F\)</span>æ ‡æ³¨â€ï¼Œé‰´äºçº¿æ€§ä»£æ•°ä¸­ä¸€äº›ç¥ç§˜æ™¦æ¶©çš„åŸå› ï¼Œæˆ‘ä»¬ä¸ç§°ä¹‹ä¸ºâ€œçŸ©é˜µ<span
class="math inline">\(L2\)</span>èŒƒæ•°â€ï¼Œè€Œç§°å®ƒä¸ºâ€œå¼—ç½—è´å°¼ä¹Œæ–¯èŒƒæ•°â€ï¼ŒçŸ©é˜µ<span
class="math inline">\(L2\)</span>èŒƒæ•°å¬èµ·æ¥æ›´è‡ªç„¶ï¼Œä½†é‰´äºä¸€äº›å¤§å®¶æ— é¡»çŸ¥é“çš„ç‰¹æ®ŠåŸå› ï¼ŒæŒ‰ç…§æƒ¯ä¾‹ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œå¼—ç½—è´å°¼ä¹Œæ–¯èŒƒæ•°â€ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªçŸ©é˜µä¸­æ‰€æœ‰å…ƒç´ çš„å¹³æ–¹å’Œã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201022095410.png"
alt="a8336b2cfeed4128a23f20fab843d226" />
<figcaption
aria-hidden="true">a8336b2cfeed4128a23f20fab843d226</figcaption>
</figure>
<p>è¯¥å¦‚ä½•ä½¿ç”¨è¯¥èŒƒæ•°å®ç°æ¢¯åº¦ä¸‹é™å‘¢ï¼Ÿ</p>
<p>è¿™å°±æ˜¯ä¹‹å‰æˆ‘ä»¬é¢å¤–å¢åŠ çš„æ­£åˆ™åŒ–é¡¹ï¼Œæ—¢ç„¶å·²ç»å¢åŠ äº†è¿™ä¸ªæ­£åˆ™é¡¹ï¼Œç°åœ¨æˆ‘ä»¬è¦åšçš„å°±æ˜¯ç»™<span
class="math inline">\(dW\)</span>åŠ ä¸Šè¿™ä¸€é¡¹<span
class="math inline">\(\frac
{\lambda}{m}W^{[l]}\)</span>ï¼Œç„¶åè®¡ç®—è¿™ä¸ªæ›´æ–°é¡¹ï¼Œä½¿ç”¨æ–°å®šä¹‰çš„<span
class="math inline">\(dW^{[l]}\)</span>ï¼Œå®ƒçš„å®šä¹‰å«æœ‰ç›¸å…³å‚æ•°ä»£ä»·å‡½æ•°å¯¼æ•°å’Œï¼Œä»¥åŠæœ€åæ·»åŠ çš„é¢å¤–æ­£åˆ™é¡¹ï¼Œè¿™ä¹Ÿæ˜¯<span
class="math inline">\(L2\)</span>æ­£åˆ™åŒ–æœ‰æ—¶è¢«ç§°ä¸ºâ€œæƒé‡è¡°å‡â€çš„åŸå› ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201022095606.png"
alt="dafb163da5b9c3ece677a7ebce05b680" />
<figcaption
aria-hidden="true">dafb163da5b9c3ece677a7ebce05b680</figcaption>
</figure>
<p>æˆ‘ä»¬ç”¨$ dW<sup>{[l]}<span
class="math inline">\(çš„å®šä¹‰æ›¿æ¢æ­¤å¤„çš„\)</span>dW</sup>{[l]}<span
class="math inline">\(ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œ\)</span>W<sup>{[l]}<span
class="math inline">\(çš„å®šä¹‰è¢«æ›´æ–°ä¸º\)</span>W</sup>{[l]}<span
class="math inline">\(å‡å»å­¦ä¹ ç‡\)</span>$ ä¹˜ä»¥<strong>backprop</strong>
å†åŠ ä¸Š<span
class="math inline">\(\frac{\lambda}{m}W^{[l]}\)</span>ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201022095643.png"
alt="cba0f1c7a480139acb04e762e4fe57f8" />
<figcaption
aria-hidden="true">cba0f1c7a480139acb04e762e4fe57f8</figcaption>
</figure>
<p>è¯¥æ­£åˆ™é¡¹è¯´æ˜ï¼Œä¸è®º<span
class="math inline">\(W^{[l]}\)</span>æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬éƒ½è¯•å›¾è®©å®ƒå˜å¾—æ›´å°ï¼Œå®é™…ä¸Šï¼Œç›¸å½“äºæˆ‘ä»¬ç»™çŸ©é˜µWä¹˜ä»¥<span
class="math inline">\((1 -
\alpha\frac{\lambda}{m})\)</span>å€çš„æƒé‡ï¼ŒçŸ©é˜µ<span
class="math inline">\(W\)</span>å‡å»<span
class="math inline">\(\alpha\frac{\lambda}{m}\)</span>å€çš„å®ƒï¼Œä¹Ÿå°±æ˜¯ç”¨è¿™ä¸ªç³»æ•°<span
class="math inline">\((1-\alpha\frac{\lambda}{m})\)</span>ä¹˜ä»¥çŸ©é˜µ<span
class="math inline">\(W\)</span>ï¼Œè¯¥ç³»æ•°å°äº1ï¼Œå› æ­¤<span
class="math inline">\(L2\)</span>èŒƒæ•°æ­£åˆ™åŒ–ä¹Ÿè¢«ç§°ä¸ºâ€œæƒé‡è¡°å‡â€ï¼Œå› ä¸ºå®ƒå°±åƒä¸€èˆ¬çš„æ¢¯åº¦ä¸‹é™ï¼Œ<span
class="math inline">\(W\)</span>è¢«æ›´æ–°ä¸ºå°‘äº†<span
class="math inline">\(\alpha\)</span>ä¹˜ä»¥<strong>backprop</strong>è¾“å‡ºçš„æœ€åˆæ¢¯åº¦å€¼ï¼ŒåŒæ—¶<span
class="math inline">\(W\)</span>ä¹Ÿä¹˜ä»¥äº†è¿™ä¸ªç³»æ•°ï¼Œè¿™ä¸ªç³»æ•°å°äº1ï¼Œå› æ­¤<span
class="math inline">\(L2\)</span>æ­£åˆ™åŒ–ä¹Ÿè¢«ç§°ä¸ºâ€œæƒé‡è¡°å‡â€ã€‚</p>
<h3 id="dropout-æ­£åˆ™åŒ–dropout-regularization">dropout æ­£åˆ™åŒ–ï¼ˆDropout
Regularizationï¼‰</h3>
<p>è¿˜æœ‰ä¸€ä¸ªéå¸¸å®ç”¨çš„æ­£åˆ™åŒ–æ–¹æ³•â€”â€”â€œ<strong>Dropout</strong>ï¼ˆéšæœºå¤±æ´»ï¼‰â€ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å®ƒçš„å·¥ä½œåŸç†ã€‚</p>
<p>dropoutå°±æ˜¯ä¸ºæ¯ä¸€å±‚è®¾ç½®ä¸€ä¸ªæ¶ˆé™¤èŠ‚ç‚¹çš„æ¦‚ç‡ï¼Œè®¾ç½®å®ŒèŠ‚ç‚¹æ¦‚ç‡ï¼Œæˆ‘ä»¬ä¼šæ¶ˆé™¤ä¸€äº›èŠ‚ç‚¹ï¼Œç„¶ååˆ é™¤æ‰ä»è¯¥èŠ‚ç‚¹è¿›å‡ºçš„è¿çº¿ï¼Œæœ€åå¾—åˆ°ä¸€ä¸ªèŠ‚ç‚¹æ›´å°‘ï¼Œè§„æ¨¡æ›´å°çš„ç½‘ç»œï¼Œç„¶åç”¨<strong>backprop</strong>æ–¹æ³•è¿›è¡Œè®­ç»ƒã€‚</p>
<p>ç›´è§‚ä¸Šç†è§£ï¼šä¸æ„¿æ„æŠŠæ‰€æœ‰èµŒæ³¨éƒ½æ”¾åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œä¸æ„¿æ„ç»™ä»»ä½•ä¸€ä¸ªè¾“å…¥åŠ ä¸Šå¤ªå¤šæƒé‡ï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šè¢«åˆ é™¤ï¼Œå› æ­¤è¯¥å•å…ƒå°†é€šè¿‡è¿™ç§æ–¹å¼ç§¯æåœ°ä¼ æ’­å¼€ï¼Œå¹¶ä¸ºå•å…ƒçš„å››ä¸ªè¾“å…¥å¢åŠ ä¸€ç‚¹æƒé‡ï¼Œé€šè¿‡ä¼ æ’­æ‰€æœ‰æƒé‡ï¼Œ<strong>dropout</strong>å°†äº§ç”Ÿæ”¶ç¼©æƒé‡çš„å¹³æ–¹èŒƒæ•°çš„æ•ˆæœï¼Œå’Œä¹‹å‰è®²çš„<span
class="math inline">\(L2\)</span>æ­£åˆ™åŒ–ç±»ä¼¼ã€‚</p>
<p><strong>dropout</strong>ä¸€å¤§ç¼ºç‚¹å°±æ˜¯ä»£ä»·å‡½æ•°<span
class="math inline">\(J\)</span>ä¸å†è¢«æ˜ç¡®å®šä¹‰ï¼Œæ¯æ¬¡è¿­ä»£ï¼Œéƒ½ä¼šéšæœºç§»é™¤ä¸€äº›èŠ‚ç‚¹ï¼Œå¦‚æœå†ä¸‰æ£€æŸ¥æ¢¯åº¦ä¸‹é™çš„æ€§èƒ½ï¼Œå®é™…ä¸Šæ˜¯å¾ˆéš¾è¿›è¡Œå¤æŸ¥çš„ã€‚</p>
<h3 id="early-stopping">early stopping</h3>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201022101655.png"
alt="f5fd5df8235145c54aece1a5bf7b31f6" />
<figcaption
aria-hidden="true">f5fd5df8235145c54aece1a5bf7b31f6</figcaption>
</figure>
<p>å°±æ˜¯è®©è¿­ä»£æå‰åœæ­¢ï¼Œæ‰¾åˆ°ä¸€ä¸ªwå¤§å°é€‚ä¸­çš„ç‚¹</p>
<h2 id="ä¸ºä»€ä¹ˆæ­£åˆ™åŒ–èƒ½é˜²æ­¢è¿‡æ‹Ÿåˆ">ä¸ºä»€ä¹ˆæ­£åˆ™åŒ–èƒ½é˜²æ­¢è¿‡æ‹Ÿåˆ</h2>
<p>æ ¹æ®ä¸Šé¢çš„æ­£åˆ™åŒ–æ–¹æ³•çš„æè¿°æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ­£åˆ™åŒ–ä¸»è¦å°±æ˜¯åœ¨æ§åˆ¶å‚æ•°Wçš„å¤§å°ï¼Œè¦è®©å‚æ•°Wä¸è¦å¤ªå¤§ï¼Œå¤ªå¤æ‚ã€‚ç›´è§‚ç†è§£å°±æ˜¯æŠŠå¤šéšè—å•å…ƒçš„æƒé‡è®¾ä¸º0ï¼Œäºæ˜¯åŸºæœ¬ä¸Šæ¶ˆé™¤äº†è¿™äº›éšè—å•å…ƒçš„è®¸å¤šå½±å“ã€‚å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œè¿™ä¸ªè¢«å¤§å¤§ç®€åŒ–äº†çš„ç¥ç»ç½‘ç»œä¼šå˜æˆä¸€ä¸ªå¾ˆå°çš„ç½‘ç»œï¼Œå°åˆ°å¦‚åŒä¸€ä¸ªé€»è¾‘å›å½’å•å…ƒï¼Œå®ƒä¼šä½¿è¿™ä¸ªç½‘ç»œä»è¿‡åº¦æ‹Ÿåˆçš„çŠ¶æ€æ›´æ¥è¿‘é«˜åå·®çŠ¶æ€ã€‚</p>
<p>ä½†æ˜¯<span
class="math inline">\(\lambda\)</span>ä¼šå­˜åœ¨ä¸€ä¸ªä¸­é—´å€¼ï¼Œäºæ˜¯ä¼šæœ‰ä¸€ä¸ªæ¥è¿‘â€œ<strong>Just
Right</strong>â€çš„ä¸­é—´çŠ¶æ€ã€‚</p>
<p>ç›´è§‚ç†è§£å°±æ˜¯<span
class="math inline">\(\lambda\)</span>å¢åŠ åˆ°è¶³å¤Ÿå¤§ï¼Œ<span
class="math inline">\(W\)</span>ä¼šæ¥è¿‘äº0ï¼Œå®é™…ä¸Šæ˜¯ä¸ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µçš„ï¼Œæˆ‘ä»¬å°è¯•æ¶ˆé™¤æˆ–è‡³å°‘å‡å°‘è®¸å¤šéšè—å•å…ƒçš„å½±å“ï¼Œæœ€ç»ˆè¿™ä¸ªç½‘ç»œä¼šå˜å¾—æ›´ç®€å•ï¼Œè¿™ä¸ªç¥ç»ç½‘ç»œè¶Šæ¥è¶Šæ¥è¿‘é€»è¾‘å›å½’ï¼Œæˆ‘ä»¬ç›´è§‰ä¸Šè®¤ä¸ºå¤§é‡éšè—å•å…ƒè¢«å®Œå…¨æ¶ˆé™¤äº†ï¼Œå…¶å®ä¸ç„¶ï¼Œå®é™…ä¸Šæ˜¯è¯¥ç¥ç»ç½‘ç»œçš„æ‰€æœ‰éšè—å•å…ƒä¾ç„¶å­˜åœ¨ï¼Œä½†æ˜¯å®ƒä»¬çš„å½±å“å˜å¾—æ›´å°äº†ã€‚ç¥ç»ç½‘ç»œå˜å¾—æ›´ç®€å•äº†ï¼Œè²Œä¼¼è¿™æ ·æ›´ä¸å®¹æ˜“å‘ç”Ÿè¿‡æ‹Ÿåˆã€‚</p>
<p>å…¶å®è¿™å°±æ˜¯ä¸€ä¸ªç›´è§‰ç»éªŒï¼Œä½†æ˜¯ç¡®å®å¯ä»¥çœ‹åˆ°æ–¹å·®å‡å°çš„ç»“æœã€‚</p>
<h2 id="å½’ä¸€åŒ–è¾“å…¥normalizing-inputs">å½’ä¸€åŒ–è¾“å…¥ï¼ˆNormalizing
inputsï¼‰</h2>
<ul>
<li>é›¶å‡å€¼</li>
<li>å½’ä¸€åŒ–æ–¹å·®</li>
</ul>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201022101830.png"
alt="L2_week1_19" />
<figcaption aria-hidden="true">L2_week1_19</figcaption>
</figure>
<h2 id="æ¢¯åº¦æ¶ˆå¤±çˆ†ç‚¸">æ¢¯åº¦æ¶ˆå¤±/çˆ†ç‚¸</h2>
<p>æ·±åº¦ç¥ç»æ‰€é¢ä¸´çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ¢¯åº¦æ¶ˆå¤±æˆ–æ¢¯åº¦çˆ†ç‚¸ï¼Œä¹Ÿå°±æ˜¯ä½ è®­ç»ƒç¥ç»ç½‘ç»œçš„æ—¶å€™ï¼Œå¯¼æ•°æˆ–å¡åº¦æœ‰æ—¶ä¼šå˜å¾—éå¸¸å¤§ï¼Œæˆ–è€…éå¸¸å°ï¼Œç”šè‡³äºæ ¹æ®æ·±åº¦ä»¥æŒ‡æ•°æ–¹å¼å˜å°ï¼Œè¿™åŠ å¤§äº†è®­ç»ƒçš„éš¾åº¦ã€‚</p>
<h3 id="è§£å†³æ–¹æ³•">è§£å†³æ–¹æ³•</h3>
<p>è¿™å¹¶ä¸æ˜¯å®Œå…¨çš„è§£å†³æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥å‡å°‘å½±å“ã€‚</p>
<p><span class="math inline">\(z = w_{1}x_{1} + w_{2}x_{2} + \ldots
+w_{n}x_{n}\)</span>ï¼Œ<span
class="math inline">\(b=0\)</span>ï¼Œæš‚æ—¶å¿½ç•¥<span
class="math inline">\(b\)</span>ï¼Œä¸ºäº†é¢„é˜²<span
class="math inline">\(z\)</span>å€¼è¿‡å¤§æˆ–è¿‡å°ï¼Œä½ å¯ä»¥çœ‹åˆ°<span
class="math inline">\(n\)</span>è¶Šå¤§ï¼Œä½ å¸Œæœ›<span
class="math inline">\(w_{i}\)</span>è¶Šå°ï¼Œå› ä¸º<span
class="math inline">\(z\)</span>æ˜¯<span
class="math inline">\(w_{i}x_{i}\)</span>çš„å’Œï¼Œå¦‚æœä½ æŠŠå¾ˆå¤šæ­¤ç±»é¡¹ç›¸åŠ ï¼Œå¸Œæœ›æ¯é¡¹å€¼æ›´å°ï¼Œæœ€åˆç†çš„æ–¹æ³•å°±æ˜¯è®¾ç½®<span
class="math inline">\(Var(w_{i})=\frac{1}{n}\)</span> ã€‚å³<span
class="math inline">\(w^{[l]} = np.random.randn(
\text{shape})*\text{np.}\text{sqrt}(\frac{1}{n^{[l-1]}})\)</span> ,
<span class="math inline">\(n^{[l - 1]}\)</span>å°±æ˜¯æˆ‘å–‚ç»™ç¬¬<span
class="math inline">\(l\)</span>å±‚ç¥ç»å•å…ƒçš„æ•°é‡ï¼ˆå³ç¬¬<span
class="math inline">\(l-1\)</span>å±‚ç¥ç»å…ƒæ•°é‡ï¼‰</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201022103557.png"
alt="e4114d7dc1c6242bd96cdadb457b8959" />
<figcaption
aria-hidden="true">e4114d7dc1c6242bd96cdadb457b8959</figcaption>
</figure>
<p>å¦‚æœä½ æ˜¯ç”¨çš„æ˜¯<strong>Relu</strong>æ¿€æ´»å‡½æ•°ï¼Œè€Œä¸æ˜¯<span
class="math inline">\(\frac{1}{n}\)</span>ï¼Œæ–¹å·®è®¾ç½®ä¸º<span
class="math inline">\(\frac{2}{n}\)</span>ï¼Œæ•ˆæœä¼šæ›´å¥½ã€‚</p>
<h2 id="mini-batchæ¢¯åº¦ä¸‹é™">mini-batchæ¢¯åº¦ä¸‹é™</h2>
<p>ç°åœ¨æ˜¯å¤§æ•°æ®æ—¶ä»£ï¼Œè®­ç»ƒé›†çš„æ ·æœ¬æ•°å¯èƒ½æˆç™¾ä¸‡ä¸Šåƒä¸‡ï¼Œå¦‚æœæ¯æ¬¡æ­£å‘ä¼ æ’­ä¸€éä¹‹åå†åå‘è¿›è¡Œæ¢¯åº¦ä¸‹é™ï¼Œé‚£ä¹ˆä¸€æ¬¡ä¼ æ’­çš„å¤„ç†æ—¶é—´å¤ªæ…¢äº†ã€‚</p>
<p>å¯ä»¥æŠŠè®­ç»ƒé›†åˆ†å‰²ä¸ºå°ä¸€ç‚¹çš„å­é›†è®­ç»ƒï¼Œè¿™äº›å­é›†è¢«å–åä¸º<strong>mini-batch</strong>ï¼Œå‡è®¾æ¯ä¸€ä¸ªå­é›†ä¸­åªæœ‰1000ä¸ªæ ·æœ¬ï¼Œé‚£ä¹ˆæŠŠå…¶ä¸­çš„<span
class="math inline">\(x^{(1)}\)</span>åˆ°<span
class="math inline">\(x^{(1000)}\)</span>å–å‡ºæ¥ï¼Œå°†å…¶ç§°ä¸ºç¬¬ä¸€ä¸ªå­è®­ç»ƒé›†ï¼Œä¹Ÿå«åš<strong>mini-batch</strong>ï¼Œç„¶åä½ å†å–å‡ºæ¥ä¸‹æ¥çš„1000ä¸ªæ ·æœ¬ï¼Œä»<span
class="math inline">\(x^{(1001)}\)</span>åˆ°<span
class="math inline">\(x^{(2000)}\)</span>ï¼Œç„¶åå†å–1000ä¸ªæ ·æœ¬ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023162136.png"
alt="112c45cf393d896833ffce29e14fe8bc" />
<figcaption
aria-hidden="true">112c45cf393d896833ffce29e14fe8bc</figcaption>
</figure>
<p>å¯¹<span
class="math inline">\(Y\)</span>ä¹Ÿè¦è¿›è¡Œç›¸åŒå¤„ç†ï¼Œä½ ä¹Ÿè¦ç›¸åº”åœ°æ‹†åˆ†<span
class="math inline">\(Y\)</span>çš„è®­ç»ƒé›†ï¼Œæ‰€ä»¥è¿™æ˜¯<span
class="math inline">\(Y^{\{1\}}\)</span>ï¼Œç„¶åä»<span
class="math inline">\(y^{(1001)}\)</span>åˆ°<span
class="math inline">\(y^{(2000)}\)</span>ï¼Œè¿™ä¸ªå«<span
class="math inline">\(Y^{\{2\}}\)</span>ï¼Œä¸€ç›´åˆ°<span
class="math inline">\(Y^{\{ 5000\}}\)</span>ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023162155.png"
alt="609ea5be2140af929985951f2aab542c" />
<figcaption
aria-hidden="true">609ea5be2140af929985951f2aab542c</figcaption>
</figure>
<p>ä½¿ç”¨<strong>mini-batch</strong>æ¢¯åº¦ä¸‹é™æ³•ï¼Œå¦‚æœä½ ä½œå‡ºæˆæœ¬å‡½æ•°åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­çš„å›¾ï¼Œåˆ™å¹¶ä¸æ˜¯æ¯æ¬¡è¿­ä»£éƒ½æ˜¯ä¸‹é™çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œä½ è¦å¤„ç†çš„æ˜¯
$ X^{å¤§æ‹¬å·tå¤§æ‹¬å·}$ ï¼ˆåäº”ä¸ªä¹Ÿæœ‰å¤§æ‹¬å·ï¼Œä½†æ˜¯æ˜¾ç¤ºä¸å‡ºæ¥ï¼‰å’Œ<span
class="math inline">\(Y^{t}\)</span>ï¼Œå¦‚æœè¦ä½œå‡ºæˆæœ¬å‡½æ•°<span
class="math inline">\(J^{t}\)</span>çš„å›¾ï¼Œè€Œ<span
class="math inline">\(J^{t}\)</span>åªå’Œ<span
class="math inline">\(X^{t}\)</span>ï¼Œ<span
class="math inline">\(Y^{t}\)</span>æœ‰å…³ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡è¿­ä»£ä¸‹ä½ éƒ½åœ¨è®­ç»ƒä¸åŒçš„æ ·æœ¬é›†æˆ–è€…è¯´è®­ç»ƒä¸åŒçš„<strong>mini-batch</strong></p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023163405.png"
alt="b5c07d7dec7e54bed73cdcd43e79452d" />
<figcaption
aria-hidden="true">b5c07d7dec7e54bed73cdcd43e79452d</figcaption>
</figure>
<h2
id="æŒ‡æ•°åŠ æƒå¹³å‡æ•°exponentially-weighted-averages">æŒ‡æ•°åŠ æƒå¹³å‡æ•°ï¼ˆExponentially
weighted averagesï¼‰</h2>
<h3 id="ä»€ä¹ˆæ˜¯æŒ‡æ•°åŠ æƒå¹³å‡æ•°">ä»€ä¹ˆæ˜¯æŒ‡æ•°åŠ æƒå¹³å‡æ•°</h3>
<p>åœ¨æˆ‘çš„ç†è§£é‡Œé¢è¿™æ˜¯ä¸€ç§å‚è€ƒå½“å‰æ—¶åˆ»ä¹‹å‰ä¸€éƒ¨åˆ†æ—¶é—´æ®µçš„å†…çš„æ•°æ®çš„ä¸€ä¸­å¹³å‡ç®—æ³•ï¼Œè¿™ä¸ªæ—¶é—´æ®µçš„é•¿åº¦ç”±
<span class="math inline">\(\beta\)</span> ç¡®å®šï¼Œæ—¶é—´é•¿åº¦å¤§çº¦ä¸º<span
class="math inline">\(\frac{1}{(1-\beta)}\)</span> ã€‚</p>
<p>è®¡ç®—æŒ‡æ•°åŠ æƒå¹³å‡æ•°çš„å…³é”®æ–¹ç¨‹ã€‚</p>
<p><span class="math inline">\(v_t=\beta v_{t-1}+(1-\beta
)\theta_t\)</span></p>
<p><span
class="math inline">\(\beta=0.9\)</span>çš„æ—¶å€™ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯çº¢çº¿ï¼Œå¦‚æœå®ƒæ›´æ¥è¿‘äº1ï¼Œæ¯”å¦‚0.98ï¼Œç»“æœå°±æ˜¯ç»¿çº¿ï¼Œå¦‚æœ<span
class="math inline">\(\beta\)</span>å°ä¸€ç‚¹ï¼Œå¦‚æœæ˜¯0.5ï¼Œç»“æœå°±æ˜¯é»„çº¿ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023163627.png"
alt="6f5438fde578ef4285059d85976d52ed" />
<figcaption
aria-hidden="true">6f5438fde578ef4285059d85976d52ed</figcaption>
</figure>
<p>åŒæ ·çš„å…¬å¼ï¼Œ<span class="math inline">\({v}_{t}=\beta
{v}_{t-1}+(1-\beta ){\theta }_{t}\)</span></p>
<p>ä½¿<span
class="math inline">\(\beta=0.9\)</span>ï¼Œå†™ä¸‹ç›¸åº”çš„å‡ ä¸ªå…¬å¼ï¼Œæ‰€ä»¥åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œ<span
class="math inline">\(t\)</span>ä»0åˆ°1åˆ°2åˆ°3ï¼Œ<span
class="math inline">\(t\)</span>çš„å€¼åœ¨ä¸æ–­å¢åŠ ï¼Œä¸ºäº†æ›´å¥½åœ°åˆ†æï¼Œæˆ‘å†™çš„æ—¶å€™ä½¿å¾—<span
class="math inline">\(t\)</span>çš„å€¼ä¸æ–­å‡å°ï¼Œç„¶åç»§ç»­å¾€ä¸‹å†™ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023163648.png"
alt="9ab7565d5a3e13a9a525ec6d2f119a79" />
<figcaption
aria-hidden="true">9ab7565d5a3e13a9a525ec6d2f119a79</figcaption>
</figure>
<p>å¦‚æœä½ æŠŠè¿™äº›å¼å­åˆå¹¶ï¼Œ</p>
<p><span class="math inline">\(v_{100} = 0.1\theta_{100} + 0.1 \times
0.9 \theta_{99} + 0.1 \times {(0.9)}^{2}\theta_{98} + 0.1 \times
{(0.9)}^{3}\theta_{97} + 0.1 \times {(0.9)}^{4}\theta_{96} +
\ldots\)</span></p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023163820.png"
alt="a3f97d59db202127014297ceccf1aacb" />
<figcaption
aria-hidden="true">a3f97d59db202127014297ceccf1aacb</figcaption>
</figure>
<p>è®¡ç®—<span
class="math inline">\(v_{100}\)</span>æ˜¯é€šè¿‡ï¼ŒæŠŠä¸¤ä¸ªå‡½æ•°å¯¹åº”çš„å…ƒç´ ï¼Œç„¶åæ±‚å’Œï¼Œç”¨è¿™ä¸ªæ•°å€¼100å·æ•°æ®å€¼ä¹˜ä»¥0.1ï¼Œ99å·æ•°æ®å€¼ä¹˜ä»¥0.1ä¹˜ä»¥<span
class="math inline">\({(0.9)}^{2}\)</span>ï¼Œè¿™æ˜¯ç¬¬äºŒé¡¹ï¼Œä»¥æ­¤ç±»æ¨ï¼Œæ‰€ä»¥é€‰å–çš„æ˜¯æ¯æ—¥æ¸©åº¦ï¼Œå°†å…¶ä¸æŒ‡æ•°è¡°å‡å‡½æ•°ç›¸ä¹˜ï¼Œç„¶åæ±‚å’Œï¼Œå°±å¾—åˆ°äº†<span
class="math inline">\(v_{100}\)</span>ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023163909.png"
alt="880dbafaccbd93a4ab0a92a9b8607956" />
<figcaption
aria-hidden="true">880dbafaccbd93a4ab0a92a9b8607956</figcaption>
</figure>
<p>æŒ‡æ•°åŠ æƒå¹³å‡æ•°å…¬å¼çš„å¥½å¤„ä¹‹ä¸€åœ¨äºï¼Œå®ƒå ç”¨æå°‘å†…å­˜ï¼Œç”µè„‘å†…å­˜ä¸­åªå ç”¨ä¸€è¡Œæ•°å­—è€Œå·²ï¼Œç„¶åæŠŠæœ€æ–°æ•°æ®ä»£å…¥å…¬å¼ï¼Œä¸æ–­è¦†ç›–å°±å¯ä»¥äº†ï¼Œæ­£å› ä¸ºè¿™ä¸ªåŸå› ï¼Œå…¶æ•ˆç‡ï¼Œå®ƒåŸºæœ¬ä¸Šåªå ç”¨ä¸€è¡Œä»£ç ï¼Œè®¡ç®—æŒ‡æ•°åŠ æƒå¹³å‡æ•°ä¹Ÿåªå ç”¨å•è¡Œæ•°å­—çš„å­˜å‚¨å’Œå†…å­˜ï¼Œå½“ç„¶å®ƒå¹¶ä¸æ˜¯æœ€å¥½çš„ï¼Œä¹Ÿä¸æ˜¯æœ€ç²¾å‡†çš„è®¡ç®—å¹³å‡æ•°çš„æ–¹æ³•ã€‚å¦‚æœä½ è¦è®¡ç®—ç§»åŠ¨çª—ï¼Œä½ ç›´æ¥ç®—å‡ºè¿‡å»10å¤©çš„æ€»å’Œï¼Œè¿‡å»50å¤©çš„æ€»å’Œï¼Œé™¤ä»¥10å’Œ50å°±å¥½ï¼Œå¦‚æ­¤å¾€å¾€ä¼šå¾—åˆ°æ›´å¥½çš„ä¼°æµ‹ã€‚ä½†ç¼ºç‚¹æ˜¯ï¼Œå¦‚æœä¿å­˜æ‰€æœ‰æœ€è¿‘çš„æ¸©åº¦æ•°æ®ï¼Œå’Œè¿‡å»10å¤©çš„æ€»å’Œï¼Œå¿…é¡»å ç”¨æ›´å¤šçš„å†…å­˜ï¼Œæ‰§è¡Œæ›´åŠ å¤æ‚ï¼Œè®¡ç®—æˆæœ¬ä¹Ÿæ›´åŠ é«˜æ˜‚ã€‚</p>
<h3
id="æŒ‡æ•°åŠ æƒå¹³å‡çš„åå·®ä¿®æ­£bias-correction-in-exponentially-weighted-averages">æŒ‡æ•°åŠ æƒå¹³å‡çš„åå·®ä¿®æ­£ï¼ˆBias
correction in exponentially weighted averagesï¼‰</h3>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023164324.png"
alt="26a3c3022a7f7ae7ba0cd27fc74cbcf6" />
<figcaption
aria-hidden="true">26a3c3022a7f7ae7ba0cd27fc74cbcf6</figcaption>
</figure>
<p>åœ¨å®é™…ä½¿ç”¨ä¸­å› ä¸ºæˆ‘ä»¬åˆå§‹åŒ–<span class="math inline">\(v_{0} =
0\)</span>ï¼Œæ‰€ä»¥åœ¨å¼€å§‹çš„æ—¶å€™å¯èƒ½ä¼šå‡ºç°ç´«çº¿çš„æƒ…å†µï¼Œä¸ç»¿çš„çš„é¢„ä¼°æƒ…å†µå‡ºç°åå·®ï¼Œåœ¨å‰æœŸä¸èƒ½å¾ˆå¥½çš„é¢„æµ‹å‡ºå½“æ—¥æ¸©åº¦ã€‚</p>
<p>æœ‰ä¸ªåŠæ³•å¯ä»¥ä¿®æ”¹è¿™ä¸€ä¼°æµ‹ï¼Œè®©ä¼°æµ‹å˜å¾—æ›´å¥½ï¼Œæ›´å‡†ç¡®ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¼°æµ‹åˆæœŸï¼Œä¹Ÿå°±æ˜¯ä¸ç”¨<span
class="math inline">\(v_{t}\)</span>ï¼Œè€Œæ˜¯ç”¨<span
class="math inline">\(\frac{v_{t}}{1-
\beta^{t}}\)</span>ï¼Œtå°±æ˜¯ç°åœ¨çš„å¤©æ•°ã€‚ä¸¾ä¸ªå…·ä½“ä¾‹å­ï¼Œå½“<span
class="math inline">\(t=2\)</span>æ—¶ï¼Œ<span class="math inline">\(1 -
\beta^{t} = 1 -  {0.98}^{2} =
0.0396\)</span>ï¼Œå› æ­¤å¯¹ç¬¬äºŒå¤©æ¸©åº¦çš„ä¼°æµ‹å˜æˆäº†<span
class="math inline">\(\frac{v_{2}}{0.0396} =\frac{0.0196\theta_{1}
+  0.02\theta_{2}}{0.0396}\)</span>ï¼Œä¹Ÿå°±æ˜¯<span
class="math inline">\(\theta_{1}\)</span>å’Œ<span
class="math inline">\(\theta_{2}\)</span>çš„åŠ æƒå¹³å‡æ•°ï¼Œå¹¶å»é™¤äº†åå·®ã€‚ä½ ä¼šå‘ç°éšç€<span
class="math inline">\(t\)</span>å¢åŠ ï¼Œ<span
class="math inline">\(\beta^{t}\)</span>æ¥è¿‘äº0ï¼Œæ‰€ä»¥å½“<span
class="math inline">\(t\)</span>å¾ˆå¤§çš„æ—¶å€™ï¼Œåå·®ä¿®æ­£å‡ ä¹æ²¡æœ‰ä½œç”¨ï¼Œå› æ­¤å½“<span
class="math inline">\(t\)</span>è¾ƒå¤§çš„æ—¶å€™ï¼Œç´«çº¿åŸºæœ¬å’Œç»¿çº¿é‡åˆäº†ã€‚ä¸è¿‡åœ¨å¼€å§‹å­¦ä¹ é˜¶æ®µï¼Œä½ æ‰å¼€å§‹é¢„æµ‹çƒ­èº«ç»ƒä¹ ï¼Œåå·®ä¿®æ­£å¯ä»¥å¸®åŠ©ä½ æ›´å¥½é¢„æµ‹æ¸©åº¦ï¼Œåå·®ä¿®æ­£å¯ä»¥å¸®åŠ©ä½ ä½¿ç»“æœä»ç´«çº¿å˜æˆç»¿çº¿ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023164640.png"
alt="f602c9d517a7f6c01fe18171dade17e6" />
<figcaption
aria-hidden="true">f602c9d517a7f6c01fe18171dade17e6</figcaption>
</figure>
<h2
id="åŠ¨é‡æ¢¯åº¦ä¸‹é™æ³•gradient-descent-with-momentum">åŠ¨é‡æ¢¯åº¦ä¸‹é™æ³•ï¼ˆGradient
descent with Momentumï¼‰</h2>
<p>åŠ¨é‡æ¢¯åº¦ä¸‹é™æ³•ï¼Œè¿è¡Œé€Ÿåº¦å‡ ä¹æ€»æ˜¯å¿«äºæ ‡å‡†çš„æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œç®€è€Œè¨€ä¹‹ï¼ŒåŸºæœ¬çš„æƒ³æ³•å°±æ˜¯è®¡ç®—æ¢¯åº¦çš„æŒ‡æ•°åŠ æƒå¹³å‡æ•°ï¼Œå¹¶åˆ©ç”¨è¯¥æ¢¯åº¦æ›´æ–°ä½ çš„æƒé‡</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023165032.png"
alt="cc2d415b8ccda9fdaba12c575d4d3c4b" />
<figcaption
aria-hidden="true">cc2d415b8ccda9fdaba12c575d4d3c4b</figcaption>
</figure>
<p>åœ¨ä¸Šå›¾æ¢¯åº¦ä¸­ï¼Œä½ ä¼šå‘ç°è¿™äº›çºµè½´ä¸Šçš„æ‘†åŠ¨å¹³å‡å€¼æ¥è¿‘äºé›¶ï¼Œæ‰€ä»¥åœ¨çºµè½´æ–¹å‘ï¼Œä½ å¸Œæœ›æ”¾æ…¢ä¸€ç‚¹ï¼Œå¹³å‡è¿‡ç¨‹ä¸­ï¼Œæ­£è´Ÿæ•°ç›¸äº’æŠµæ¶ˆï¼Œæ‰€ä»¥å¹³å‡å€¼æ¥è¿‘äºé›¶ã€‚ä½†åœ¨æ¨ªè½´æ–¹å‘ï¼Œæ‰€æœ‰çš„å¾®åˆ†éƒ½æŒ‡å‘æ¨ªè½´æ–¹å‘ï¼Œå› æ­¤æ¨ªè½´æ–¹å‘çš„å¹³å‡å€¼ä»ç„¶è¾ƒå¤§ï¼Œå› æ­¤ç”¨ç®—æ³•å‡ æ¬¡è¿­ä»£åï¼Œä½ å‘ç°åŠ¨é‡æ¢¯åº¦ä¸‹é™æ³•ï¼Œæœ€ç»ˆçºµè½´æ–¹å‘çš„æ‘†åŠ¨å˜å°äº†ï¼Œæ¨ªè½´æ–¹å‘è¿åŠ¨æ›´å¿«ï¼Œå› æ­¤ä½ çš„ç®—æ³•èµ°äº†ä¸€æ¡æ›´åŠ ç›´æ¥çš„è·¯å¾„ï¼Œåœ¨æŠµè¾¾æœ€å°å€¼çš„è·¯ä¸Šå‡å°‘äº†æ‘†åŠ¨ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023164850.png"
alt="89d51f9b5882cf226111b2c0eda2f3e3" />
<figcaption
aria-hidden="true">89d51f9b5882cf226111b2c0eda2f3e3</figcaption>
</figure>
<h2 id="rmsprop">RMSprop</h2>
<p>ä½ ä»¬çŸ¥é“äº†åŠ¨é‡ï¼ˆ<strong>Momentum</strong>ï¼‰å¯ä»¥åŠ å¿«æ¢¯åº¦ä¸‹é™ï¼Œè¿˜æœ‰ä¸€ä¸ªå«åš<strong>RMSprop</strong>çš„ç®—æ³•ï¼Œå…¨ç§°æ˜¯<strong>root
mean square prop</strong>ç®—æ³•ï¼Œå®ƒä¹Ÿå¯ä»¥åŠ é€Ÿæ¢¯åº¦ä¸‹é™ã€‚</p>
<p>å›å¿†ä¸€ä¸‹æˆ‘ä»¬ä¹‹å‰çš„ä¾‹å­ï¼Œå¦‚æœä½ æ‰§è¡Œæ¢¯åº¦ä¸‹é™ï¼Œè™½ç„¶æ¨ªè½´æ–¹å‘æ­£åœ¨æ¨è¿›ï¼Œä½†çºµè½´æ–¹å‘ä¼šæœ‰å¤§å¹…åº¦æ‘†åŠ¨ï¼Œä¸ºäº†åˆ†æè¿™ä¸ªä¾‹å­ï¼Œå‡è®¾çºµè½´ä»£è¡¨å‚æ•°<span
class="math inline">\(b\)</span>ï¼Œæ¨ªè½´ä»£è¡¨å‚æ•°<span
class="math inline">\(W\)</span>ï¼Œå¯èƒ½æœ‰<span
class="math inline">\(W_{1}\)</span>ï¼Œ<span
class="math inline">\(W_{2}\)</span>æˆ–è€…å…¶å®ƒé‡è¦çš„å‚æ•°ï¼Œä¸ºäº†ä¾¿äºç†è§£ï¼Œè¢«ç§°ä¸º<span
class="math inline">\(b\)</span>å’Œ<span
class="math inline">\(W\)</span>ã€‚</p>
<p>æ‰€ä»¥ï¼Œä½ æƒ³å‡ç¼“<span
class="math inline">\(b\)</span>æ–¹å‘çš„å­¦ä¹ ï¼Œå³çºµè½´æ–¹å‘ï¼ŒåŒæ—¶åŠ å¿«ï¼Œè‡³å°‘ä¸æ˜¯å‡ç¼“æ¨ªè½´æ–¹å‘çš„å­¦ä¹ ï¼Œ<strong>RMSprop</strong>ç®—æ³•å¯ä»¥å®ç°è¿™ä¸€ç‚¹ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023171734.png"
alt="553ee26f6efd82d9996dec5f77e3f12e" />
<figcaption
aria-hidden="true">553ee26f6efd82d9996dec5f77e3f12e</figcaption>
</figure>
<p>è®°å¾—åœ¨æ¨ªè½´æ–¹å‘æˆ–è€…åœ¨ä¾‹å­ä¸­çš„<span
class="math inline">\(W\)</span>æ–¹å‘ï¼Œæˆ‘ä»¬å¸Œæœ›å­¦ä¹ é€Ÿåº¦å¿«ï¼Œè€Œåœ¨å‚ç›´æ–¹å‘ï¼Œä¹Ÿå°±æ˜¯ä¾‹å­ä¸­çš„<span
class="math inline">\(b\)</span>æ–¹å‘ï¼Œæˆ‘ä»¬å¸Œæœ›å‡ç¼“çºµè½´ä¸Šçš„æ‘†åŠ¨ï¼Œæ‰€ä»¥æœ‰äº†<span
class="math inline">\(S_{dW}\)</span>å’Œ<span
class="math inline">\(S_{db}\)</span>ã€‚ä½ çœ‹è¿™äº›å¾®åˆ†ï¼Œå‚ç›´æ–¹å‘çš„è¦æ¯”æ°´å¹³æ–¹å‘çš„å¤§å¾—å¤šï¼Œæ‰€ä»¥æ–œç‡åœ¨<span
class="math inline">\(b\)</span>æ–¹å‘ç‰¹åˆ«å¤§ï¼Œæ‰€ä»¥è¿™äº›å¾®åˆ†ä¸­ï¼Œ<span
class="math inline">\(db\)</span>è¾ƒå¤§ï¼Œ<span
class="math inline">\(dW\)</span>è¾ƒå°ï¼Œå› ä¸ºå‡½æ•°çš„å€¾æ–œç¨‹åº¦ï¼Œåœ¨çºµè½´ä¸Šï¼Œä¹Ÿå°±æ˜¯bæ–¹å‘ä¸Šè¦å¤§äºåœ¨æ¨ªè½´ä¸Šï¼Œä¹Ÿå°±æ˜¯<span
class="math inline">\(W\)</span>æ–¹å‘ä¸Šã€‚<span
class="math inline">\(db\)</span>çš„å¹³æ–¹è¾ƒå¤§ï¼Œæ‰€ä»¥<span
class="math inline">\(S_{db}\)</span>ä¹Ÿä¼šè¾ƒå¤§ï¼Œè€Œç›¸æ¯”ä¹‹ä¸‹ï¼Œ<span
class="math inline">\(dW\)</span>ä¼šå°ä¸€äº›ï¼Œäº¦æˆ–<span
class="math inline">\(dW\)</span>å¹³æ–¹ä¼šå°ä¸€äº›ï¼Œå› æ­¤<span
class="math inline">\(S_{dW}\)</span>ä¼šå°ä¸€äº›ï¼Œç»“æœå°±æ˜¯çºµè½´ä¸Šçš„æ›´æ–°è¦è¢«ä¸€ä¸ªè¾ƒå¤§çš„æ•°ç›¸é™¤ï¼Œå°±èƒ½æ¶ˆé™¤æ‘†åŠ¨ï¼Œè€Œæ°´å¹³æ–¹å‘çš„æ›´æ–°åˆ™è¢«è¾ƒå°çš„æ•°ç›¸é™¤ã€‚</p>
<p>å¦‚æœ<span
class="math inline">\(S_{dW}\)</span>çš„å¹³æ–¹æ ¹è¶‹è¿‘äº0æ€ä¹ˆåŠï¼Ÿå¾—åˆ°çš„ç­”æ¡ˆå°±éå¸¸å¤§ï¼Œä¸ºäº†ç¡®ä¿æ•°å€¼ç¨³å®šï¼Œåœ¨å®é™…æ“ç»ƒçš„æ—¶å€™ï¼Œä½ è¦åœ¨åˆ†æ¯ä¸ŠåŠ ä¸Šä¸€ä¸ªå¾ˆå°å¾ˆå°çš„<span
class="math inline">\(\varepsilon\)</span>ï¼Œ<span
class="math inline">\(\varepsilon\)</span>æ˜¯å¤šå°‘æ²¡å…³ç³»ï¼Œ<span
class="math inline">\(10^{-8}\)</span>æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œè¿™åªæ˜¯ä¿è¯æ•°å€¼èƒ½ç¨³å®šä¸€äº›ã€‚</p>
<h2 id="adam-ä¼˜åŒ–ç®—æ³•adam-optimization-algorithm">Adam ä¼˜åŒ–ç®—æ³•(Adam
optimization algorithm)</h2>
<p><strong>Adam</strong>ä¼˜åŒ–ç®—æ³•åŸºæœ¬ä¸Šå°±æ˜¯å°†<strong>Momentum</strong>å’Œ<strong>RMSprop</strong>ç»“åˆåœ¨ä¸€èµ·</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023172610.png"
alt="9ca9bfc160d53b23ea0d1164e6accffe" />
<figcaption
aria-hidden="true">9ca9bfc160d53b23ea0d1164e6accffe</figcaption>
</figure>
<p><strong>Adam</strong>ç®—æ³•ç»“åˆäº†<strong>Momentum</strong>å’Œ<strong>RMSprop</strong>æ¢¯åº¦ä¸‹é™æ³•ï¼Œå¹¶ä¸”æ˜¯ä¸€ç§æå…¶å¸¸ç”¨çš„å­¦ä¹ ç®—æ³•ï¼Œè¢«è¯æ˜èƒ½æœ‰æ•ˆé€‚ç”¨äºä¸åŒç¥ç»ç½‘ç»œï¼Œé€‚ç”¨äºå¹¿æ³›çš„ç»“æ„ã€‚</p>
<p>æœ¬ç®—æ³•ä¸­æœ‰å¾ˆå¤šè¶…å‚æ•°ï¼Œè¶…å‚æ•°å­¦ä¹ ç‡<span
class="math inline">\(a\)</span>å¾ˆé‡è¦ï¼Œä¹Ÿç»å¸¸éœ€è¦è°ƒè¯•ï¼Œä½ å¯ä»¥å°è¯•ä¸€ç³»åˆ—å€¼ï¼Œç„¶åçœ‹å“ªä¸ªæœ‰æ•ˆã€‚<span
class="math inline">\(\beta_{1}\)</span>å¸¸ç”¨çš„ç¼ºçœå€¼ä¸º0.9ï¼Œè¿™æ˜¯dWçš„ç§»åŠ¨å¹³å‡æ•°ï¼Œä¹Ÿå°±æ˜¯<span
class="math inline">\(dW\)</span>çš„åŠ æƒå¹³å‡æ•°ï¼Œè¿™æ˜¯<strong>Momentum</strong>æ¶‰åŠçš„é¡¹ã€‚è‡³äºè¶…å‚æ•°<span
class="math inline">\(\beta_{2}\)</span>ï¼Œ<strong>Adam</strong>è®ºæ–‡ä½œè€…ï¼Œä¹Ÿå°±æ˜¯<strong>Adam</strong>ç®—æ³•çš„å‘æ˜è€…ï¼Œæ¨èä½¿ç”¨0.999ï¼Œè¿™æ˜¯åœ¨è®¡ç®—<span
class="math inline">\({(dW)}^{2}\)</span>ä»¥åŠ<span
class="math inline">\({(db)}^{2}\)</span>çš„ç§»åŠ¨åŠ æƒå¹³å‡å€¼ï¼Œå…³äº<span
class="math inline">\(\varepsilon\)</span>çš„é€‰æ‹©å…¶å®æ²¡é‚£ä¹ˆé‡è¦ï¼Œ<strong>Adam</strong>è®ºæ–‡çš„ä½œè€…å»ºè®®<span
class="math inline">\(\varepsilon\)</span>ä¸º<span
class="math inline">\(10^{-8}\)</span>ï¼Œä½†ä½ å¹¶ä¸éœ€è¦è®¾ç½®å®ƒï¼Œå› ä¸ºå®ƒå¹¶ä¸ä¼šå½±å“ç®—æ³•è¡¨ç°ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨<strong>Adam</strong>çš„æ—¶å€™ï¼Œäººä»¬å¾€å¾€ä½¿ç”¨ç¼ºçœå€¼å³å¯ï¼Œ<span
class="math inline">\(\beta_{1}\)</span>ï¼Œ<span
class="math inline">\(\beta_{2}\)</span>å’Œ<span
class="math inline">\(\varepsilon\)</span>éƒ½æ˜¯å¦‚æ­¤ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023172644.png"
alt="e9858303cd62eacc21759b16a121ff58" />
<figcaption
aria-hidden="true">e9858303cd62eacc21759b16a121ff58</figcaption>
</figure>
<h2 id="å­¦ä¹ ç‡è¡°å‡learning-rate-decay">å­¦ä¹ ç‡è¡°å‡(Learning rate
decay)</h2>
<p>æ…¢æ…¢å‡å°‘<span
class="math inline">\(a\)</span>çš„æœ¬è´¨åœ¨äºï¼Œåœ¨å­¦ä¹ åˆæœŸï¼Œä½ èƒ½æ‰¿å—è¾ƒå¤§çš„æ­¥ä¼ï¼Œä½†å½“å¼€å§‹æ”¶æ•›çš„æ—¶å€™ï¼Œå°ä¸€äº›çš„å­¦ä¹ ç‡èƒ½è®©ä½ æ­¥ä¼å°ä¸€äº›ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023185637.png"
alt="7c4141aeec2ef4afc6aa534a486a34c8" />
<figcaption
aria-hidden="true">7c4141aeec2ef4afc6aa534a486a34c8</figcaption>
</figure>
<p>ä½ åº”è¯¥æ‹†åˆ†æˆä¸åŒçš„<strong>mini-batch</strong>ï¼Œç¬¬ä¸€æ¬¡éå†è®­ç»ƒé›†å«åšç¬¬ä¸€ä»£ã€‚ç¬¬äºŒæ¬¡å°±æ˜¯ç¬¬äºŒä»£ï¼Œä¾æ­¤ç±»æ¨ï¼Œä½ å¯ä»¥å°†<span
class="math inline">\(a\)</span>å­¦ä¹ ç‡è®¾ä¸º<span class="math inline">\(a=
\frac{1}{1 + decayrate *
\text{epoch}\text{-num}}a_{0}\)</span>ï¼ˆ<strong>decay-rate</strong>ç§°ä¸ºè¡°å‡ç‡ï¼Œ<strong>epoch-num</strong>ä¸ºä»£æ•°ï¼Œ<span
class="math inline">\(\alpha_{0}\)</span>ä¸ºåˆå§‹å­¦ä¹ ç‡ï¼‰ï¼Œæ³¨æ„è¿™ä¸ªè¡°å‡ç‡æ˜¯å¦ä¸€ä¸ªä½ éœ€è¦è°ƒæ•´çš„è¶…å‚æ•°ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023185644.png"
alt="7e0edfb697e8262dc39a040a987c62bd" />
<figcaption
aria-hidden="true">7e0edfb697e8262dc39a040a987c62bd</figcaption>
</figure>
<p>é™¤äº†è¿™ä¸ªå­¦ä¹ ç‡è¡°å‡çš„å…¬å¼ï¼Œäººä»¬è¿˜ä¼šç”¨å…¶å®ƒçš„å…¬å¼ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023185740.png"
alt="e1b6dc57b8b73ecf5ff400852c4f7086" />
<figcaption
aria-hidden="true">e1b6dc57b8b73ecf5ff400852c4f7086</figcaption>
</figure>
<h2 id="è°ƒè¯•è¶…å‚æ•°">è°ƒè¯•è¶…å‚æ•°</h2>
<p>æœ€ä¸ºå¹¿æ³›çš„å­¦ä¹ åº”ç”¨æ˜¯<span
class="math inline">\(a\)</span>ï¼Œå­¦ä¹ é€Ÿç‡æ˜¯éœ€è¦è°ƒè¯•çš„æœ€é‡è¦çš„è¶…å‚æ•°ã€‚</p>
<p>é™¤äº†<span
class="math inline">\(a\)</span>ï¼Œè¿˜æœ‰ä¸€äº›å‚æ•°éœ€è¦è°ƒè¯•ï¼Œä¾‹å¦‚<strong>Momentum</strong>å‚æ•°<span
class="math inline">\(\beta\)</span>ï¼Œ0.9å°±æ˜¯ä¸ªå¾ˆå¥½çš„é»˜è®¤å€¼ã€‚æˆ‘è¿˜ä¼šè°ƒè¯•<strong>mini-batch</strong>çš„å¤§å°ï¼Œä»¥ç¡®ä¿æœ€ä¼˜ç®—æ³•è¿è¡Œæœ‰æ•ˆã€‚æˆ‘è¿˜ä¼šç»å¸¸è°ƒè¯•éšè—å•å…ƒæ•°ç›®ã€‚</p>
<p>å½“åº”ç”¨<strong>Adam</strong>ç®—æ³•æ—¶ï¼Œäº‹å®ä¸Šï¼Œæˆ‘ä»ä¸è°ƒè¯•<span
class="math inline">\(\beta_{1}\)</span>ï¼Œ<span
class="math inline">\({\beta}_{2}\)</span>å’Œ<span
class="math inline">\(\varepsilon\)</span>ï¼Œæˆ‘æ€»æ˜¯é€‰å®šå…¶åˆ†åˆ«ä¸º0.9ï¼Œ0.999å’Œ<span
class="math inline">\(10^{-8}\)</span>ã€‚</p>
<p>å½“ä½ ç»™è¶…å‚æ•°å–å€¼æ—¶ï¼Œå¦ä¸€ä¸ªæƒ¯ä¾‹æ˜¯é‡‡ç”¨ç”±ç²—ç³™åˆ°ç²¾ç»†çš„ç­–ç•¥ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023190403.png"
alt="c3b248ac8ca2cf646d5b705270e01e78" />
<figcaption
aria-hidden="true">c3b248ac8ca2cf646d5b705270e01e78</figcaption>
</figure>
<p>æ¯”å¦‚åœ¨äºŒç»´çš„é‚£ä¸ªä¾‹å­ä¸­ï¼Œä½ è¿›è¡Œäº†å–å€¼ï¼Œä¹Ÿè®¸ä½ ä¼šå‘ç°æ•ˆæœæœ€å¥½çš„æŸä¸ªç‚¹ï¼Œä¹Ÿè®¸è¿™ä¸ªç‚¹å‘¨å›´çš„å…¶ä»–ä¸€äº›ç‚¹æ•ˆæœä¹Ÿå¾ˆå¥½ï¼Œé‚£åœ¨æ¥ä¸‹æ¥è¦åšçš„æ˜¯æ”¾å¤§è¿™å—å°åŒºåŸŸï¼ˆå°è“è‰²æ–¹æ¡†å†…ï¼‰ï¼Œç„¶ååœ¨å…¶ä¸­æ›´å¯†é›†å¾—å–å€¼æˆ–éšæœºå–å€¼ï¼Œèšé›†æ›´å¤šçš„èµ„æºï¼Œåœ¨è¿™ä¸ªè“è‰²çš„æ–¹æ ¼ä¸­æœç´¢ï¼Œå¦‚æœä½ æ€€ç–‘è¿™äº›è¶…å‚æ•°åœ¨è¿™ä¸ªåŒºåŸŸçš„æœ€ä¼˜ç»“æœï¼Œé‚£åœ¨æ•´ä¸ªçš„æ–¹æ ¼ä¸­è¿›è¡Œç²—ç•¥æœç´¢åï¼Œä½ ä¼šçŸ¥é“æ¥ä¸‹æ¥åº”è¯¥èšç„¦åˆ°æ›´å°çš„æ–¹æ ¼ä¸­ã€‚åœ¨æ›´å°çš„æ–¹æ ¼ä¸­ï¼Œä½ å¯ä»¥æ›´å¯†é›†å¾—å–ç‚¹ã€‚æ‰€ä»¥è¿™ç§ä»ç²—åˆ°ç»†çš„æœç´¢ä¹Ÿç»å¸¸ä½¿ç”¨ã€‚</p>
<h2
id="ä¸ºè¶…å‚æ•°é€‰æ‹©åˆé€‚çš„èŒƒå›´using-an-appropriate-scale-to-pick-hyperparameters">ä¸ºè¶…å‚æ•°é€‰æ‹©åˆé€‚çš„èŒƒå›´ï¼ˆUsing
an appropriate scale to pick hyperparametersï¼‰</h2>
<p>åœ¨è¶…å‚æ•°èŒƒå›´ä¸­ï¼Œéšæœºå–å€¼å¯ä»¥æå‡ä½ çš„æœç´¢æ•ˆç‡ã€‚ä½†éšæœºå–å€¼å¹¶ä¸æ˜¯åœ¨æœ‰æ•ˆèŒƒå›´å†…çš„éšæœºå‡åŒ€å–å€¼ï¼Œè€Œæ˜¯é€‰æ‹©åˆé€‚çš„æ ‡å°ºï¼Œç”¨äºæ¢ç©¶è¿™äº›è¶…å‚æ•°ï¼Œè¿™å¾ˆé‡è¦ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023191011.png"
alt="651422f74439fd7e648e364d26d21485" />
<figcaption
aria-hidden="true">651422f74439fd7e648e364d26d21485</figcaption>
</figure>
<p>çœ‹çœ‹è¿™ä¸ªä¾‹å­ï¼Œå‡è®¾ä½ åœ¨æœç´¢è¶…å‚æ•°<span
class="math inline">\(a\)</span>ï¼ˆå­¦ä¹ é€Ÿç‡ï¼‰ï¼Œå‡è®¾ä½ æ€€ç–‘å…¶å€¼æœ€å°æ˜¯0.0001æˆ–æœ€å¤§æ˜¯1ã€‚å¦‚æœä½ ç”»ä¸€æ¡ä»0.0001åˆ°1çš„æ•°è½´ï¼Œæ²¿å…¶éšæœºå‡åŒ€å–å€¼ï¼Œé‚£90%çš„æ•°å€¼å°†ä¼šè½åœ¨0.1åˆ°1ä¹‹é—´ï¼Œç»“æœå°±æ˜¯ï¼Œåœ¨0.1åˆ°1ä¹‹é—´ï¼Œåº”ç”¨äº†90%çš„èµ„æºï¼Œè€Œåœ¨0.0001åˆ°0.1ä¹‹é—´ï¼Œåªæœ‰10%çš„æœç´¢èµ„æºï¼Œè¿™çœ‹ä¸Šå»ä¸å¤ªå¯¹ã€‚</p>
<p>åè€Œï¼Œç”¨å¯¹æ•°æ ‡å°ºæœç´¢è¶…å‚æ•°çš„æ–¹å¼ä¼šæ›´åˆç†ï¼Œå› æ­¤è¿™é‡Œä¸ä½¿ç”¨çº¿æ€§è½´ï¼Œåˆ†åˆ«ä¾æ¬¡å–0.0001ï¼Œ0.001ï¼Œ0.01ï¼Œ0.1ï¼Œ1ï¼Œåœ¨å¯¹æ•°è½´ä¸Šå‡åŒ€éšæœºå–ç‚¹ï¼Œè¿™æ ·ï¼Œåœ¨0.0001åˆ°0.001ä¹‹é—´ï¼Œå°±ä¼šæœ‰æ›´å¤šçš„æœç´¢èµ„æºå¯ç”¨ï¼Œè¿˜æœ‰åœ¨0.001åˆ°0.01ä¹‹é—´ç­‰ç­‰ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023191028.png"
alt="08307acea7c8db95c1479c611189dbfa" />
<figcaption
aria-hidden="true">08307acea7c8db95c1479c611189dbfa</figcaption>
</figure>
<p>æ‰€ä»¥åœ¨<strong>Python</strong>ä¸­ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼Œä½¿<code>r=-4*np.random.rand()</code>ï¼Œç„¶å<span
class="math inline">\(a\)</span>éšæœºå–å€¼ï¼Œ$ a =10^{r}<span
class="math inline">\(ï¼Œæ‰€ä»¥ï¼Œç¬¬ä¸€è¡Œå¯ä»¥å¾—å‡º\)</span>r <span
class="math inline">\(ï¼Œé‚£ä¹ˆ\)</span>a $ï¼Œæ‰€ä»¥æœ€å·¦è¾¹çš„æ•°å­—æ˜¯<span
class="math inline">\(10^{-4}\)</span>ï¼Œæœ€å³è¾¹æ˜¯<span
class="math inline">\(10^{0}\)</span>ã€‚</p>
<h2
id="å½’ä¸€åŒ–ç½‘ç»œçš„æ¿€æ´»å‡½æ•°normalizing-activations-in-a-network">å½’ä¸€åŒ–ç½‘ç»œçš„æ¿€æ´»å‡½æ•°ï¼ˆNormalizing
activations in a networkï¼‰</h2>
<p>å¯¹æ¯ä¸€å±‚çš„Zè¿›è¡Œå½’ä¸€åŒ–</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023191837.png"
alt="e10ea98faa1ce9fe86ec8bf9f4fef71e" />
<figcaption
aria-hidden="true">e10ea98faa1ce9fe86ec8bf9f4fef71e</figcaption>
</figure>
<p>ç°åœ¨æˆ‘ä»¬å·²æŠŠè¿™äº›<span
class="math inline">\(z\)</span>å€¼æ ‡å‡†åŒ–ï¼ŒåŒ–ä¸ºå«å¹³å‡å€¼0å’Œæ ‡å‡†å•ä½æ–¹å·®ï¼Œæ‰€ä»¥<span
class="math inline">\(z\)</span>çš„æ¯ä¸€ä¸ªåˆ†é‡éƒ½å«æœ‰å¹³å‡å€¼0å’Œæ–¹å·®1ï¼Œä½†æˆ‘ä»¬ä¸æƒ³è®©éšè—å•å…ƒæ€»æ˜¯å«æœ‰å¹³å‡å€¼0å’Œæ–¹å·®1ï¼Œä¹Ÿè®¸éšè—å•å…ƒæœ‰äº†ä¸åŒçš„åˆ†å¸ƒä¼šæœ‰æ„ä¹‰ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰€è¦åšçš„å°±æ˜¯è®¡ç®—ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º<span
class="math inline">\({\tilde{z}}^{(i)}\)</span>ï¼Œ<span
class="math inline">\({\tilde{z}}^{(i)}= \gamma z_{\text{norm}}^{(i)}
+\beta\)</span>ï¼Œè¿™é‡Œ<span class="math inline">\(\gamma\)</span>å’Œ<span
class="math inline">\(\beta\)</span>æ˜¯ä½ æ¨¡å‹çš„å­¦ä¹ å‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨æ¢¯åº¦ä¸‹é™æˆ–ä¸€äº›å…¶å®ƒç±»ä¼¼æ¢¯åº¦ä¸‹é™çš„ç®—æ³•ï¼Œæ¯”å¦‚<strong>Momentum</strong>æˆ–è€…<strong>Nesterov</strong>ï¼Œ<strong>Adam</strong>ï¼Œä½ ä¼šæ›´æ–°<span
class="math inline">\(\gamma\)</span>å’Œ<span
class="math inline">\(\beta\)</span>ï¼Œæ­£å¦‚æ›´æ–°ç¥ç»ç½‘ç»œçš„æƒé‡ä¸€æ ·ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023191908.png"
alt="3d494a1d3fb25f7fd67f1bdbf8d8e464" />
<figcaption
aria-hidden="true">3d494a1d3fb25f7fd67f1bdbf8d8e464</figcaption>
</figure>
<p>è¯·æ³¨æ„<span class="math inline">\(\gamma\)</span>å’Œ<span
class="math inline">\(\beta\)</span>çš„ä½œç”¨æ˜¯ï¼Œä½ å¯ä»¥éšæ„è®¾ç½®<span
class="math inline">\({\tilde{z}}^{(i)}\)</span>çš„å¹³å‡å€¼ï¼Œäº‹å®ä¸Šï¼Œå¦‚æœ<span
class="math inline">\(\gamma= \sqrt{\sigma^{2}
+\varepsilon}\)</span>ï¼Œå¦‚æœ<span
class="math inline">\(\gamma\)</span>ç­‰äºè¿™ä¸ªåˆ†æ¯é¡¹ï¼ˆ<span
class="math inline">\(z_{\text{norm}}^{(i)} = \frac{z^{(i)}
-\mu}{\sqrt{\sigma^{2} +\varepsilon}}\)</span>ä¸­çš„åˆ†æ¯ï¼‰ï¼Œ<span
class="math inline">\(\beta\)</span>ç­‰äº<span
class="math inline">\(\mu\)</span>ï¼Œè¿™é‡Œçš„è¿™ä¸ªå€¼æ˜¯<span
class="math inline">\(z_{\text{norm}}^{(i)}= \frac{z^{(i)} -
\mu}{\sqrt{\sigma^{2} + \varepsilon}}\)</span>ä¸­çš„<span
class="math inline">\(\mu\)</span>ï¼Œé‚£ä¹ˆ<span
class="math inline">\(\gamma z_{\text{norm}}^{(i)}
+\beta\)</span>çš„ä½œç”¨åœ¨äºï¼Œå®ƒä¼šç²¾ç¡®è½¬åŒ–è¿™ä¸ªæ–¹ç¨‹ï¼Œå¦‚æœè¿™äº›æˆç«‹ï¼ˆ<span
class="math inline">\(\gamma =\sqrt{\sigma^{2} + \varepsilon},\beta
=\mu\)</span>ï¼‰ï¼Œé‚£ä¹ˆ<span class="math inline">\({\tilde{z}}^{(i)} =
z^{(i)}\)</span>ã€‚</p>
<p>é€šè¿‡å¯¹<span class="math inline">\(\gamma\)</span>å’Œ<span
class="math inline">\(\beta\)</span>åˆç†è®¾å®šï¼Œè§„èŒƒåŒ–è¿‡ç¨‹ï¼Œå³è¿™å››ä¸ªç­‰å¼ï¼Œä»æ ¹æœ¬æ¥è¯´ï¼Œåªæ˜¯è®¡ç®—æ’ç­‰å‡½æ•°ï¼Œé€šè¿‡èµ‹äºˆ<span
class="math inline">\(\gamma\)</span>å’Œ<span
class="math inline">\(\beta\)</span>å…¶å®ƒå€¼ï¼Œå¯ä»¥ä½¿ä½ æ„é€ å«å…¶å®ƒå¹³å‡å€¼å’Œæ–¹å·®çš„éšè—å•å…ƒå€¼ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023191937.png"
alt="6216dd90d3483f05f08bd8dc86fc7df6" />
<figcaption
aria-hidden="true">6216dd90d3483f05f08bd8dc86fc7df6</figcaption>
</figure>
<h2 id="softmax-å›å½’softmax-regression">Softmax å›å½’ï¼ˆSoftmax
regressionï¼‰</h2>
<p><strong>Softmax</strong>å›å½’ä¸»è¦ç”¨æ¥åšå¤šåˆ†ç±»ä»»åŠ¡</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023192500.png"
alt="e65ba7b81d0b02d021c33bf0094f4059" />
<figcaption
aria-hidden="true">e65ba7b81d0b02d021c33bf0094f4059</figcaption>
</figure>
<p>è®©ä½ çš„ç½‘ç»œåšåˆ°è¿™ä¸€ç‚¹çš„æ ‡å‡†æ¨¡å‹è¦ç”¨åˆ°<strong>Softmax</strong>å±‚ï¼Œä»¥åŠè¾“å‡ºå±‚æ¥ç”Ÿæˆè¾“å‡ºï¼Œè®©æˆ‘æŠŠå¼å­å†™ä¸‹æ¥ï¼Œç„¶åå›è¿‡å¤´æ¥ï¼Œå°±ä¼šå¯¹<strong>Softmax</strong>çš„ä½œç”¨æœ‰ä¸€ç‚¹æ„Ÿè§‰äº†ã€‚</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023192523.png"
alt="97ab8f2af0788776bdd486c5f4f40354" />
<figcaption
aria-hidden="true">97ab8f2af0788776bdd486c5f4f40354</figcaption>
</figure>
<p>æŸå¤±å‡½æ•°ï¼š</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023192609.png"
alt="ed6ccb8dc9e65953f383a3bb774e8f53" />
<figcaption
aria-hidden="true">ed6ccb8dc9e65953f383a3bb774e8f53</figcaption>
</figure>
<p>æ¢¯åº¦ä¸‹é™ï¼š</p>
<figure>
<img
src="http://zchsakura-blog.oss-cn-beijing.aliyuncs.com/20201023192636.png"
alt="c357c15e4133152bd8bb262789e71765" />
<figcaption
aria-hidden="true">c357c15e4133152bd8bb262789e71765</figcaption>
</figure>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>æ·±åº¦å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
        <tag>æ­£åˆ™åŒ–</tag>
        <tag>å½’ä¸€åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title>çˆ¬è™«å¸¸ç”¨æ“ä½œç¬”è®°</title>
    <url>/%E7%88%AC%E8%99%AB%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<p>è®°å½•ä¸€äº›å¸¸ç”¨çš„ä»£ç ï¼Œå…å¾—è€å»ç¿»ä»£ç </p>
<a id="more"></a>
<h3 id="é…ç½®">0.é…ç½®</h3>
<p><strong>åˆ›å»ºé¡¹ç›®</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">scrapy startproject adb</span><br></pre></td></tr></table></figure>
<p><strong>åˆ›å»ºçˆ¬è™«</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd adb</span><br><span class="line">scrapy genspider çˆ¬è™«åå­— ***.com</span><br></pre></td></tr></table></figure>
<p><strong>è§£é‡Šå™¨åœ°å€</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:\Anaconda3\Lib\site-packages\scrapy\cmdline.py</span><br></pre></td></tr></table></figure>
<p><strong>å‚æ•°</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">crawl çˆ¬è™«åå­—</span><br></pre></td></tr></table></figure>
<h3 id="ç¿»é¡µ">1.ç¿»é¡µ</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç¿»é¡µ</span></span><br><span class="line">next_page = response.xpath(<span class="string">'//div[@class="page"]/a[contains(text(),"ä¸‹ä¸€é¡µ")]/@href'</span>).extract_first()</span><br><span class="line"><span class="keyword">if</span> next_page:</span><br><span class="line">	next_url = <span class="string">'https://www.2345daohang.com'</span> + next_page</span><br><span class="line">	<span class="keyword">yield</span> scrapy.Request(next_url, callback=self.bookList, meta=&#123;<span class="string">'category'</span>: response.meta[<span class="string">'category'</span>]&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="contentå¤„ç†">2.contentå¤„ç†</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">content = element.xpath(<span class="string">'string(.)'</span>).replace(<span class="string">'\xa0'</span>, <span class="string">''</span>).replace(<span class="string">'a("conten");'</span>, <span class="string">''</span>).split(<span class="string">'\n'</span>)</span><br><span class="line">item[<span class="string">'content'</span>] = [i <span class="keyword">for</span> i <span class="keyword">in</span> content <span class="keyword">if</span> i != <span class="string">''</span>]</span><br></pre></td></tr></table></figure>
<h3 id="æ‰¹é‡å…¥åº“">3.æ‰¹é‡å…¥åº“</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*-coding:utf-8-*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line">filename = <span class="string">"******\\yangsheng_info.csv"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(filename, <span class="string">'r'</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    reader = csv.reader(f)</span><br><span class="line">    data = list(reader)</span><br><span class="line">    data.pop(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">db = pymysql.connect(<span class="string">'182.92.226.**'</span>, <span class="string">'root'</span>, <span class="string">'å¯†ç '</span>, <span class="string">'theOld'</span>)</span><br><span class="line">cursor = db.cursor()</span><br><span class="line"></span><br><span class="line">sql = <span class="string">"INSERT INTO main_data_tougaolanmu(theme,name,content) VALUES(%s,%s,%s)"</span></span><br><span class="line">cursor.executemany(sql, data)</span><br><span class="line"></span><br><span class="line">print(<span class="string">"æ•°æ®åº“å¯¼å…¥æ“ä½œ"</span>)</span><br><span class="line"></span><br><span class="line">db.commit()</span><br><span class="line">db.close</span><br></pre></td></tr></table></figure>
<h3 id="é€æ¡å…¥åº“">4.é€æ¡å…¥åº“</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*-coding:utf-8-*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line">filename = <span class="string">"***************\\minsu_info.csv"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(filename, <span class="string">'r'</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    reader = csv.reader(f)</span><br><span class="line">    data = list(reader)</span><br><span class="line">    data.pop(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">db = pymysql.connect(<span class="string">'182.92.226.**'</span>, <span class="string">'root'</span>, <span class="string">'å¯†ç '</span>, <span class="string">'theOld'</span>)</span><br><span class="line">cursor = db.cursor()</span><br><span class="line"></span><br><span class="line">i = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> dd <span class="keyword">in</span> data:</span><br><span class="line">    i += <span class="number">1</span></span><br><span class="line">    sql1 = <span class="string">"SELECT id from user_userInfo WHERE nickname = %s"</span></span><br><span class="line">    <span class="keyword">if</span> dd[<span class="number">1</span>] == <span class="string">'ä½šå'</span>:</span><br><span class="line">        dd[<span class="number">1</span>] = <span class="string">'å®˜æ–¹2å·'</span></span><br><span class="line">    cursor.execute(sql1, dd[<span class="number">1</span>])  <span class="comment"># æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">    results = cursor.fetchall()  <span class="comment"># è·å–æ‰€æœ‰è®°å½•åˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">if</span> results:</span><br><span class="line">        sql2 = <span class="string">"INSERT INTO main_data_tougaolanmu(secondTypeId,name,userId,content,modifiedTime) VALUES(38,%s,%s,%s,NOW())"</span></span><br><span class="line">        dad = dd</span><br><span class="line">        dad[<span class="number">1</span>] = results[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            cursor.execute(sql2, dad)</span><br><span class="line">            <span class="comment"># æäº¤ä¿®æ”¹</span></span><br><span class="line">            db.commit()</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="comment"># å‘ç”Ÿé”™è¯¯æ—¶å›æ»š</span></span><br><span class="line">            print(<span class="string">'å‡ºé”™1'</span>)</span><br><span class="line">            db.rollback()</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        sql3 = <span class="string">"INSERT INTO user_userInfo(nickname) VALUES(%s)"</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            cursor.execute(sql3, dd[<span class="number">1</span>])</span><br><span class="line">            <span class="comment"># æäº¤ä¿®æ”¹</span></span><br><span class="line">            db.commit()</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="comment"># å‘ç”Ÿé”™è¯¯æ—¶å›æ»š</span></span><br><span class="line">            print(<span class="string">'å‡ºé”™2'</span>)</span><br><span class="line">            db.rollback()</span><br><span class="line">        cursor.execute(sql1, dd[<span class="number">1</span>])  <span class="comment"># æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">        result = cursor.fetchall()  <span class="comment"># è·å–æ‰€æœ‰è®°å½•åˆ—è¡¨</span></span><br><span class="line">        sql4 = <span class="string">"INSERT INTO main_data_tougaolanmu(secondTypeId,name,userId,content,modifiedTime) VALUES(38,%s,%s,%s,NOW())"</span></span><br><span class="line">        dad = dd</span><br><span class="line">        dad[<span class="number">1</span>] = result[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            cursor.execute(sql4, dad)</span><br><span class="line">            <span class="comment"># æäº¤ä¿®æ”¹</span></span><br><span class="line">            db.commit()</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            print(<span class="string">'å‡ºé”™3'</span>)</span><br><span class="line">            <span class="comment"># å‘ç”Ÿé”™è¯¯æ—¶å›æ»š</span></span><br><span class="line">            db.rollback()</span><br><span class="line">    print(i, results)</span><br><span class="line"></span><br><span class="line">db.close</span><br></pre></td></tr></table></figure>
<h3 id="è·å–html">5.è·å–HTML</h3>
<p>scrapyçš„åŸç”Ÿçš„<code>response</code>å¯ä»¥ç›´æ¥è°ƒç”¨<code>.text()</code>å‡½æ•°ï¼Œä½†æ˜¯å½“<code>response</code>è°ƒç”¨è¿‡<code>xpath</code>ä¹‹åè™½ç„¶ä½¿ç”¨<code>dir()</code>æ˜¾ç¤ºè¿˜æ˜¯æœ‰<code>text</code>å±æ€§ä½†æ˜¯å¹¶ä¸èƒ½è°ƒç”¨ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨<code>getall()</code>è·å–å¯¹åº”çš„htmlï¼Œä¹‹åå†ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œ<code>split()</code>ä¹‹ç±»çš„è¿›è¡Œæ•°æ®çš„å¤„ç†ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">content = response.xpath(<span class="string">'//div[@class="ct tt zooms"]'</span>)[<span class="number">0</span>].getall()[<span class="number">0</span>]</span><br><span class="line">item[<span class="string">'content'</span>] = re.sub(<span class="string">r'href="([^"])*[^=k]"'</span>, <span class="string">""</span>, content)</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºcsv">6.åˆ›å»ºCSV</h3>
<figure class="highlight python"><figcaption><span>csv_init.py</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'../../book_info.csv'</span>, <span class="string">'a'</span>, encoding=<span class="string">"utf-8"</span>, newline=<span class="string">''</span>) <span class="keyword">as</span> file_obj:</span><br><span class="line">    writer = csv.writer(file_obj)</span><br><span class="line">    row = [<span class="string">"category"</span>, <span class="string">"name"</span>, <span class="string">"cover"</span>, <span class="string">"author"</span>, <span class="string">"intro"</span>]</span><br><span class="line">    writer.writerow(row)</span><br></pre></td></tr></table></figure>
<h3 id="ç®¡é“">7.ç®¡é“</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'11_1900.csv'</span>, <span class="string">'a'</span>, encoding=<span class="string">"utf-8"</span>, newline=<span class="string">''</span>) <span class="keyword">as</span> file_obj:</span><br><span class="line">    writer = csv.writer(file_obj)</span><br><span class="line">    row = [item[<span class="string">"name"</span>], item[<span class="string">"othername"</span>], item[<span class="string">'author'</span>], item[<span class="string">'country'</span>], item[<span class="string">'time'</span>], item[<span class="string">'intro'</span>]]</span><br><span class="line">    writer.writerow(row)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>çˆ¬è™«</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>python</tag>
        <tag>scrapy</tag>
      </tags>
  </entry>
  <entry>
    <title>ç ”ç©¶ç”Ÿç»„ä¼š</title>
    <url>/%E7%A0%94%E7%A9%B6%E7%94%9F%E7%BB%84%E4%BC%9A/</url>
    <content><![CDATA[<p>è®°å½•ç»„ä¼šå†…å®¹</p>
<a id="more"></a>
<h1 id="section">2020.10.21</h1>
<h2 id="augfpn">augFPN</h2>
<p>FPNä¸­ç‰¹å¾é‡‘å­—å¡”</p>
<p>é—®é¢˜ï¼š</p>
<ul>
<li>å±‚é—´è¯­ä¹‰å·®å¼‚</li>
<li>æœ€é«˜å±‚ç‰¹å¾ä¿¡æ¯éšæ—¶</li>
<li>roiçš„å¯å‘å¼åˆ†é…ç­–ç•¥</li>
</ul>
<p>æå‡ºaugFPN</p>
<ul>
<li>ç‰¹å¾èåˆå‰ä½¿ç”¨ç›¸é€šçš„ç›‘ç£ä¿¡å·ï¼Œç¼©å°äºä¸€å·®è·
<ul>
<li>å…±äº«æƒé‡</li>
<li>åªåœ¨è®­ç»ƒæ—¶ç”¨</li>
</ul></li>
<li>æ®‹å·®ç‰¹å¾å¢å¼º
<ul>
<li>ä½¿ç”¨ç©ºé—´ä¿¡æ¯</li>
</ul></li>
<li>è½¯roié€‰æ‹©</li>
</ul>
<h2 id="éå±€éƒ¨u-net">éå±€éƒ¨U-Net</h2>
<p>åŒ»å­¦å›¾åƒåˆ†å‰²</p>
<p>Uå‹ç½‘ç»œ</p>
<p>U -netå±€é™ï¼š</p>
<ul>
<li>å±€éƒ¨è¿ç®—ï¼Œå°å†…æ ¸</li>
<li>æ›´å¤šçš„ä¸Šã€ä¸‹é‡‡æ ·ä¸¢å¤±æ›´å¤šç©ºé—´ä¿¡æ¯</li>
</ul>
<p>åˆ›æ–°ï¼š</p>
<ul>
<li>ä½çº§ç‰¹å¾å’Œé«˜çº§ç‰¹å¾ä½¿ç”¨æ±‚å’Œè€Œä¸æ˜¯è¿æ¥</li>
</ul>
]]></content>
      <categories>
        <category>ç»„ä¼š</category>
      </categories>
      <tags>
        <tag>å›¾åƒå¤„ç†</tag>
        <tag>ç»„ä¼š</tag>
      </tags>
  </entry>
  <entry>
    <title>é˜¿é‡Œäº‘å®‰å…¨ç»„å¼€æ”¾ç«¯å£ä¸ç”Ÿæ•ˆ</title>
    <url>/%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%89%E5%85%A8%E7%BB%84%E5%BC%80%E6%94%BE%E7%AB%AF%E5%8F%A3%E4%B8%8D%E7%94%9F%E6%95%88/</url>
    <content><![CDATA[<p>æœ‰ä¸€å¤©å¼€å§‹ç»ƒä¹ Djangoï¼Œç„¶åå‘ç°æ€ä¹ˆéƒ½åœ¨7997ç«¯å£ä¸Šè·‘ä¸èµ·æ¥ï¼Œä¸€å¼€å§‹æˆ‘è¿˜ä»¥ä¸ºæ˜¯æ–°ç‰ˆæœ¬å’Œè€ç‰ˆæœ¬æ–¹å¼ä¸ä¸€æ ·ï¼Œå› ä¸ºæˆ‘7997å·²ç»åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°æ”¾è¡Œäº†ï¼Œä½†æ˜¯åœ¨ä¹‹å‰å¼€æ”¾çš„8000ç«¯å£å´èƒ½å¤Ÿæ­£å¸¸è¿è¡Œï¼Œè¿™æ—¶æˆ‘æ„Ÿè§‰åº”è¯¥æ˜¯ç«¯å£çš„é—®é¢˜ï¼Œåæ¥å‘ç°æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆé˜¿é‡Œäº‘é‡Œé¢å·²ç»å¼€æ”¾äº†ä½†æ˜¯ufwå´æ²¡æœ‰å…è®¸7997ç«¯å£ï¼ŒåŸå› æˆ‘ä¸çŸ¥é“æ˜¯ä¸ºä»€ä¹ˆï¼Œåªæ‰¾åˆ°äº†è§£å†³æ–¹æ³•ã€‚è¿™é‡Œè®°å½•ä¸€äº›ufwç”¨æ³•ã€‚</p>
<p>å‚è€ƒï¼šhttps://blog.csdn.net/bigdata_mining/article/details/80699180</p>
<a id="more"></a>
<p>LInuxåŸå§‹çš„é˜²ç«å¢™å·¥å…·iptablesç”±äºè¿‡äºç¹çï¼Œæ‰€ä»¥ubuntuç³»ç»Ÿé»˜è®¤æä¾›äº†ä¸€ä¸ªåŸºäºiptableä¹‹ä¸Šçš„é˜²ç«å¢™å·¥å…·ufwã€‚è€ŒUFWæ”¯æŒå›¾å½¢ç•Œé¢æ“ä½œï¼Œåªéœ€åœ¨å‘½ä»¤è¡Œè¿è¡Œufwå‘½ä»¤å³èƒ½çœ‹åˆ°ä¸€ç³»åˆ—çš„æ“ä½œã€‚æ¥ä¸‹æ¥ï¼Œå°±ç”±ä¸“ä¸šè¿è¥é¦™æ¸¯æœåŠ¡å™¨ã€ç¾å›½æœåŠ¡å™¨ã€éŸ©å›½æœåŠ¡å™¨ç­‰å›½å¤–æœåŠ¡å™¨çš„å¤©ä¸‹æ•°æ®ä¸ºå¤§å®¶ä»‹ç»ubuntuç³»ç»Ÿé˜²ç«å¢™çš„å¼€å¯ã€å…³é—­ç­‰å¸¸è§„æ“ä½œå‘½ä»¤ã€‚</p>
<p>ubuntu ç³»ç»Ÿé»˜è®¤å·²å®‰è£…ufw.</p>
<p><strong>1.å®‰è£…</strong></p>
<p>sudo apt-get install ufw</p>
<p><strong>2.å¯ç”¨</strong></p>
<p>sudo ufw enable</p>
<p>sudo ufw default deny</p>
<p>è¿è¡Œä»¥ä¸Šä¸¤æ¡å‘½ä»¤åï¼Œå¼€å¯äº†é˜²ç«å¢™ï¼Œå¹¶åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨å¼€å¯ã€‚å…³é—­æ‰€æœ‰å¤–éƒ¨å¯¹æœ¬æœºçš„è®¿é—®ï¼Œä½†æœ¬æœºè®¿é—®å¤–éƒ¨æ­£å¸¸ã€‚</p>
<p><strong>3.å¼€å¯/ç¦ç”¨ç«¯å£</strong></p>
<p>sudo ufw allow|deny ï¼»serviceï¼½</p>
<p>æ‰“å¼€æˆ–å…³é—­æŸä¸ªç«¯å£ï¼Œä¾‹å¦‚ï¼š sudo ufw allow
smtpã€€å…è®¸æ‰€æœ‰çš„å¤–éƒ¨IPè®¿é—®æœ¬æœºçš„25/tcp ï¼ˆsmtpï¼‰ç«¯å£</p>
<p>sudo ufw allow 22/tcp å…è®¸æ‰€æœ‰çš„å¤–éƒ¨IPè®¿é—®æœ¬æœºçš„22/tcp
ï¼ˆsshï¼‰ç«¯å£</p>
<p>sudo ufw allow 53 å…è®¸å¤–éƒ¨è®¿é—®53ç«¯å£ï¼ˆtcp/udpï¼‰</p>
<p>sudo ufw allow from 192.168.1.100 å…è®¸æ­¤IPè®¿é—®æ‰€æœ‰çš„æœ¬æœºç«¯å£</p>
<p>sudo ufw allow proto udp 192.168.0.1 port 53 to 192.168.0.2 port
53</p>
<p>sudo ufw deny smtp ç¦æ­¢å¤–éƒ¨è®¿é—®smtpæœåŠ¡</p>
<p>sudo ufw delete allow smtp åˆ é™¤ä¸Šé¢å»ºç«‹çš„æŸæ¡è§„åˆ™</p>
<p><strong>4.æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</strong></p>
<p>sudo ufw status</p>
<p><strong>å¼€å¯/å…³é—­é˜²ç«å¢™ ï¼ˆé»˜è®¤è®¾ç½®æ˜¯â€™disableâ€™ï¼‰</strong></p>
<p>sudo ufw enable|disable</p>
<p>**è½¬æ¢æ—¥å¿—çŠ¶æ€*</p>
<p>sudo ufw logging on|off</p>
<p>è®¾ç½®é»˜è®¤ç­–ç•¥ ï¼ˆæ¯”å¦‚ â€œmostly openâ€ vs â€œmostly closedâ€ï¼‰</p>
<p>sudo ufw default allow|deny</p>
<p>è®¸å¯æˆ–è€…å±è”½ç«¯å£ ï¼ˆå¯ä»¥åœ¨â€œstatusâ€
ä¸­æŸ¥çœ‹åˆ°æœåŠ¡åˆ—è¡¨ï¼‰ã€‚å¯ä»¥ç”¨â€œåè®®ï¼šç«¯å£â€çš„æ–¹å¼æŒ‡å®šä¸€ä¸ªå­˜åœ¨äº/etc/servicesä¸­çš„æœåŠ¡åç§°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åŒ…çš„meta-dataã€‚
â€˜allowâ€™ å‚æ•°å°†æŠŠæ¡ç›®åŠ å…¥ /etc/ufw/maps ï¼Œè€Œ â€˜denyâ€™
åˆ™ç›¸åã€‚åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p>
<p>sudo ufw allow|deny ï¼»serviceï¼½</p>
<p>æ˜¾ç¤ºé˜²ç«å¢™å’Œç«¯å£çš„ä¾¦å¬çŠ¶æ€ï¼Œå‚è§
/var/lib/ufw/mapsã€‚æ‹¬å·ä¸­çš„æ•°å­—å°†ä¸ä¼šè¢«æ˜¾ç¤ºå‡ºæ¥ã€‚</p>
<p>sudo ufw status</p>
<p><strong>UFW ä½¿ç”¨èŒƒä¾‹ï¼š</strong></p>
<p>å…è®¸ 53 ç«¯å£</p>
<p>$ sudo ufw allow 53</p>
<p>ç¦ç”¨ 53 ç«¯å£</p>
<p>$ sudo ufw delete allow 53</p>
<p>å…è®¸ 80 ç«¯å£</p>
<p>$ sudo ufw allow 80/tcp</p>
<p>ç¦ç”¨ 80 ç«¯å£</p>
<p>$ sudo ufw delete allow 80/tcp</p>
<p>å…è®¸ smtp ç«¯å£</p>
<p>$ sudo ufw allow smtp</p>
<p>åˆ é™¤ smtp ç«¯å£çš„è®¸å¯</p>
<p>$ sudo ufw delete allow smtp</p>
<p>å…è®¸æŸç‰¹å®š IP</p>
<p>$ sudo ufw allow from 192.168.254.254</p>
<p>åˆ é™¤ä¸Šé¢çš„è§„åˆ™</p>
<p>$ sudo ufw delete allow from 192.168.254.254</p>
<p>Linux
2.4å†…æ ¸ä»¥åæä¾›äº†ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„é˜²ç«å¢™å·¥å…·ï¼šnetfilter/iptablesï¼Œä»–å…è´¹ä¸”åŠŸèƒ½å¼ºå¤§ï¼Œå¯ä»¥å¯¹æµå…¥ã€æµå‡ºçš„ä¿¡æ¯è¿›è¡Œç»†åŒ–æ§åˆ¶ï¼Œå®ƒå¯ä»¥
å®ç°é˜²ç«å¢™ã€NATï¼ˆç½‘ç»œåœ°å€ç¿»è¯‘ï¼‰å’Œæ•°æ®åŒ…çš„åˆ†å‰²ç­‰åŠŸèƒ½ã€‚netfilterå·¥ä½œåœ¨å†…æ ¸å†…éƒ¨ï¼Œè€Œiptablesåˆ™æ˜¯è®©ç”¨æˆ·å®šä¹‰è§„åˆ™é›†çš„è¡¨ç»“æ„ã€‚</p>
<p>ä½†æ˜¯iptablesçš„è§„åˆ™ç¨å¾®æœ‰äº›â€œå¤æ‚â€ï¼Œå› æ­¤ubuntuæä¾›äº†ufwè¿™ä¸ªè®¾å®šå·¥å…·ï¼Œä»¥ç®€åŒ–iptablesçš„æŸäº›è®¾å®šï¼Œå…¶åå°ä»ç„¶æ˜¯
iptablesã€‚ufw å³uncomplicated
firewallçš„ç®€ç§°ï¼Œä¸€äº›å¤æ‚çš„è®¾å®šè¿˜æ˜¯è¦å»iptablesã€‚</p>
<p><strong>ufwç›¸å…³çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹æœ‰ï¼š</strong></p>
<p>/etc /ufw/ï¼šé‡Œé¢æ˜¯ä¸€äº›ufwçš„ç¯å¢ƒè®¾å®šæ–‡ä»¶ï¼Œå¦‚
before.rulesã€after.rulesã€sysctl.confã€ufw.confï¼ŒåŠ for ip6 çš„
before6.rule åŠ after6.rulesã€‚è¿™äº›æ–‡ä»¶ä¸€èˆ¬æŒ‰ç…§é»˜è®¤çš„è®¾ç½®è¿›è¡Œå°±okã€‚</p>
<p>è‹¥å¼€å¯ufwä¹‹åï¼Œ/etc/ufw/sysctl.confä¼šè¦†ç›–é»˜è®¤çš„/etc/sysctl.confæ–‡ä»¶ï¼Œè‹¥ä½ åŸæ¥çš„/etc/sysctl.confåšäº†ä¿®
æ”¹ï¼Œå¯åŠ¨ufwåï¼Œè‹¥/etc/ufw/sysctl.confä¸­æœ‰æ–°èµ‹å€¼ï¼Œåˆ™ä¼šè¦†ç›–/etc/sysctl.confçš„ï¼Œå¦åˆ™è¿˜ä»¥/etc
/sysctl.confä¸ºå‡†ã€‚å½“ç„¶ä½ å¯ä»¥é€šè¿‡ä¿®æ”¹/etc/default/ufwä¸­çš„â€œIPT_SYSCTL=â€æ¡ç›®æ¥è®¾ç½®ä½¿ç”¨å“ªä¸ª
sysctrl.conf.</p>
<p>/var/lib/ufw/user.rules
è¿™ä¸ªæ–‡ä»¶ä¸­æ˜¯æˆ‘ä»¬è®¾ç½®çš„ä¸€äº›é˜²ç«å¢™è§„åˆ™ï¼Œæ‰“å¼€å¤§æ¦‚å°±èƒ½çœ‹æ˜ç™½ï¼Œæœ‰æ—¶æˆ‘ä»¬å¯ä»¥ç›´æ¥ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ï¼Œä¸ç”¨ä½¿ç”¨å‘½ä»¤æ¥è®¾å®šã€‚ä¿®æ”¹åè®°å¾—ufw
reloadé‡å¯ufwä½¿å¾—æ–°è§„åˆ™ç”Ÿæ•ˆã€‚</p>
<p><strong>ä¸‹é¢æ˜¯ufwå‘½ä»¤è¡Œçš„ä¸€äº›ç¤ºä¾‹ï¼š</strong></p>
<p>ufw enable/disableï¼šæ‰“å¼€/å…³é—­ufw</p>
<p>ufw statusï¼šæŸ¥çœ‹å·²ç»å®šä¹‰çš„ufwè§„åˆ™</p>
<p>ufw default allow/denyï¼šå¤–æ¥è®¿é—®é»˜è®¤å…è®¸/æ‹’ç»</p>
<p>ufw allow/deny 20ï¼šå…è®¸/æ‹’ç»
è®¿é—®20ç«¯å£ï¼Œ20åå¯è·Ÿ/tcpæˆ–/udpï¼Œè¡¨ç¤ºtcpæˆ–udpå°åŒ…ã€‚</p>
<p>ufw allow/deny
servicename:ufwä»/etc/servicesä¸­æ‰¾åˆ°å¯¹åº”serviceçš„ç«¯å£ï¼Œè¿›è¡Œè¿‡æ»¤ã€‚</p>
<p>ufw allow proto tcp from 10.0.1.0/10 to æœ¬æœºip port
25ï¼šå…è®¸è‡ª10.0.1.0/10çš„tcpå°åŒ…è®¿é—®æœ¬æœºçš„25ç«¯å£ã€‚</p>
<p>ufw delete allow/deny
20ï¼šåˆ é™¤ä»¥å‰å®šä¹‰çš„â€œå…è®¸/æ‹’ç»è®¿é—®20ç«¯å£â€çš„è§„åˆ™</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>æœåŠ¡å™¨é…ç½®</category>
      </categories>
      <tags>
        <tag>æœåŠ¡å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title>è¾¾æ¢¦æ•°æ®åº“æ’å…¥æˆ–æ›´æ–°</title>
    <url>/%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%92%E5%85%A5%E6%88%96%E6%9B%B4%E6%96%B0/</url>
    <content><![CDATA[<p>è®°å½•ä¸‹åœ¨å›½äº§è¾¾æ¢¦æ•°æ®åº“ä¸­ä½¿ç”¨merge intoæ¥è¿›è¡Œæ•°æ®çš„æ›´æ–°æˆ–æ–°å¢</p>
<a id="more"></a>
<blockquote>
<p>ä½¿ç”¨è¾¾æ¢¦æ˜¯å› ä¸ºæœ‰å›½äº§åŒ–éœ€æ±‚ï¼Œå› ä¸ºæˆ‘è¿™é‡Œè¿˜ä¸æ˜¯é‚£ç§æ€§èƒ½æ•æ„Ÿçš„å¼€å‘ï¼Œæ‰€ä»¥å¯¹æˆ‘æ¥è¯´é™¤äº†åœ¨å®‰è£…ä¸Šç¨å¾®éº»çƒ¦ä¸€ç‚¹å¤–ï¼Œä½¿ç”¨èµ·æ¥å’Œmysqlæ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«ï¼Œè¿™é‡Œä½¿ç”¨è¾¾æ¢¦è‡ªå·±çš„dmPythonåº“æ¥è¿›è¡Œæ•°æ®åº“æ“ä½œ</p>
</blockquote>
<h3 id="replace-into">replace into</h3>
<blockquote>
<p>è¿™éƒ¨åˆ†ä¸»è¦å‚è€ƒä»¥ä¸‹è¯¥ç¯‡<a
href="https://blog.csdn.net/liu379702831/article/details/105819304/">åšå®¢</a></p>
</blockquote>
<p>é¦–å…ˆè¯´ä¸€ä¸‹æ¯”è¾ƒå¸¸è§çš„replace intoæ“ä½œï¼Œåœ¨mysqlä¸­ç»å¸¸ä¼šç”¨åˆ°replace
intoæ“ä½œã€‚</p>
<p>replace into é¦–å…ˆå°è¯•æ’å…¥æ•°æ®åˆ°è¡¨ä¸­ï¼š</p>
<ol type="1">
<li>å¦‚æœå‘ç°è¡¨ä¸­å·²ç»æœ‰æ­¤è¡Œæ•°æ®ï¼ˆæ ¹æ®ä¸»é”®æˆ–è€…å”¯ä¸€ç´¢å¼•åˆ¤æ–­ï¼‰åˆ™å…ˆåˆ é™¤æ­¤è¡Œæ•°æ®ï¼Œç„¶åæ’å…¥æ–°çš„æ•°æ®ã€‚</li>
<li>å¦åˆ™ï¼Œç›´æ¥æ’å…¥æ–°æ•°æ®</li>
</ol>
<p>ç”¨æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">replace into tbl_name(col_name, â€¦) values(â€¦)</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>æ’å…¥æ•°æ®çš„è¡¨å¿…é¡»æœ‰ä¸»é”®æˆ–è€…æ˜¯å”¯ä¸€ç´¢å¼•ï¼å¦åˆ™çš„è¯ï¼Œreplace into
ä¼šç›´æ¥æ’å…¥æ•°æ®ï¼Œè¿™å°†å¯¼è‡´è¡¨ä¸­å‡ºç°é‡å¤çš„æ•°æ®ã€‚</li>
<li>å¦‚æœæ•°æ®åº“é‡Œè¾¹æœ‰è¿™æ¡è®°å½•ï¼Œåˆ™ç›´æ¥ä¿®æ”¹è¿™æ¡è®°å½•ï¼›å¦‚æœæ²¡æœ‰åˆ™ï¼Œåˆ™ç›´æ¥æ’å…¥ï¼Œåœ¨æœ‰å¤–é”®çš„æƒ…å†µä¸‹ï¼Œå¯¹ä¸»è¡¨è¿›è¡Œè¿™æ ·æ“ä½œæ—¶ï¼Œå› ä¸ºå¦‚æœä¸»è¡¨å­˜åœ¨ä¸€æ¡è®°å½•ï¼Œè¢«ä»è¡¨æ‰€ç”¨æ—¶ï¼Œç›´æ¥ä½¿ç”¨replace
intoæ˜¯ä¼šæŠ¥é”™çš„ï¼Œè¿™å’Œreplace
intoçš„å†…éƒ¨åŸç†æ˜¯ç›¸å…³ï¼ˆå…ˆåˆ é™¤ç„¶åå†æ’å…¥ï¼‰ã€‚</li>
<li>è¡¨ä¸­æœ‰ä¸€ä¸ªè‡ªå¢çš„ä¸»é”®,ä¼šå¸¦æ¥çš„é—®é¢˜ï¼š
<ul>
<li>replaceæ“ä½œåœ¨è‡ªå¢ä¸»é”®çš„æƒ…å†µä¸‹ï¼Œé‡åˆ°å”¯ä¸€é”®å†²çªæ—¶æ‰§è¡Œçš„æ˜¯delete+insertï¼Œä½†æ˜¯åœ¨è®°å½•binlogæ—¶ï¼Œå´è®°å½•æˆäº†updateæ“ä½œï¼Œupdateæ“ä½œä¸ä¼šæ¶‰åŠåˆ°auto_incrementçš„ä¿®æ”¹ã€‚å¤‡åº“åº”ç”¨äº†binlogä¹‹åï¼Œå¤‡åº“çš„è¡¨çš„auto_incrementå±æ€§ä¸å˜ã€‚å¦‚æœä¸»å¤‡åº“å‘ç”Ÿä¸»ä»åˆ‡æ¢ï¼Œå¤‡åº“å˜ä¸ºåŸæ¥çš„ä¸»åº“ï¼Œå†™æ–°çš„ä¸»åº“åˆ™æœ‰é£é™©å‘ç”Ÿä¸»é”®å†²çªã€‚</li>
<li>é¢‘ç¹çš„REPLACE INTO
ä¼šé€ æˆæ–°çºªå½•çš„ä¸»é”®çš„å€¼è¿…é€Ÿå¢å¤§ã€‚æ€»æœ‰ä¸€å¤©ã€‚è¾¾åˆ°æœ€å¤§å€¼åå°±ä¼šå› ä¸ºæ•°æ®å¤ªå¤§æº¢å‡ºäº†ã€‚å°±æ²¡æ³•å†æ’å…¥æ–°çºªå½•äº†ã€‚æ•°æ®è¡¨æ»¡äº†ï¼Œä¸æ˜¯å› ä¸ºç©ºé—´ä¸å¤Ÿäº†ï¼Œè€Œæ˜¯å› ä¸ºä¸»é”®çš„å€¼æ²¡æ³•å†å¢åŠ äº†ã€‚</li>
</ul></li>
</ul>
<h3 id="merge-into">merge into</h3>
<blockquote>
<p>è¾¾æ¢¦æ•°æ®åº“ä¸æ˜¯æ¯ä¸ªç‰ˆæœ¬éƒ½æ”¯æŒreplace intoå‘½ä»¤çš„ï¼Œè€Œä¸”replace
intoå‘½ä»¤åŠŸèƒ½æ¯”è¾ƒå›ºå®šï¼Œè€Œä¸”åœ¨å­˜åœ¨è‡ªå¢ä¸»é”®æ—¶è¿˜ä¼šæœ‰ä¸€äº›é™åˆ¶ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨merge
intoå‘½ä»¤æ¥å®Œæˆè¾¾æ¢¦æ•°æ®åº“çš„æ’å…¥æˆ–æ›´æ–°</p>
</blockquote>
<p>merge
intoæ˜¯Oracleçš„æŒ‡ä»¤ï¼Œè¾¾æ¢¦å¯¹Oracleçš„å…¼å®¹æ€§è¿˜æ¯”è¾ƒå¥½ï¼Œè€Œä¸”å¼€å‘æ–‡æ¡£é‡Œè¯´æ˜äº†æ”¯æŒmerge
intoæŒ‡ä»¤ã€‚</p>
<p>ç”¨æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># æ–°å¢æˆ–æ›´æ–°åŸºçº¿</span><br><span class="line">db &#x3D; dmPython.connect(user&#x3D;dm_user, password&#x3D;dm_pwds, server&#x3D;dm_host, port&#x3D;dm_port,</span><br><span class="line">                      cursorclass&#x3D;dmPython.DictCursor)</span><br><span class="line">cursor &#x3D; db.cursor()</span><br><span class="line"></span><br><span class="line">sql &#x3D; &quot;merge into %s.%s &quot; \</span><br><span class="line">      &quot;using (select ? sIP,? updatetime from dual) t &quot; \</span><br><span class="line">      &quot;on(%s.%s.sIP &#x3D; t.sIP) &quot; \</span><br><span class="line">      &quot;when matched then &quot; \</span><br><span class="line">      &quot;update set updatetime&#x3D;t.updatetime &quot; \</span><br><span class="line">      &quot;when not matched then &quot; \</span><br><span class="line">      &quot;insert (sIP, updatetime) values (t.sIP,t.updatetime)&quot; \</span><br><span class="line">      % (dm_db, baseline_table, dm_db, baseline_table)</span><br><span class="line">try:</span><br><span class="line">    cursor.executemany(sql, baseline_list_tuple)</span><br><span class="line">    db.commit()</span><br><span class="line">    print(&quot;æ›´æ–°æˆåŠŸ&quot;)</span><br><span class="line">except Exception as e:</span><br><span class="line">    print(e)</span><br><span class="line">    db.rollback()</span><br><span class="line">finally:</span><br><span class="line">    cursor.close()</span><br><span class="line">    db.close()</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>æˆ‘çœ‹åˆ°çš„èµ„æ–™ä¸Šé¢è¯´onåé¢è¦è·Ÿä¸»é”®ä¿¡æ¯ï¼Œä½†æ˜¯æˆ‘è¿™é‡Œä½¿ç”¨çš„ä¸æ˜¯ä¸»é”®ï¼Œä½†æ˜¯èƒ½æ­£å¸¸ä½¿ç”¨</li>
<li>merge
intoæ˜¯é€šè¿‡æ‰§â¾usingåæ‹¬å·å†…çš„sqlè¯­å¥ç»“æœé€æ¡ä¸onæ‹¬å·å†…æ¡ä»¶è¿›â¾åŒ¹é…ï¼Œè‹¥åŒ¹é…åˆ™æ‰§â¾æ›´æ–°ï¼Œè‹¥ä¸åŒ¹é…åˆ™æ‰§â¾æ’â¼Š</li>
<li>when matched thenè¯­å¥éœ€åœ¨when not matched then
ä¹‹å‰ï¼Œå¦åˆ™è¾¾æ¢¦æ•°æ®åº“ä¼šæŠ¥é”™</li>
<li>å…³äºdualè¡¨ï¼Œæˆ‘ä¸ªâ¼ˆç†è§£ä¸ºç±»ä¼¼äºâ€œç¼“å­˜å™¨â€çš„è¡¨ï¼Œä½ å¯ä»¥å‘å®ƒâ¾¥â¾¯æ’â¼Šå¤šæ¡æ•°æ®ï¼Œåˆ é™¤å¤šæ¡æ•°æ®ï¼Œä½†ä½ æŸ¥è¯¢æ—¶ï¼Œè¡¨ä¸­å‡åªæ˜¾â½°â¼€ä¸ªå­—æ®µï¼Œâ¼€â¾æ•°æ®ã€‚</li>
<li>åœ¨ä½¿ç”¨merge
intoè¯­å¥çš„æ—¶å€™æˆ‘é‡åˆ°äº†ä¸€ä¸ªå…³äºå­—ç¬¦å‹æ•°æ®çš„é—®é¢˜ï¼Œåœ¨è¾¾æ¢¦æ•°æ®åº“ç®¡ç†è½¯ä»¶ä¸­åªèƒ½ä½¿ç”¨<strong>å•å¼•å·</strong>æ¥æ¡†ä½å­—ç¬¦ä¸²ï¼Œç”¨<strong>åŒå¼•å·</strong>åˆ™ä¼šæŠ¥é”™ï¼Œè¿™å…¶å®ä¸æ˜¯merge
intoè¯­å¥çš„é—®é¢˜ï¼Œè€Œæ˜¯è¾¾æ¢¦sqlè¯­å¥çš„é—®é¢˜ï¼Œå¾ˆä¹…æ²¡ç”¨å…¶ä»–æ•°æ®åº“äº†ï¼Œä¸çŸ¥é“è¿™æ˜¯æ•°æ®åº“çš„é€šç”¨è§„åˆ™ï¼Œè¿˜æ˜¯è¾¾æ¢¦çš„ç‰¹æ®Šè§„åˆ™ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>è¾¾æ¢¦</category>
      </categories>
      <tags>
        <tag>è¾¾æ¢¦</tag>
      </tags>
  </entry>
</search>
